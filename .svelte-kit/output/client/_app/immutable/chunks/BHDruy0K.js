import{s as Le,n as Ie,d as p,i as B,m as Me,I as rn,q as hn,P as ul,a as Ce,c as m,b as k,e as z,f as D,g as ye,l as J,a4 as aa,h as N,t as ke,o as Q,a5 as ca,N as at,x as De,y as Pe,z as Ke,T as Qe,j as se,p as Nt,C as xe,r as Jt,u as Qt,v as xt,w as $t,O as bn,D as be,E as ve,G as an,V as jn,J as xn,A as So,B as kn,at as nt,W as Ft,X as wt,Y as Tn,_ as gn,H as sn,a3 as he,a6 as jl,au as mo,ap as ua,a2 as go,ao as dt,a7 as Il,aq as oc,av as sc,as as rc,F as Ds,$ as Cs,M as so,Q as Ms,k as ic}from"./CgRTDwF2.js";import{S as Oe,i as He,a as T,g as Te,t as O,c as Ve,j as Ts,f as Ge,d as $,m as ee,b as ne,e as te,h as Uo}from"./Bnxgdxyh.js";import{g as fa}from"./D0QH3NT1.js";import{e as mt,u as Do,o as Co}from"./C3QokUWv.js";import{t as ht}from"./Fny8-CkQ.js";import{C as ac,D as cc,F as uc,a as da,b as fc,P as dc}from"./CxHzQXJg.js";import{g as Fo}from"./C_2ZPrHa.js";import{p as hc}from"./Bx1oYFf3.js";import{a as Vs,P as zs,b as mc}from"./CisIfe-u.js";import{t as fl,u as Yn,c as Mo,l as ha,p as ma,k as ga,m as ml,a as Un,d as rs,h as To,D as qt,J as Jn,C as Hn,W as pa,b as qn,s as xo,A as gc,f as Ns,T as pc,K as Dn,v as _c,w as _l,n as bc,E as ro,B as vc,x as bl,j as wc}from"./D-bUEbUi.js";import{v as Pn,a as yc,C as kc,D as Ec,E as Ic,F as Sc,G as Dc,H as Ul,I as Ps,t as Cc,b as _n,J as Mc,m as _a,n as Tc,h as po,K as Vc,L as zc,M as Nc,d as Pc}from"./B9ns8vb-.js";import{f as $o,C as Os,i as Bl,d as Oc,a as Hc,u as Hs}from"./ClYhvyZD.js";import{h as Ac}from"./CgEzuEYe.js";import{p as Lc,h as Bc}from"./DFN6HZ3H.js";import{h as Rc,i as As,j as Uc}from"./CDg80BRM.js";import{p as Fc,q as Wc,r as jc,s as Yc,t as Kc}from"./DJyIR_-r.js";import{g as is,j as Gc,k as Xc,l as Zc}from"./Due45wRy.js";import{f as Fl}from"./BREfJdbm.js";import{m as Sl,p as Ls}from"./DxEWDC6Z.js";import{r as qc,u as Bs}from"./BT9ZK6lC.js";import{u as Rs,b as Us}from"./pKnnkZ93.js";import"./DApxyaVS.js";import{D as Vo,M as dn}from"./JB_IP3HY.js";import{b as zo}from"./DIJQCY_I.js";import{f as Jl}from"./g5t9vw8M.js";import{T as Zt}from"./iHdIuxSF.js";import{S as Jc}from"./B_zD3mWe.js";import{W as Qc}from"./Bp5rwWfs.js";import{V as xc,R as $c}from"./C-n1_pw5.js";import{g as eu}from"./CWaNF0lq.js";import{g as tu}from"./DKoGGoz2.js";import{F as ba}from"./Ch1WBRTM.js";import{d as nu,r as lu}from"./AoanbIlI.js";import{S as No}from"./CnJpwmt-.js";import{F as as}from"./DEANO1CO.js";import{d as Cn,ba as va,bb as cs,bc as Wo,bd as jo,ah as ou,be as su,bf as ru,ag as wa,bg as iu}from"./7n9FY931.js";import{X as Po}from"./vwPzVEm7.js";import{G as au}from"./Db_xx9Pf.js";import{E as cu,M as uu}from"./qhzCeJvl.js";import{M as fu,a as du,b as hu,T as mu,S as gu,P as pu}from"./DZz7akTi.js";import{S as _u}from"./DwPLr_jZ.js";import{f as bu}from"./0n0hRmjK.js";import{a as vu}from"./CCZdU0IT.js";import{U as wu}from"./DfK3IYwM.js";import{M as yu}from"./CIHcEH59.js";import{M as ku}from"./DQPlRvwr.js";import{A as Eu}from"./wutPYhsz.js";import{g as Iu,j as Su,k as Du,l as Cu}from"./CFk3bLww.js";import{V as Mu,H as Tu}from"./BYy2eTgT.js";import{C as ho}from"./BMI0F1Kb.js";import{s as Vu,t as zu}from"./BGnDjxPL.js";import{D as Nu}from"./ACuLonZD.js";import{w as Je,a as Sn,d as yl}from"./-NlMIP-u.js";import{g as Qn,a as Yl}from"./CgU5AtxT.js";import{E as Pu}from"./BGXzTEIg.js";import{C as Ou}from"./CtUWi401.js";function Hu(l){let e;for(;e=l.sourceEvent;)l=e;return l}function On(l,e){if(l=Hu(l),e===void 0&&(e=l.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=l.clientX,n.y=l.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[l.clientX-o.left-e.clientLeft,l.clientY-o.top-e.clientTop]}}return[l.pageX,l.pageY]}const Au={passive:!1},Kl={capture:!0,passive:!1};function Yo(l){l.stopImmediatePropagation()}function kl(l){l.preventDefault(),l.stopImmediatePropagation()}function ya(l){var e=l.document.documentElement,t=Cn(l).on("dragstart.drag",kl,Kl);"onselectstart"in e?t.on("selectstart.drag",kl,Kl):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ka(l,e){var t=l.document.documentElement,n=Cn(l).on("dragstart.drag",null);e&&(n.on("click.drag",kl,Kl),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in t?n.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const io=l=>()=>l;function es(l,{sourceEvent:e,subject:t,target:n,identifier:o,active:s,x:r,y:i,dx:a,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}es.prototype.on=function(){var l=this._.on.apply(this._,arguments);return l===this._?this:l};function Lu(l){return!l.ctrlKey&&!l.button}function Bu(){return this.parentNode}function Ru(l,e){return e??{x:l.x,y:l.y}}function Uu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fu(){var l=Lu,e=Bu,t=Ru,n=Uu,o={},s=va("start","drag","end"),r=0,i,a,c,u,f=0;function d(E){E.on("mousedown.drag",h).filter(n).on("touchstart.drag",v).on("touchmove.drag",g,Au).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(E,M){if(!(u||!l.call(this,E,M))){var S=y(this,e.call(this,E,M),E,M,"mouse");S&&(Cn(E.view).on("mousemove.drag",_,Kl).on("mouseup.drag",b,Kl),ya(E.view),Yo(E),c=!1,i=E.clientX,a=E.clientY,S("start",E))}}function _(E){if(kl(E),!c){var M=E.clientX-i,S=E.clientY-a;c=M*M+S*S>f}o.mouse("drag",E)}function b(E){Cn(E.view).on("mousemove.drag mouseup.drag",null),ka(E.view,c),kl(E),o.mouse("end",E)}function v(E,M){if(l.call(this,E,M)){var S=E.changedTouches,V=e.call(this,E,M),A=S.length,H,L;for(H=0;H<A;++H)(L=y(this,V,E,M,S[H].identifier,S[H]))&&(Yo(E),L("start",E,S[H]))}}function g(E){var M=E.changedTouches,S=M.length,V,A;for(V=0;V<S;++V)(A=o[M[V].identifier])&&(kl(E),A("drag",E,M[V]))}function w(E){var M=E.changedTouches,S=M.length,V,A;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),V=0;V<S;++V)(A=o[M[V].identifier])&&(Yo(E),A("end",E,M[V]))}function y(E,M,S,V,A,H){var L=s.copy(),W=On(H||S,M),j,U,C;if((C=t.call(E,new es("beforestart",{sourceEvent:S,target:d,identifier:A,active:r,x:W[0],y:W[1],dx:0,dy:0,dispatch:L}),V))!=null)return j=C.x-W[0]||0,U=C.y-W[1]||0,function I(P,K,X){var F=W,Z;switch(P){case"start":o[A]=I,Z=r++;break;case"end":delete o[A],--r;case"drag":W=On(X||K,M),Z=r;break}L.call(P,E,new es(P,{sourceEvent:K,subject:C,target:d,identifier:A,active:Z,x:W[0]+j,y:W[1]+U,dx:W[0]-F[0],dy:W[1]-F[1],dispatch:L}),V)}}return d.filter=function(E){return arguments.length?(l=typeof E=="function"?E:io(!!E),d):l},d.container=function(E){return arguments.length?(e=typeof E=="function"?E:io(E),d):e},d.subject=function(E){return arguments.length?(t=typeof E=="function"?E:io(E),d):t},d.touchable=function(E){return arguments.length?(n=typeof E=="function"?E:io(!!E),d):n},d.on=function(){var E=s.on.apply(s,arguments);return E===s?d:E},d.clickDistance=function(E){return arguments.length?(f=(E=+E)*E,d):Math.sqrt(f)},d}var Wu=1e-12;function Fs(l){return((l=Math.exp(l))+1/l)/2}function ju(l){return((l=Math.exp(l))-1/l)/2}function Yu(l){return((l=Math.exp(2*l))-1)/(l+1)}const Ku=function l(e,t,n){function o(s,r){var i=s[0],a=s[1],c=s[2],u=r[0],f=r[1],d=r[2],h=u-i,_=f-a,b=h*h+_*_,v,g;if(b<Wu)g=Math.log(d/c)/e,v=function(V){return[i+V*h,a+V*_,c*Math.exp(e*V*g)]};else{var w=Math.sqrt(b),y=(d*d-c*c+n*b)/(2*c*t*w),E=(d*d-c*c-n*b)/(2*d*t*w),M=Math.log(Math.sqrt(y*y+1)-y),S=Math.log(Math.sqrt(E*E+1)-E);g=(S-M)/e,v=function(V){var A=V*g,H=Fs(M),L=c/(t*w)*(H*Yu(e*A+M)-ju(M));return[i+L*h,a+L*_,c*H/Fs(e*A+M)]}}return v.duration=g*1e3*e/Math.SQRT2,v}return o.rho=function(s){var r=Math.max(.001,+s),i=r*r,a=i*i;return l(r,i,a)},o}(Math.SQRT2,2,4),ao=l=>()=>l;function Gu(l,{sourceEvent:e,target:t,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function Ko(l){l.stopImmediatePropagation()}function Rl(l){l.preventDefault(),l.stopImmediatePropagation()}function Xu(l){return(!l.ctrlKey||l.type==="wheel")&&!l.button}function Zu(){var l=this;return l instanceof SVGElement?(l=l.ownerSVGElement||l,l.hasAttribute("viewBox")?(l=l.viewBox.baseVal,[[l.x,l.y],[l.x+l.width,l.y+l.height]]):[[0,0],[l.width.baseVal.value,l.height.baseVal.value]]):[[0,0],[l.clientWidth,l.clientHeight]]}function Ws(){return this.__zoom||cs}function qu(l){return-l.deltaY*(l.deltaMode===1?.05:l.deltaMode?1:.002)*(l.ctrlKey?10:1)}function Ju(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qu(l,e,t){var n=l.invertX(e[0][0])-t[0][0],o=l.invertX(e[1][0])-t[1][0],s=l.invertY(e[0][1])-t[0][1],r=l.invertY(e[1][1])-t[1][1];return l.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}function xu(){var l=Xu,e=Zu,t=Qu,n=qu,o=Ju,s=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],i=250,a=Ku,c=va("start","zoom","end"),u,f,d,h=500,_=150,b=0,v=10;function g(C){C.property("__zoom",Ws).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",L).filter(o).on("touchstart.zoom",W).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(C,I,P,K){var X=C.selection?C.selection():C;X.property("__zoom",Ws),C!==X?M(C,I,P,K):X.interrupt().each(function(){S(this,arguments).event(K).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},g.scaleBy=function(C,I,P,K){g.scaleTo(C,function(){var X=this.__zoom.k,F=typeof I=="function"?I.apply(this,arguments):I;return X*F},P,K)},g.scaleTo=function(C,I,P,K){g.transform(C,function(){var X=e.apply(this,arguments),F=this.__zoom,Z=P==null?E(X):typeof P=="function"?P.apply(this,arguments):P,ae=F.invert(Z),x=typeof I=="function"?I.apply(this,arguments):I;return t(y(w(F,x),Z,ae),X,r)},P,K)},g.translateBy=function(C,I,P,K){g.transform(C,function(){return t(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),r)},null,K)},g.translateTo=function(C,I,P,K,X){g.transform(C,function(){var F=e.apply(this,arguments),Z=this.__zoom,ae=K==null?E(F):typeof K=="function"?K.apply(this,arguments):K;return t(cs.translate(ae[0],ae[1]).scale(Z.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof P=="function"?-P.apply(this,arguments):-P),F,r)},K,X)};function w(C,I){return I=Math.max(s[0],Math.min(s[1],I)),I===C.k?C:new Wo(I,C.x,C.y)}function y(C,I,P){var K=I[0]-P[0]*C.k,X=I[1]-P[1]*C.k;return K===C.x&&X===C.y?C:new Wo(C.k,K,X)}function E(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function M(C,I,P,K){C.on("start.zoom",function(){S(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(K).end()}).tween("zoom",function(){var X=this,F=arguments,Z=S(X,F).event(K),ae=e.apply(X,F),x=P==null?E(ae):typeof P=="function"?P.apply(X,F):P,G=Math.max(ae[1][0]-ae[0][0],ae[1][1]-ae[0][1]),oe=X.__zoom,de=typeof I=="function"?I.apply(X,F):I,Se=a(oe.invert(x).concat(G/oe.k),de.invert(x).concat(G/de.k));return function(ie){if(ie===1)ie=de;else{var ze=Se(ie),me=G/ze[2];ie=new Wo(me,x[0]-ze[0]*me,x[1]-ze[1]*me)}Z.zoom(null,ie)}})}function S(C,I,P){return!P&&C.__zooming||new V(C,I)}function V(C,I){this.that=C,this.args=I,this.active=0,this.sourceEvent=null,this.extent=e.apply(C,I),this.taps=0}V.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,I){return this.mouse&&C!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var I=Cn(this.that).datum();c.call(C,this.that,new Gu(C,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:c}),I)}};function A(C,...I){if(!l.apply(this,arguments))return;var P=S(this,I).event(C),K=this.__zoom,X=Math.max(s[0],Math.min(s[1],K.k*Math.pow(2,n.apply(this,arguments)))),F=On(C);if(P.wheel)(P.mouse[0][0]!==F[0]||P.mouse[0][1]!==F[1])&&(P.mouse[1]=K.invert(P.mouse[0]=F)),clearTimeout(P.wheel);else{if(K.k===X)return;P.mouse=[F,K.invert(F)],jo(this),P.start()}Rl(C),P.wheel=setTimeout(Z,_),P.zoom("mouse",t(y(w(K,X),P.mouse[0],P.mouse[1]),P.extent,r));function Z(){P.wheel=null,P.end()}}function H(C,...I){if(d||!l.apply(this,arguments))return;var P=C.currentTarget,K=S(this,I,!0).event(C),X=Cn(C.view).on("mousemove.zoom",x,!0).on("mouseup.zoom",G,!0),F=On(C,P),Z=C.clientX,ae=C.clientY;ya(C.view),Ko(C),K.mouse=[F,this.__zoom.invert(F)],jo(this),K.start();function x(oe){if(Rl(oe),!K.moved){var de=oe.clientX-Z,Se=oe.clientY-ae;K.moved=de*de+Se*Se>b}K.event(oe).zoom("mouse",t(y(K.that.__zoom,K.mouse[0]=On(oe,P),K.mouse[1]),K.extent,r))}function G(oe){X.on("mousemove.zoom mouseup.zoom",null),ka(oe.view,K.moved),Rl(oe),K.event(oe).end()}}function L(C,...I){if(l.apply(this,arguments)){var P=this.__zoom,K=On(C.changedTouches?C.changedTouches[0]:C,this),X=P.invert(K),F=P.k*(C.shiftKey?.5:2),Z=t(y(w(P,F),K,X),e.apply(this,I),r);Rl(C),i>0?Cn(this).transition().duration(i).call(M,Z,K,C):Cn(this).call(g.transform,Z,K,C)}}function W(C,...I){if(l.apply(this,arguments)){var P=C.touches,K=P.length,X=S(this,I,C.changedTouches.length===K).event(C),F,Z,ae,x;for(Ko(C),Z=0;Z<K;++Z)ae=P[Z],x=On(ae,this),x=[x,this.__zoom.invert(x),ae.identifier],X.touch0?!X.touch1&&X.touch0[2]!==x[2]&&(X.touch1=x,X.taps=0):(X.touch0=x,F=!0,X.taps=1+!!u);u&&(u=clearTimeout(u)),F&&(X.taps<2&&(f=x[0],u=setTimeout(function(){u=null},h)),jo(this),X.start())}}function j(C,...I){if(this.__zooming){var P=S(this,I).event(C),K=C.changedTouches,X=K.length,F,Z,ae,x;for(Rl(C),F=0;F<X;++F)Z=K[F],ae=On(Z,this),P.touch0&&P.touch0[2]===Z.identifier?P.touch0[0]=ae:P.touch1&&P.touch1[2]===Z.identifier&&(P.touch1[0]=ae);if(Z=P.that.__zoom,P.touch1){var G=P.touch0[0],oe=P.touch0[1],de=P.touch1[0],Se=P.touch1[1],ie=(ie=de[0]-G[0])*ie+(ie=de[1]-G[1])*ie,ze=(ze=Se[0]-oe[0])*ze+(ze=Se[1]-oe[1])*ze;Z=w(Z,Math.sqrt(ie/ze)),ae=[(G[0]+de[0])/2,(G[1]+de[1])/2],x=[(oe[0]+Se[0])/2,(oe[1]+Se[1])/2]}else if(P.touch0)ae=P.touch0[0],x=P.touch0[1];else return;P.zoom("touch",t(y(Z,ae,x),P.extent,r))}}function U(C,...I){if(this.__zooming){var P=S(this,I).event(C),K=C.changedTouches,X=K.length,F,Z;for(Ko(C),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),F=0;F<X;++F)Z=K[F],P.touch0&&P.touch0[2]===Z.identifier?delete P.touch0:P.touch1&&P.touch1[2]===Z.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(Z=On(Z,this),Math.hypot(f[0]-Z[0],f[1]-Z[1])<v)){var ae=Cn(this).on("dblclick.zoom");ae&&ae.apply(this,arguments)}}}return g.wheelDelta=function(C){return arguments.length?(n=typeof C=="function"?C:ao(+C),g):n},g.filter=function(C){return arguments.length?(l=typeof C=="function"?C:ao(!!C),g):l},g.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:ao(!!C),g):o},g.extent=function(C){return arguments.length?(e=typeof C=="function"?C:ao([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),g):e},g.scaleExtent=function(C){return arguments.length?(s[0]=+C[0],s[1]=+C[1],g):[s[0],s[1]]},g.translateExtent=function(C){return arguments.length?(r[0][0]=+C[0][0],r[1][0]=+C[1][0],r[0][1]=+C[0][1],r[1][1]=+C[1][1],g):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},g.constrain=function(C){return arguments.length?(t=C,g):t},g.duration=function(C){return arguments.length?(i=+C,g):i},g.interpolate=function(C){return arguments.length?(a=C,g):a},g.on=function(){var C=c.on.apply(c,arguments);return C===c?g:C},g.clickDistance=function(C){return arguments.length?(b=(C=+C)*C,g):Math.sqrt(b)},g.tapDistance=function(C){return arguments.length?(v=+C,g):v},g}function $u(l){let e,t,n,o,s,r,i;return a(),{feed:c,reset:a};function a(){e=!0,t="",n=0,o=-1,s=void 0,r=void 0,i=""}function c(f){t=t?t+f:f,e&&ef(t)&&(t=t.slice(Ea.length)),e=!1;const d=t.length;let h=0,_=!1;for(;h<d;){_&&(t[h]===`
`&&++h,_=!1);let b=-1,v=o,g;for(let w=n;b<0&&w<d;++w)g=t[w],g===":"&&v<0?v=w-h:g==="\r"?(_=!0,b=w-h):g===`
`&&(b=w-h);if(b<0){n=d-h,o=v;break}else n=0,o=-1;u(t,h,v,b),h+=b+1}h===d?t="":h>0&&(t=t.slice(h))}function u(f,d,h,_){if(_===0){i.length>0&&(l({type:"event",id:s,event:r||void 0,data:i.slice(0,-1)}),i="",s=void 0),r=void 0;return}const b=h<0,v=f.slice(d,d+(b?_:h));let g=0;b?g=_:f[d+h+1]===" "?g=h+2:g=h+1;const w=d+g,y=_-g,E=f.slice(w,w+y).toString();if(v==="data")i+=E?"".concat(E,`
`):`
`;else if(v==="event")r=E;else if(v==="id"&&!E.includes("\0"))s=E;else if(v==="retry"){const M=parseInt(E,10);Number.isNaN(M)||l({type:"reconnect-interval",value:M})}}}const Ea=[239,187,191];function ef(l){return Ea.every((e,t)=>l.charCodeAt(t)===e)}class tf extends TransformStream{constructor(){let e;super({start(t){e=$u(n=>{n.type==="event"&&t.enqueue(n)})},transform(t){e.feed(t)}})}}async function nf(l,e){const t=l.pipeThrough(new TextDecoderStream).pipeThrough(new tf).getReader();let n=lf(t);return e&&(n=of(n)),n}async function*lf(l){var e,t,n;for(;;){const{value:o,done:s}=await l.read();if(s){yield{done:!0,value:""};break}if(!o)continue;const r=o.data;if(r.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const i=JSON.parse(r);if(console.log(i),i.error){yield{done:!0,value:"",error:i.error};break}if(i.sources){yield{done:!1,value:"",sources:i.sources};continue}if(i.selected_model_id){yield{done:!1,value:"",selectedModelId:i.selected_model_id};continue}if(i.usage){yield{done:!1,value:"",usage:i.usage};continue}yield{done:!1,value:((n=(t=(e=i.choices)==null?void 0:e[0])==null?void 0:t.delta)==null?void 0:n.content)??""}}catch(i){console.error("Error extracting delta from SSE event:",i)}}}async function*of(l){for await(const e of l){if(e.done){yield e;return}if(e.error){yield e;continue}if(e.sources){yield e;continue}if(e.selectedModelId){yield e;continue}if(e.usage){yield e;continue}let t=e.value;if(t.length<5){yield{done:!1,value:t};continue}for(;t!="";){const n=Math.min(Math.floor(Math.random()*3)+1,t.length);yield{done:!1,value:t.slice(0,n)},(document==null?void 0:document.visibilityState)!=="hidden"&&await sf(5),t=t.slice(n)}}}const sf=l=>new Promise(e=>setTimeout(e,l));function js(l){let e,t=l[2]&&Ys(l);return{c(){t&&t.c(),e=Me()},l(n){t&&t.l(n),e=Me()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,o){n[2]?t?(t.p(n,o),o&4&&T(t,1)):(t=Ys(n),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(Te(),O(t,1,1,()=>{t=null}),Ve())},d(n){n&&p(e),t&&t.d(n)}}}function Ys(l){let e,t,n,o,s=l[1].type+"",r,i,a,c,u,f,d=Sl.parse(Ls.sanitize(l[1].content))+"",h,_,b,v,g,w=l[1].url&&Ks(),y=l[1].url&&Gs(),E=l[1].dismissible&&Xs(l);return{c(){e=N("div"),t=N("div"),n=N("div"),o=N("div"),r=ke(s),a=Q(),w&&w.c(),c=Q(),u=N("div"),f=new ca(!1),h=Q(),y&&y.c(),_=Q(),b=N("div"),E&&E.c(),this.h()},l(M){e=z(M,"DIV",{class:!0});var S=D(e);t=z(S,"DIV",{class:!0});var V=D(t);n=z(V,"DIV",{class:!0});var A=D(n);o=z(A,"DIV",{class:!0});var H=D(o);r=ye(H,s),H.forEach(p),a=J(A),w&&w.l(A),A.forEach(p),c=J(V),u=z(V,"DIV",{class:!0});var L=D(u);f=aa(L,!1),L.forEach(p),V.forEach(p),h=J(S),y&&y.l(S),_=J(S),b=z(S,"DIV",{class:!0});var W=D(b);E&&E.l(W),W.forEach(p),S.forEach(p),this.h()},h(){m(o,"class",i="text-xs font-bold "+(l[3][l[1].type]??l[3].info)+" w-fit px-2 rounded-sm uppercase line-clamp-1 mr-0.5"),m(n,"class","flex justify-between self-start"),f.a=null,m(u,"class","flex-1 text-xs text-gray-700 dark:text-white"),m(t,"class","flex flex-col md:flex-row md:items-center flex-1 text-sm w-fit gap-1.5"),m(b,"class","flex self-start"),m(e,"class","top-0 left-0 right-0 p-2 mx-4 px-3 flex justify-center items-center relative rounded-xl border border-gray-100 dark:border-gray-850 text-gray-800 dark:text-gary-100 bg-white dark:bg-gray-900 backdrop-blur-xl z-30")},m(M,S){B(M,e,S),k(e,t),k(t,n),k(n,o),k(o,r),k(n,a),w&&w.m(n,null),k(t,c),k(t,u),f.m(d,u),k(e,h),y&&y.m(e,null),k(e,_),k(e,b),E&&E.m(b,null),g=!0},p(M,S){(!g||S&2)&&s!==(s=M[1].type+"")&&Ce(r,s),(!g||S&2&&i!==(i="text-xs font-bold "+(M[3][M[1].type]??M[3].info)+" w-fit px-2 rounded-sm uppercase line-clamp-1 mr-0.5"))&&m(o,"class",i),M[1].url?w||(w=Ks(),w.c(),w.m(n,null)):w&&(w.d(1),w=null),(!g||S&2)&&d!==(d=Sl.parse(Ls.sanitize(M[1].content))+"")&&f.p(d),M[1].url?y||(y=Gs(),y.c(),y.m(e,_)):y&&(y.d(1),y=null),M[1].dismissible?E?E.p(M,S):(E=Xs(M),E.c(),E.m(b,null)):E&&(E.d(1),E=null)},i(M){g||(M&&ul(()=>{g&&(v||(v=Ts(e,Fl,{delay:100,duration:300},!0)),v.run(1))}),g=!0)},o(M){M&&(v||(v=Ts(e,Fl,{delay:100,duration:300},!1)),v.run(0)),g=!1},d(M){M&&p(e),w&&w.d(),y&&y.d(),E&&E.d(),M&&v&&v.end()}}}function Ks(l){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/assets/files/whitepaper.pdf" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=N("div"),e.innerHTML=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-o2pz5m"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex md:hidden group w-fit md:items-center")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function Gs(l){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=N("div"),e.innerHTML=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-1wr7se3"&&(e.innerHTML=t),this.h()},h(){m(e,"class","hidden md:flex group w-fit md:items-center")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function Xs(l){let e,t="Ã—",n,o;return{c(){e=N("button"),e.textContent=t,this.h()},l(s){e=z(s,"BUTTON",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-o8kh4p"&&(e.textContent=t),this.h()},h(){m(e,"class","-mt-1 -mb-2 -translate-y-[1px] ml-1.5 mr-1 text-gray-400 dark:hover:text-white")},m(s,r){B(s,e,r),n||(o=De(e,"click",l[5]),n=!0)},p:Ie,d(s){s&&p(e),n=!1,o()}}}function rf(l){let e,t=!l[0]&&js(l);return{c(){t&&t.c(),e=Me()},l(n){t&&t.l(n),e=Me()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[0]?t&&(t.d(1),t=null):t?t.p(n,o):(t=js(n),t.c(),t.m(e.parentNode,e))},i:Ie,o:Ie,d(n){n&&p(e),t&&t.d(n)}}}function af(l,e,t){const n=rn();let{banner:o={id:"",type:"info",title:"",content:"",url:"",dismissable:!0,timestamp:Math.floor(Date.now()/1e3)}}=e,{dismissed:s=!1}=e,r=!1;const i={info:"bg-blue-500/20 text-blue-700 dark:text-blue-200 ",success:"bg-green-500/20 text-green-700 dark:text-green-200",warning:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200",error:"bg-red-500/20 text-red-700 dark:text-red-200"},a=u=>{t(0,s=!0),n("dismiss",u)};hn(()=>{t(2,r=!0)});const c=()=>{a(o.id)};return l.$$set=u=>{"banner"in u&&t(1,o=u.banner),"dismissed"in u&&t(0,s=u.dismissed)},[s,o,r,i,a,c]}class cf extends Oe{constructor(e){super(),He(this,e,af,rf,Le,{banner:1,dismissed:0})}}let Gl="",Xl="";async function uf(){var t,n;const l=await fetch("/api/config");if(!l.ok)throw new Error("Failed to fetch Google Drive credentials");const e=await l.json();if(Gl=(t=e.google_drive)==null?void 0:t.api_key,Xl=(n=e.google_drive)==null?void 0:n.client_id,!Gl||!Xl)throw new Error("Google Drive API credentials not configured")}const ff=["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file"],df=()=>{if(!Gl||!Xl)throw new Error("Google Drive API credentials not configured");if(Gl===""||Xl==="")throw new Error("Please configure valid Google Drive API credentials")};let co=null,Zs=!1;const hf=()=>new Promise((l,e)=>{if(typeof gapi>"u"){const t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.onload=()=>{gapi.load("picker",()=>{l(!0)})},t.onerror=e,document.body.appendChild(t)}else gapi.load("picker",()=>{l(!0)})}),mf=()=>new Promise((l,e)=>{if(typeof google>"u"){const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.onload=l,t.onerror=e,document.body.appendChild(t)}else l(!0)}),gf=async()=>co||new Promise((l,e)=>{google.accounts.oauth2.initTokenClient({client_id:Xl,scope:ff.join(" "),callback:n=>{n.access_token?(co=n.access_token,l(co)):e(new Error("Failed to get access token"))},error_callback:n=>{e(new Error(n.message||"OAuth error occurred"))}}).requestAccessToken()}),pf=async()=>{Zs||(await uf(),df(),await Promise.all([hf(),mf()]),Zs=!0)},_f=()=>new Promise(async(l,e)=>{try{console.log("Initializing Google Drive Picker..."),await pf(),console.log("Getting auth token...");const t=await gf();if(!t)throw console.error("Failed to get OAuth token"),new Error("Unable to get OAuth token");console.log("Auth token obtained successfully"),new google.picker.PickerBuilder().enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(new google.picker.DocsView().setIncludeFolders(!1).setSelectFolderEnabled(!1).setMimeTypes("application/pdf,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.google-apps.document,application/vnd.google-apps.spreadsheet,application/vnd.google-apps.presentation")).setOAuthToken(t).setDeveloperKey(Gl).setCallback(async o=>{if(o[google.picker.Response.ACTION]===google.picker.Action.PICKED)try{const s=o[google.picker.Response.DOCUMENTS][0],r=s[google.picker.Document.ID],i=s[google.picker.Document.NAME],a=s[google.picker.Document.URL];if(!r||!i)throw new Error("Required file details missing");const c=s[google.picker.Document.MIME_TYPE];let u,f;c.includes("google-apps")?(c.includes("document")?f="text/plain":c.includes("spreadsheet")?f="text/csv":c.includes("presentation")?f="text/plain":f="application/pdf",u=`https://www.googleapis.com/drive/v3/files/${r}/export?mimeType=${encodeURIComponent(f)}`):u=`https://www.googleapis.com/drive/v3/files/${r}?alt=media`;const d=await fetch(u,{headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}});if(!d.ok){const b=await d.text();throw console.error("Download failed:",{status:d.status,statusText:d.statusText,error:b}),new Error(`Failed to download file (${d.status}): ${b}`)}const h=await d.blob(),_={id:r,name:i,url:u,blob:h,headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}};l(_)}catch(s){e(s)}else o[google.picker.Response.ACTION]===google.picker.Action.CANCEL&&l(null)}).build().setVisible(!0)}catch(t){console.error("Google Drive Picker error:",t),e(t)}});let Wl="";async function bf(){var t;if(Wl)return;const l=await fetch("/api/config");if(!l.ok)throw new Error("Failed to fetch OneDrive credentials");if(Wl=(t=(await l.json()).onedrive)==null?void 0:t.client_id,!Wl)throw new Error("OneDrive client ID not configured")}function vf(){return new Promise((l,e)=>{if(window.msal){l();return}const n=document.createElement("script");n.src="https://alcdn.msauth.net/browser/2.19.0/js/msal-browser.min.js",n.async=!0,n.onload=()=>l(),n.onerror=()=>e(new Error("Failed to load MSAL script")),document.head.appendChild(n)})}let cl;async function wf(){Wl||await bf();const l={auth:{authority:"https://login.microsoftonline.com/consumers",clientId:Wl}};try{await vf();const e=window;cl=new e.msal.PublicClientApplication(l),cl.initialize&&await cl.initialize()}catch(e){console.error("MSAL initialization error:",e)}}async function ts(){const l={scopes:["OneDrive.ReadWrite"]};let e="";try{await wf(),e=(await cl.acquireTokenSilent(l)).accessToken}catch{const n=await cl.loginPopup(l);cl.setActiveAccount(n.account),n.idToken&&(e=(await cl.acquireTokenSilent(l)).accessToken)}return e}const yf="https://onedrive.live.com/picker";var ia;const qs={sdk:"8.0",entry:{oneDrive:{files:{}}},authentication:{},messaging:{origin:(ia=window==null?void 0:window.location)==null?void 0:ia.origin,channelId:Pn()},typesAndSources:{mode:"files",pivots:{oneDrive:!0,recent:!0}}};async function kf(l){const e=await ts();if(!e)throw new Error("Unable to retrieve OneDrive access token.");const t=`${l["@sharePoint.endpoint"]}/drives/${l.parentReference.driveId}/items/${l.id}`,n=await fetch(t,{headers:{Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error("Failed to fetch file information.");const s=(await n.json())["@content.downloadUrl"],r=await fetch(s);if(!r.ok)throw new Error("Failed to download file.");return await r.blob()}async function Ef(){if(typeof window>"u")throw new Error("Not in browser environment");return new Promise((l,e)=>{let t=null,n=null;const o=a=>{var u;if(a.source!==t)return;const c=a.data;if((c==null?void 0:c.type)==="initialize"&&(c==null?void 0:c.channelId)===qs.messaging.channelId){if(n=(u=a.ports)==null?void 0:u[0],!n)return;n.addEventListener("message",s),n.start(),n.postMessage({type:"activate"})}},s=async a=>{const c=a.data;switch(c.type){case"notification":break;case"command":{n==null||n.postMessage({type:"acknowledge",id:c.id});const u=c.data;switch(u.command){case"authenticate":{try{const f=await ts();if(f)n==null||n.postMessage({type:"result",id:c.id,data:{result:"token",token:f}});else throw new Error("Could not retrieve auth token")}catch(f){console.error(f),n==null||n.postMessage({result:"error",error:{code:"tokenError",message:"Failed to get token"},isExpected:!0})}break}case"close":{r(),l(null);break}case"pick":{n==null||n.postMessage({type:"result",id:c.id,data:{result:"success"}}),r(),l(u);break}default:{console.warn("Unsupported command:",u),n==null||n.postMessage({result:"error",error:{code:"unsupportedCommand",message:u.command},isExpected:!0});break}}break}}};function r(){window.removeEventListener("message",o),n&&n.removeEventListener("message",s),t&&(t.close(),t=null)}(async()=>{try{const a=await ts();if(!a)return e(new Error("Failed to acquire access token"));if(t=window.open("","OneDrivePicker","width=800,height=600"),!t)return e(new Error("Failed to open OneDrive picker window"));const c=new URLSearchParams({filePicker:JSON.stringify(qs)}),u=`${yf}?${c.toString()}`,f=t.document.createElement("form");f.setAttribute("action",u),f.setAttribute("method","POST");const d=t.document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name","access_token"),d.setAttribute("value",a),f.appendChild(d),t.document.body.appendChild(f),f.submit(),window.addEventListener("message",o)}catch(a){t&&t.close(),e(a)}})()})}async function If(){try{const l=await Ef();if(!l||!l.items||l.items.length===0)return null;const e=l.items[0];return{blob:await kf(e),name:e.name}}catch(l){throw console.error("Error occurred during OneDrive file pick/download:",l),l}}function Js(l,e,t){const n=l.slice();return n[28]=e[t],n}function Sf(l){let e;const t=l[16].default,n=Jt(t,l,l[25],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&33554432)&&Qt(n,t,o,o[25],e?$t(t,o[25],s,null):xt(o[25]),null)},i(o){e||(T(n,o),e=!0)},o(o){O(n,o),e=!1},d(o){n&&n.d(o)}}}function Df(l){let e,t;return e=new Zt({props:{content:l[9].t("More"),$$slots:{default:[Sf]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&512&&(s.content=n[9].t("More")),o&33554432&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Qs(l){let e,t,n,o,s=mt(Object.keys(l[7])),r=[];for(let a=0;a<s.length;a+=1)r[a]=xs(Js(l,s,a));const i=a=>O(r[a],1,1,()=>{r[a]=null});return{c(){e=N("div");for(let a=0;a<r.length;a+=1)r[a].c();t=Q(),n=N("hr"),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=D(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(p),t=J(a),n=z(a,"HR",{class:!0}),this.h()},h(){m(e,"class","max-h-28 overflow-y-auto scrollbar-hidden"),m(n,"class","border-black/5 dark:border-white/5 my-1")},m(a,c){B(a,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);B(a,t,c),B(a,n,c),o=!0},p(a,c){if(c&129){s=mt(Object.keys(a[7]));let u;for(u=0;u<s.length;u+=1){const f=Js(a,s,u);r[u]?(r[u].p(f,c),T(r[u],1)):(r[u]=xs(f),r[u].c(),T(r[u],1),r[u].m(e,null))}for(Te(),u=s.length;u<r.length;u+=1)i(u);Ve()}},i(a){if(!o){for(let c=0;c<s.length;c+=1)T(r[c]);o=!0}},o(a){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)O(r[c]);o=!1},d(a){a&&(p(e),p(t),p(n)),bn(r,a)}}}function Cf(l){let e,t,n,o,s=l[7][l[28]].name+"",r,i;return t=new Qc({}),{c(){e=N("div"),te(t.$$.fragment),n=Q(),o=N("div"),r=ke(s),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=D(e);ne(t.$$.fragment,c),c.forEach(p),n=J(a),o=z(a,"DIV",{class:!0});var u=D(o);r=ye(u,s),u.forEach(p),this.h()},h(){m(e,"class","shrink-0"),m(o,"class","truncate")},m(a,c){B(a,e,c),ee(t,e,null),B(a,n,c),B(a,o,c),k(o,r),i=!0},p(a,c){(!i||c&128)&&s!==(s=a[7][a[28]].name+"")&&Ce(r,s)},i(a){i||(T(t.$$.fragment,a),i=!0)},o(a){O(t.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(o)),$(t)}}}function xs(l){var h;let e,t,n,o,s,r,i,a,c,u;n=new Zt({props:{content:((h=l[7][l[28]])==null?void 0:h.description)??"",placement:"top-start",className:"flex flex-1 gap-2 items-center",$$slots:{default:[Cf]},$$scope:{ctx:l}}});function f(..._){return l[17](l[28],..._)}r=new Jc({props:{state:l[7][l[28]].enabled}}),r.$on("change",f);function d(){return l[18](l[28])}return{c(){e=N("button"),t=N("div"),te(n.$$.fragment),o=Q(),s=N("div"),te(r.$$.fragment),i=Q(),this.h()},l(_){e=z(_,"BUTTON",{class:!0});var b=D(e);t=z(b,"DIV",{class:!0});var v=D(t);ne(n.$$.fragment,v),v.forEach(p),o=J(b),s=z(b,"DIV",{class:!0});var g=D(s);ne(r.$$.fragment,g),g.forEach(p),i=J(b),b.forEach(p),this.h()},h(){m(t,"class","flex-1 truncate"),m(s,"class","shrink-0"),m(e,"class","flex w-full justify-between gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl")},m(_,b){B(_,e,b),k(e,t),ee(n,t,null),k(e,o),k(e,s),ee(r,s,null),k(e,i),a=!0,c||(u=De(e,"click",d),c=!0)},p(_,b){var w;l=_;const v={};b&128&&(v.content=((w=l[7][l[28]])==null?void 0:w.description)??""),b&33554560&&(v.$$scope={dirty:b,ctx:l}),n.$set(v);const g={};b&128&&(g.state=l[7][l[28]].enabled),r.$set(g)},i(_){a||(T(n.$$.fragment,_),T(r.$$.fragment,_),a=!0)},o(_){O(n.$$.fragment,_),O(r.$$.fragment,_),a=!1},d(_){_&&p(e),$(n),$(r),c=!1,u()}}}function Mf(l){let e,t,n,o=l[9].t("Capture")+"",s,r;return e=new ac({}),{c(){te(e.$$.fragment),t=Q(),n=N("div"),s=ke(o),this.h()},l(i){ne(e.$$.fragment,i),t=J(i),n=z(i,"DIV",{class:!0});var a=D(n);s=ye(a,o),a.forEach(p),this.h()},h(){m(n,"class","line-clamp-1")},m(i,a){ee(e,i,a),B(i,t,a),B(i,n,a),k(n,s),r=!0},p(i,a){(!r||a&512)&&o!==(o=i[9].t("Capture")+"")&&Ce(s,o)},i(i){r||(T(e.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),r=!1},d(i){i&&(p(t),p(n)),$(e,i)}}}function Tf(l){let e,t;return e=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl "+(l[8]?"":"opacity-50"),$$slots:{default:[Mf]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&256&&(s.class="flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl "+(n[8]?"":"opacity-50")),o&33554944&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Vf(l){let e,t,n,o=l[9].t("Upload Files")+"",s,r;return e=new cc({}),{c(){te(e.$$.fragment),t=Q(),n=N("div"),s=ke(o),this.h()},l(i){ne(e.$$.fragment,i),t=J(i),n=z(i,"DIV",{class:!0});var a=D(n);s=ye(a,o),a.forEach(p),this.h()},h(){m(n,"class","line-clamp-1")},m(i,a){ee(e,i,a),B(i,t,a),B(i,n,a),k(n,s),r=!0},p(i,a){(!r||a&512)&&o!==(o=i[9].t("Upload Files")+"")&&Ce(s,o)},i(i){r||(T(e.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),r=!1},d(i){i&&(p(t),p(n)),$(e,i)}}}function zf(l){let e,t;return e=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl "+(l[8]?"":"opacity-50"),$$slots:{default:[Vf]},$$scope:{ctx:l}}}),e.$on("click",l[20]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&256&&(s.class="flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl "+(n[8]?"":"opacity-50")),o&33554944&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function $s(l){let e,t;return e=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Nf]},$$scope:{ctx:l}}}),e.$on("click",l[21]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&33554944&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Nf(l){let e,t,n,o,s,r,i,a,c,u=l[9].t("Google Drive")+"",f;return{c(){e=ve("svg"),t=ve("path"),n=ve("path"),o=ve("path"),s=ve("path"),r=ve("path"),i=ve("path"),a=Q(),c=N("div"),f=ke(u),this.h()},l(d){e=be(d,"svg",{xmlns:!0,viewBox:!0,class:!0});var h=D(e);t=be(h,"path",{d:!0,fill:!0}),D(t).forEach(p),n=be(h,"path",{d:!0,fill:!0}),D(n).forEach(p),o=be(h,"path",{d:!0,fill:!0}),D(o).forEach(p),s=be(h,"path",{d:!0,fill:!0}),D(s).forEach(p),r=be(h,"path",{d:!0,fill:!0}),D(r).forEach(p),i=be(h,"path",{d:!0,fill:!0}),D(i).forEach(p),h.forEach(p),a=J(d),c=z(d,"DIV",{class:!0});var _=D(c);f=ye(_,u),_.forEach(p),this.h()},h(){m(t,"d","m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z"),m(t,"fill","#0066da"),m(n,"d","m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z"),m(n,"fill","#00ac47"),m(o,"d","m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z"),m(o,"fill","#ea4335"),m(s,"d","m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z"),m(s,"fill","#00832d"),m(r,"d","m59.8 53h-32.3l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z"),m(r,"fill","#2684fc"),m(i,"d","m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 16.15 28h27.45c0-1.55-.4-3.1-1.2-4.5z"),m(i,"fill","#ffba00"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 87.3 78"),m(e,"class","w-5 h-5"),m(c,"class","line-clamp-1")},m(d,h){B(d,e,h),k(e,t),k(e,n),k(e,o),k(e,s),k(e,r),k(e,i),B(d,a,h),B(d,c,h),k(c,f)},p(d,h){h&512&&u!==(u=d[9].t("Google Drive")+"")&&Ce(f,u)},d(d){d&&(p(e),p(a),p(c))}}}function er(l){let e,t;return e=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Pf]},$$scope:{ctx:l}}}),e.$on("click",l[22]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&33554944&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Pf(l){let e,t,n,o,s,r,i,a,c,u,f,d,h,_,b,v,g,w,y,E,M,S,V,A=l[9].t("OneDrive")+"",H;return{c(){e=ve("svg"),t=ve("mask"),n=ve("path"),o=ve("g"),s=ve("path"),r=ve("path"),i=ve("path"),a=ve("path"),c=ve("defs"),u=ve("linearGradient"),f=ve("stop"),d=ve("stop"),h=ve("linearGradient"),_=ve("stop"),b=ve("stop"),v=ve("linearGradient"),g=ve("stop"),w=ve("stop"),y=ve("linearGradient"),E=ve("stop"),M=ve("stop"),S=Q(),V=N("div"),H=ke(A),this.h()},l(L){e=be(L,"svg",{xmlns:!0,viewBox:!0,class:!0,fill:!0});var W=D(e);t=be(W,"mask",{id:!0,style:!0,maskUnits:!0,x:!0,y:!0,width:!0,height:!0});var j=D(t);n=be(j,"path",{d:!0,fill:!0}),D(n).forEach(p),j.forEach(p),o=be(W,"g",{mask:!0});var U=D(o);s=be(U,"path",{d:!0,fill:!0}),D(s).forEach(p),r=be(U,"path",{d:!0,fill:!0}),D(r).forEach(p),i=be(U,"path",{d:!0,fill:!0}),D(i).forEach(p),a=be(U,"path",{d:!0,fill:!0}),D(a).forEach(p),U.forEach(p),c=be(W,"defs",{});var C=D(c);u=be(C,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var I=D(u);f=be(I,"stop",{"stop-color":!0}),D(f).forEach(p),d=be(I,"stop",{offset:!0,"stop-color":!0}),D(d).forEach(p),I.forEach(p),h=be(C,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var P=D(h);_=be(P,"stop",{"stop-color":!0}),D(_).forEach(p),b=be(P,"stop",{offset:!0,"stop-color":!0}),D(b).forEach(p),P.forEach(p),v=be(C,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var K=D(v);g=be(K,"stop",{"stop-color":!0}),D(g).forEach(p),w=be(K,"stop",{offset:!0,"stop-color":!0}),D(w).forEach(p),K.forEach(p),y=be(C,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var X=D(y);E=be(X,"stop",{"stop-color":!0}),D(E).forEach(p),M=be(X,"stop",{offset:!0,"stop-color":!0}),D(M).forEach(p),X.forEach(p),C.forEach(p),W.forEach(p),S=J(L),V=z(L,"DIV",{class:!0});var F=D(V);H=ye(F,A),F.forEach(p),this.h()},h(){m(n,"d","M7.82979 26C3.50549 26 0 22.5675 0 18.3333C0 14.1921 3.35322 10.8179 7.54613 10.6716C9.27535 7.87166 12.4144 6 16 6C20.6308 6 24.5169 9.12183 25.5829 13.3335C29.1316 13.3603 32 16.1855 32 19.6667C32 23.0527 29 26 25.8723 25.9914L7.82979 26Z"),m(n,"fill","#C4C4C4"),m(t,"id","mask0_87_7796"),Qe(t,"mask-type","alpha"),m(t,"maskUnits","userSpaceOnUse"),m(t,"x","0"),m(t,"y","6"),m(t,"width","32"),m(t,"height","20"),m(s,"d","M7.83017 26.0001C5.37824 26.0001 3.18957 24.8966 1.75391 23.1691L18.0429 16.3335L30.7089 23.4647C29.5926 24.9211 27.9066 26.0001 26.0004 25.9915C23.1254 26.0001 12.0629 26.0001 7.83017 26.0001Z"),m(s,"fill","url(#paint0_linear_87_7796)"),m(r,"d","M25.5785 13.3149L18.043 16.3334L30.709 23.4647C31.5199 22.4065 32.0004 21.0916 32.0004 19.6669C32.0004 16.1857 29.1321 13.3605 25.5833 13.3337C25.5817 13.3274 25.5801 13.3212 25.5785 13.3149Z"),m(r,"fill","url(#paint1_linear_87_7796)"),m(i,"d","M7.06445 10.7028L18.0423 16.3333L25.5779 13.3148C24.5051 9.11261 20.6237 6 15.9997 6C12.4141 6 9.27508 7.87166 7.54586 10.6716C7.3841 10.6773 7.22358 10.6877 7.06445 10.7028Z"),m(i,"fill","url(#paint2_linear_87_7796)"),m(a,"d","M1.7535 23.1687L18.0425 16.3331L7.06471 10.7026C3.09947 11.0792 0 14.3517 0 18.3331C0 20.1665 0.657197 21.8495 1.7535 23.1687Z"),m(a,"fill","url(#paint3_linear_87_7796)"),m(o,"mask","url(#mask0_87_7796)"),m(f,"stop-color","#2086B8"),m(d,"offset","1"),m(d,"stop-color","#46D3F6"),m(u,"id","paint0_linear_87_7796"),m(u,"x1","4.42591"),m(u,"y1","24.6668"),m(u,"x2","27.2309"),m(u,"y2","23.2764"),m(u,"gradientUnits","userSpaceOnUse"),m(_,"stop-color","#1694DB"),m(b,"offset","1"),m(b,"stop-color","#62C3FE"),m(h,"id","paint1_linear_87_7796"),m(h,"x1","23.8302"),m(h,"y1","19.6668"),m(h,"x2","30.2108"),m(h,"y2","15.2082"),m(h,"gradientUnits","userSpaceOnUse"),m(g,"stop-color","#0D3D78"),m(w,"offset","1"),m(w,"stop-color","#063B83"),m(v,"id","paint2_linear_87_7796"),m(v,"x1","8.51037"),m(v,"y1","7.33333"),m(v,"x2","23.3335"),m(v,"y2","15.9348"),m(v,"gradientUnits","userSpaceOnUse"),m(E,"stop-color","#16589B"),m(M,"offset","1"),m(M,"stop-color","#1464B7"),m(y,"id","paint3_linear_87_7796"),m(y,"x1","-0.340429"),m(y,"y1","19.9998"),m(y,"x2","14.5634"),m(y,"y2","14.4649"),m(y,"gradientUnits","userSpaceOnUse"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 32"),m(e,"class","w-5 h-5"),m(e,"fill","none"),m(V,"class","line-clamp-1")},m(L,W){B(L,e,W),k(e,t),k(t,n),k(e,o),k(o,s),k(o,r),k(o,i),k(o,a),k(e,c),k(c,u),k(u,f),k(u,d),k(c,h),k(h,_),k(h,b),k(c,v),k(v,g),k(v,w),k(c,y),k(y,E),k(y,M),B(L,S,W),B(L,V,W),k(V,H)},p(L,W){W&512&&A!==(A=L[9].t("OneDrive")+"")&&Ce(H,A)},d(L){L&&(p(e),p(S),p(V))}}}function Of(l){var h,_,b,v;let e=Object.keys(l[7]).length>0,t,n,o,s,r,i,a,c,u=e&&Qs(l);n=new Zt({props:{content:l[8]?"":l[9].t("You do not have permission to upload files"),className:"w-full",$$slots:{default:[Tf]},$$scope:{ctx:l}}}),s=new Zt({props:{content:l[8]?"":l[9].t("You do not have permission to upload files"),className:"w-full",$$slots:{default:[zf]},$$scope:{ctx:l}}});let f=((_=(h=l[10])==null?void 0:h.features)==null?void 0:_.enable_google_drive_integration)&&$s(l),d=((v=(b=l[10])==null?void 0:b.features)==null?void 0:v.enable_onedrive_integration)&&er(l);return{c(){u&&u.c(),t=Q(),te(n.$$.fragment),o=Q(),te(s.$$.fragment),r=Q(),f&&f.c(),i=Q(),d&&d.c(),a=Me()},l(g){u&&u.l(g),t=J(g),ne(n.$$.fragment,g),o=J(g),ne(s.$$.fragment,g),r=J(g),f&&f.l(g),i=J(g),d&&d.l(g),a=Me()},m(g,w){u&&u.m(g,w),B(g,t,w),ee(n,g,w),B(g,o,w),ee(s,g,w),B(g,r,w),f&&f.m(g,w),B(g,i,w),d&&d.m(g,w),B(g,a,w),c=!0},p(g,w){var M,S,V,A;w&128&&(e=Object.keys(g[7]).length>0),e?u?(u.p(g,w),w&128&&T(u,1)):(u=Qs(g),u.c(),T(u,1),u.m(t.parentNode,t)):u&&(Te(),O(u,1,1,()=>{u=null}),Ve());const y={};w&768&&(y.content=g[8]?"":g[9].t("You do not have permission to upload files")),w&33555202&&(y.$$scope={dirty:w,ctx:g}),n.$set(y);const E={};w&768&&(E.content=g[8]?"":g[9].t("You do not have permission to upload files")),w&33555204&&(E.$$scope={dirty:w,ctx:g}),s.$set(E),(S=(M=g[10])==null?void 0:M.features)!=null&&S.enable_google_drive_integration?f?(f.p(g,w),w&1024&&T(f,1)):(f=$s(g),f.c(),T(f,1),f.m(i.parentNode,i)):f&&(Te(),O(f,1,1,()=>{f=null}),Ve()),(A=(V=g[10])==null?void 0:V.features)!=null&&A.enable_onedrive_integration?d?(d.p(g,w),w&1024&&T(d,1)):(d=er(g),d.c(),T(d,1),d.m(a.parentNode,a)):d&&(Te(),O(d,1,1,()=>{d=null}),Ve())},i(g){c||(T(u),T(n.$$.fragment,g),T(s.$$.fragment,g),T(f),T(d),c=!0)},o(g){O(u),O(n.$$.fragment,g),O(s.$$.fragment,g),O(f),O(d),c=!1},d(g){g&&(p(t),p(o),p(r),p(i),p(a)),u&&u.d(g),$(n,g),$(s,g),f&&f.d(g),d&&d.d(g)}}}function Hf(l){let e,t,n;return t=new zo({props:{class:"w-full max-w-[220px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:15,alignOffset:-8,side:"top",align:"start",transition:Jl,$$slots:{default:[Of]},$$scope:{ctx:l}}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p(o,s){const r={};s&33556383&&(r.$$scope={dirty:s,ctx:o}),t.$set(r)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function Af(l){let e,t,n,o,s,r,i;function a(u){l[23](u)}let c={$$slots:{content:[Hf],default:[Df]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.show=l[6]),n=new Vo({props:c}),Pe.push(()=>Ge(n,"show",a)),n.$on("change",l[24]),{c(){e=N("input"),t=Q(),te(n.$$.fragment),this.h()},l(u){e=z(u,"INPUT",{id:!0,type:!0,accept:!0,capture:!0,style:!0}),t=J(u),ne(n.$$.fragment,u),this.h()},h(){m(e,"id","camera-input"),m(e,"type","file"),m(e,"accept","image/*"),m(e,"capture","environment"),Qe(e,"display","none")},m(u,f){B(u,e,f),B(u,t,f),ee(n,u,f),s=!0,r||(i=De(e,"change",l[13]),r=!0)},p(u,[f]){const d={};f&33556383&&(d.$$scope={dirty:f,ctx:u}),!o&&f&64&&(o=!0,d.show=u[6],Ke(()=>o=!1)),n.$set(d)},i(u){s||(T(n.$$.fragment,u),s=!0)},o(u){O(n.$$.fragment,u),s=!1},d(u){u&&(p(e),p(t)),$(n,u),r=!1,i()}}}function Lf(l,e,t){let n,o,s,r;se(l,fl,I=>t(26,n=I)),se(l,Yn,I=>t(15,o=I)),se(l,Mo,I=>t(10,r=I));let{$$slots:i={},$$scope:a}=e;const c=Nt("i18n");se(l,c,I=>t(9,s=I));let{screenCaptureHandler:u}=e,{uploadFilesHandler:f}=e,{inputFilesHandler:d}=e,{uploadGoogleDriveHandler:h}=e,{uploadOneDriveHandler:_}=e,{selectedToolIds:b=[]}=e,{onClose:v}=e,g={},w=!1,y=!0;const E=async()=>{n===null&&await fl.set(await is(localStorage.token)),t(7,g=n.reduce((I,P,K,X)=>(I[P.id]={name:P.name,description:P.meta.description,enabled:b.includes(P.id)},I),{}))},M=()=>{const I=navigator.userAgent||navigator.vendor||window.opera;return/android|iphone|ipad|ipod|windows phone/i.test(I)};function S(I){var K;const P=Array.from((K=I.target)==null?void 0:K.files);P&&P.length>0&&(console.log(P),d(P))}const V=async(I,P)=>{const K=P.detail;await xe(),K?t(0,b=[...b,I]):t(0,b=b.filter(X=>X!==I))},A=I=>{t(7,g[I].enabled=!g[I].enabled,g)},H=()=>{if(y)if(!M())u();else{const I=document.getElementById("camera-input");I&&I.click()}},L=()=>{y&&f()},W=()=>{h()},j=()=>{_()};function U(I){w=I,t(6,w)}const C=I=>{I.detail===!1&&v()};return l.$$set=I=>{"screenCaptureHandler"in I&&t(1,u=I.screenCaptureHandler),"uploadFilesHandler"in I&&t(2,f=I.uploadFilesHandler),"inputFilesHandler"in I&&t(14,d=I.inputFilesHandler),"uploadGoogleDriveHandler"in I&&t(3,h=I.uploadGoogleDriveHandler),"uploadOneDriveHandler"in I&&t(4,_=I.uploadOneDriveHandler),"selectedToolIds"in I&&t(0,b=I.selectedToolIds),"onClose"in I&&t(5,v=I.onClose),"$$scope"in I&&t(25,a=I.$$scope)},l.$$.update=()=>{var I,P;l.$$.dirty&64&&w&&E(),l.$$.dirty&32768&&t(8,y=o.role==="admin"||((P=(I=o==null?void 0:o.permissions)==null?void 0:I.chat)==null?void 0:P.file_upload))},[b,u,f,h,_,v,w,g,y,s,r,c,M,S,d,o,i,V,A,H,L,W,j,U,C,a]}class Bf extends Oe{constructor(e){super(),He(this,e,Lf,Af,Le,{screenCaptureHandler:1,uploadFilesHandler:2,inputFilesHandler:14,uploadGoogleDriveHandler:3,uploadOneDriveHandler:4,selectedToolIds:0,onClose:5})}}function tr(l,e,t){const n=l.slice();return n[0]=e[t],n[16]=t,n}function nr(l){let e,t,n,o,s,r,i,a='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',c,u,f=l[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",d,h=mt(l[2]),_=[];for(let b=0;b<h.length;b+=1)_[b]=lr(tr(l,h,b));return{c(){e=N("div"),t=N("div"),n=N("div"),o=N("div");for(let b=0;b<_.length;b+=1)_[b].c();s=Q(),r=N("div"),i=N("div"),i.innerHTML=a,c=Q(),u=N("div"),d=ke(f),this.h()},l(b){e=z(b,"DIV",{id:!0,class:!0});var v=D(e);t=z(v,"DIV",{class:!0});var g=D(t);n=z(g,"DIV",{class:!0});var w=D(n);o=z(w,"DIV",{class:!0});var y=D(o);for(let S=0;S<_.length;S+=1)_[S].l(y);y.forEach(p),s=J(w),r=z(w,"DIV",{class:!0});var E=D(r);i=z(E,"DIV",{"data-svelte-h":!0}),at(i)!=="svelte-cdi12d"&&(i.innerHTML=a),c=J(E),u=z(E,"DIV",{class:!0});var M=D(u);d=ye(M,f),M.forEach(p),E.forEach(p),w.forEach(p),g.forEach(p),v.forEach(p),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 space-y-0.5 scrollbar-hidden"),m(u,"class","line-clamp-1"),m(r,"class","px-2 pt-0.5 pb-1 text-xs text-gray-600 dark:text-gray-100 bg-white dark:bg-gray-900 rounded-b-xl flex items-center space-x-1"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-100 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(b,v){B(b,e,v),k(e,t),k(t,n),k(n,o);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(o,null);k(n,s),k(n,r),k(r,i),k(r,c),k(r,u),k(u,d)},p(b,v){if(v&38){h=mt(b[2]);let g;for(g=0;g<h.length;g+=1){const w=tr(b,h,g);_[g]?_[g].p(w,v):(_[g]=lr(w),_[g].c(),_[g].m(o,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=h.length}v&8&&f!==(f=b[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&Ce(d,f)},d(b){b&&p(e),bn(_,b)}}}function lr(l){let e,t,n=l[0].command+"",o,s,r,i=l[0].title+"",a,c,u,f,d;function h(){return l[11](l[0])}function _(){return l[12](l[16])}return{c(){e=N("button"),t=N("div"),o=ke(n),s=Q(),r=N("div"),a=ke(i),c=Q(),this.h()},l(b){e=z(b,"BUTTON",{class:!0,type:!0});var v=D(e);t=z(v,"DIV",{class:!0});var g=D(t);o=ye(g,n),g.forEach(p),s=J(v),r=z(v,"DIV",{class:!0});var w=D(r);a=ye(w,i),w.forEach(p),c=J(v),v.forEach(p),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100"),m(r,"class","text-xs text-gray-600 dark:text-gray-100"),m(e,"class",u="px-3 py-1.5 rounded-xl w-full text-left "+(l[16]===l[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),m(e,"type","button")},m(b,v){B(b,e,v),k(e,t),k(t,o),k(e,s),k(e,r),k(r,a),k(e,c),f||(d=[De(e,"click",h),De(e,"mousemove",_),De(e,"focus",Uf)],f=!0)},p(b,v){l=b,v&4&&n!==(n=l[0].command+"")&&Ce(o,n),v&4&&i!==(i=l[0].title+"")&&Ce(a,i),v&2&&u!==(u="px-3 py-1.5 rounded-xl w-full text-left "+(l[16]===l[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&m(e,"class",u)},d(b){b&&p(e),f=!1,an(d)}}}function Rf(l){let e,t=l[2].length>0&&nr(l);return{c(){t&&t.c(),e=Me()},l(n){t&&t.l(n),e=Me()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[2].length>0?t?t.p(n,o):(t=nr(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&p(e),t&&t.d(n)}}}const Uf=()=>{};function Ff(l,e,t){let n,o,s,r;se(l,ha,w=>t(13,n=w)),se(l,Yn,w=>t(14,o=w)),se(l,ma,w=>t(10,r=w));const i=Nt("i18n");se(l,i,w=>t(3,s=w));let{files:a}=e,{prompt:c=""}=e,{command:u=""}=e,f=0,d=[];const h=()=>{t(1,f=Math.max(0,f-1))},_=()=>{t(1,f=Math.min(f+1,d.length-1))},b=async w=>{let y=w.content;if(w.content.includes("{{CLIPBOARD}}")){const S=await navigator.clipboard.readText().catch(H=>(ht.error(s.t("Failed to read clipboard contents")),"{{CLIPBOARD}}")),V=await navigator.clipboard.read();let A=null;for(const H of V)for(const L of H.types)if(L.startsWith("image/")){const W=await H.getType(L);A=URL.createObjectURL(W)}A&&t(6,a=[...a,{type:"image",url:A}]),y=y.replaceAll("{{CLIPBOARD}}",S)}if(w.content.includes("{{USER_LOCATION}}")){let S;try{S=await yc()}catch{ht.error(s.t("Location access not allowed")),S="LOCATION_UNKNOWN"}y=y.replaceAll("{{USER_LOCATION}}",String(S))}if(w.content.includes("{{USER_NAME}}")){console.log(o);const S=o.name||"User";y=y.replaceAll("{{USER_NAME}}",S)}if(w.content.includes("{{USER_LANGUAGE}}")){const S=localStorage.getItem("locale")||"en-US";y=y.replaceAll("{{USER_LANGUAGE}}",S)}if(w.content.includes("{{USER_API_KEY}}")){console.log("$userAPIKey in prompts",n);const S=n||"";y=y.replace(/{{USER_API_KEY}}/g,S)}if(w.content.includes("{{CURRENT_DATE}}")){const S=kc();y=y.replaceAll("{{CURRENT_DATE}}",S)}if(w.content.includes("{{CURRENT_TIME}}")){const S=Ec();y=y.replaceAll("{{CURRENT_TIME}}",S)}if(w.content.includes("{{CURRENT_DATETIME}}")){const S=Ic();y=y.replaceAll("{{CURRENT_DATETIME}}",S)}if(w.content.includes("{{CURRENT_TIMEZONE}}")){const S=Sc();y=y.replaceAll("{{CURRENT_TIMEZONE}}",S)}if(w.content.includes("{{CURRENT_WEEKDAY}}")){const S=Dc();y=y.replaceAll("{{CURRENT_WEEKDAY}}",S)}t(0,c=y);const E=document.getElementById("chat-input-container"),M=document.getElementById("chat-input");await xe(),E&&(E.style.height="",E.style.height=Math.min(E.scrollHeight,200)+"px"),await xe(),M&&(M.focus(),M.dispatchEvent(new Event("input")))},v=w=>{b(w)},g=w=>{t(1,f=w)};return l.$$set=w=>{"files"in w&&t(6,a=w.files),"prompt"in w&&t(0,c=w.prompt),"command"in w&&t(7,u=w.command)},l.$$.update=()=>{l.$$.dirty&1152&&t(2,d=r.filter(w=>w.command.toLowerCase().includes(u.toLowerCase())).sort((w,y)=>w.title.localeCompare(y.title))),l.$$.dirty&128&&u&&t(1,f=0)},[c,f,d,s,i,b,a,u,h,_,r,v,g]}class Wf extends Oe{constructor(e){super(),He(this,e,Ff,Rf,Le,{files:6,prompt:0,command:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function or(l,e,t){const n=l.slice();return n[19]=e[t],n[21]=t,n}function sr(l){let e,t,n,o,s,r,i,a=mt(l[2]),c=[];for(let h=0;h<a.length;h+=1)c[h]=rr(or(l,a,h));function u(h,_){var b,v;if(_&1&&(r=null),_&1&&(i=null),r==null&&(r=!!h[0].split(" ").some(Jf)),r)return Zf;if(i==null&&(i=!!((v=(b=h[0].split(" "))==null?void 0:b.at(0))!=null&&v.substring(1).startsWith("http"))),i)return Xf}let f=u(l,-1),d=f&&f(l);return{c(){e=N("div"),t=N("div"),n=N("div"),o=N("div");for(let h=0;h<c.length;h+=1)c[h].c();s=Q(),d&&d.c(),this.h()},l(h){e=z(h,"DIV",{id:!0,class:!0});var _=D(e);t=z(_,"DIV",{class:!0});var b=D(t);n=z(b,"DIV",{class:!0});var v=D(n);o=z(v,"DIV",{class:!0});var g=D(o);for(let w=0;w<c.length;w+=1)c[w].l(g);s=J(g),d&&d.l(g),g.forEach(p),v.forEach(p),b.forEach(p),_.forEach(p),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5 scrollbar-hidden"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-100 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(h,_){B(h,e,_),k(e,t),k(t,n),k(n,o);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(o,null);k(o,s),d&&d.m(o,null)},p(h,_){if(_&38){a=mt(h[2]);let b;for(b=0;b<a.length;b+=1){const v=or(h,a,b);c[b]?c[b].p(v,_):(c[b]=rr(v),c[b].c(),c[b].m(o,s))}for(;b<c.length;b+=1)c[b].d(1);c.length=a.length}f===(f=u(h,_))&&d?d.p(h,_):(d&&d.d(1),d=f&&f(h),d&&(d.c(),d.m(o,null)))},d(h){h&&p(e),bn(c,h),d&&d.d()}}}function jf(l){let e,t="Collection";return{c(){e=N("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-1j93cxc"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-green-500/20 text-green-700 dark:text-green-200 rounded-sm uppercase text-xs font-bold px-1 shrink-0")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function Yf(l){let e,t="File";return{c(){e=N("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-dn3g9i"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded-sm uppercase text-xs font-bold px-1 shrink-0")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function Kf(l){let e,t="Document";return{c(){e=N("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-2kpkct"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded-sm uppercase text-xs font-bold px-1 shrink-0")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function Gf(l){let e,t="Legacy";return{c(){e=N("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-8uyvzr"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded-sm uppercase text-xs font-bold px-1 shrink-0")},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function rr(l){var E,M;let e,t,n,o,s,r=((E=l[19])==null?void 0:E.name)+"",i,a,c,u=((M=l[19])==null?void 0:M.description)+"",f,d,h,_;function b(S,V){var A,H,L;return S[19].legacy?Gf:(H=(A=S[19])==null?void 0:A.meta)!=null&&H.document?Kf:((L=S[19])==null?void 0:L.type)==="file"?Yf:jf}let v=b(l),g=v(l);function w(){return l[13](l[19])}function y(){return l[14](l[21])}return{c(){e=N("button"),t=N("div"),n=N("div"),g.c(),o=Q(),s=N("div"),i=ke(r),a=Q(),c=N("div"),f=ke(u),this.h()},l(S){e=z(S,"BUTTON",{class:!0,type:!0});var V=D(e);t=z(V,"DIV",{});var A=D(t);n=z(A,"DIV",{class:!0});var H=D(n);g.l(H),o=J(H),s=z(H,"DIV",{class:!0});var L=D(s);i=ye(L,r),L.forEach(p),H.forEach(p),a=J(A),c=z(A,"DIV",{class:!0});var W=D(c);f=ye(W,u),W.forEach(p),A.forEach(p),V.forEach(p),this.h()},h(){m(s,"class","line-clamp-1"),m(n,"class","font-medium text-black dark:text-gray-100 flex items-center gap-1"),m(c,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1"),m(e,"class",d="px-3 py-1.5 rounded-xl w-full text-left flex justify-between items-center "+(l[21]===l[1]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":"")),m(e,"type","button")},m(S,V){B(S,e,V),k(e,t),k(t,n),g.m(n,null),k(n,o),k(n,s),k(s,i),k(t,a),k(t,c),k(c,f),h||(_=[De(e,"click",w),De(e,"mousemove",y)],h=!0)},p(S,V){var A,H;l=S,v!==(v=b(l))&&(g.d(1),g=v(l),g&&(g.c(),g.m(n,o))),V&4&&r!==(r=((A=l[19])==null?void 0:A.name)+"")&&Ce(i,r),V&4&&u!==(u=((H=l[19])==null?void 0:H.description)+"")&&Ce(f,u),V&2&&d!==(d="px-3 py-1.5 rounded-xl w-full text-left flex justify-between items-center "+(l[21]===l[1]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":""))&&m(e,"class",d)},d(S){S&&p(e),g.d(),h=!1,an(_)}}}function Xf(l){var f,d;let e,t,n=((d=(f=l[0].split(" "))==null?void 0:f.at(0))==null?void 0:d.substring(1))+"",o,s,r,i=l[3].t("Web")+"",a,c,u;return{c(){e=N("button"),t=N("div"),o=ke(n),s=Q(),r=N("div"),a=ke(i),this.h()},l(h){e=z(h,"BUTTON",{class:!0,type:!0});var _=D(e);t=z(_,"DIV",{class:!0});var b=D(t);o=ye(b,n),b.forEach(p),s=J(_),r=z(_,"DIV",{class:!0});var v=D(r);a=ye(v,i),v.forEach(p),_.forEach(p),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),m(r,"class","text-xs text-gray-600 line-clamp-1"),m(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),m(e,"type","button")},m(h,_){B(h,e,_),k(e,t),k(t,o),k(e,s),k(e,r),k(r,a),c||(u=De(e,"click",l[16]),c=!0)},p(h,_){var b,v;_&1&&n!==(n=((v=(b=h[0].split(" "))==null?void 0:b.at(0))==null?void 0:v.substring(1))+"")&&Ce(o,n),_&8&&i!==(i=h[3].t("Web")+"")&&Ce(a,i)},d(h){h&&p(e),c=!1,u()}}}function Zf(l){var f,d;let e,t,n=((d=(f=l[0].split(" "))==null?void 0:f.at(0))==null?void 0:d.substring(1))+"",o,s,r,i=l[3].t("Youtube")+"",a,c,u;return{c(){e=N("button"),t=N("div"),o=ke(n),s=Q(),r=N("div"),a=ke(i),this.h()},l(h){e=z(h,"BUTTON",{class:!0,type:!0});var _=D(e);t=z(_,"DIV",{class:!0});var b=D(t);o=ye(b,n),b.forEach(p),s=J(_),r=z(_,"DIV",{class:!0});var v=D(r);a=ye(v,i),v.forEach(p),_.forEach(p),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),m(r,"class","text-xs text-gray-600 line-clamp-1"),m(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),m(e,"type","button")},m(h,_){B(h,e,_),k(e,t),k(t,o),k(e,s),k(e,r),k(r,a),c||(u=De(e,"click",l[15]),c=!0)},p(h,_){var b,v;_&1&&n!==(n=((v=(b=h[0].split(" "))==null?void 0:b.at(0))==null?void 0:v.substring(1))+"")&&Ce(o,n),_&8&&i!==(i=h[3].t("Youtube")+"")&&Ce(a,i)},d(h){h&&p(e),c=!1,u()}}}function qf(l){var o,s;let e=l[2].length>0||((s=(o=l[0].split(" "))==null?void 0:o.at(0))==null?void 0:s.substring(1).startsWith("http")),t,n=e&&sr(l);return{c(){n&&n.c(),t=Me()},l(r){n&&n.l(r),t=Me()},m(r,i){n&&n.m(r,i),B(r,t,i)},p(r,[i]){var a,c;i&5&&(e=r[2].length>0||((c=(a=r[0].split(" "))==null?void 0:a.at(0))==null?void 0:c.substring(1).startsWith("http"))),e?n?n.p(r,i):(n=sr(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:Ie,o:Ie,d(r){r&&p(t),n&&n.d(r)}}}const Jf=l=>l.substring(1).startsWith("https://www.youtube.com")||l.substring(1).startsWith("https://youtu.be");function Qf(l,e,t){let n,o;se(l,ga,S=>t(17,n=S)),nu.extend(lu);const s=Nt("i18n");se(l,s,S=>t(3,o=S));let{prompt:r=""}=e,{command:i=""}=e;const a=rn();let c=0,u=[],f=null,d=[];const h=()=>{t(1,c=Math.max(0,c-1))},_=()=>{t(1,c=Math.min(c+1,d.length-1))},b=async S=>{a("select",S),t(0,r=Ul(r,i));const V=document.getElementById("chat-input");await xe(),V==null||V.focus(),await xe()},v=async S=>{a("url",S),t(0,r=Ul(r,i));const V=document.getElementById("chat-input");await xe(),V==null||V.focus(),await xe()},g=async S=>{a("youtube",S),t(0,r=Ul(r,i));const V=document.getElementById("chat-input");await xe(),V==null||V.focus(),await xe()};hn(()=>{let S=n.filter(L=>{var W;return(W=L==null?void 0:L.meta)==null?void 0:W.document}).map(L=>({...L,type:"file"})),V=S.length>0?[{name:"All Documents",legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",title:o.t("All Documents"),collection_names:S.map(L=>L.id)},...S.reduce((L,W)=>{var j;return[...new Set([...L,...(((j=W==null?void 0:W.meta)==null?void 0:j.tags)??[]).map(U=>U.name)])]},[]).map(L=>({name:L,legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",collection_names:S.filter(W=>{var j;return(((j=W==null?void 0:W.meta)==null?void 0:j.tags)??[]).map(U=>U.name).includes(L)}).map(W=>W.id)}))]:[],A=n.filter(L=>{var W;return!((W=L==null?void 0:L.meta)!=null&&W.document)}).map(L=>({...L,type:"collection"})),H=n.length>0?[...n.reduce((L,W)=>[...new Set([...L,...((W==null?void 0:W.files)??[]).map(j=>({...j,collection:{name:W.name,description:W.description}}))])],[]).map(L=>{var W,j,U;return{...L,name:(W=L==null?void 0:L.meta)==null?void 0:W.name,description:`${(j=L==null?void 0:L.collection)==null?void 0:j.name} - ${(U=L==null?void 0:L.collection)==null?void 0:U.description}`,type:"file"}})]:[];t(11,u=[...A,...H,...V,...S].map(L=>{var W,j;return{...L,...L!=null&&L.legacy||(W=L==null?void 0:L.meta)!=null&&W.legacy||(j=L==null?void 0:L.meta)!=null&&j.document?{legacy:!0}:{}}})),t(12,f=new ba(u,{keys:["name","description"]}))});const w=S=>{console.log(S),b(S)},y=S=>{t(1,c=S)},E=()=>{var V,A;const S=(A=(V=r.split(" "))==null?void 0:V.at(0))==null?void 0:A.substring(1);Ps(S)?g(S):ht.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))},M=()=>{var V,A;const S=(A=(V=r.split(" "))==null?void 0:V.at(0))==null?void 0:A.substring(1);Ps(S)?v(S):ht.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return l.$$set=S=>{"prompt"in S&&t(0,r=S.prompt),"command"in S&&t(8,i=S.command)},l.$$.update=()=>{l.$$.dirty&6400&&f&&t(2,d=i.slice(1)?f.search(i).map(S=>S.item):u),l.$$.dirty&256&&i&&t(1,c=0)},[r,c,d,o,s,b,v,g,i,h,_,u,f,w,y,E,M]}class xf extends Oe{constructor(e){super(),He(this,e,Qf,qf,Le,{prompt:0,command:8,selectUp:9,selectDown:10})}get selectUp(){return this.$$.ctx[9]}get selectDown(){return this.$$.ctx[10]}}function ir(l,e,t){const n=l.slice();return n[12]=e[t],n[14]=t,n}function ar(l){let e,t,n,o,s=mt(l[1]),r=[];for(let i=0;i<s.length;i+=1)r[i]=cr(ir(l,s,i));return{c(){e=N("div"),t=N("div"),n=N("div"),o=N("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=z(i,"DIV",{id:!0,class:!0});var a=D(e);t=z(a,"DIV",{class:!0});var c=D(t);n=z(c,"DIV",{class:!0});var u=D(n);o=z(u,"DIV",{class:!0});var f=D(o);for(let d=0;d<r.length;d+=1)r[d].l(f);f.forEach(p),u.forEach(p),c.forEach(p),a.forEach(p),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-100 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(i,a){B(i,e,a),k(e,t),k(t,n),k(n,o);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(o,null)},p(i,a){if(a&7){s=mt(i[1]);let c;for(c=0;c<s.length;c+=1){const u=ir(i,s,c);r[c]?r[c].p(u,a):(r[c]=cr(u),r[c].c(),r[c].m(o,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(i){i&&p(e),bn(r,i)}}}function cr(l){let e,t,n,o,s,r,i=l[12].name+"",a,c,u,f,d;function h(){return l[7](l[12])}function _(){return l[8](l[14])}return{c(){e=N("button"),t=N("div"),n=N("img"),r=Q(),a=ke(i),c=Q(),this.h()},l(b){e=z(b,"BUTTON",{class:!0,type:!0});var v=D(e);t=z(v,"DIV",{class:!0});var g=D(t);n=z(g,"IMG",{src:!0,alt:!0,class:!0}),r=J(g),a=ye(g,i),g.forEach(p),c=J(v),v.forEach(p),this.h()},h(){var b,v,g,w;jn(n.src,o=((g=(v=(b=l[12])==null?void 0:b.info)==null?void 0:v.meta)==null?void 0:g.profile_image_url)??"/static/favicon.png")||m(n,"src",o),m(n,"alt",s=((w=l[12])==null?void 0:w.name)??l[12].id),m(n,"class","rounded-full size-6 items-center mr-2"),m(t,"class","flex font-medium text-black dark:text-gray-100 line-clamp-1"),m(e,"class",u="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),m(e,"type","button")},m(b,v){B(b,e,v),k(e,t),k(t,n),k(t,r),k(t,a),k(e,c),f||(d=[De(e,"click",h),De(e,"mousemove",_),De(e,"focus",ed)],f=!0)},p(b,v){var g,w,y,E;l=b,v&2&&!jn(n.src,o=((y=(w=(g=l[12])==null?void 0:g.info)==null?void 0:w.meta)==null?void 0:y.profile_image_url)??"/static/favicon.png")&&m(n,"src",o),v&2&&s!==(s=((E=l[12])==null?void 0:E.name)??l[12].id)&&m(n,"alt",s),v&2&&i!==(i=l[12].name+"")&&Ce(a,i),v&1&&u!==(u="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&m(e,"class",u)},d(b){b&&p(e),f=!1,an(d)}}}function $f(l){let e,t=l[1].length>0&&ar(l);return{c(){t&&t.c(),e=Me()},l(n){t&&t.l(n),e=Me()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[1].length>0?t?t.p(n,o):(t=ar(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&p(e),t&&t.d(n)}}}const ed=()=>{};function td(l,e,t){let n;se(l,ml,_=>t(6,n=_)),Nt("i18n");const o=rn();let{command:s=""}=e,r=0,i=[],a=new ba(n.filter(_=>{var b,v;return!((v=(b=_==null?void 0:_.info)==null?void 0:b.meta)!=null&&v.hidden)}).map(_=>{var v,g,w,y,E;return{..._,modelName:_==null?void 0:_.name,tags:(w=(g=(v=_==null?void 0:_.info)==null?void 0:v.meta)==null?void 0:g.tags)==null?void 0:w.map(M=>M.name).join(" "),desc:(E=(y=_==null?void 0:_.info)==null?void 0:y.meta)==null?void 0:E.description}}),{keys:["value","tags","modelName"],threshold:.3});const c=()=>{t(0,r=Math.max(0,r-1))},u=()=>{t(0,r=Math.min(r+1,i.length-1))},f=async _=>{t(3,s=""),o("select",_)};hn(async()=>{await xe();const _=document.getElementById("chat-input");await xe(),_==null||_.focus(),await xe()});const d=_=>{f(_)},h=_=>{t(0,r=_)};return l.$$set=_=>{"command"in _&&t(3,s=_.command)},l.$$.update=()=>{l.$$.dirty&72&&t(1,i=s.slice(1)?a.search(s).map(_=>_.item):n.filter(_=>{var b,v;return!((v=(b=_==null?void 0:_.info)==null?void 0:b.meta)!=null&&v.hidden)})),l.$$.dirty&8&&s&&t(0,r=0)},[r,i,f,s,c,u,n,d,h]}class nd extends Oe{constructor(e){super(),He(this,e,td,$f,Le,{command:3,selectUp:4,selectDown:5})}get selectUp(){return this.$$.ctx[4]}get selectDown(){return this.$$.ctx[5]}}function ur(l,e,t){const n=l.slice();return n[12]=e[t],n[14]=t,n}function fr(l){let e,t,n,o,s=mt(l[0]),r=[];for(let i=0;i<s.length;i+=1)r[i]=dr(ur(l,s,i));return{c(){e=N("div"),t=N("div"),n=N("div"),o=N("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=z(i,"DIV",{id:!0,class:!0});var a=D(e);t=z(a,"DIV",{class:!0});var c=D(t);n=z(c,"DIV",{class:!0});var u=D(n);o=z(u,"DIV",{class:!0});var f=D(o);for(let d=0;d<r.length;d+=1)r[d].l(f);f.forEach(p),u.forEach(p),c.forEach(p),a.forEach(p),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-100 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(i,a){B(i,e,a),k(e,t),k(t,n),k(n,o);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(o,null)},p(i,a){if(a&23){s=mt(i[0]);let c;for(c=0;c<s.length;c+=1){const u=ur(i,s,c);r[c]?r[c].p(u,a):(r[c]=dr(u),r[c].c(),r[c].m(o,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(i){i&&p(e),bn(r,i)}}}function dr(l){let e,t,n,o='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"></path></svg>',s,r=l[12]+"",i,a,c,u=l[2].t("Reference database table")+"",f,d,h,_,b;function v(){return l[9](l[12])}function g(){return l[10](l[14])}return{c(){e=N("button"),t=N("div"),n=N("div"),n.innerHTML=o,s=ke(`
								@`),i=ke(r),a=Q(),c=N("div"),f=ke(u),d=Q(),this.h()},l(w){e=z(w,"BUTTON",{class:!0,type:!0});var y=D(e);t=z(y,"DIV",{class:!0});var E=D(t);n=z(E,"DIV",{class:!0,"data-svelte-h":!0}),at(n)!=="svelte-ditnfh"&&(n.innerHTML=o),s=ye(E,`
								@`),i=ye(E,r),E.forEach(p),a=J(y),c=z(y,"DIV",{class:!0});var M=D(c);f=ye(M,u),M.forEach(p),d=J(y),y.forEach(p),this.h()},h(){m(n,"class","flex items-center mr-2"),m(t,"class","flex font-medium text-black dark:text-gray-100 line-clamp-1"),m(c,"class","text-xs text-gray-500 ml-7"),m(e,"class",h="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[1]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),m(e,"type","button")},m(w,y){B(w,e,y),k(e,t),k(t,n),k(t,s),k(t,i),k(e,a),k(e,c),k(c,f),k(e,d),_||(b=[De(e,"click",v),De(e,"mousemove",g)],_=!0)},p(w,y){l=w,y&1&&r!==(r=l[12]+"")&&Ce(i,r),y&4&&u!==(u=l[2].t("Reference database table")+"")&&Ce(f,u),y&2&&h!==(h="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[1]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&m(e,"class",h)},d(w){w&&p(e),_=!1,an(b)}}}function ld(l){let e,t=l[0].length>0&&fr(l);return{c(){t&&t.c(),e=Me()},l(n){t&&t.l(n),e=Me()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[0].length>0?t?t.p(n,o):(t=fr(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&p(e),t&&t.d(n)}}}function od(l,e,t){let n;const o=Nt("i18n");se(l,o,b=>t(2,n=b));const s=rn();let{command:r=""}=e,{dbReferences:i=["T0"]}=e,a=0,c=[];const u=()=>{t(1,a=Math.max(0,a-1))},f=()=>{t(1,a=Math.min(a+1,c.length-1))},d=async b=>{s("select",b)};hn(async()=>{await xe();const b=document.getElementById("chat-input");b&&(await xe(),b==null||b.focus())});const h=b=>{d(b)},_=b=>{t(1,a=b)};return l.$$set=b=>{"command"in b&&t(5,r=b.command),"dbReferences"in b&&t(6,i=b.dbReferences)},l.$$.update=()=>{if(l.$$.dirty&97){const b=r.slice(1).toLowerCase();b?t(0,c=i.filter(v=>v.toLowerCase().includes(b))):t(0,c=[...i]),c.length===0&&b&&/^\d+$/.test(b)&&t(0,c=[`T${b}`]),t(1,a=0)}},[c,a,n,o,d,r,i,u,f,h,_]}class sd extends Oe{constructor(e){super(),He(this,e,od,ld,Le,{command:5,dbReferences:6,selectUp:7,selectDown:8})}get selectUp(){return this.$$.ctx[7]}get selectDown(){return this.$$.ctx[8]}}function hr(l){let e,t,n,o;const s=[id,rd],r=[];function i(a,c){return a[5]?1:0}return e=i(l),t=r[e]=s[e](l),{c(){t.c(),n=Me()},l(a){t.l(a),n=Me()},m(a,c){r[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=i(a),e===u?r[e].p(a,c):(Te(),O(r[u],1,1,()=>{r[u]=null}),Ve(),t=r[e],t?t.p(a,c):(t=r[e]=s[e](a),t.c()),T(t,1),t.m(n.parentNode,n))},i(a){o||(T(t),o=!0)},o(a){O(t),o=!1},d(a){a&&p(n),r[e].d(a)}}}function rd(l){let e,t,n,o,s;return o=new No({}),{c(){e=N("div"),t=N("div"),n=N("div"),te(o.$$.fragment),this.h()},l(r){e=z(r,"DIV",{id:!0,class:!0});var i=D(e);t=z(i,"DIV",{class:!0});var a=D(t);n=z(a,"DIV",{class:!0});var c=D(n);ne(o.$$.fragment,c),c.forEach(p),a.forEach(p),i.forEach(p),this.h()},h(){m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-100 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(r,i){B(r,e,i),k(e,t),k(t,n),ee(o,n,null),s=!0},p:Ie,i(r){s||(T(o.$$.fragment,r),s=!0)},o(r){O(o.$$.fragment,r),s=!1},d(r){r&&p(e),$(o)}}}function id(l){let e,t,n,o,s,r,i;const a=[ud,cd,ad],c=[];function u(f,d){var h,_,b;return d&8&&(e=null),d&8&&(t=null),d&8&&(n=null),e==null&&(e=((h=f[3])==null?void 0:h.charAt(0))==="/"),e?0:(t==null&&(t=!!(((_=f[3])==null?void 0:_.charAt(0))==="#"&&f[3].startsWith("#")&&!f[3].includes("# ")||f[3].slice(0,2)==="\\#"&&f[3].startsWith("#")&&!f[3].includes("# "))),t?1:(n==null&&(n=((b=f[3])==null?void 0:b.charAt(0))==="@"),n?2:-1))}return~(o=u(l,-1))&&(s=c[o]=a[o](l)),{c(){s&&s.c(),r=Me()},l(f){s&&s.l(f),r=Me()},m(f,d){~o&&c[o].m(f,d),B(f,r,d),i=!0},p(f,d){let h=o;o=u(f,d),o===h?~o&&c[o].p(f,d):(s&&(Te(),O(c[h],1,1,()=>{c[h]=null}),Ve()),~o?(s=c[o],s?s.p(f,d):(s=c[o]=a[o](f),s.c()),T(s,1),s.m(r.parentNode,r)):s=null)},i(f){i||(T(s),i=!0)},o(f){O(s),i=!1},d(f){f&&p(r),~o&&c[o].d(f)}}}function ad(l){let e,t,n,o;const s=[dd,fd],r=[];function i(a,c){return a[7]?0:1}return e=i(l),t=r[e]=s[e](l),{c(){t.c(),n=Me()},l(a){t.l(a),n=Me()},m(a,c){r[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=i(a),e===u?r[e].p(a,c):(Te(),O(r[u],1,1,()=>{r[u]=null}),Ve(),t=r[e],t?t.p(a,c):(t=r[e]=s[e](a),t.c()),T(t,1),t.m(n.parentNode,n))},i(a){o||(T(t),o=!0)},o(a){O(t),o=!1},d(a){a&&p(n),r[e].d(a)}}}function cd(l){let e,t,n;function o(r){l[16](r)}let s={command:l[3].includes("\\#")?l[3].slice(2):l[3]};return l[0]!==void 0&&(s.prompt=l[0]),e=new xf({props:s}),l[15](e),Pe.push(()=>Ge(e,"prompt",o)),e.$on("youtube",l[17]),e.$on("url",l[18]),e.$on("select",l[19]),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,i){ee(e,r,i),n=!0},p(r,i){const a={};i&8&&(a.command=r[3].includes("\\#")?r[3].slice(2):r[3]),!t&&i&1&&(t=!0,a.prompt=r[0],Ke(()=>t=!1)),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){l[15](null),$(e,r)}}}function ud(l){let e,t,n,o;function s(a){l[13](a)}function r(a){l[14](a)}let i={command:l[3]};return l[0]!==void 0&&(i.prompt=l[0]),l[1]!==void 0&&(i.files=l[1]),e=new Wf({props:i}),l[12](e),Pe.push(()=>Ge(e,"prompt",s)),Pe.push(()=>Ge(e,"files",r)),{c(){te(e.$$.fragment)},l(a){ne(e.$$.fragment,a)},m(a,c){ee(e,a,c),o=!0},p(a,c){const u={};c&8&&(u.command=a[3]),!t&&c&1&&(t=!0,u.prompt=a[0],Ke(()=>t=!1)),!n&&c&2&&(n=!0,u.files=a[1],Ke(()=>n=!1)),e.$set(u)},i(a){o||(T(e.$$.fragment,a),o=!0)},o(a){O(e.$$.fragment,a),o=!1},d(a){l[12](null),$(e,a)}}}function fd(l){let e,t,n={command:l[3]};return e=new nd({props:n}),l[22](e),e.$on("select",l[23]),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,s){ee(e,o,s),t=!0},p(o,s){const r={};s&8&&(r.command=o[3]),e.$set(r)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){O(e.$$.fragment,o),t=!1},d(o){l[22](null),$(e,o)}}}function dd(l){let e,t,n={command:l[3],dbReferences:l[2]};return e=new sd({props:n}),l[20](e),e.$on("select",l[21]),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,s){ee(e,o,s),t=!0},p(o,s){const r={};s&8&&(r.command=o[3]),s&4&&(r.dbReferences=o[2]),e.$set(r)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){O(e.$$.fragment,o),t=!1},d(o){l[20](null),$(e,o)}}}function hd(l){let e,t,n=l[4]&&hr(l);return{c(){n&&n.c(),e=Me()},l(o){n&&n.l(o),e=Me()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,[s]){o[4]?n?(n.p(o,s),s&16&&T(n,1)):(n=hr(o),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(Te(),O(n,1,1,()=>{n=null}),Ve())},i(o){t||(T(n),t=!0)},o(o){O(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function md(l,e,t){const n=rn();let{prompt:o=""}=e,{files:s=[]}=e,{history:r=null}=e,i=!1,a=null,c=!1,u=[];const f=()=>{if(!r||!r.messages)return[];const U=[];let C=-1;if(Object.values(r.messages).forEach(I=>{if(I.role==="assistant"&&I.content)try{const P=I.content.match(/Generated Table T(\d+)/i);if(P){const K=parseInt(P[1]);K>C&&(C=K)}}catch(P){console.log("Error parsing message content:",P)}}),C>=0)for(let I=0;I<=C;I++)U.push(`T${I}`);else U.push("T0");return U},d=()=>{a==null||a.selectUp()},h=()=>{a==null||a.selectDown()};let _="",b=!1;const v=async()=>{t(5,i=!0),await Promise.all([(async()=>{ma.set(await eu(localStorage.token))})(),(async()=>{ga.set(await tu(localStorage.token))})()]),t(5,i=!1)};function g(U){Pe[U?"unshift":"push"](()=>{a=U,t(6,a)})}function w(U){o=U,t(0,o)}function y(U){s=U,t(1,s)}function E(U){Pe[U?"unshift":"push"](()=>{a=U,t(6,a)})}function M(U){o=U,t(0,o)}const S=U=>{console.log(U),n("upload",{type:"youtube",data:U.detail})},V=U=>{console.log(U),n("upload",{type:"web",data:U.detail})},A=U=>{console.log(U),!s.find(C=>C.id===U.detail.id)&&(t(1,s=[...s,{...U.detail,status:"processed"}]),n("select"))};function H(U){Pe[U?"unshift":"push"](()=>{a=U,t(6,a)})}const L=U=>{t(0,o=Ul(o,_)),t(0,o+=`@${U.detail}`),n("select")};function W(U){Pe[U?"unshift":"push"](()=>{a=U,t(6,a)})}const j=U=>{t(0,o=Ul(o,_)),n("select",{type:"model",data:U.detail})};return l.$$set=U=>{"prompt"in U&&t(0,o=U.prompt),"files"in U&&t(1,s=U.files),"history"in U&&t(9,r=U.history)},l.$$.update=()=>{var U,C;l.$$.dirty&1&&t(3,_=((C=(U=o==null?void 0:o.split(`
`).pop())==null?void 0:U.split(" "))==null?void 0:C.pop())??""),l.$$.dirty&8&&t(4,b=["/","#","@"].includes(_==null?void 0:_.charAt(0))||_.slice(0,2)==="\\#"),l.$$.dirty&16&&b&&v(),l.$$.dirty&28&&b&&(_==null?void 0:_.charAt(0))==="@"&&(t(2,u=f()),t(7,c=u.length>0))},[o,s,u,_,b,i,a,c,n,r,d,h,g,w,y,E,M,S,V,A,H,L,W,j]}class gd extends Oe{constructor(e){super(),He(this,e,md,hd,Le,{prompt:0,files:1,history:9,selectUp:10,selectDown:11})}get selectUp(){return this.$$.ctx[10]}get selectDown(){return this.$$.ctx[11]}}function pd(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{class:!0,"stroke-width":!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var o=D(e);t=be(o,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke","currentColor"),m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"stroke-width","2"),m(t,"d","m3 16 5-7 6 6.5m6.5 2.5L16 13l-4.286 6M14 10h.01M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"),m(e,"class",l[0]),m(e,"stroke-width",l[1]),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24")},m(n,o){B(n,e,o),k(e,t)},p(n,[o]){o&1&&m(e,"class",n[0]),o&2&&m(e,"stroke-width",n[1])},i:Ie,o:Ie,d(n){n&&p(e)}}}function _d(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class bd extends Oe{constructor(e){super(),He(this,e,_d,pd,Le,{className:0,strokeWidth:1})}}function mr(l,e,t){const n=l.slice();return n[85]=e[t],n[87]=t,n}function gr(l,e,t){const n=l.slice();return n[88]=e[t],n[90]=t,n}function pr(l){var K,X;let e,t,n,o,s,r,i,a,c,u,f,d,h,_,b,v,g,w,y,E,M,S,V,A,H=l[6]===!1&&((K=l[12])==null?void 0:K.currentId)&&_r(l),L=(l[0]!==void 0||l[3].length>0||l[5]||(((X=l[25])==null?void 0:X.webSearch)??!1)==="always"||l[4]||l[7])&&br(l);function W(F){l[42](F)}function j(F){l[43](F)}let U={history:l[12]};l[1]!==void 0&&(U.prompt=l[1]),l[2]!==void 0&&(U.files=l[2]),a=new gd({props:U}),l[41](a),Pe.push(()=>Ge(a,"prompt",W)),Pe.push(()=>Ge(a,"files",j)),a.$on("upload",l[44]),a.$on("select",l[45]);const C=[yd,wd],I=[];function P(F,Z){return F[17]?0:1}return w=P(l),y=I[w]=C[w](l),{c(){e=N("div"),t=N("div"),n=N("div"),o=N("div"),H&&H.c(),s=Q(),r=N("div"),L&&L.c(),i=Q(),te(a.$$.fragment),d=Q(),h=N("div"),_=N("div"),b=N("div"),v=N("input"),g=Q(),y.c(),this.h()},l(F){e=z(F,"DIV",{class:!0});var Z=D(e);t=z(Z,"DIV",{class:!0});var ae=D(t);n=z(ae,"DIV",{class:!0});var x=D(n);o=z(x,"DIV",{class:!0});var G=D(o);H&&H.l(G),G.forEach(p),s=J(x),r=z(x,"DIV",{class:!0});var oe=D(r);L&&L.l(oe),i=J(oe),ne(a.$$.fragment,oe),oe.forEach(p),x.forEach(p),ae.forEach(p),d=J(Z),h=z(Z,"DIV",{class:!0});var de=D(h);_=z(de,"DIV",{class:!0});var Se=D(_);b=z(Se,"DIV",{class:!0});var ie=D(b);v=z(ie,"INPUT",{type:!0}),g=J(ie),y.l(ie),ie.forEach(p),Se.forEach(p),de.forEach(p),Z.forEach(p),this.h()},h(){var F,Z;m(o,"class","relative"),m(r,"class","w-full relative"),m(n,"class",f="flex flex-col px-3 "+(((F=l[25])==null?void 0:F.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"),m(t,"class","mx-auto inset-x-0 bg-transparent flex justify-center"),m(v,"type","file"),v.hidden=!0,v.multiple=!0,m(b,"class",""),m(_,"class",E=(((Z=l[25])==null?void 0:Z.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"),m(h,"class",M=l[8]?"bg-transparent":"bg-white dark:bg-gray-900"),m(e,"class","w-full font-primary")},m(F,Z){B(F,e,Z),k(e,t),k(t,n),k(n,o),H&&H.m(o,null),k(n,s),k(n,r),L&&L.m(r,null),k(r,i),ee(a,r,null),k(e,d),k(e,h),k(h,_),k(_,b),k(b,v),l[46](v),k(b,g),I[w].m(b,null),S=!0,V||(A=[De(v,"change",l[47]),De(v,"change",l[48])],V=!0)},p(F,Z){var G,oe,de,Se;F[6]===!1&&((G=F[12])!=null&&G.currentId)?H?H.p(F,Z):(H=_r(F),H.c(),H.m(o,null)):H&&(H.d(1),H=null),F[0]!==void 0||F[3].length>0||F[5]||(((oe=F[25])==null?void 0:oe.webSearch)??!1)==="always"||F[4]||F[7]?L?(L.p(F,Z),Z[0]&33554617&&T(L,1)):(L=br(F),L.c(),T(L,1),L.m(r,i)):L&&(Te(),O(L,1,1,()=>{L=null}),Ve());const ae={};Z[0]&4096&&(ae.history=F[12]),!c&&Z[0]&2&&(c=!0,ae.prompt=F[1],Ke(()=>c=!1)),!u&&Z[0]&4&&(u=!0,ae.files=F[2],Ke(()=>u=!1)),a.$set(ae),(!S||Z[0]&33554432&&f!==(f="flex flex-col px-3 "+(((de=F[25])==null?void 0:de.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"))&&m(n,"class",f);let x=w;w=P(F),w===x?I[w].p(F,Z):(Te(),O(I[x],1,1,()=>{I[x]=null}),Ve(),y=I[w],y?y.p(F,Z):(y=I[w]=C[w](F),y.c()),T(y,1),y.m(b,null)),(!S||Z[0]&33554432&&E!==(E=(((Se=F[25])==null?void 0:Se.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"))&&m(_,"class",E),(!S||Z[0]&256&&M!==(M=F[8]?"bg-transparent":"bg-white dark:bg-gray-900"))&&m(h,"class",M)},i(F){S||(T(L),T(a.$$.fragment,F),T(y),S=!0)},o(F){O(L),O(a.$$.fragment,F),O(y),S=!1},d(F){F&&p(e),H&&H.d(),L&&L.d(),l[41](null),$(a),l[46](null),I[w].d(),V=!1,an(A)}}}function _r(l){let e,t,n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',o,s;return{c(){e=N("div"),t=N("button"),t.innerHTML=n,this.h()},l(r){e=z(r,"DIV",{class:!0});var i=D(e);t=z(i,"BUTTON",{class:!0,"data-svelte-h":!0}),at(t)!=="svelte-h8r9o0"&&(t.innerHTML=n),i.forEach(p),this.h()},h(){m(t,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto"),m(e,"class","absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none")},m(r,i){B(r,e,i),k(e,t),o||(s=De(t,"click",l[37]),o=!0)},p:Ie,d(r){r&&p(e),o=!1,s()}}}function br(l){var d,h,_;let e,t,n,o,s,r,i=l[3].length>0&&vr(l),a=(l[5]||(((h=(d=l[26])==null?void 0:d.features)==null?void 0:h.enable_web_search)&&(((_=l[25])==null?void 0:_.webSearch)??!1))==="always")&&kr(l),c=l[4]&&Er(l),u=l[7]&&Ir(l),f=l[0]!==void 0&&Sr(l);return{c(){e=N("div"),i&&i.c(),t=Q(),a&&a.c(),n=Q(),c&&c.c(),o=Q(),u&&u.c(),s=Q(),f&&f.c(),this.h()},l(b){e=z(b,"DIV",{class:!0});var v=D(e);i&&i.l(v),t=J(v),a&&a.l(v),n=J(v),c&&c.l(v),o=J(v),u&&u.l(v),s=J(v),f&&f.l(v),v.forEach(p),this.h()},h(){m(e,"class","px-3 pb-0.5 pt-1.5 text-left w-full flex flex-col absolute bottom-0 left-0 right-0 bg-linear-to-t from-white dark:from-gray-900 z-10")},m(b,v){B(b,e,v),i&&i.m(e,null),k(e,t),a&&a.m(e,null),k(e,n),c&&c.m(e,null),k(e,o),u&&u.m(e,null),k(e,s),f&&f.m(e,null),r=!0},p(b,v){var g,w,y;b[3].length>0?i?(i.p(b,v),v[0]&8&&T(i,1)):(i=vr(b),i.c(),T(i,1),i.m(e,t)):i&&(Te(),O(i,1,1,()=>{i=null}),Ve()),b[5]||(((w=(g=b[26])==null?void 0:g.features)==null?void 0:w.enable_web_search)&&(((y=b[25])==null?void 0:y.webSearch)??!1))==="always"?a?a.p(b,v):(a=kr(b),a.c(),a.m(e,n)):a&&(a.d(1),a=null),b[4]?c?c.p(b,v):(c=Er(b),c.c(),c.m(e,o)):c&&(c.d(1),c=null),b[7]?u?u.p(b,v):(u=Ir(b),u.c(),u.m(e,s)):u&&(u.d(1),u=null),b[0]!==void 0?f?(f.p(b,v),v[0]&1&&T(f,1)):(f=Sr(b),f.c(),T(f,1),f.m(e,null)):f&&(Te(),O(f,1,1,()=>{f=null}),Ve())},i(b){r||(T(i),T(f),r=!0)},o(b){O(i),O(f),r=!1},d(b){b&&p(e),i&&i.d(),a&&a.d(),c&&c.d(),u&&u.d(),f&&f.d()}}}function vr(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-yellow-500"></span></span>',s,r,i=[],a=new Map,c,u=mt(l[3].map(l[38]));const f=d=>d[90];for(let d=0;d<u.length;d+=1){let h=gr(l,u,d),_=f(h);a.set(_,i[d]=yr(_,h))}return{c(){e=N("div"),t=N("div"),n=N("div"),n.innerHTML=o,s=Q(),r=N("div");for(let d=0;d<i.length;d+=1)i[d].c();this.h()},l(d){e=z(d,"DIV",{class:!0});var h=D(e);t=z(h,"DIV",{class:!0});var _=D(t);n=z(_,"DIV",{class:!0,"data-svelte-h":!0}),at(n)!=="svelte-1exsj7u"&&(n.innerHTML=o),s=J(_),r=z(_,"DIV",{class:!0});var b=D(r);for(let v=0;v<i.length;v+=1)i[v].l(b);b.forEach(p),_.forEach(p),h.forEach(p),this.h()},h(){m(n,"class","pl-1"),m(r,"class","text-ellipsis line-clamp-1 flex"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(d,h){B(d,e,h),k(e,t),k(t,n),k(t,s),k(t,r);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(r,null);c=!0},p(d,h){h[0]&134217736&&(u=mt(d[3].map(d[38])),Te(),i=Do(i,h,f,1,d,u,a,r,Co,yr,null,gr),Ve())},i(d){if(!c){for(let h=0;h<u.length;h+=1)T(i[h]);c=!0}},o(d){for(let h=0;h<i.length;h+=1)O(i[h]);c=!1},d(d){d&&p(e);for(let h=0;h<i.length;h+=1)i[h].d()}}}function vd(l){let e=l[88].name+"",t;return{c(){t=ke(e)},l(n){t=ye(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&134217736&&e!==(e=n[88].name+"")&&Ce(t,e)},d(n){n&&p(t)}}}function wr(l){let e,t=", ";return{c(){e=N("span"),e.textContent=t},l(n){e=z(n,"SPAN",{"data-svelte-h":!0}),at(e)!=="svelte-1okzske"&&(e.textContent=t)},m(n,o){B(n,e,o)},d(n){n&&p(e)}}}function yr(l,e){var a,c;let t,n,o,s,r;n=new Zt({props:{content:((c=(a=e[88])==null?void 0:a.meta)==null?void 0:c.description)??"",className:" "+(e[90]!==0?"pl-0.5":"")+" shrink-0",placement:"top",$$slots:{default:[vd]},$$scope:{ctx:e}}});let i=e[90]!==e[3].length-1&&wr();return{key:l,first:null,c(){t=Me(),te(n.$$.fragment),o=Q(),i&&i.c(),s=Me(),this.h()},l(u){t=Me(),ne(n.$$.fragment,u),o=J(u),i&&i.l(u),s=Me(),this.h()},h(){this.first=t},m(u,f){B(u,t,f),ee(n,u,f),B(u,o,f),i&&i.m(u,f),B(u,s,f),r=!0},p(u,f){var h,_;e=u;const d={};f[0]&134217736&&(d.content=((_=(h=e[88])==null?void 0:h.meta)==null?void 0:_.description)??""),f[0]&134217736&&(d.className=" "+(e[90]!==0?"pl-0.5":"")+" shrink-0"),f[0]&134217736|f[2]&536870912&&(d.$$scope={dirty:f,ctx:e}),n.$set(d),e[90]!==e[3].length-1?i||(i=wr(),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},i(u){r||(T(n.$$.fragment,u),r=!0)},o(u){O(n.$$.fragment,u),r=!1},d(u){u&&(p(t),p(o),p(s)),$(n,u),i&&i.d(u)}}}function kr(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-blue-500"></span></span>',s,r,i=l[24].t("Search the internet")+"",a;return{c(){e=N("div"),t=N("div"),n=N("div"),n.innerHTML=o,s=Q(),r=N("div"),a=ke(i),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=D(e);t=z(u,"DIV",{class:!0});var f=D(t);n=z(f,"DIV",{class:!0,"data-svelte-h":!0}),at(n)!=="svelte-19sghfm"&&(n.innerHTML=o),s=J(f),r=z(f,"DIV",{class:!0});var d=D(r);a=ye(d,i),d.forEach(p),f.forEach(p),u.forEach(p),this.h()},h(){m(n,"class","pl-1"),m(r,"class","translate-y-[0.5px]"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){B(c,e,u),k(e,t),k(t,n),k(t,s),k(t,r),k(r,a)},p(c,u){u[0]&16777216&&i!==(i=c[24].t("Search the internet")+"")&&Ce(a,i)},d(c){c&&p(e)}}}function Er(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-teal-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-teal-500"></span></span>',s,r,i=l[24].t("Generate an image")+"",a;return{c(){e=N("div"),t=N("div"),n=N("div"),n.innerHTML=o,s=Q(),r=N("div"),a=ke(i),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=D(e);t=z(u,"DIV",{class:!0});var f=D(t);n=z(f,"DIV",{class:!0,"data-svelte-h":!0}),at(n)!=="svelte-kf1e3u"&&(n.innerHTML=o),s=J(f),r=z(f,"DIV",{class:!0});var d=D(r);a=ye(d,i),d.forEach(p),f.forEach(p),u.forEach(p),this.h()},h(){m(n,"class","pl-1"),m(r,"class","translate-y-[0.5px]"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){B(c,e,u),k(e,t),k(t,n),k(t,s),k(t,r),k(r,a)},p(c,u){u[0]&16777216&&i!==(i=c[24].t("Generate an image")+"")&&Ce(a,i)},d(c){c&&p(e)}}}function Ir(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>',s,r,i=l[24].t("Execute code for analysis")+"",a;return{c(){e=N("div"),t=N("div"),n=N("div"),n.innerHTML=o,s=Q(),r=N("div"),a=ke(i),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=D(e);t=z(u,"DIV",{class:!0});var f=D(t);n=z(f,"DIV",{class:!0,"data-svelte-h":!0}),at(n)!=="svelte-12j611w"&&(n.innerHTML=o),s=J(f),r=z(f,"DIV",{class:!0});var d=D(r);a=ye(d,i),d.forEach(p),f.forEach(p),u.forEach(p),this.h()},h(){m(n,"class","pl-1"),m(r,"class","translate-y-[0.5px]"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){B(c,e,u),k(e,t),k(t,n),k(t,s),k(t,r),k(r,a)},p(c,u){u[0]&16777216&&i!==(i=c[24].t("Execute code for analysis")+"")&&Ce(a,i)},d(c){c&&p(e)}}}function Sr(l){let e,t,n,o,s,r,i,a,c=l[0].name+"",u,f,d,h,_,b,v,g;return _=new Po({}),{c(){e=N("div"),t=N("div"),n=N("img"),s=Q(),r=N("div"),i=ke("Talking to "),a=N("span"),u=ke(c),f=Q(),d=N("div"),h=N("button"),te(_.$$.fragment),this.h()},l(w){e=z(w,"DIV",{class:!0});var y=D(e);t=z(y,"DIV",{class:!0});var E=D(t);n=z(E,"IMG",{crossorigin:!0,alt:!0,class:!0,src:!0}),s=J(E),r=z(E,"DIV",{class:!0});var M=D(r);i=ye(M,"Talking to "),a=z(M,"SPAN",{class:!0});var S=D(a);u=ye(S,c),S.forEach(p),M.forEach(p),E.forEach(p),f=J(y),d=z(y,"DIV",{});var V=D(d);h=z(V,"BUTTON",{class:!0});var A=D(h);ne(_.$$.fragment,A),A.forEach(p),V.forEach(p),y.forEach(p),this.h()},h(){var w,y,E;m(n,"crossorigin","anonymous"),m(n,"alt","model profile"),m(n,"class","size-3.5 max-w-[28px] object-cover rounded-full"),jn(n.src,o=((E=(y=(w=l[14].find(l[39]))==null?void 0:w.info)==null?void 0:y.meta)==null?void 0:E.profile_image_url)??(l[24].language==="dg-DG"?"/doge.png":"static/favicon.png"))||m(n,"src",o),m(a,"class","font-medium"),m(r,"class","translate-y-[0.5px]"),m(t,"class","pl-[1px] flex items-center gap-2 text-sm dark:text-gray-500"),m(h,"class","flex items-center dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(w,y){B(w,e,y),k(e,t),k(t,n),k(t,s),k(t,r),k(r,i),k(r,a),k(a,u),k(e,f),k(e,d),k(d,h),ee(_,h,null),b=!0,v||(g=De(h,"click",l[40]),v=!0)},p(w,y){var E,M,S;(!b||y[0]&16793601&&!jn(n.src,o=((S=(M=(E=w[14].find(w[39]))==null?void 0:E.info)==null?void 0:M.meta)==null?void 0:S.profile_image_url)??(w[24].language==="dg-DG"?"/doge.png":"static/favicon.png")))&&m(n,"src",o),(!b||y[0]&1)&&c!==(c=w[0].name+"")&&Ce(u,c)},i(w){b||(T(_.$$.fragment,w),b=!0)},o(w){O(_.$$.fragment,w),b=!1},d(w){w&&p(e),$(_),v=!1,g()}}}function wd(l){let e,t,n,o,s,r,i,a,c,u,f,d,h,_,b,v,g,w,y,E,M,S=l[2].length>0&&Dr(l);const V=[Cd,Dd],A=[];function H(P,K){var X;return((X=P[25])==null?void 0:X.richTextInput)??!0?0:1}s=H(l),r=A[s]=V[s](l);function L(P){l[73](P)}let W={screenCaptureHandler:l[33],inputFilesHandler:l[35],uploadFilesHandler:l[69],uploadGoogleDriveHandler:l[70],uploadOneDriveHandler:l[71],onClose:l[72],$$slots:{default:[Md]},$$scope:{ctx:l}};l[3]!==void 0&&(W.selectedToolIds=l[3]),u=new Bf({props:W}),Pe.push(()=>Ge(u,"selectedToolIds",L));let j=l[29]&&Tr(l);const U=[Nd,zd],C=[];function I(P,K){var X;return!P[12].currentId||((X=P[12].messages[P[12].currentId])==null?void 0:X.done)==!0?0:1}return v=I(l),g=C[v]=U[v](l),{c(){e=N("form"),t=N("div"),S&&S.c(),n=Q(),o=N("div"),r.c(),i=Q(),a=N("div"),c=N("div"),te(u.$$.fragment),d=Q(),h=N("div"),j&&j.c(),_=Q(),b=N("div"),g.c(),this.h()},l(P){e=z(P,"FORM",{class:!0});var K=D(e);t=z(K,"DIV",{class:!0,dir:!0});var X=D(t);S&&S.l(X),n=J(X),o=z(X,"DIV",{class:!0});var F=D(o);r.l(F),F.forEach(p),i=J(X),a=z(X,"DIV",{class:!0});var Z=D(a);c=z(Z,"DIV",{class:!0});var ae=D(c);ne(u.$$.fragment,ae),d=J(ae),h=z(ae,"DIV",{class:!0});var x=D(h);j&&j.l(x),x.forEach(p),ae.forEach(p),_=J(Z),b=z(Z,"DIV",{class:!0});var G=D(b);g.l(G),G.forEach(p),Z.forEach(p),X.forEach(p),K.forEach(p),this.h()},h(){var P;m(o,"class","px-2.5"),m(h,"class","flex gap-0.5 items-center overflow-x-auto scrollbar-none flex-1"),m(c,"class","ml-1 self-end gap-0.5 flex items-center flex-1 max-w-[80%]"),m(b,"class","self-end flex space-x-1 mr-1 shrink-0"),m(a,"class","flex justify-between mt-1.5 mb-2.5 mx-0.5 max-w-full"),m(t,"class","flex-1 flex flex-col relative w-full rounded-3xl px-1 bg-gray-600/5 dark:bg-gray-400/5 dark:text-gray-100"),m(t,"dir",w=((P=l[25])==null?void 0:P.chatDirection)??"LTR"),m(e,"class","w-full flex gap-1.5")},m(P,K){B(P,e,K),k(e,t),S&&S.m(t,null),k(t,n),k(t,o),A[s].m(o,null),k(t,i),k(t,a),k(a,c),ee(u,c,null),k(c,d),k(c,h),j&&j.m(h,null),k(a,_),k(a,b),C[v].m(b,null),y=!0,E||(M=De(e,"submit",So(l[78])),E=!0)},p(P,K){var ae;P[2].length>0?S?(S.p(P,K),K[0]&4&&T(S,1)):(S=Dr(P),S.c(),T(S,1),S.m(t,n)):S&&(Te(),O(S,1,1,()=>{S=null}),Ve());let X=s;s=H(P),s===X?A[s].p(P,K):(Te(),O(A[X],1,1,()=>{A[X]=null}),Ve(),r=A[s],r?r.p(P,K):(r=A[s]=V[s](P),r.c()),T(r,1),r.m(o,null));const F={};K[0]&524288&&(F.uploadFilesHandler=P[69]),K[0]&16777216&&(F.uploadGoogleDriveHandler=P[70]),K[2]&536870912&&(F.$$scope={dirty:K,ctx:P}),!f&&K[0]&8&&(f=!0,F.selectedToolIds=P[3],Ke(()=>f=!1)),u.$set(F),P[29]?j?(j.p(P,K),K[0]&536870912&&T(j,1)):(j=Tr(P),j.c(),T(j,1),j.m(h,null)):j&&(Te(),O(j,1,1,()=>{j=null}),Ve());let Z=v;v=I(P),v===Z?C[v].p(P,K):(Te(),O(C[Z],1,1,()=>{C[Z]=null}),Ve(),g=C[v],g?g.p(P,K):(g=C[v]=U[v](P),g.c()),T(g,1),g.m(b,null)),(!y||K[0]&33554432&&w!==(w=((ae=P[25])==null?void 0:ae.chatDirection)??"LTR"))&&m(t,"dir",w)},i(P){y||(T(S),T(r),T(u.$$.fragment,P),T(j),T(g),y=!0)},o(P){O(S),O(r),O(u.$$.fragment,P),O(j),O(g),y=!1},d(P){P&&p(e),S&&S.d(),A[s].d(),$(u),j&&j.d(),C[v].d(),E=!1,M()}}}function yd(l){let e,t,n;function o(r){l[49](r)}let s={};return l[17]!==void 0&&(s.recording=l[17]),e=new xc({props:s}),Pe.push(()=>Ge(e,"recording",o)),e.$on("cancel",l[50]),e.$on("confirm",l[51]),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,i){ee(e,r,i),n=!0},p(r,i){const a={};!t&&i[0]&131072&&(t=!0,a.recording=r[17],Ke(()=>t=!1)),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Dr(l){let e,t,n=mt(l[2]),o=[];for(let r=0;r<n.length;r+=1)o[r]=Mr(mr(l,n,r));const s=r=>O(o[r],1,1,()=>{o[r]=null});return{c(){e=N("div");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=z(r,"DIV",{class:!0});var i=D(e);for(let a=0;a<o.length;a+=1)o[a].l(i);i.forEach(p),this.h()},h(){m(e,"class","mx-2 mt-2.5 -mb-1 flex items-center flex-wrap gap-2")},m(r,i){B(r,e,i);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t=!0},p(r,i){if(i[0]&25167877){n=mt(r[2]);let a;for(a=0;a<n.length;a+=1){const c=mr(r,n,a);o[a]?(o[a].p(c,i),T(o[a],1)):(o[a]=Mr(c),o[a].c(),T(o[a],1),o[a].m(e,null))}for(Te(),a=n.length;a<o.length;a+=1)s(a);Ve()}},i(r){if(!t){for(let i=0;i<n.length;i+=1)T(o[i]);t=!0}},o(r){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)O(o[i]);t=!1},d(r){r&&p(e),bn(o,r)}}}function kd(l){var s;let e,t;function n(){return l[55](l[85],l[87])}function o(){return l[56](l[85])}return e=new as({props:{item:l[85],name:l[85].name,type:l[85].type,size:(s=l[85])==null?void 0:s.size,loading:l[85].status==="uploading",dismissible:!0,edit:!0}}),e.$on("dismiss",n),e.$on("click",o),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,i){ee(e,r,i),t=!0},p(r,i){var c;l=r;const a={};i[0]&4&&(a.item=l[85]),i[0]&4&&(a.name=l[85].name),i[0]&4&&(a.type=l[85].type),i[0]&4&&(a.size=(c=l[85])==null?void 0:c.size),i[0]&4&&(a.loading=l[85].status==="uploading"),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function Ed(l){var o;let e,t;function n(){return l[54](l[85],l[87])}return e=new as({props:{item:l[85],name:l[85].name,type:"excel",size:(o=l[85])==null?void 0:o.size,loading:l[85].status==="uploading",dismissible:!0,edit:!0}}),e.$on("dismiss",n),{c(){te(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,r){ee(e,s,r),t=!0},p(s,r){var a;l=s;const i={};r[0]&4&&(i.item=l[85]),r[0]&4&&(i.name=l[85].name),r[0]&4&&(i.size=(a=l[85])==null?void 0:a.size),r[0]&4&&(i.loading=l[85].status==="uploading"),e.$set(i)},i(s){t||(T(e.$$.fragment,s),t=!0)},o(s){O(e.$$.fragment,s),t=!1},d(s){$(e,s)}}}function Id(l){let e,t,n,o,s,r,i,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,u,f,d;n=new ou({props:{src:l[85].url,alt:"input",imageClassName:" size-14 rounded-xl object-cover"}});let h=(l[0]?l[23].length===0:l[11].length!==l[23].length)&&Cr(l);function _(){return l[53](l[87])}return{c(){e=N("div"),t=N("div"),te(n.$$.fragment),o=Q(),h&&h.c(),s=Q(),r=N("div"),i=N("button"),i.innerHTML=a,c=Q(),this.h()},l(b){e=z(b,"DIV",{class:!0});var v=D(e);t=z(v,"DIV",{class:!0});var g=D(t);ne(n.$$.fragment,g),o=J(g),h&&h.l(g),g.forEach(p),s=J(v),r=z(v,"DIV",{class:!0});var w=D(r);i=z(w,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),at(i)!=="svelte-4ewxlv"&&(i.innerHTML=a),w.forEach(p),c=J(v),v.forEach(p),this.h()},h(){m(t,"class","relative flex items-center"),m(i,"class","bg-white text-black border border-white rounded-full group-hover:visible invisible transition"),m(i,"type","button"),m(r,"class","absolute -top-1 -right-1"),m(e,"class","relative group")},m(b,v){B(b,e,v),k(e,t),ee(n,t,null),k(t,o),h&&h.m(t,null),k(e,s),k(e,r),k(r,i),k(e,c),u=!0,f||(d=De(i,"click",_),f=!0)},p(b,v){l=b;const g={};v[0]&4&&(g.src=l[85].url),n.$set(g),(l[0]?l[23].length===0:l[11].length!==l[23].length)?h?(h.p(l,v),v[0]&8390657&&T(h,1)):(h=Cr(l),h.c(),T(h,1),h.m(t,null)):h&&(Te(),O(h,1,1,()=>{h=null}),Ve())},i(b){u||(T(n.$$.fragment,b),T(h),u=!0)},o(b){O(n.$$.fragment,b),O(h),u=!1},d(b){b&&p(e),$(n),h&&h.d(),f=!1,d()}}}function Cr(l){let e,t;return e=new Zt({props:{className:" absolute top-1 left-1",content:l[24].t("{{ models }}",{models:[...l[0]?[l[0]]:l[11]].filter(l[52]).join(", ")}),$$slots:{default:[Sd]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&25167873&&(s.content=n[24].t("{{ models }}",{models:[...n[0]?[n[0]]:n[11]].filter(n[52]).join(", ")})),o[2]&536870912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Sd(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=D(e);t=be(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class","size-4 fill-yellow-300")},m(n,o){B(n,e,o),k(e,t)},p:Ie,d(n){n&&p(e)}}}function Mr(l){let e,t,n,o,s;const r=[Id,Ed,kd],i=[];function a(c,u){return u[0]&4&&(e=null),c[85].type==="image"?0:(e==null&&(e=!!Bd(c[85])),e?1:2)}return t=a(l,[-1,-1,-1]),n=i[t]=r[t](l),{c(){n.c(),o=Me()},l(c){n.l(c),o=Me()},m(c,u){i[t].m(c,u),B(c,o,u),s=!0},p(c,u){let f=t;t=a(c,u),t===f?i[t].p(c,u):(Te(),O(i[f],1,1,()=>{i[f]=null}),Ve(),n=i[t],n?n.p(c,u):(n=i[t]=r[t](c),n.c()),T(n,1),n.m(o.parentNode,o))},i(c){s||(T(n),s=!0)},o(c){O(n),s=!1},d(c){c&&p(o),i[t].d(c)}}}function Dd(l){let e,t,n,o;return{c(){e=N("textarea"),this.h()},l(s){e=z(s,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),D(e).forEach(p),this.h()},h(){m(e,"id","chat-input"),m(e,"class","scrollbar-hidden bg-transparent dark:text-gray-100 outline-hidden w-full pt-3 px-1 resize-none"),m(e,"placeholder",t=l[13]?l[13]:l[24].t("Send a Message")),m(e,"rows","1")},m(s,r){B(s,e,r),l[62](e),kn(e,l[1]),n||(o=[De(e,"input",l[63]),De(e,"keypress",l[64]),De(e,"keydown",l[65]),De(e,"input",l[66]),De(e,"focus",l[67]),De(e,"paste",l[68])],n=!0)},p(s,r){r[0]&16785408&&t!==(t=s[13]?s[13]:s[24].t("Send a Message"))&&m(e,"placeholder",t),r[0]&2&&kn(e,s[1])},i:Ie,o:Ie,d(s){s&&p(e),l[62](null),n=!1,an(o)}}}function Cd(l){var i,a;let e,t,n,o;function s(c){l[59](c)}let r={id:"chat-input",messageInput:!0,shiftEnter:!l[28]||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),placeholder:l[13]?l[13]:l[24].t("Send a Message"),largeTextAsFile:((i=l[25])==null?void 0:i.largeTextAsFile)??!1,autocomplete:(a=l[26])==null?void 0:a.features.enable_autocomplete_generation,generateAutoCompletion:l[57]};return l[1]!==void 0&&(r.value=l[1]),t=new $c({props:r}),l[58](t),Pe.push(()=>Ge(t,"value",s)),t.$on("keydown",l[60]),t.$on("paste",l[61]),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=D(e);ne(t.$$.fragment,u),u.forEach(p),this.h()},h(){m(e,"class","scrollbar-hidden text-left bg-transparent dark:text-gray-100 outline-hidden w-full pt-3 px-1 resize-none h-fit max-h-80 overflow-auto")},m(c,u){B(c,e,u),ee(t,e,null),o=!0},p(c,u){var d,h;const f={};u[0]&268435456&&(f.shiftEnter=!c[28]||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)),u[0]&16785408&&(f.placeholder=c[13]?c[13]:c[24].t("Send a Message")),u[0]&33554432&&(f.largeTextAsFile=((d=c[25])==null?void 0:d.largeTextAsFile)??!1),u[0]&67108864&&(f.autocomplete=(h=c[26])==null?void 0:h.features.enable_autocomplete_generation),u[0]&16814080&&(f.generateAutoCompletion=c[57]),!n&&u[0]&2&&(n=!0,f.value=c[1],Ke(()=>n=!1)),t.$set(f)},i(c){o||(T(t.$$.fragment,c),o=!0)},o(c){O(t.$$.fragment,c),o=!1},d(c){c&&p(e),l[58](null),$(t)}}}function Md(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"></path></svg>';return{c(){e=N("button"),e.innerHTML=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,type:!0,"aria-label":!0,"data-svelte-h":!0}),at(e)!=="svelte-jwb84t"&&(e.innerHTML=t),this.h()},h(){m(e,"class","bg-transparent text-gray-400 dark:text-gray-600 rounded-full p-1.5 outline-hidden focus:outline-hidden cursor-not-allowed opacity-50"),m(e,"type","button"),m(e,"aria-label","More"),e.disabled=!0},m(n,o){B(n,e,o)},p:Ie,d(n){n&&p(e)}}}function Tr(l){var a,c,u,f,d,h,_,b,v,g;let e,t,n,o,s=((c=(a=l[26])==null?void 0:a.features)==null?void 0:c.enable_web_search)&&(l[29].role==="admin"||((d=(f=(u=l[29])==null?void 0:u.permissions)==null?void 0:f.features)==null?void 0:d.web_search))&&Vr(l),r=((_=(h=l[26])==null?void 0:h.features)==null?void 0:_.enable_image_generation)&&(l[29].role==="admin"||((g=(v=(b=l[29])==null?void 0:b.permissions)==null?void 0:v.features)==null?void 0:g.image_generation))&&zr(l),i=!1;return{c(){s&&s.c(),e=Q(),r&&r.c(),t=Q(),n=Me()},l(w){s&&s.l(w),e=J(w),r&&r.l(w),t=J(w),n=Me()},m(w,y){s&&s.m(w,y),B(w,e,y),r&&r.m(w,y),B(w,t,y),B(w,n,y),o=!0},p(w,y){var E,M,S,V,A,H,L,W,j,U;(M=(E=w[26])==null?void 0:E.features)!=null&&M.enable_web_search&&(w[29].role==="admin"||(A=(V=(S=w[29])==null?void 0:S.permissions)==null?void 0:V.features)!=null&&A.web_search)?s?(s.p(w,y),y[0]&603979776&&T(s,1)):(s=Vr(w),s.c(),T(s,1),s.m(e.parentNode,e)):s&&(Te(),O(s,1,1,()=>{s=null}),Ve()),(L=(H=w[26])==null?void 0:H.features)!=null&&L.enable_image_generation&&(w[29].role==="admin"||(U=(j=(W=w[29])==null?void 0:W.permissions)==null?void 0:j.features)!=null&&U.image_generation)?r?(r.p(w,y),y[0]&603979776&&T(r,1)):(r=zr(w),r.c(),T(r,1),r.m(t.parentNode,t)):r&&(Te(),O(r,1,1,()=>{r=null}),Ve())},i(w){o||(T(s),T(r),T(i),o=!0)},o(w){O(s),O(r),O(i),o=!1},d(w){w&&(p(e),p(t),p(n)),s&&s.d(w),r&&r.d(w)}}}function Vr(l){let e,t;return e=new Zt({props:{content:l[24].t("Search the internet"),placement:"top",$$slots:{default:[Td]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&16777216&&(s.content=n[24].t("Search the internet")),o[0]&50331680|o[2]&536870912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Td(l){let e,t,n,o,s=l[24].t("Web Search")+"",r,i,a,c,u;return t=new au({props:{className:"size-5",strokeWidth:"1.75"}}),{c(){e=N("button"),te(t.$$.fragment),n=Q(),o=N("span"),r=ke(s),this.h()},l(f){e=z(f,"BUTTON",{type:!0,class:!0});var d=D(e);ne(t.$$.fragment,d),n=J(d),o=z(d,"SPAN",{class:!0});var h=D(o);r=ye(h,s),h.forEach(p),d.forEach(p),this.h()},h(){var f;m(o,"class","hidden @sm:block whitespace-nowrap overflow-hidden text-ellipsis translate-y-[0.5px] mr-0.5"),m(e,"type","button"),m(e,"class",i="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(l[5]||(((f=l[25])==null?void 0:f.webSearch)??!1)==="always"?"bg-blue-100 dark:bg-blue-500/20 text-blue-500 dark:text-blue-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"))},m(f,d){B(f,e,d),ee(t,e,null),k(e,n),k(e,o),k(o,r),a=!0,c||(u=De(e,"click",So(l[74])),c=!0)},p(f,d){var h;(!a||d[0]&16777216)&&s!==(s=f[24].t("Web Search")+"")&&Ce(r,s),(!a||d[0]&33554464&&i!==(i="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(f[5]||(((h=f[25])==null?void 0:h.webSearch)??!1)==="always"?"bg-blue-100 dark:bg-blue-500/20 text-blue-500 dark:text-blue-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800")))&&m(e,"class",i)},i(f){a||(T(t.$$.fragment,f),a=!0)},o(f){O(t.$$.fragment,f),a=!1},d(f){f&&p(e),$(t),c=!1,u()}}}function zr(l){let e,t;return e=new Zt({props:{content:l[24].t("Generate an image"),placement:"top",$$slots:{default:[Vd]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&16777216&&(s.content=n[24].t("Generate an image")),o[0]&16777232|o[2]&536870912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Vd(l){let e,t,n,o,s=l[24].t("Image")+"",r,i,a,c,u;return t=new bd({props:{className:"size-5",strokeWidth:"1.75"}}),{c(){e=N("button"),te(t.$$.fragment),n=Q(),o=N("span"),r=ke(s),this.h()},l(f){e=z(f,"BUTTON",{type:!0,class:!0});var d=D(e);ne(t.$$.fragment,d),n=J(d),o=z(d,"SPAN",{class:!0});var h=D(o);r=ye(h,s),h.forEach(p),d.forEach(p),this.h()},h(){m(o,"class","hidden @sm:block whitespace-nowrap overflow-hidden text-ellipsis translate-y-[0.5px] mr-0.5"),m(e,"type","button"),m(e,"class",i="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(l[4]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 "))},m(f,d){B(f,e,d),ee(t,e,null),k(e,n),k(e,o),k(o,r),a=!0,c||(u=De(e,"click",So(l[75])),c=!0)},p(f,d){(!a||d[0]&16777216)&&s!==(s=f[24].t("Image")+"")&&Ce(r,s),(!a||d[0]&16&&i!==(i="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden "+(f[4]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 ")))&&m(e,"class",i)},i(f){a||(T(t.$$.fragment,f),a=!0)},o(f){O(t.$$.fragment,f),a=!1},d(f){f&&p(e),$(t),c=!1,u()}}}function zd(l){let e,t,n;return t=new Zt({props:{content:l[24].t("Stop"),$$slots:{default:[Pd]},$$scope:{ctx:l}}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","flex items-center")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p(o,s){const r={};s[0]&16777216&&(r.content=o[24].t("Stop")),s[0]&1024|s[2]&536870912&&(r.$$scope={dirty:s,ctx:o}),t.$set(r)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function Nd(l){let e,t,n,o;const s=[Hd,Od],r=[];function i(a,c){return a[1]===""&&a[2].length===0?0:1}return e=i(l),t=r[e]=s[e](l),{c(){t.c(),n=Me()},l(a){t.l(a),n=Me()},m(a,c){r[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=i(a),e===u?r[e].p(a,c):(Te(),O(r[u],1,1,()=>{r[u]=null}),Ve(),t=r[e],t?t.p(a,c):(t=r[e]=s[e](a),t.c()),T(t,1),t.m(n.parentNode,n))},i(a){o||(T(t),o=!0)},o(a){O(t),o=!1},d(a){a&&p(n),r[e].d(a)}}}function Pd(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',n,o;return{c(){e=N("button"),e.innerHTML=t,this.h()},l(s){e=z(s,"BUTTON",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-nqxd5x"&&(e.innerHTML=t),this.h()},h(){m(e,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5")},m(s,r){B(s,e,r),n||(o=De(e,"click",l[77]),n=!0)},p:Ie,d(s){s&&p(e),n=!1,o()}}}function Od(l){let e,t,n;return t=new Zt({props:{content:l[24].t("Send message"),$$slots:{default:[Ad]},$$scope:{ctx:l}}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","flex items-center")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p(o,s){const r={};s[0]&16777216&&(r.content=o[24].t("Send message")),s[0]&33554470|s[2]&536870912&&(r.$$scope={dirty:s,ctx:o}),t.$set(r)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function Hd(l){let e,t="";return{c(){e=N("div"),e.innerHTML=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-142w5bg"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex items-center")},m(n,o){B(n,e,o)},p:Ie,i:Ie,o:Ie,d(n){n&&p(e)}}}function Ad(l){let e,t,n,o,s;return{c(){e=N("button"),t=ve("svg"),n=ve("path"),this.h()},l(r){e=z(r,"BUTTON",{id:!0,class:!0,type:!0});var i=D(e);t=be(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=D(t);n=be(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),D(n).forEach(p),a.forEach(p),i.forEach(p),this.h()},h(){var r;m(n,"fill-rule","evenodd"),m(n,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),m(n,"clip-rule","evenodd"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 16 16"),m(t,"fill","currentColor"),m(t,"class","size-5"),m(e,"id","send-message-button"),m(e,"class",o=(l[1]===""&&l[2].length===0?"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled":l[5]||(((r=l[25])==null?void 0:r.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ")+" transition rounded-full p-1.5 self-center"),m(e,"type","submit"),e.disabled=s=l[1]===""&&l[2].length===0},m(r,i){B(r,e,i),k(e,t),k(t,n)},p(r,i){var a;i[0]&33554470&&o!==(o=(r[1]===""&&r[2].length===0?"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled":r[5]||(((a=r[25])==null?void 0:a.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ")+" transition rounded-full p-1.5 self-center")&&m(e,"class",o),i[0]&6&&s!==(s=r[1]===""&&r[2].length===0)&&(e.disabled=s)},d(r){r&&p(e)}}}function Ld(l){let e,t,n,o;e=new uc({props:{show:l[22]}});let s=l[16]&&pr(l);return{c(){te(e.$$.fragment),t=Q(),s&&s.c(),n=Me()},l(r){ne(e.$$.fragment,r),t=J(r),s&&s.l(r),n=Me()},m(r,i){ee(e,r,i),B(r,t,i),s&&s.m(r,i),B(r,n,i),o=!0},p(r,i){const a={};i[0]&4194304&&(a.show=r[22]),e.$set(a),r[16]?s?(s.p(r,i),i[0]&65536&&T(s,1)):(s=pr(r),s.c(),T(s,1),s.m(n.parentNode,n)):s&&(Te(),O(s,1,1,()=>{s=null}),Ve())},i(r){o||(T(e.$$.fragment,r),T(s),o=!0)},o(r){O(e.$$.fragment,r),O(s),o=!1},d(r){r&&(p(t),p(n)),$(e,r),s&&s.d(r)}}}function Bd(l){const e=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.spreadsheet","text/csv"],t=[".xls",".xlsx",".csv",".ods"];return l.file&&e.includes(l.file.type)||l.name&&t.some(n=>l.name.toLowerCase().endsWith(n))}function Rd(l,e,t){let n,o,s,r,i,a,c;se(l,Un,Y=>t(25,o=Y)),se(l,Mo,Y=>t(26,s=Y)),se(l,ml,Y=>t(14,r=Y)),se(l,fl,Y=>t(27,i=Y)),se(l,rs,Y=>t(28,a=Y)),se(l,Yn,Y=>t(29,c=Y));const u=rn(),f=Nt("i18n");se(l,f,Y=>t(24,n=Y));let{transparentBackground:d=!1}=e,{onChange:h=()=>{}}=e,{createMessagePair:_}=e,{stopResponse:b}=e,{autoScroll:v=!1}=e,{atSelectedModel:g=void 0}=e,{selectedModels:w}=e,y=[],{history:E}=e,{prompt:M=""}=e,{files:S=[]}=e,{selectedToolIds:V=[]}=e,{imageGenerationEnabled:A=!1}=e,{webSearchEnabled:H=!1}=e,{codeInterpreterEnabled:L=!1}=e,W=!1,j=!1,U,C,I,P,K=!1,{placeholder:X=""}=e,F=[];const Z=()=>{const Y=document.getElementById("messages-container");Y.scrollTo({top:Y.scrollHeight,behavior:"smooth"})},ae=async()=>{try{const Y=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"never"},audio:!1}),Ee=document.createElement("video");Ee.srcObject=Y,await Ee.play();const Ye=document.createElement("canvas");Ye.width=Ee.videoWidth,Ye.height=Ee.videoHeight,Ye.getContext("2d").drawImage(Ee,0,0,Ye.width,Ye.height),Y.getTracks().forEach(Xe=>Xe.stop()),window.focus();const Ne=Ye.toDataURL("image/png");t(2,S=[...S,{type:"image",url:Ne}]),Ee.srcObject=null}catch(Y){console.error("Error capturing screen:",Y)}},x=async(Y,Ee=!1)=>{const Ye="."+Y.name.split(".").pop().toLowerCase(),ot=Y.type.startsWith("application/vnd.ms-excel")||Y.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||Ye===".xlsx"||Ye===".xls"||Ye===".csv",Ne=Pn(),Xe={type:ot?"excel":"file",file:"",id:null,url:"",name:Y.name,collection_name:"",status:"uploading",size:Y.size,error:"",itemId:Ne,conversionResult:null,...Ee?{context:"full"}:{}};if(Xe.size==0)return ht.error(n.t("You cannot upload an empty file.")),null;t(2,S=[...S,Xe]);try{const pt=new FormData;if(pt.append("file",Y),ot){console.log("Processing Excel file:",Y.name,"Size:",Y.size);let it=null;try{it=await G(Y),pt.append("metadata",JSON.stringify({sheetNames:it.sheetNames,rowCount:it.rowCount,columnCount:it.columnCount,headers:it.headers,previewData:it.previewData})),console.log("Excel metadata extracted successfully",it)}catch(ln){console.error("Failed to extract Excel metadata:",ln)}console.log("FormData å†…å®¹:",Array.from(pt.entries()).map(([ln,on])=>({key:ln,value:on instanceof File?on.name:on})));const Gt=await fetch("http://localhost:8080/proxy/excel-to-sql",{method:"POST",headers:{Authorization:"Bearer token_59b8b43a_aiurmmm0","Accept-Language":"en"},body:pt});if(!Gt.ok){const ln=await Gt.json();throw new Error(ln.detail||"Excel conversion failed")}const tn=await Gt.json();Xe.conversionResult=tn;const nn=await Rs(localStorage.token,Y,pt);nn&&(Xe.file=nn,Xe.id=nn.id,Xe.url=`${Vs}/files/${nn.id}`)}else{const it=await Rs(localStorage.token,Y,pt);it&&(Xe.file=it,Xe.id=it.id,Xe.url=`${Vs}/files/${it.id}`)}t(2,S=S.map(it=>it.itemId===Ne?{...Xe,status:"processed"}:it))}catch(pt){t(2,S=S.map(it=>it.itemId===Ne?{...it,status:"error",error:pt.message}:it)),ht.error(n.t("File processing failed: {{error}}",{error:pt.message}))}},G=async Y=>new Promise((Ee,Ye)=>{const ot=new FileReader;ot.onload=async Ne=>{try{const Xe=qc(Ne.target.result,{type:"array"}),pt=Xe.SheetNames[0],it=Xe.Sheets[pt],Gt=Bs.sheet_to_json(it,{header:1})[0],tn=Bs.sheet_to_json(it,{header:1}),nn=tn.length-1,ln=tn.slice(1,4);Ee({columnNames:Gt,rowCount:nn,sampleRows:ln})}catch(Xe){Ye(Xe)}},ot.onerror=Ne=>Ye(Ne),ot.readAsArrayBuffer(Y)}),oe=async Y=>{console.log("Input files handler called with:",Y),Y.forEach(Ee=>{var ot,Ne,Xe,pt;if(console.log("Processing file:",{name:Ee.name,type:Ee.type,size:Ee.size,extension:Ee.name.split(".").at(-1)}),(((ot=s==null?void 0:s.file)==null?void 0:ot.max_size)??null)!==null&&Ee.size>(((Ne=s==null?void 0:s.file)==null?void 0:Ne.max_size)??0)*1024*1024){console.log("File exceeds max size limit:",{fileSize:Ee.size,maxSize:(((Xe=s==null?void 0:s.file)==null?void 0:Xe.max_size)??0)*1024*1024}),ht.error(n.t("File size should not exceed {{maxSize}} MB.",{maxSize:(pt=s==null?void 0:s.file)==null?void 0:pt.max_size}));return}""+Ee.name.split(".").pop().toLowerCase();const Ye=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.spreadsheet","text/csv"].includes(Ee.type)||[".xls",".xlsx",".csv",".ods"].includes("."+Ee.name.split(".").pop().toLowerCase());if(["image/gif","image/webp","image/jpeg","image/png","image/avif"].includes(Ee.type)){if(F.length===0){ht.error(n.t("Selected model(s) do not support image inputs"));return}let it=new FileReader;it.onload=async Gt=>{var nn,ln;let tn=Gt.target.result;if((o==null?void 0:o.imageCompression)??!1){const on=((nn=o==null?void 0:o.imageCompressionSize)==null?void 0:nn.width)??null,Ln=((ln=o==null?void 0:o.imageCompressionSize)==null?void 0:ln.height)??null;(on||Ln)&&(tn=await Cc(tn,on,Ln))}t(2,S=[...S,{type:"image",url:`${tn}`}])},it.readAsDataURL(Ee)}else Ye?(console.log("Excel file detected:",Ee.name),(async()=>{try{const it=await G(Ee);console.log("Excel metadata:",it);const Gt=new File([Ee],Ee.name,{type:Ee.type});Gt.excelMetadata=it,x(Ee,!0)}catch(it){console.error("Error extracting Excel metadata:",it),ht.error(n.t("Error processing Excel file: {{error}}",{error:it.message}))}})()):x(Ee)})},de=Y=>{Y.key==="Escape"&&(console.log("Escape"),t(22,K=!1))},Se=Y=>{var Ee,Ye;Y.preventDefault(),(Ye=(Ee=Y.dataTransfer)==null?void 0:Ee.types)!=null&&Ye.includes("Files")?t(22,K=!0):t(22,K=!1)},ie=()=>{t(22,K=!1)},ze=async Y=>{var Ee,Ye;if(Y.preventDefault(),console.log(Y),(Ee=Y.dataTransfer)!=null&&Ee.files){const ot=Array.from((Ye=Y.dataTransfer)==null?void 0:Ye.files);ot&&ot.length>0&&(console.log(ot),oe(ot))}t(22,K=!1)};hn(async()=>{t(16,W=!0),window.setTimeout(()=>{const Ee=document.getElementById("chat-input");Ee==null||Ee.focus()},0),window.addEventListener("keydown",de),await xe();const Y=document.getElementById("chat-container");Y==null||Y.addEventListener("dragover",Se),Y==null||Y.addEventListener("drop",ze),Y==null||Y.addEventListener("dragleave",ie)}),xn(()=>{console.log("destroy"),window.removeEventListener("keydown",de);const Y=document.getElementById("chat-container");Y&&(Y==null||Y.removeEventListener("dragover",Se),Y==null||Y.removeEventListener("drop",ze),Y==null||Y.removeEventListener("dragleave",ie))});const me=()=>{t(6,v=!0),Z()},ue=Y=>i?i.find(Ee=>Ee.id===Y):{id:Y,name:Y},qe=Y=>Y.id===g.id,je=()=>{t(0,g=void 0)};function ge(Y){Pe[Y?"unshift":"push"](()=>{I=Y,t(20,I)})}function re(Y){M=Y,t(1,M)}function Re(Y){S=Y,t(2,S)}const rt=Y=>{u("upload",Y.detail)},tt=Y=>{const Ee=Y.detail;(Ee==null?void 0:Ee.type)==="model"&&t(0,g=Ee.data);const Ye=document.getElementById("chat-input");Ye==null||Ye.focus()};function et(Y){Pe[Y?"unshift":"push"](()=>{C=Y,t(19,C)})}function $e(){P=this.files,t(21,P)}const gt=async()=>{if(P&&P.length>0){const Y=Array.from(P);oe(Y)}else ht.error(n.t("File not found."));t(19,C.value="",C)};function jt(Y){j=Y,t(17,j)}const Pt=async()=>{var Y;t(17,j=!1),await xe(),(Y=document.getElementById("chat-input"))==null||Y.focus()},_t=async Y=>{var ot;const{text:Ee,filename:Ye}=Y.detail;t(1,M=`${M}${Ee} `),t(17,j=!1),await xe(),(ot=document.getElementById("chat-input"))==null||ot.focus(),((o==null?void 0:o.speechAutoSend)??!1)&&u("submit",M)},Ot=Y=>!F.includes(Y),Ht=Y=>{S.splice(Y,1),t(2,S)},At=async(Y,Ee)=>{Y.id&&await Us(localStorage.token,Y.id),S.splice(Ee,1),t(2,S)},Vt=async(Y,Ee)=>{Y.type!=="collection"&&!(Y!=null&&Y.collection)&&Y.id&&await Us(localStorage.token,Y.id),S.splice(Ee,1),t(2,S)},Lt=Y=>{console.log(Y)},le=async Y=>{(y.length===0||!y.at(0))&&ht.error(n.t("Please select a model first."));const Ee=await Fc(localStorage.token,y.at(0),Y,E!=null&&E.currentId?_n(E,E.currentId):null).catch(Ye=>(console.log(Ye),null));return console.log(Ee),Ee};function Bt(Y){Pe[Y?"unshift":"push"](()=>{U=Y,t(18,U)})}function ut(Y){M=Y,t(1,M)}const ce=async Y=>{var ot;Y=Y.detail.event;const Ee=Y.ctrlKey||Y.metaKey,Ye=document.getElementById("commands-container");if(Y.key==="Escape"&&b(),Ee&&Y.key==="Enter"&&Y.shiftKey&&(Y.preventDefault(),_(M)),M===""&&Ee&&Y.key.toLowerCase()==="r"){Y.preventDefault(),console.log("regenerate");const Ne=[...document.getElementsByClassName("regenerate-response-button")].at(-1);Ne==null||Ne.click()}if(M===""&&Y.key=="ArrowUp"){Y.preventDefault();const Ne=[...document.getElementsByClassName("user-message")].at(-1);if(Ne){Ne.scrollIntoView({block:"center"});const Xe=[...document.getElementsByClassName("edit-user-message-button")].at(-1);Xe==null||Xe.click()}}if(Ye){if(Ye&&Y.key==="ArrowUp"&&(Y.preventDefault(),I.selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ye&&Y.key==="ArrowDown"&&(Y.preventDefault(),I.selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ye&&Y.key==="Tab"){Y.preventDefault();const Ne=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ne==null||Ne.click()}if(Ye&&Y.key==="Enter"){Y.preventDefault();const Ne=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ne?Ne==null||Ne.click():(ot=document.getElementById("send-message-button"))==null||ot.click()}}else(!a||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(Y.keyCode===13&&!Y.shiftKey&&Y.preventDefault(),(M!==""||S.length>0)&&Y.keyCode===13&&!Y.shiftKey&&u("submit",M));Y.key==="Escape"&&(console.log("Escape"),t(0,g=void 0),t(3,V=[]),t(5,H=!1),t(4,A=!1))},Ue=async Y=>{Y=Y.detail.event,console.log(Y);const Ee=Y.clipboardData||window.clipboardData;if(Ee&&Ee.items){for(const Ye of Ee.items)if(Ye.type.indexOf("image")!==-1){const ot=Ye.getAsFile(),Ne=new FileReader;Ne.onload=function(Xe){t(2,S=[...S,{type:"image",url:`${Xe.target.result}`}])},Ne.readAsDataURL(ot)}else if(Ye.type==="text/plain"&&((o==null?void 0:o.largeTextAsFile)??!1)){const ot=Ee.getData("text/plain");if(ot.length>zs){Y.preventDefault();const Ne=new Blob([ot],{type:"text/plain"}),Xe=new File([Ne],`Pasted_Text_${Date.now()}.txt`,{type:"text/plain"});await x(Xe,!0)}}}};function Ae(Y){Pe[Y?"unshift":"push"](()=>{U=Y,t(18,U)})}function Ze(){M=this.value,t(1,M)}const yt=Y=>{(!a||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(Y.key==="Enter"&&!Y.shiftKey&&Y.preventDefault(),(M!==""||S.length>0)&&Y.key==="Enter"&&!Y.shiftKey&&u("submit",M))},vt=async Y=>{var ot;const Ee=Y.ctrlKey||Y.metaKey,Ye=document.getElementById("commands-container");if(Y.key==="Escape"&&b(),Ee&&Y.key==="Enter"&&Y.shiftKey&&(Y.preventDefault(),_(M)),M===""&&Ee&&Y.key.toLowerCase()==="r"){Y.preventDefault(),console.log("regenerate");const Ne=[...document.getElementsByClassName("regenerate-response-button")].at(-1);Ne==null||Ne.click()}if(M===""&&Y.key=="ArrowUp"){Y.preventDefault();const Ne=[...document.getElementsByClassName("user-message")].at(-1),Xe=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(Ne),Ne.scrollIntoView({block:"center"}),Xe==null||Xe.click()}if(Ye&&Y.key==="ArrowUp"&&(Y.preventDefault(),I.selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ye&&Y.key==="ArrowDown"&&(Y.preventDefault(),I.selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ye&&Y.key==="Enter"){Y.preventDefault();const Ne=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Y.shiftKey?t(1,M=`${M}
`):Ne?Ne==null||Ne.click():(ot=document.getElementById("send-message-button"))==null||ot.click()}if(Ye&&Y.key==="Tab"){Y.preventDefault();const Ne=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ne==null||Ne.click()}else if(Y.key==="Tab"){const Ne=Mc(M);if(Ne.length>0){const Xe=Ne.at(0),pt=M;t(1,M=M.substring(0,(Xe==null?void 0:Xe.endIndex)+1)),await xe(),Y.target.scrollTop=Y.target.scrollHeight,t(1,M=pt),await xe(),Y.preventDefault(),Y.target.setSelectionRange(Xe==null?void 0:Xe.startIndex,Xe.endIndex+1)}Y.target.style.height="",Y.target.style.height=Math.min(Y.target.scrollHeight,320)+"px"}Y.key==="Escape"&&(console.log("Escape"),t(0,g=void 0),t(3,V=[]),t(5,H=!1),t(4,A=!1))},St=async Y=>{Y.target.style.height="",Y.target.style.height=Math.min(Y.target.scrollHeight,320)+"px"},Dt=async Y=>{Y.target.style.height="",Y.target.style.height=Math.min(Y.target.scrollHeight,320)+"px"},cn=async Y=>{const Ee=Y.clipboardData||window.clipboardData;if(Ee&&Ee.items){for(const Ye of Ee.items)if(Ye.type.indexOf("image")!==-1){const ot=Ye.getAsFile(),Ne=new FileReader;Ne.onload=function(Xe){t(2,S=[...S,{type:"image",url:`${Xe.target.result}`}])},Ne.readAsDataURL(ot)}else if(Ye.type==="text/plain"&&((o==null?void 0:o.largeTextAsFile)??!1)){const ot=Ee.getData("text/plain");if(ot.length>zs){Y.preventDefault();const Ne=new Blob([ot],{type:"text/plain"}),Xe=new File([Ne],`Pasted_Text_${Date.now()}.txt`,{type:"text/plain"});await x(Xe,!0)}}}},Rt=()=>{C.click()},Ut=async()=>{try{const Y=await _f();if(Y){const Ee=new File([Y.blob],Y.name,{type:Y.blob.type});await x(Ee)}else console.log("No file was selected from Google Drive")}catch(Y){console.error("Google Drive Error:",Y),ht.error(n.t("Error accessing Google Drive: {{error}}",{error:Y.message}))}},Yt=async()=>{try{const Y=await If();if(Y){const Ee=new File([Y.blob],Y.name,{type:Y.blob.type||"application/octet-stream"});await x(Ee)}else console.log("No file was selected from OneDrive")}catch(Y){console.error("OneDrive Error:",Y)}},Kt=async()=>{await xe();const Y=document.getElementById("chat-input");Y==null||Y.focus()};function en(Y){V=Y,t(3,V)}const un=()=>t(5,H=!H),zt=()=>t(4,A=!A),kt=()=>t(7,L=!L),vn=()=>{b()},mn=()=>{u("submit",M)};return l.$$set=Y=>{"transparentBackground"in Y&&t(8,d=Y.transparentBackground),"onChange"in Y&&t(36,h=Y.onChange),"createMessagePair"in Y&&t(9,_=Y.createMessagePair),"stopResponse"in Y&&t(10,b=Y.stopResponse),"autoScroll"in Y&&t(6,v=Y.autoScroll),"atSelectedModel"in Y&&t(0,g=Y.atSelectedModel),"selectedModels"in Y&&t(11,w=Y.selectedModels),"history"in Y&&t(12,E=Y.history),"prompt"in Y&&t(1,M=Y.prompt),"files"in Y&&t(2,S=Y.files),"selectedToolIds"in Y&&t(3,V=Y.selectedToolIds),"imageGenerationEnabled"in Y&&t(4,A=Y.imageGenerationEnabled),"webSearchEnabled"in Y&&t(5,H=Y.webSearchEnabled),"codeInterpreterEnabled"in Y&&t(7,L=Y.codeInterpreterEnabled),"placeholder"in Y&&t(13,X=Y.placeholder)},l.$$.update=()=>{l.$$.dirty[0]&2049&&t(15,y=g!==void 0?[g.id]:w),l.$$.dirty[0]&62|l.$$.dirty[1]&32&&h({prompt:M,files:S,selectedToolIds:V,imageGenerationEnabled:A,webSearchEnabled:H}),l.$$.dirty[0]&18433&&t(23,F=[...g?[g]:w].filter(Y=>{var Ee,Ye,ot,Ne;return((Ne=(ot=(Ye=(Ee=r.find(Xe=>Xe.id===Y))==null?void 0:Ee.info)==null?void 0:Ye.meta)==null?void 0:ot.capabilities)==null?void 0:Ne.vision)??!0}))},[g,M,S,V,A,H,v,L,d,_,b,w,E,X,r,y,W,j,U,C,I,P,K,F,n,o,s,i,a,c,u,f,Z,ae,x,oe,h,me,ue,qe,je,ge,re,Re,rt,tt,et,$e,gt,jt,Pt,_t,Ot,Ht,At,Vt,Lt,le,Bt,ut,ce,Ue,Ae,Ze,yt,vt,St,Dt,cn,Rt,Ut,Yt,Kt,en,un,zt,kt,vn,mn]}class Ia extends Oe{constructor(e){super(),He(this,e,Rd,Ld,Le,{transparentBackground:8,onChange:36,createMessagePair:9,stopResponse:10,autoScroll:6,atSelectedModel:0,selectedModels:11,history:12,prompt:1,files:2,selectedToolIds:3,imageGenerationEnabled:4,webSearchEnabled:5,codeInterpreterEnabled:7,placeholder:13},null,[-1,-1,-1])}}function Nr(l,e,t){const n=l.slice();return n[12]=e[t],n[13]=e,n[14]=t,n}function Ud(l){let e,t,n;return t=new Zt({props:{content:l[4].t("Remove Model"),$$slots:{default:[Wd]},$$scope:{ctx:l}}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p(o,s){const r={};s&16&&(r.content=o[4].t("Remove Model")),s&32771&&(r.$$scope={dirty:s,ctx:o}),t.$set(r)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function Fd(l){let e,t,n;return t=new Zt({props:{content:l[4].t("Add Model"),$$slots:{default:[jd]},$$scope:{ctx:l}}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p(o,s){const r={};s&16&&(r.content=o[4].t("Add Model")),s&32771&&(r.$$scope={dirty:s,ctx:o}),t.$set(r)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function Wd(l){let e,t,n,o,s;function r(){return l[10](l[14])}return{c(){e=N("button"),t=ve("svg"),n=ve("path"),this.h()},l(i){e=z(i,"BUTTON",{"aria-label":!0});var a=D(e);t=be(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=D(t);n=be(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(n).forEach(p),c.forEach(p),a.forEach(p),this.h()},h(){m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M19.5 12h-15"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke-width","2"),m(t,"stroke","currentColor"),m(t,"class","size-3"),e.disabled=l[1],m(e,"aria-label","Remove Model")},m(i,a){B(i,e,a),k(e,t),k(t,n),o||(s=De(e,"click",r),o=!0)},p(i,a){l=i,a&2&&(e.disabled=l[1])},d(i){i&&p(e),o=!1,s()}}}function jd(l){let e,t,n,o,s;return{c(){e=N("button"),t=ve("svg"),n=ve("path"),this.h()},l(r){e=z(r,"BUTTON",{class:!0,"aria-label":!0});var i=D(e);t=be(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=D(t);n=be(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(n).forEach(p),a.forEach(p),i.forEach(p),this.h()},h(){m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M12 6v12m6-6H6"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke-width","2"),m(t,"stroke","currentColor"),m(t,"class","size-3.5"),m(e,"class",""),e.disabled=l[1],m(e,"aria-label","Add Model")},m(r,i){B(r,e,i),k(e,t),k(t,n),o||(s=De(e,"click",l[9]),o=!0)},p(r,i){i&2&&(e.disabled=r[1])},d(r){r&&p(e),o=!1,s()}}}function Pr(l){var v,g,w;let e,t,n,o,s,r,i,a,c,u;function f(y){l[8](y,l[12],l[13],l[14])}let d={id:`${l[14]}`,placeholder:l[4].t("Select a model"),items:l[3].map(Hr),showTemporaryChatControl:l[5].role==="user"?((w=(g=(v=l[5])==null?void 0:v.permissions)==null?void 0:g.chat)==null?void 0:w.temporary)??!0:!0};l[12]!==void 0&&(d.value=l[12]),o=new _u({props:d}),Pe.push(()=>Ge(o,"value",f));const h=[Fd,Ud],_=[];function b(y,E){return y[14]===0?0:1}return i=b(l),a=_[i]=h[i](l),{c(){e=N("div"),t=N("div"),n=N("div"),te(o.$$.fragment),r=Q(),a.c(),c=Q(),this.h()},l(y){e=z(y,"DIV",{class:!0});var E=D(e);t=z(E,"DIV",{class:!0});var M=D(t);n=z(M,"DIV",{class:!0});var S=D(n);ne(o.$$.fragment,S),S.forEach(p),M.forEach(p),r=J(E),a.l(E),c=J(E),E.forEach(p),this.h()},h(){m(n,"class","mr-1 max-w-full"),m(t,"class","overflow-hidden w-full"),m(e,"class","flex w-full max-w-fit")},m(y,E){B(y,e,E),k(e,t),k(t,n),ee(o,n,null),k(e,r),_[i].m(e,null),k(e,c),u=!0},p(y,E){var S,V,A;l=y;const M={};E&16&&(M.placeholder=l[4].t("Select a model")),E&8&&(M.items=l[3].map(Hr)),E&32&&(M.showTemporaryChatControl=l[5].role==="user"?((A=(V=(S=l[5])==null?void 0:S.permissions)==null?void 0:V.chat)==null?void 0:A.temporary)??!0:!0),!s&&E&1&&(s=!0,M.value=l[12],Ke(()=>s=!1)),o.$set(M),a.p(l,E)},i(y){u||(T(o.$$.fragment,y),T(a),u=!0)},o(y){O(o.$$.fragment,y),O(a),u=!1},d(y){y&&p(e),$(o),_[i].d()}}}function Or(l){let e,t,n=l[4].t("Set as default")+"",o,s,r;return{c(){e=N("div"),t=N("button"),o=ke(n),this.h()},l(i){e=z(i,"DIV",{class:!0});var a=D(e);t=z(a,"BUTTON",{});var c=D(t);o=ye(c,n),c.forEach(p),a.forEach(p),this.h()},h(){m(e,"class","absolute text-left mt-[1px] ml-1 text-[0.7rem] text-gray-500 font-primary")},m(i,a){B(i,e,a),k(e,t),k(t,o),s||(r=De(t,"click",l[7]),s=!0)},p(i,a){a&16&&n!==(n=i[4].t("Set as default")+"")&&Ce(o,n)},d(i){i&&p(e),s=!1,r()}}}function Yd(l){let e,t,n,o,s=mt(l[0]),r=[];for(let c=0;c<s.length;c+=1)r[c]=Pr(Nr(l,s,c));const i=c=>O(r[c],1,1,()=>{r[c]=null});let a=l[2]&&Or(l);return{c(){e=N("div");for(let c=0;c<r.length;c+=1)r[c].c();t=Q(),a&&a.c(),n=Me(),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=D(e);for(let f=0;f<r.length;f+=1)r[f].l(u);u.forEach(p),t=J(c),a&&a.l(c),n=Me(),this.h()},h(){m(e,"class","flex flex-col w-full items-start")},m(c,u){B(c,e,u);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);B(c,t,u),a&&a.m(c,u),B(c,n,u),o=!0},p(c,[u]){if(u&59){s=mt(c[0]);let f;for(f=0;f<s.length;f+=1){const d=Nr(c,s,f);r[f]?(r[f].p(d,u),T(r[f],1)):(r[f]=Pr(d),r[f].c(),T(r[f],1),r[f].m(e,null))}for(Te(),f=s.length;f<r.length;f+=1)i(f);Ve()}c[2]?a?a.p(c,u):(a=Or(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(c){if(!o){for(let u=0;u<s.length;u+=1)T(r[u]);o=!0}},o(c){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)O(r[u]);o=!1},d(c){c&&(p(e),p(t),p(n)),bn(r,c),a&&a.d(c)}}}const Hr=l=>({value:l.id,label:l.name,model:l});function Kd(l,e,t){let n,o,s,r;se(l,ml,b=>t(3,n=b)),se(l,Un,b=>t(11,s=b)),se(l,Yn,b=>t(5,r=b));const i=Nt("i18n");se(l,i,b=>t(4,o=b));let{selectedModels:a=[""]}=e,{disabled:c=!1}=e,{showSetDefault:u=!0}=e;const f=async()=>{if(a.filter(v=>v==="").length){ht.error(o.t("Choose a model before saving..."));return}Un.set({...s,models:a}),await Rc(localStorage.token,{ui:s}),ht.success(o.t("Default model updated"))};function d(b,v,g,w){g[w]=b,t(0,a),t(3,n)}const h=()=>{t(0,a=[...a,""])},_=b=>{a.splice(b,1),t(0,a),t(3,n)};return l.$$set=b=>{"selectedModels"in b&&t(0,a=b.selectedModels),"disabled"in b&&t(1,c=b.disabled),"showSetDefault"in b&&t(2,u=b.showSetDefault)},l.$$.update=()=>{l.$$.dirty&9&&a.length>0&&n.length>0&&t(0,a=a.map(b=>n.map(v=>v.id).includes(b)?b:""))},[a,c,u,n,o,r,i,f,d,h,_]}class Gd extends Oe{constructor(e){super(),He(this,e,Kd,Yd,Le,{selectedModels:0,disabled:1,showSetDefault:2})}}function Xd(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=D(e);t=be(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),k(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:Ie,o:Ie,d(n){n&&p(e)}}}function Zd(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}let qd=class extends Oe{constructor(e){super(),He(this,e,Zd,Xd,Le,{className:0,strokeWidth:1})}};function Jd(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,viewBox:!0,stroke:!0,fill:!0,class:!0,"stroke-width":!0});var o=D(e);t=be(o,"path",{d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M18.75 12.75h1.5a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM12 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 6ZM12 18a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 18ZM3.75 6.75h1.5a.75.75 0 1 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM5.25 18.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 0 1.5ZM3 12a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 12ZM9 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM12.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM9 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"stroke","currentColor"),m(e,"fill","currentColor"),m(e,"class",l[0]),m(e,"stroke-width",l[1])},m(n,o){B(n,e,o),k(e,t)},p(n,[o]){o&1&&m(e,"class",n[0]),o&2&&m(e,"stroke-width",n[1])},i:Ie,o:Ie,d(n){n&&p(e)}}}function Qd(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class xd extends Oe{constructor(e){super(),He(this,e,Qd,Jd,Le,{className:0,strokeWidth:1})}}function $d(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=D(e);t=be(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),k(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:Ie,o:Ie,d(n){n&&p(e)}}}function eh(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class th extends Oe{constructor(e){super(),He(this,e,eh,$d,Le,{className:0,strokeWidth:1})}}function nh(l){let e;const t=l[13].default,n=Jt(t,l,l[23],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&8388608)&&Qt(n,t,o,o[23],e?$t(t,o[23],s,null):xt(o[23]),null)},i(o){e||(T(n,o),e=!0)},o(o){O(n,o),e=!1},d(o){n&&n.d(o)}}}function Ar(l){let e,t;return e=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-controls-button",$$slots:{default:[lh]},$$scope:{ctx:l}}}),e.$on("click",l[14]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&8388640&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function lh(l){let e,t,n,o=l[5].t("Controls")+"",s,r;return e=new xd({props:{className:" size-4",strokeWidth:"0.5"}}),{c(){te(e.$$.fragment),t=Q(),n=N("div"),s=ke(o),this.h()},l(i){ne(e.$$.fragment,i),t=J(i),n=z(i,"DIV",{class:!0});var a=D(n);s=ye(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(i,a){ee(e,i,a),B(i,t,a),B(i,n,a),k(n,s),r=!0},p(i,a){(!r||a&32)&&o!==(o=i[5].t("Controls")+"")&&Ce(s,o)},i(i){r||(T(e.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),r=!1},d(i){i&&(p(t),p(n)),$(e,i)}}}function Lr(l){let e,t;return e=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[oh]},$$scope:{ctx:l}}}),e.$on("click",l[15]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&8388640&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function oh(l){let e,t,n,o,s=l[5].t("Share")+"",r;return{c(){e=ve("svg"),t=ve("path"),n=Q(),o=N("div"),r=ke(s),this.h()},l(i){e=be(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=D(e);t=be(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),D(t).forEach(p),a.forEach(p),n=J(i),o=z(i,"DIV",{class:!0});var c=D(o);r=ye(c,s),c.forEach(p),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class","size-4"),m(o,"class","flex items-center")},m(i,a){B(i,e,a),k(e,t),B(i,n,a),B(i,o,a),k(o,r)},p(i,a){a&32&&s!==(s=i[5].t("Share")+"")&&Ce(r,s)},d(i){i&&(p(e),p(n),p(o))}}}function sh(l){let e,t,n,o=l[5].t("Overview")+"",s,r;return e=new qd({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){te(e.$$.fragment),t=Q(),n=N("div"),s=ke(o),this.h()},l(i){ne(e.$$.fragment,i),t=J(i),n=z(i,"DIV",{class:!0});var a=D(n);s=ye(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(i,a){ee(e,i,a),B(i,t,a),B(i,n,a),k(n,s),r=!0},p(i,a){(!r||a&32)&&o!==(o=i[5].t("Overview")+"")&&Ce(s,o)},i(i){r||(T(e.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),r=!1},d(i){i&&(p(t),p(n)),$(e,i)}}}function rh(l){let e,t,n,o=l[5].t("Artifacts")+"",s,r;return e=new th({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){te(e.$$.fragment),t=Q(),n=N("div"),s=ke(o),this.h()},l(i){ne(e.$$.fragment,i),t=J(i),n=z(i,"DIV",{class:!0});var a=D(n);s=ye(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(i,a){ee(e,i,a),B(i,t,a),B(i,n,a),k(n,s),r=!0},p(i,a){(!r||a&32)&&o!==(o=i[5].t("Artifacts")+"")&&Ce(s,o)},i(i){r||(T(e.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),r=!1},d(i){i&&(p(t),p(n)),$(e,i)}}}function ih(l){let e,t,n,o,s=l[5].t("Download")+"",r;return{c(){e=ve("svg"),t=ve("path"),n=Q(),o=N("div"),r=ke(s),this.h()},l(i){e=be(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=D(e);t=be(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(t).forEach(p),a.forEach(p),n=J(i),o=z(i,"DIV",{class:!0});var c=D(o);r=ye(c,s),c.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","size-4"),m(o,"class","flex items-center")},m(i,a){B(i,e,a),k(e,t),B(i,n,a),B(i,o,a),k(o,r)},p(i,a){a&32&&s!==(s=i[5].t("Download")+"")&&Ce(r,s)},d(i){i&&(p(e),p(n),p(o))}}}function ah(l){let e,t=l[5].t("Export chat (.json)")+"",n;return{c(){e=N("div"),n=ke(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);n=ye(s,t),s.forEach(p),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){B(o,e,s),k(e,n)},p(o,s){s&32&&t!==(t=o[5].t("Export chat (.json)")+"")&&Ce(n,t)},d(o){o&&p(e)}}}function ch(l){let e,t=l[5].t("Plain text (.txt)")+"",n;return{c(){e=N("div"),n=ke(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);n=ye(s,t),s.forEach(p),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){B(o,e,s),k(e,n)},p(o,s){s&32&&t!==(t=o[5].t("Plain text (.txt)")+"")&&Ce(n,t)},d(o){o&&p(e)}}}function uh(l){let e,t=l[5].t("PDF document (.pdf)")+"",n;return{c(){e=N("div"),n=ke(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);n=ye(s,t),s.forEach(p),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){B(o,e,s),k(e,n)},p(o,s){s&32&&t!==(t=o[5].t("PDF document (.pdf)")+"")&&Ce(n,t)},d(o){o&&p(e)}}}function fh(l){let e,t,n,o,s,r;return e=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ah]},$$scope:{ctx:l}}}),e.$on("click",l[18]),n=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ch]},$$scope:{ctx:l}}}),n.$on("click",l[19]),s=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[uh]},$$scope:{ctx:l}}}),s.$on("click",l[20]),{c(){te(e.$$.fragment),t=Q(),te(n.$$.fragment),o=Q(),te(s.$$.fragment)},l(i){ne(e.$$.fragment,i),t=J(i),ne(n.$$.fragment,i),o=J(i),ne(s.$$.fragment,i)},m(i,a){ee(e,i,a),B(i,t,a),ee(n,i,a),B(i,o,a),ee(s,i,a),r=!0},p(i,a){const c={};a&8388640&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const u={};a&8388640&&(u.$$scope={dirty:a,ctx:i}),n.$set(u);const f={};a&8388640&&(f.$$scope={dirty:a,ctx:i}),s.$set(f)},i(i){r||(T(e.$$.fragment,i),T(n.$$.fragment,i),T(s.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),O(n.$$.fragment,i),O(s.$$.fragment,i),r=!1},d(i){i&&(p(t),p(o)),$(e,i),$(n,i),$(s,i)}}}function dh(l){let e,t,n,o;return e=new du({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ih]},$$scope:{ctx:l}}}),n=new hu({props:{class:"w-full rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",transition:Jl,sideOffset:8,$$slots:{default:[fh]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment),t=Q(),te(n.$$.fragment)},l(s){ne(e.$$.fragment,s),t=J(s),ne(n.$$.fragment,s)},m(s,r){ee(e,s,r),B(s,t,r),ee(n,s,r),o=!0},p(s,r){const i={};r&8388640&&(i.$$scope={dirty:r,ctx:s}),e.$set(i);const a={};r&8388640&&(a.$$scope={dirty:r,ctx:s}),n.$set(a)},i(s){o||(T(e.$$.fragment,s),T(n.$$.fragment,s),o=!0)},o(s){O(e.$$.fragment,s),O(n.$$.fragment,s),o=!1},d(s){s&&p(t),$(e,s),$(n,s)}}}function hh(l){let e,t,n,o=l[5].t("Copy")+"",s,r;return e=new su({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){te(e.$$.fragment),t=Q(),n=N("div"),s=ke(o),this.h()},l(i){ne(e.$$.fragment,i),t=J(i),n=z(i,"DIV",{class:!0});var a=D(n);s=ye(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(i,a){ee(e,i,a),B(i,t,a),B(i,n,a),k(n,s),r=!0},p(i,a){(!r||a&32)&&o!==(o=i[5].t("Copy")+"")&&Ce(s,o)},i(i){r||(T(e.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),r=!1},d(i){i&&(p(t),p(n)),$(e,i)}}}function Br(l){let e,t,n,o,s;return o=new mu({props:{chatId:l[1].id}}),{c(){e=N("hr"),t=Q(),n=N("div"),te(o.$$.fragment),this.h()},l(r){e=z(r,"HR",{class:!0}),t=J(r),n=z(r,"DIV",{class:!0});var i=D(n);ne(o.$$.fragment,i),i.forEach(p),this.h()},h(){m(e,"class","border-gray-100 dark:border-gray-850 my-0.5"),m(n,"class","flex p-1")},m(r,i){B(r,e,i),B(r,t,i),B(r,n,i),ee(o,n,null),s=!0},p(r,i){const a={};i&2&&(a.chatId=r[1].id),o.$set(a)},i(r){s||(T(o.$$.fragment,r),s=!0)},o(r){O(o.$$.fragment,r),s=!1},d(r){r&&(p(e),p(t),p(n)),$(o)}}}function mh(l){let e,t,n,o,s,r,i,a,c,u,f,d,h=l[4]&&Ar(l),_=!l[3]&&Lr(l);n=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-overview-button",$$slots:{default:[sh]},$$scope:{ctx:l}}}),n.$on("click",l[16]),s=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-overview-button",$$slots:{default:[rh]},$$scope:{ctx:l}}}),s.$on("click",l[17]),i=new fu({props:{$$slots:{default:[dh]},$$scope:{ctx:l}}}),c=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-copy-button",$$slots:{default:[hh]},$$scope:{ctx:l}}}),c.$on("click",l[21]);let b=!l[3]&&Br(l);return{c(){h&&h.c(),e=Q(),_&&_.c(),t=Q(),te(n.$$.fragment),o=Q(),te(s.$$.fragment),r=Q(),te(i.$$.fragment),a=Q(),te(c.$$.fragment),u=Q(),b&&b.c(),f=Me()},l(v){h&&h.l(v),e=J(v),_&&_.l(v),t=J(v),ne(n.$$.fragment,v),o=J(v),ne(s.$$.fragment,v),r=J(v),ne(i.$$.fragment,v),a=J(v),ne(c.$$.fragment,v),u=J(v),b&&b.l(v),f=Me()},m(v,g){h&&h.m(v,g),B(v,e,g),_&&_.m(v,g),B(v,t,g),ee(n,v,g),B(v,o,g),ee(s,v,g),B(v,r,g),ee(i,v,g),B(v,a,g),ee(c,v,g),B(v,u,g),b&&b.m(v,g),B(v,f,g),d=!0},p(v,g){v[4]?h?(h.p(v,g),g&16&&T(h,1)):(h=Ar(v),h.c(),T(h,1),h.m(e.parentNode,e)):h&&(Te(),O(h,1,1,()=>{h=null}),Ve()),v[3]?_&&(Te(),O(_,1,1,()=>{_=null}),Ve()):_?(_.p(v,g),g&8&&T(_,1)):(_=Lr(v),_.c(),T(_,1),_.m(t.parentNode,t));const w={};g&8388640&&(w.$$scope={dirty:g,ctx:v}),n.$set(w);const y={};g&8388640&&(y.$$scope={dirty:g,ctx:v}),s.$set(y);const E={};g&8388640&&(E.$$scope={dirty:g,ctx:v}),i.$set(E);const M={};g&8388640&&(M.$$scope={dirty:g,ctx:v}),c.$set(M),v[3]?b&&(Te(),O(b,1,1,()=>{b=null}),Ve()):b?(b.p(v,g),g&8&&T(b,1)):(b=Br(v),b.c(),T(b,1),b.m(f.parentNode,f))},i(v){d||(T(h),T(_),T(n.$$.fragment,v),T(s.$$.fragment,v),T(i.$$.fragment,v),T(c.$$.fragment,v),T(b),d=!0)},o(v){O(h),O(_),O(n.$$.fragment,v),O(s.$$.fragment,v),O(i.$$.fragment,v),O(c.$$.fragment,v),O(b),d=!1},d(v){v&&(p(e),p(t),p(o),p(r),p(a),p(u),p(f)),h&&h.d(v),_&&_.d(v),$(n,v),$(s,v),$(i,v),$(c,v),b&&b.d(v)}}}function gh(l){let e,t,n;return t=new zo({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5  z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:Jl,$$slots:{default:[mh]},$$scope:{ctx:l}}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p(o,s){const r={};s&8388667&&(r.$$scope={dirty:s,ctx:o}),t.$set(r)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function ph(l){let e,t;return e=new Vo({props:{$$slots:{content:[gh],default:[nh]},$$scope:{ctx:l}}}),e.$on("change",l[22]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,[o]){const s={};o&8388667&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function _h(l,e,t){let n,o,s;se(l,To,j=>t(3,n=j)),se(l,rs,j=>t(4,o=j));let{$$slots:r={},$$scope:i}=e;const{saveAs:a}=bu,c=Nt("i18n");se(l,c,j=>t(5,s=j));let{shareEnabled:u=!1}=e,{shareHandler:f}=e,{downloadHandler:d}=e,{chat:h}=e,{onClose:_=()=>{}}=e;const b=async()=>{const j=h.chat.history;return _n(j,j.currentId).reduce((I,P,K,X)=>`${I}### ${P.role.toUpperCase()}
${P.content}

`,"").trim()},v=async()=>{const j=await b();let U=new Blob([j],{type:"text/plain"});a(U,`chat-${h.chat.title}.txt`)},g=async()=>{const j=h.chat.history,U=_n(j,j.currentId),C=await vu(localStorage.token,h.chat.title,U),I=window.URL.createObjectURL(C),P=document.createElement("a");P.href=I,P.download=`chat-${h.chat.title}.pdf`,document.body.appendChild(P),P.click(),document.body.removeChild(P),window.URL.revokeObjectURL(I)},w=async()=>{if(h.id){let j=null;h.id==="local"||n?j=h:j=await $o(localStorage.token,h.id);let U=new Blob([JSON.stringify([j])],{type:"application/json"});a(U,`chat-export-${Date.now()}.json`)}},y=async()=>{await qt.set(!0),await Jn.set(!1),await Hn.set(!1)},E=()=>{f()},M=async()=>{await qt.set(!0),await Jn.set(!0),await Hn.set(!1)},S=async()=>{await qt.set(!0),await Hn.set(!0),await Jn.set(!1)},V=()=>{w()},A=()=>{v()},H=()=>{g()},L=async()=>{await _a(await b()).catch(U=>{console.error(U)})&&ht.success(s.t("Copied to clipboard"))},W=j=>{j.detail===!1&&_()};return l.$$set=j=>{"shareEnabled"in j&&t(11,u=j.shareEnabled),"shareHandler"in j&&t(0,f=j.shareHandler),"downloadHandler"in j&&t(12,d=j.downloadHandler),"chat"in j&&t(1,h=j.chat),"onClose"in j&&t(2,_=j.onClose),"$$scope"in j&&t(23,i=j.$$scope)},[f,h,_,n,o,s,c,b,v,g,w,u,d,r,y,E,M,S,V,A,H,L,W,i]}class bh extends Oe{constructor(e){super(),He(this,e,_h,ph,Le,{shareEnabled:11,shareHandler:0,downloadHandler:12,chat:1,onClose:2})}}function Rr(l){let e,t,n;function o(r){l[16](r)}let s={showSetDefault:!l[2]};return l[0]!==void 0&&(s.selectedModels=l[0]),e=new Gd({props:s}),Pe.push(()=>Ge(e,"selectedModels",o)),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,i){ee(e,r,i),n=!0},p(r,i){const a={};i&4&&(a.showSetDefault=!r[2]),!t&&i&1&&(t=!0,a.selectedModels=r[0],Ke(()=>t=!1)),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Ur(l){let e,t;return e=new bh({props:{chat:l[3],shareEnabled:l[2],shareHandler:l[17],downloadHandler:l[18],$$slots:{default:[vh]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&8&&(s.chat=n[3]),o&4&&(s.shareEnabled=n[2]),o&32&&(s.shareHandler=n[17]),o&64&&(s.downloadHandler=n[18]),o&4194304&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function vh(l){let e,t='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){e=N("button"),e.innerHTML=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),at(e)!=="svelte-xd5mtd"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"id","chat-context-menu-button")},m(n,o){B(n,e,o)},p:Ie,d(n){n&&p(e)}}}function wh(l){let e,t,n,o,s,r,i;return n=new pu({props:{className:" size-5",strokeWidth:"2"}}),{c(){e=N("button"),t=N("div"),te(n.$$.fragment),this.h()},l(a){e=z(a,"BUTTON",{id:!0,class:!0,"aria-label":!0});var c=D(e);t=z(c,"DIV",{class:!0});var u=D(t);ne(n.$$.fragment,u),u.forEach(p),c.forEach(p),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"id","new-chat-button"),m(e,"class",o="flex "+(l[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","New Chat")},m(a,c){B(a,e,c),k(e,t),ee(n,t,null),s=!0,r||(i=De(e,"click",l[19]),r=!0)},p(a,c){(!s||c&256&&o!==(o="flex "+(a[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"))&&m(e,"class",o)},i(a){s||(T(n.$$.fragment,a),s=!0)},o(a){O(n.$$.fragment,a),s=!1},d(a){a&&p(e),$(n),r=!1,i()}}}function Fr(l){let e,t;return e=new wu({props:{className:"max-w-[200px]",role:l[11].role,$$slots:{default:[yh]},$$scope:{ctx:l}}}),e.$on("show",l[20]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&2048&&(s.role=n[11].role),o&4196352&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function yh(l){let e,t,n,o;return{c(){e=N("button"),t=N("div"),n=N("img"),this.h()},l(s){e=z(s,"BUTTON",{class:!0,"aria-label":!0});var r=D(e);t=z(r,"DIV",{class:!0});var i=D(t);n=z(i,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),i.forEach(p),r.forEach(p),this.h()},h(){jn(n.src,o=l[11].profile_image_url)||m(n,"src",o),m(n,"class","size-6 object-cover rounded-full"),m(n,"alt","User profile"),m(n,"draggable","false"),m(t,"class","self-center"),m(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","User Menu")},m(s,r){B(s,e,r),k(e,t),k(t,n)},p(s,r){r&2048&&!jn(n.src,o=s[11].profile_image_url)&&m(n,"src",o)},d(s){s&&p(e)}}}function kh(l){let e,t,n,o,s,r,i,a,c,u,f,d,h,_,b,v,g,w,y,E,M,S,V,A;function H(C){l[14](C)}let L={chatId:l[7]};l[5]!==void 0&&(L.show=l[5]),e=new gu({props:L}),Pe.push(()=>Ge(e,"show",H)),d=new yu({});let W=l[4]&&Rr(l),j=l[2]&&l[3]&&(l[3].id||l[9])&&Ur(l);E=new Zt({props:{content:l[10].t("New Chat"),$$slots:{default:[wh]},$$scope:{ctx:l}}});let U=l[11]!==void 0&&Fr(l);return{c(){te(e.$$.fragment),n=Q(),o=N("nav"),s=N("div"),r=Q(),i=N("div"),a=N("div"),c=N("div"),u=N("button"),f=N("div"),te(d.$$.fragment),_=Q(),b=N("div"),W&&W.c(),g=Q(),w=N("div"),j&&j.c(),y=Q(),te(E.$$.fragment),M=Q(),U&&U.c(),this.h()},l(C){ne(e.$$.fragment,C),n=J(C),o=z(C,"NAV",{class:!0});var I=D(o);s=z(I,"DIV",{class:!0}),D(s).forEach(p),r=J(I),i=z(I,"DIV",{class:!0});var P=D(i);a=z(P,"DIV",{class:!0});var K=D(a);c=z(K,"DIV",{class:!0});var X=D(c);u=z(X,"BUTTON",{id:!0,class:!0,"aria-label":!0});var F=D(u);f=z(F,"DIV",{class:!0});var Z=D(f);ne(d.$$.fragment,Z),Z.forEach(p),F.forEach(p),X.forEach(p),_=J(K),b=z(K,"DIV",{class:!0});var ae=D(b);W&&W.l(ae),ae.forEach(p),g=J(K),w=z(K,"DIV",{class:!0});var x=D(w);j&&j.l(x),y=J(x),ne(E.$$.fragment,x),M=J(x),U&&U.l(x),x.forEach(p),K.forEach(p),P.forEach(p),I.forEach(p),this.h()},h(){m(s,"class","bg-linear-to-b via-50% from-white via-white to-transparent dark:from-gray-900 dark:via-gray-900 dark:to-transparent pointer-events-none absolute inset-0 -bottom-7 z-[-1]"),m(f,"class","m-auto self-center"),m(u,"id","sidebar-toggle-button"),m(u,"class","cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(u,"aria-label","Toggle Sidebar"),m(c,"class",h=(l[8]?"md:hidden":"")+" mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),m(b,"class",v="flex-1 overflow-hidden max-w-full py-0.5 "+(l[8]?"ml-1":"")),m(w,"class","self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),m(a,"class","flex items-center w-full max-w-full"),m(i,"class","flex max-w-full w-full mx-auto px-1 pt-0.5 bg-transparent"),m(o,"class","sticky top-0 z-30 w-full px-1.5 py-1.5 -mb-8 flex items-center drag-region")},m(C,I){ee(e,C,I),B(C,n,I),B(C,o,I),k(o,s),k(o,r),k(o,i),k(i,a),k(a,c),k(c,u),k(u,f),ee(d,f,null),k(a,_),k(a,b),W&&W.m(b,null),k(a,g),k(a,w),j&&j.m(w,null),k(w,y),ee(E,w,null),k(w,M),U&&U.m(w,null),S=!0,V||(A=De(u,"click",l[15]),V=!0)},p(C,[I]){const P={};I&128&&(P.chatId=C[7]),!t&&I&32&&(t=!0,P.show=C[5],Ke(()=>t=!1)),e.$set(P),(!S||I&256&&h!==(h=(C[8]?"md:hidden":"")+" mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"))&&m(c,"class",h),C[4]?W?(W.p(C,I),I&16&&T(W,1)):(W=Rr(C),W.c(),T(W,1),W.m(b,null)):W&&(Te(),O(W,1,1,()=>{W=null}),Ve()),(!S||I&256&&v!==(v="flex-1 overflow-hidden max-w-full py-0.5 "+(C[8]?"ml-1":"")))&&m(b,"class",v),C[2]&&C[3]&&(C[3].id||C[9])?j?(j.p(C,I),I&524&&T(j,1)):(j=Ur(C),j.c(),T(j,1),j.m(w,y)):j&&(Te(),O(j,1,1,()=>{j=null}),Ve());const K={};I&1024&&(K.content=C[10].t("New Chat")),I&4194562&&(K.$$scope={dirty:I,ctx:C}),E.$set(K),C[11]!==void 0?U?(U.p(C,I),I&2048&&T(U,1)):(U=Fr(C),U.c(),T(U,1),U.m(w,null)):U&&(Te(),O(U,1,1,()=>{U=null}),Ve())},i(C){S||(T(e.$$.fragment,C),T(d.$$.fragment,C),T(W),T(j),T(E.$$.fragment,C),T(U),S=!0)},o(C){O(e.$$.fragment,C),O(d.$$.fragment,C),O(W),O(j),O(E.$$.fragment,C),O(U),S=!1},d(C){C&&(p(n),p(o)),$(e,C),$(d),W&&W.d(),j&&j.d(),$(E),U&&U.d(),V=!1,A()}}}function Eh(l,e,t){let n,o,s,r,i,a;se(l,pa,H=>t(21,n=H)),se(l,qn,H=>t(7,o=H)),se(l,xo,H=>t(8,s=H)),se(l,To,H=>t(9,r=H)),se(l,Yn,H=>t(11,a=H));const c=Nt("i18n");se(l,c,H=>t(10,i=H));let{initNewChat:u}=e,{title:f=n}=e,{shareEnabled:d=!1}=e,{chat:h}=e,{selectedModels:_}=e,{showModelSelector:b=!0}=e,v=!1,g=!1;function w(H){v=H,t(5,v)}const y=()=>{xo.set(!s)};function E(H){_=H,t(0,_)}const M=()=>{t(5,v=!v)},S=()=>{t(6,g=!g)},V=()=>{u()},A=H=>{H.detail==="archived-chat"&&gc.set(!0)};return l.$$set=H=>{"initNewChat"in H&&t(1,u=H.initNewChat),"title"in H&&t(13,f=H.title),"shareEnabled"in H&&t(2,d=H.shareEnabled),"chat"in H&&t(3,h=H.chat),"selectedModels"in H&&t(0,_=H.selectedModels),"showModelSelector"in H&&t(4,b=H.showModelSelector)},[_,u,d,h,b,v,g,o,s,r,i,a,c,f,w,y,E,M,S,V,A]}class Ih extends Oe{constructor(e){super(),He(this,e,Eh,kh,Le,{initNewChat:1,title:13,shareEnabled:2,chat:3,selectedModels:0,showModelSelector:4})}}function Tt(l){if(typeof l=="string"||typeof l=="number")return""+l;let e="";if(Array.isArray(l))for(let t=0,n;t<l.length;t++)(n=Tt(l[t]))!==""&&(e+=(e&&" ")+n);else for(let t in l)l[t]&&(e+=(e&&" ")+t);return e}const Dl={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:l=>`Node type "${l}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:l=>`The old edge with id=${l} does not exist.`,error009:l=>`Marker type "${l}" doesn't exist.`,error008:(l,{id:e,sourceHandle:t,targetHandle:n})=>`Couldn't create edge for ${l} handle id: "${l==="source"?t:n}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:l=>`Edge type "${l}" not found. Using fallback type "default".`,error012:l=>`Node with id "${l}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(l="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${l}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},_o=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var dl;(function(l){l.Strict="strict",l.Loose="loose"})(dl||(dl={}));var An;(function(l){l.Free="free",l.Vertical="vertical",l.Horizontal="horizontal"})(An||(An={}));var bo;(function(l){l.Partial="partial",l.Full="full"})(bo||(bo={}));const ns={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var El;(function(l){l.Bezier="default",l.Straight="straight",l.Step="step",l.SmoothStep="smoothstep",l.SimpleBezier="simplebezier"})(El||(El={}));var vo;(function(l){l.Arrow="arrow",l.ArrowClosed="arrowclosed"})(vo||(vo={}));var lt;(function(l){l.Left="left",l.Top="top",l.Right="right",l.Bottom="bottom"})(lt||(lt={}));const Wr={[lt.Left]:lt.Right,[lt.Right]:lt.Left,[lt.Top]:lt.Bottom,[lt.Bottom]:lt.Top};function Sh(l,e){if(!l&&!e)return!0;if(!l||!e||l.size!==e.size)return!1;if(!l.size&&!e.size)return!0;for(const t of l.keys())if(!e.has(t))return!1;return!0}function jr(l,e,t){if(!t)return;const n=[];l.forEach((o,s)=>{e!=null&&e.has(s)||n.push(o)}),n.length&&t(n)}function Yr(l){return l===null?null:l?"valid":"invalid"}const Dh=l=>"id"in l&&"source"in l&&"target"in l,Ch=l=>"id"in l&&"position"in l&&!("source"in l)&&!("target"in l),us=l=>"id"in l&&"internals"in l&&!("source"in l)&&!("target"in l),Ql=(l,e=[0,0])=>{const{width:t,height:n}=gl(l),o=l.origin??e,s=t*o[0],r=n*o[1];return{x:l.position.x-s,y:l.position.y-r}},Mh=(l,e={nodeOrigin:[0,0]})=>{if(l.length===0)return{x:0,y:0,width:0,height:0};const t=l.reduce((n,o)=>{const s=typeof o=="string";let r=!e.nodeLookup&&!s?o:void 0;e.nodeLookup&&(r=s?e.nodeLookup.get(o):us(o)?o:e.nodeLookup.get(o.id));const i=r?wo(r,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ho(n,i)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ao(t)},Oo=(l,e={})=>{if(l.size===0)return{x:0,y:0,width:0,height:0};let t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return l.forEach(n=>{if(e.filter===void 0||e.filter(n)){const o=wo(n);t=Ho(t,o)}}),Ao(t)},Sa=(l,e,[t,n,o]=[0,0,1],s=!1,r=!1)=>{const i={...xl(e,[t,n,o]),width:e.width/o,height:e.height/o},a=[];for(const c of l.values()){const{measured:u,selectable:f=!0,hidden:d=!1}=c;if(r&&!f||d)continue;const h=u.width??c.width??c.initialWidth??null,_=u.height??c.height??c.initialHeight??null,b=Zl(i,Ml(c)),v=(h??0)*(_??0),g=s&&b>0;(!c.internals.handleBounds||g||b>=v||c.dragging)&&a.push(c)}return a},ls=(l,e)=>{const t=new Set;return l.forEach(n=>{t.add(n.id)}),e.filter(n=>t.has(n.source)||t.has(n.target))};function Th(l,e){const t=new Map,n=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return l.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!n||n.has(o.id))&&t.set(o.id,o)}),t}async function Vh({nodes:l,width:e,height:t,panZoom:n,minZoom:o,maxZoom:s},r){if(l.size===0)return Promise.resolve(!0);const i=Th(l,r),a=Oo(i),c=ds(a,e,t,(r==null?void 0:r.minZoom)??o,(r==null?void 0:r.maxZoom)??s,(r==null?void 0:r.padding)??.1);return await n.setViewport(c,{duration:r==null?void 0:r.duration}),Promise.resolve(!0)}function zh({nodeId:l,nextPosition:e,nodeLookup:t,nodeOrigin:n=[0,0],nodeExtent:o,onError:s}){const r=t.get(l),i=r.parentId?t.get(r.parentId):void 0,{x:a,y:c}=i?i.internals.positionAbsolute:{x:0,y:0},u=r.origin??n;let f=o;if(r.extent==="parent"&&!r.expandParent)if(!i)s==null||s("005",Dl.error005());else{const h=i.measured.width,_=i.measured.height;h&&_&&(f=[[a,c],[a+h,c+_]])}else i&&Tl(r.extent)&&(f=[[r.extent[0][0]+a,r.extent[0][1]+c],[r.extent[1][0]+a,r.extent[1][1]+c]]);const d=Tl(f)?hl(e,f,r.measured):e;return(r.measured.width===void 0||r.measured.height===void 0)&&(s==null||s("015",Dl.error015())),{position:{x:d.x-a+(r.measured.width??0)*u[0],y:d.y-c+(r.measured.height??0)*u[1]},positionAbsolute:d}}async function Da({nodesToRemove:l=[],edgesToRemove:e=[],nodes:t,edges:n,onBeforeDelete:o}){const s=new Set(l.map(d=>d.id)),r=[];for(const d of t){if(d.deletable===!1)continue;const h=s.has(d.id),_=!h&&d.parentId&&r.find(b=>b.id===d.parentId);(h||_)&&r.push(d)}const i=new Set(e.map(d=>d.id)),a=n.filter(d=>d.deletable!==!1),u=ls(r,a);for(const d of a)i.has(d.id)&&!u.find(_=>_.id===d.id)&&u.push(d);if(!o)return{edges:u,nodes:r};const f=await o({nodes:r,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:r}:{edges:[],nodes:[]}:f}const Cl=(l,e=0,t=1)=>Math.min(Math.max(l,e),t),hl=(l={x:0,y:0},e,t)=>({x:Cl(l.x,e[0][0],e[1][0]-((t==null?void 0:t.width)??0)),y:Cl(l.y,e[0][1],e[1][1]-((t==null?void 0:t.height)??0))});function Ca(l,e,t){const{width:n,height:o}=gl(t),{x:s,y:r}=t.internals.positionAbsolute;return hl(l,[[s,r],[s+n,r+o]],e)}const Kr=(l,e,t)=>l<e?Cl(Math.abs(l-e),1,e)/e:l>t?-Cl(Math.abs(l-t),1,e)/e:0,Ma=(l,e,t=15,n=40)=>{const o=Kr(l.x,n,e.width-n)*t,s=Kr(l.y,n,e.height-n)*t;return[o,s]},Ho=(l,e)=>({x:Math.min(l.x,e.x),y:Math.min(l.y,e.y),x2:Math.max(l.x2,e.x2),y2:Math.max(l.y2,e.y2)}),os=({x:l,y:e,width:t,height:n})=>({x:l,y:e,x2:l+t,y2:e+n}),Ao=({x:l,y:e,x2:t,y2:n})=>({x:l,y:e,width:t-l,height:n-e}),Ml=(l,e=[0,0])=>{var o,s;const{x:t,y:n}=us(l)?l.internals.positionAbsolute:Ql(l,e);return{x:t,y:n,width:((o=l.measured)==null?void 0:o.width)??l.width??l.initialWidth??0,height:((s=l.measured)==null?void 0:s.height)??l.height??l.initialHeight??0}},wo=(l,e=[0,0])=>{var o,s;const{x:t,y:n}=us(l)?l.internals.positionAbsolute:Ql(l,e);return{x:t,y:n,x2:t+(((o=l.measured)==null?void 0:o.width)??l.width??l.initialWidth??0),y2:n+(((s=l.measured)==null?void 0:s.height)??l.height??l.initialHeight??0)}},Nh=(l,e)=>Ao(Ho(os(l),os(e))),Zl=(l,e)=>{const t=Math.max(0,Math.min(l.x+l.width,e.x+e.width)-Math.max(l.x,e.x)),n=Math.max(0,Math.min(l.y+l.height,e.y+e.height)-Math.max(l.y,e.y));return Math.ceil(t*n)},Gr=l=>Mn(l.width)&&Mn(l.height)&&Mn(l.x)&&Mn(l.y),Mn=l=>!isNaN(l)&&isFinite(l),Ph=(l,e)=>{},fs=(l,e=[1,1])=>({x:e[0]*Math.round(l.x/e[0]),y:e[1]*Math.round(l.y/e[1])}),xl=({x:l,y:e},[t,n,o],s=!1,r=[1,1])=>{const i={x:(l-t)/o,y:(e-n)/o};return s?fs(i,r):i},yo=({x:l,y:e},[t,n,o])=>({x:l*o+t,y:e*o+n});function vl(l,e){if(typeof l=="number")return Math.floor((e-e/(1+l))*.5);if(typeof l=="string"&&l.endsWith("px")){const t=parseFloat(l);if(!Number.isNaN(t))return Math.floor(t)}if(typeof l=="string"&&l.endsWith("%")){const t=parseFloat(l);if(!Number.isNaN(t))return Math.floor(e*t*.01)}return console.error(`[React Flow] The padding value "${l}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Oh(l,e,t){if(typeof l=="string"||typeof l=="number"){const n=vl(l,t),o=vl(l,e);return{top:n,right:o,bottom:n,left:o,x:o*2,y:n*2}}if(typeof l=="object"){const n=vl(l.top??l.y??0,t),o=vl(l.bottom??l.y??0,t),s=vl(l.left??l.x??0,e),r=vl(l.right??l.x??0,e);return{top:n,right:r,bottom:o,left:s,x:s+r,y:n+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Hh(l,e,t,n,o,s){const{x:r,y:i}=yo(l,[e,t,n]),{x:a,y:c}=yo({x:l.x+l.width,y:l.y+l.height},[e,t,n]),u=o-a,f=s-c;return{left:Math.floor(r),top:Math.floor(i),right:Math.floor(u),bottom:Math.floor(f)}}const ds=(l,e,t,n,o,s)=>{const r=Oh(s,e,t),i=(e-r.x)/l.width,a=(t-r.y)/l.height,c=Math.min(i,a),u=Cl(c,n,o),f=l.x+l.width/2,d=l.y+l.height/2,h=e/2-f*u,_=t/2-d*u,b=Hh(l,h,_,u,e,t),v={left:Math.min(b.left-r.left,0),top:Math.min(b.top-r.top,0),right:Math.min(b.right-r.right,0),bottom:Math.min(b.bottom-r.bottom,0)};return{x:h-v.left+v.right,y:_-v.top+v.bottom,zoom:u}},ko=()=>{var l;return typeof navigator<"u"&&((l=navigator==null?void 0:navigator.userAgent)==null?void 0:l.indexOf("Mac"))>=0};function Tl(l){return l!==void 0&&l!=="parent"}function gl(l){var e,t;return{width:((e=l.measured)==null?void 0:e.width)??l.width??l.initialWidth??0,height:((t=l.measured)==null?void 0:t.height)??l.height??l.initialHeight??0}}function Xr(l){var e,t;return(((e=l.measured)==null?void 0:e.width)??l.width??l.initialWidth)!==void 0&&(((t=l.measured)==null?void 0:t.height)??l.height??l.initialHeight)!==void 0}function Ah(l,e={width:0,height:0},t,n,o){const s={...l},r=n.get(t);if(r){const i=r.origin||o;s.x+=r.internals.positionAbsolute.x-(e.width??0)*i[0],s.y+=r.internals.positionAbsolute.y-(e.height??0)*i[1]}return s}function Lh(){let l,e;return{promise:new Promise((n,o)=>{l=n,e=o}),resolve:l,reject:e}}function Go(l,{snapGrid:e=[0,0],snapToGrid:t=!1,transform:n,containerBounds:o}){const{x:s,y:r}=Fn(l),i=xl({x:s-((o==null?void 0:o.left)??0),y:r-((o==null?void 0:o.top)??0)},n),{x:a,y:c}=t?fs(i,e):i;return{xSnapped:a,ySnapped:c,...i}}const Ta=l=>({width:l.offsetWidth,height:l.offsetHeight}),Bh=l=>{var e;return((e=l==null?void 0:l.getRootNode)==null?void 0:e.call(l))||(window==null?void 0:window.document)},Rh=["INPUT","SELECT","TEXTAREA"];function Uh(l){var n,o;const e=((o=(n=l.composedPath)==null?void 0:n.call(l))==null?void 0:o[0])||l.target;return(e==null?void 0:e.nodeType)!==1?!1:Rh.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const Va=l=>"clientX"in l,Fn=(l,e)=>{var s,r;const t=Va(l),n=t?l.clientX:(s=l.touches)==null?void 0:s[0].clientX,o=t?l.clientY:(r=l.touches)==null?void 0:r[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},Zr=(l,e,t,n,o)=>{const s=e.querySelectorAll(`.${l}`);return!s||!s.length?null:Array.from(s).map(r=>{const i=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),type:l,nodeId:o,position:r.getAttribute("data-handlepos"),x:(i.left-t.left)/n,y:(i.top-t.top)/n,...Ta(r)}})};function Fh({sourceX:l,sourceY:e,targetX:t,targetY:n,sourceControlX:o,sourceControlY:s,targetControlX:r,targetControlY:i}){const a=l*.125+o*.375+r*.375+t*.125,c=e*.125+s*.375+i*.375+n*.125,u=Math.abs(a-l),f=Math.abs(c-e);return[a,c,u,f]}function uo(l,e){return l>=0?.5*l:e*25*Math.sqrt(-l)}function qr({pos:l,x1:e,y1:t,x2:n,y2:o,c:s}){switch(l){case lt.Left:return[e-uo(e-n,s),t];case lt.Right:return[e+uo(n-e,s),t];case lt.Top:return[e,t-uo(t-o,s)];case lt.Bottom:return[e,t+uo(o-t,s)]}}function za({sourceX:l,sourceY:e,sourcePosition:t=lt.Bottom,targetX:n,targetY:o,targetPosition:s=lt.Top,curvature:r=.25}){const[i,a]=qr({pos:t,x1:l,y1:e,x2:n,y2:o,c:r}),[c,u]=qr({pos:s,x1:n,y1:o,x2:l,y2:e,c:r}),[f,d,h,_]=Fh({sourceX:l,sourceY:e,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${l},${e} C${i},${a} ${c},${u} ${n},${o}`,f,d,h,_]}function Na({sourceX:l,sourceY:e,targetX:t,targetY:n}){const o=Math.abs(t-l)/2,s=t<l?t+o:t-o,r=Math.abs(n-e)/2,i=n<e?n+r:n-r;return[s,i,o,r]}function Wh({sourceNode:l,targetNode:e,selected:t=!1,zIndex:n=0,elevateOnSelect:o=!1}){if(!o)return n;const s=t||e.selected||l.selected,r=Math.max(l.internals.z||0,e.internals.z||0,1e3);return n+(s?r:0)}function jh({sourceNode:l,targetNode:e,width:t,height:n,transform:o}){const s=Ho(wo(l),wo(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const r={x:-o[0]/o[2],y:-o[1]/o[2],width:t/o[2],height:n/o[2]};return Zl(r,Ao(s))>0}const Yh=({source:l,sourceHandle:e,target:t,targetHandle:n})=>`xy-edge__${l}${e||""}-${t}${n||""}`,Kh=(l,e)=>e.some(t=>t.source===l.source&&t.target===l.target&&(t.sourceHandle===l.sourceHandle||!t.sourceHandle&&!l.sourceHandle)&&(t.targetHandle===l.targetHandle||!t.targetHandle&&!l.targetHandle)),Gh=(l,e)=>{if(!l.source||!l.target)return e;let t;return Dh(l)?t={...l}:t={...l,id:Yh(l)},Kh(t,e)?e:(t.sourceHandle===null&&delete t.sourceHandle,t.targetHandle===null&&delete t.targetHandle,e.concat(t))};function Pa({sourceX:l,sourceY:e,targetX:t,targetY:n}){const[o,s,r,i]=Na({sourceX:l,sourceY:e,targetX:t,targetY:n});return[`M ${l},${e}L ${t},${n}`,o,s,r,i]}const Jr={[lt.Left]:{x:-1,y:0},[lt.Right]:{x:1,y:0},[lt.Top]:{x:0,y:-1},[lt.Bottom]:{x:0,y:1}},Xh=({source:l,sourcePosition:e=lt.Bottom,target:t})=>e===lt.Left||e===lt.Right?l.x<t.x?{x:1,y:0}:{x:-1,y:0}:l.y<t.y?{x:0,y:1}:{x:0,y:-1},Qr=(l,e)=>Math.sqrt(Math.pow(e.x-l.x,2)+Math.pow(e.y-l.y,2));function Zh({source:l,sourcePosition:e=lt.Bottom,target:t,targetPosition:n=lt.Top,center:o,offset:s}){const r=Jr[e],i=Jr[n],a={x:l.x+r.x*s,y:l.y+r.y*s},c={x:t.x+i.x*s,y:t.y+i.y*s},u=Xh({source:a,sourcePosition:e,target:c}),f=u.x!==0?"x":"y",d=u[f];let h=[],_,b;const v={x:0,y:0},g={x:0,y:0},[w,y,E,M]=Na({sourceX:l.x,sourceY:l.y,targetX:t.x,targetY:t.y});if(r[f]*i[f]===-1){_=o.x??w,b=o.y??y;const V=[{x:_,y:a.y},{x:_,y:c.y}],A=[{x:a.x,y:b},{x:c.x,y:b}];r[f]===d?h=f==="x"?V:A:h=f==="x"?A:V}else{const V=[{x:a.x,y:c.y}],A=[{x:c.x,y:a.y}];if(f==="x"?h=r.x===d?A:V:h=r.y===d?V:A,e===n){const U=Math.abs(l[f]-t[f]);if(U<=s){const C=Math.min(s-1,s-U);r[f]===d?v[f]=(a[f]>l[f]?-1:1)*C:g[f]=(c[f]>t[f]?-1:1)*C}}if(e!==n){const U=f==="x"?"y":"x",C=r[f]===i[U],I=a[U]>c[U],P=a[U]<c[U];(r[f]===1&&(!C&&I||C&&P)||r[f]!==1&&(!C&&P||C&&I))&&(h=f==="x"?V:A)}const H={x:a.x+v.x,y:a.y+v.y},L={x:c.x+g.x,y:c.y+g.y},W=Math.max(Math.abs(H.x-h[0].x),Math.abs(L.x-h[0].x)),j=Math.max(Math.abs(H.y-h[0].y),Math.abs(L.y-h[0].y));W>=j?(_=(H.x+L.x)/2,b=h[0].y):(_=h[0].x,b=(H.y+L.y)/2)}return[[l,{x:a.x+v.x,y:a.y+v.y},...h,{x:c.x+g.x,y:c.y+g.y},t],_,b,E,M]}function qh(l,e,t,n){const o=Math.min(Qr(l,e)/2,Qr(e,t)/2,n),{x:s,y:r}=e;if(l.x===s&&s===t.x||l.y===r&&r===t.y)return`L${s} ${r}`;if(l.y===r){const c=l.x<t.x?-1:1,u=l.y<t.y?1:-1;return`L ${s+o*c},${r}Q ${s},${r} ${s},${r+o*u}`}const i=l.x<t.x?1:-1,a=l.y<t.y?-1:1;return`L ${s},${r+o*a}Q ${s},${r} ${s+o*i},${r}`}function Eo({sourceX:l,sourceY:e,sourcePosition:t=lt.Bottom,targetX:n,targetY:o,targetPosition:s=lt.Top,borderRadius:r=5,centerX:i,centerY:a,offset:c=20}){const[u,f,d,h,_]=Zh({source:{x:l,y:e},sourcePosition:t,target:{x:n,y:o},targetPosition:s,center:{x:i,y:a},offset:c});return[u.reduce((v,g,w)=>{let y="";return w>0&&w<u.length-1?y=qh(u[w-1],g,u[w+1],r):y=`${w===0?"M":"L"}${g.x} ${g.y}`,v+=y,v},""),f,d,h,_]}function xr(l){var e;return l&&!!(l.internals.handleBounds||(e=l.handles)!=null&&e.length)&&!!(l.measured.width||l.width||l.initialWidth)}function Jh(l){var f;const{sourceNode:e,targetNode:t}=l;if(!xr(e)||!xr(t))return null;const n=e.internals.handleBounds||$r(e.handles),o=t.internals.handleBounds||$r(t.handles),s=ei((n==null?void 0:n.source)??[],l.sourceHandle),r=ei(l.connectionMode===dl.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),l.targetHandle);if(!s||!r)return(f=l.onError)==null||f.call(l,"008",Dl.error008(s?"target":"source",{id:l.id,sourceHandle:l.sourceHandle,targetHandle:l.targetHandle})),null;const i=(s==null?void 0:s.position)||lt.Bottom,a=(r==null?void 0:r.position)||lt.Top,c=ql(e,s,i),u=ql(t,r,a);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:i,targetPosition:a}}function $r(l){if(!l)return null;const e=[],t=[];for(const n of l)n.width=n.width??1,n.height=n.height??1,n.type==="source"?e.push(n):n.type==="target"&&t.push(n);return{source:e,target:t}}function ql(l,e,t=lt.Left,n=!1){const o=((e==null?void 0:e.x)??0)+l.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+l.internals.positionAbsolute.y,{width:r,height:i}=e??gl(l);if(n)return{x:o+r/2,y:s+i/2};switch((e==null?void 0:e.position)??t){case lt.Top:return{x:o+r/2,y:s};case lt.Right:return{x:o+r,y:s+i/2};case lt.Bottom:return{x:o+r/2,y:s+i};case lt.Left:return{x:o,y:s+i/2}}}function ei(l,e){return l&&(e?l.find(t=>t.id===e):l[0])||null}function ss(l,e){return l?typeof l=="string"?l:`${e?`${e}__`:""}${Object.keys(l).sort().map(n=>`${n}=${l[n]}`).join("&")}`:""}function Qh(l,{id:e,defaultColor:t,defaultMarkerStart:n,defaultMarkerEnd:o}){const s=new Set;return l.reduce((r,i)=>([i.markerStart||n,i.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const c=ss(a,e);s.has(c)||(r.push({id:c,color:a.color||t,...a}),s.add(c))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))}const hs={nodeOrigin:[0,0],nodeExtent:_o,elevateNodesOnSelect:!0,defaults:{}},xh={...hs,checkEquality:!0};function ms(l,e){const t={...l};for(const n in e)e[n]!==void 0&&(t[n]=e[n]);return t}function $h(l,e,t){const n=ms(hs,t);for(const o of l.values())if(o.parentId)gs(o,l,e,n);else{const s=Ql(o,n.nodeOrigin),r=Tl(o.extent)?o.extent:n.nodeExtent,i=hl(s,r,gl(o));o.internals.positionAbsolute=i}}function Oa(l,e,t,n){var a,c;const o=ms(xh,n);let s=l.length>0;const r=new Map(e),i=o!=null&&o.elevateNodesOnSelect?1e3:0;e.clear(),t.clear();for(const u of l){let f=r.get(u.id);if(o.checkEquality&&u===(f==null?void 0:f.internals.userNode))e.set(u.id,f);else{const d=Ql(u,o.nodeOrigin),h=Tl(u.extent)?u.extent:o.nodeExtent,_=hl(d,h,gl(u));f={...o.defaults,...u,measured:{width:(a=u.measured)==null?void 0:a.width,height:(c=u.measured)==null?void 0:c.height},internals:{positionAbsolute:_,handleBounds:u.measured?f==null?void 0:f.internals.handleBounds:void 0,z:Ha(u,i),userNode:u}},e.set(u.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(s=!1),u.parentId&&gs(f,e,t,n)}return s}function em(l,e){if(!l.parentId)return;const t=e.get(l.parentId);t?t.set(l.id,l):e.set(l.parentId,new Map([[l.id,l]]))}function gs(l,e,t,n){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:r}=ms(hs,n),i=l.parentId,a=e.get(i);if(!a){console.warn(`Parent node ${i} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}em(l,t);const c=o?1e3:0,{x:u,y:f,z:d}=tm(l,a,s,r,c),{positionAbsolute:h}=l.internals,_=u!==h.x||f!==h.y;(_||d!==l.internals.z)&&e.set(l.id,{...l,internals:{...l.internals,positionAbsolute:_?{x:u,y:f}:h,z:d}})}function Ha(l,e){return(Mn(l.zIndex)?l.zIndex:0)+(l.selected?e:0)}function tm(l,e,t,n,o){const{x:s,y:r}=e.internals.positionAbsolute,i=gl(l),a=Ql(l,t),c=Tl(l.extent)?hl(a,l.extent,i):a;let u=hl({x:s+c.x,y:r+c.y},n,i);l.extent==="parent"&&(u=Ca(u,i,e));const f=Ha(l,o),d=e.internals.z??0;return{x:u.x,y:u.y,z:d>f?d:f}}function nm(l,e,t,n=[0,0]){var r;const o=[],s=new Map;for(const i of l){const a=e.get(i.parentId);if(!a)continue;const c=((r=s.get(i.parentId))==null?void 0:r.expandedRect)??Ml(a),u=Nh(c,i.rect);s.set(i.parentId,{expandedRect:u,parent:a})}return s.size>0&&s.forEach(({expandedRect:i,parent:a},c)=>{var y;const u=a.internals.positionAbsolute,f=gl(a),d=a.origin??n,h=i.x<u.x?Math.round(Math.abs(u.x-i.x)):0,_=i.y<u.y?Math.round(Math.abs(u.y-i.y)):0,b=Math.max(f.width,Math.round(i.width)),v=Math.max(f.height,Math.round(i.height)),g=(b-f.width)*d[0],w=(v-f.height)*d[1];(h>0||_>0||g||w)&&(o.push({id:c,type:"position",position:{x:a.position.x-h+g,y:a.position.y-_+w}}),(y=t.get(c))==null||y.forEach(E=>{l.some(M=>M.id===E.id)||o.push({id:E.id,type:"position",position:{x:E.position.x+h,y:E.position.y+_}})})),(f.width<i.width||f.height<i.height||h||_)&&o.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:b+(h?d[0]*h-g:0),height:v+(_?d[1]*_-w:0)}})}),o}function lm(l,e,t,n,o,s){const r=n==null?void 0:n.querySelector(".xyflow__viewport");let i=!1;if(!r)return{changes:[],updatedInternals:i};const a=[],c=window.getComputedStyle(r),{m22:u}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const d of l.values()){const h=e.get(d.id);if(!h)continue;if(h.hidden){e.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),i=!0;continue}const _=Ta(d.nodeElement),b=h.measured.width!==_.width||h.measured.height!==_.height;if(!!(_.width&&_.height&&(b||!h.internals.handleBounds||d.force))){const g=d.nodeElement.getBoundingClientRect(),w=Tl(h.extent)?h.extent:s;let{positionAbsolute:y}=h.internals;h.parentId&&h.extent==="parent"?y=Ca(y,_,e.get(h.parentId)):w&&(y=hl(y,w,_));const E={...h,measured:_,internals:{...h.internals,positionAbsolute:y,handleBounds:{source:Zr("source",d.nodeElement,g,u,h.id),target:Zr("target",d.nodeElement,g,u,h.id)}}};e.set(h.id,E),h.parentId&&gs(E,e,t,{nodeOrigin:o}),i=!0,b&&(a.push({id:h.id,type:"dimensions",dimensions:_}),h.expandParent&&h.parentId&&f.push({id:h.id,parentId:h.parentId,rect:Ml(E,o)}))}}if(f.length>0){const d=nm(f,e,t,o);a.push(...d)}return{changes:a,updatedInternals:i}}async function om({delta:l,panZoom:e,transform:t,translateExtent:n,width:o,height:s}){if(!e||!l.x&&!l.y)return Promise.resolve(!1);const r=await e.setViewportConstrained({x:t[0]+l.x,y:t[1]+l.y,zoom:t[2]},[[0,0],[o,s]],n),i=!!r&&(r.x!==t[0]||r.y!==t[1]||r.k!==t[2]);return Promise.resolve(i)}function ti(l,e,t,n,o,s){let r=o;const i=n.get(r)||new Map;n.set(r,i.set(t,e)),r=`${o}-${l}`;const a=n.get(r)||new Map;if(n.set(r,a.set(t,e)),s){r=`${o}-${l}-${s}`;const c=n.get(r)||new Map;n.set(r,c.set(t,e))}}function Aa(l,e,t){l.clear(),e.clear();for(const n of t){const{source:o,target:s,sourceHandle:r=null,targetHandle:i=null}=n,a={edgeId:n.id,source:o,target:s,sourceHandle:r,targetHandle:i},c=`${o}-${r}--${s}-${i}`,u=`${s}-${i}--${o}-${r}`;ti("source",a,u,l,o,r),ti("target",a,c,l,s,i),e.set(n.id,n)}}function La(l,e){if(!l.parentId)return!1;const t=e.get(l.parentId);return t?t.selected?!0:La(t,e):!1}function ni(l,e,t){var o;let n=l;do{if((o=n==null?void 0:n.matches)!=null&&o.call(n,e))return!0;if(n===t)return!1;n=n==null?void 0:n.parentElement}while(n);return!1}function sm(l,e,t,n){const o=new Map;for(const[s,r]of l)if((r.selected||r.id===n)&&(!r.parentId||!La(r,l))&&(r.draggable||e&&typeof r.draggable>"u")){const i=l.get(s);i&&o.set(s,{id:s,position:i.position||{x:0,y:0},distance:{x:t.x-i.internals.positionAbsolute.x,y:t.y-i.internals.positionAbsolute.y},extent:i.extent,parentId:i.parentId,origin:i.origin,expandParent:i.expandParent,internals:{positionAbsolute:i.internals.positionAbsolute||{x:0,y:0}},measured:{width:i.measured.width??0,height:i.measured.height??0}})}return o}function Xo({nodeId:l,dragItems:e,nodeLookup:t,dragging:n=!0}){var r,i,a;const o=[];for(const[c,u]of e){const f=(r=t.get(c))==null?void 0:r.internals.userNode;f&&o.push({...f,position:u.position,dragging:n})}if(!l)return[o[0],o];const s=(i=t.get(l))==null?void 0:i.internals.userNode;return[s?{...s,position:((a=e.get(l))==null?void 0:a.position)||s.position,dragging:n}:o[0],o]}function rm({onNodeMouseDown:l,getStoreItems:e,onDragStart:t,onDrag:n,onDragStop:o}){let s={x:null,y:null},r=0,i=new Map,a=!1,c={x:0,y:0},u=null,f=!1,d=null,h=!1;function _({noDragClassName:v,handleSelector:g,domNode:w,isSelectable:y,nodeId:E,nodeClickDistance:M=0}){d=Cn(w);function S({x:L,y:W},j){const{nodeLookup:U,nodeExtent:C,snapGrid:I,snapToGrid:P,nodeOrigin:K,onNodeDrag:X,onSelectionDrag:F,onError:Z,updateNodePositions:ae}=e();s={x:L,y:W};let x=!1,G={x:0,y:0,x2:0,y2:0};if(i.size>1&&C){const oe=Oo(i);G=os(oe)}for(const[oe,de]of i){if(!U.has(oe))continue;let Se={x:L-de.distance.x,y:W-de.distance.y};P&&(Se=fs(Se,I));let ie=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];if(i.size>1&&C&&!de.extent){const{positionAbsolute:ue}=de.internals,qe=ue.x-G.x+C[0][0],je=ue.x+de.measured.width-G.x2+C[1][0],ge=ue.y-G.y+C[0][1],re=ue.y+de.measured.height-G.y2+C[1][1];ie=[[qe,ge],[je,re]]}const{position:ze,positionAbsolute:me}=zh({nodeId:oe,nextPosition:Se,nodeLookup:U,nodeExtent:ie,nodeOrigin:K,onError:Z});x=x||de.position.x!==ze.x||de.position.y!==ze.y,de.position=ze,de.internals.positionAbsolute=me}if(x&&(ae(i,!0),j&&(n||X||!E&&F))){const[oe,de]=Xo({nodeId:E,dragItems:i,nodeLookup:U});n==null||n(j,i,oe,de),X==null||X(j,oe,de),E||F==null||F(j,de)}}async function V(){if(!u)return;const{transform:L,panBy:W,autoPanSpeed:j,autoPanOnNodeDrag:U}=e();if(!U){a=!1,cancelAnimationFrame(r);return}const[C,I]=Ma(c,u,j);(C!==0||I!==0)&&(s.x=(s.x??0)-C/L[2],s.y=(s.y??0)-I/L[2],await W({x:C,y:I})&&S(s,null)),r=requestAnimationFrame(V)}function A(L){var x;const{nodeLookup:W,multiSelectionActive:j,nodesDraggable:U,transform:C,snapGrid:I,snapToGrid:P,selectNodesOnDrag:K,onNodeDragStart:X,onSelectionDragStart:F,unselectNodesAndEdges:Z}=e();f=!0,(!K||!y)&&!j&&E&&((x=W.get(E))!=null&&x.selected||Z()),y&&K&&E&&(l==null||l(E));const ae=Go(L.sourceEvent,{transform:C,snapGrid:I,snapToGrid:P,containerBounds:u});if(s=ae,i=sm(W,U,ae,E),i.size>0&&(t||X||!E&&F)){const[G,oe]=Xo({nodeId:E,dragItems:i,nodeLookup:W});t==null||t(L.sourceEvent,i,G,oe),X==null||X(L.sourceEvent,G,oe),E||F==null||F(L.sourceEvent,oe)}}const H=Fu().clickDistance(M).on("start",L=>{const{domNode:W,nodeDragThreshold:j,transform:U,snapGrid:C,snapToGrid:I}=e();u=(W==null?void 0:W.getBoundingClientRect())||null,h=!1,j===0&&A(L),s=Go(L.sourceEvent,{transform:U,snapGrid:C,snapToGrid:I,containerBounds:u}),c=Fn(L.sourceEvent,u)}).on("drag",L=>{const{autoPanOnNodeDrag:W,transform:j,snapGrid:U,snapToGrid:C,nodeDragThreshold:I,nodeLookup:P}=e(),K=Go(L.sourceEvent,{transform:j,snapGrid:U,snapToGrid:C,containerBounds:u});if((L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1||E&&!P.has(E))&&(h=!0),!h){if(!a&&W&&f&&(a=!0,V()),!f){const X=K.xSnapped-(s.x??0),F=K.ySnapped-(s.y??0);Math.sqrt(X*X+F*F)>I&&A(L)}(s.x!==K.xSnapped||s.y!==K.ySnapped)&&i&&f&&(c=Fn(L.sourceEvent,u),S(K,L.sourceEvent))}}).on("end",L=>{if(!(!f||h)&&(a=!1,f=!1,cancelAnimationFrame(r),i.size>0)){const{nodeLookup:W,updateNodePositions:j,onNodeDragStop:U,onSelectionDragStop:C}=e();if(j(i,!1),o||U||!E&&C){const[I,P]=Xo({nodeId:E,dragItems:i,nodeLookup:W,dragging:!1});o==null||o(L.sourceEvent,i,I,P),U==null||U(L.sourceEvent,I,P),E||C==null||C(L.sourceEvent,P)}}}).filter(L=>{const W=L.target;return!L.button&&(!v||!ni(W,`.${v}`,w))&&(!g||ni(W,g,w))});d.call(H)}function b(){d==null||d.on(".drag",null)}return{update:_,destroy:b}}function im(l,e,t){const n=[],o={x:l.x-t,y:l.y-t,width:t*2,height:t*2};for(const s of e.values())Zl(o,Ml(s))>0&&n.push(s);return n}const am=250;function cm(l,e,t,n){var i,a;let o=[],s=1/0;const r=im(l,t,e+am);for(const c of r){const u=[...((i=c.internals.handleBounds)==null?void 0:i.source)??[],...((a=c.internals.handleBounds)==null?void 0:a.target)??[]];for(const f of u){if(n.nodeId===f.nodeId&&n.type===f.type&&n.id===f.id)continue;const{x:d,y:h}=ql(c,f,f.position,!0),_=Math.sqrt(Math.pow(d-l.x,2)+Math.pow(h-l.y,2));_>e||(_<s?(o=[{...f,x:d,y:h}],s=_):_===s&&o.push({...f,x:d,y:h}))}}if(!o.length)return null;if(o.length>1){const c=n.type==="source"?"target":"source";return o.find(u=>u.type===c)??o[0]}return o[0]}function Ba(l,e,t,n,o,s=!1){var c,u,f;const r=n.get(l);if(!r)return null;const i=o==="strict"?(c=r.internals.handleBounds)==null?void 0:c[e]:[...((u=r.internals.handleBounds)==null?void 0:u.source)??[],...((f=r.internals.handleBounds)==null?void 0:f.target)??[]],a=(t?i==null?void 0:i.find(d=>d.id===t):i==null?void 0:i[0])??null;return a&&s?{...a,...ql(r,a,a.position,!0)}:a}function Ra(l,e){return l||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function um(l,e){let t=null;return e?t=!0:l&&!e&&(t=!1),t}const Ua=()=>!0;function fm(l,{connectionMode:e,connectionRadius:t,handleId:n,nodeId:o,edgeUpdaterType:s,isTarget:r,domNode:i,nodeLookup:a,lib:c,autoPanOnConnect:u,flowId:f,panBy:d,cancelConnection:h,onConnectStart:_,onConnect:b,onConnectEnd:v,isValidConnection:g=Ua,onReconnectEnd:w,updateConnection:y,getTransform:E,getFromHandle:M,autoPanSpeed:S}){const V=Bh(l.target);let A=0,H;const{x:L,y:W}=Fn(l),j=V==null?void 0:V.elementFromPoint(L,W),U=Ra(s,j),C=i==null?void 0:i.getBoundingClientRect();if(!C||!U)return;const I=Ba(o,U,n,a,e);if(!I)return;let P=Fn(l,C),K=!1,X=null,F=!1,Z=null;function ae(){if(!u||!C)return;const[me,ue]=Ma(P,C,S);d({x:me,y:ue}),A=requestAnimationFrame(ae)}const x={...I,nodeId:o,type:U,position:I.position},G=a.get(o),de={inProgress:!0,isValid:null,from:ql(G,x,lt.Left,!0),fromHandle:x,fromPosition:x.position,fromNode:G,to:P,toHandle:null,toPosition:Wr[x.position],toNode:null};y(de);let Se=de;_==null||_(l,{nodeId:o,handleId:n,handleType:U});function ie(me){if(!M()||!x){ze(me);return}const ue=E();P=Fn(me,C),H=cm(xl(P,ue,!1,[1,1]),t,a,x),K||(ae(),K=!0);const qe=Fa(me,{handle:H,connectionMode:e,fromNodeId:o,fromHandleId:n,fromType:r?"target":"source",isValidConnection:g,doc:V,lib:c,flowId:f,nodeLookup:a});Z=qe.handleDomNode,X=qe.connection,F=um(!!H,qe.isValid);const je={...Se,isValid:F,to:H&&F?yo({x:H.x,y:H.y},ue):P,toHandle:qe.toHandle,toPosition:F&&qe.toHandle?qe.toHandle.position:Wr[x.position],toNode:qe.toHandle?a.get(qe.toHandle.nodeId):null};F&&H&&Se.toHandle&&je.toHandle&&Se.toHandle.type===je.toHandle.type&&Se.toHandle.nodeId===je.toHandle.nodeId&&Se.toHandle.id===je.toHandle.id&&Se.to.x===je.to.x&&Se.to.y===je.to.y||(y(je),Se=je)}function ze(me){(H||Z)&&X&&F&&(b==null||b(X));const{inProgress:ue,...qe}=Se,je={...qe,toPosition:Se.toHandle?Se.toPosition:null};v==null||v(me,je),s&&(w==null||w(me,je)),h(),cancelAnimationFrame(A),K=!1,F=!1,X=null,Z=null,V.removeEventListener("mousemove",ie),V.removeEventListener("mouseup",ze),V.removeEventListener("touchmove",ie),V.removeEventListener("touchend",ze)}V.addEventListener("mousemove",ie),V.addEventListener("mouseup",ze),V.addEventListener("touchmove",ie),V.addEventListener("touchend",ze)}function Fa(l,{handle:e,connectionMode:t,fromNodeId:n,fromHandleId:o,fromType:s,doc:r,lib:i,flowId:a,isValidConnection:c=Ua,nodeLookup:u}){const f=s==="target",d=e?r.querySelector(`.${i}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:h,y:_}=Fn(l),b=r.elementFromPoint(h,_),v=b!=null&&b.classList.contains(`${i}-flow__handle`)?b:d,g={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const w=Ra(void 0,v),y=v.getAttribute("data-nodeid"),E=v.getAttribute("data-handleid"),M=v.classList.contains("connectable"),S=v.classList.contains("connectableend");if(!y||!w)return g;const V={source:f?y:n,sourceHandle:f?E:o,target:f?n:y,targetHandle:f?o:E};g.connection=V;const H=M&&S&&(t===dl.Strict?f&&w==="source"||!f&&w==="target":y!==n||E!==o);g.isValid=H&&c(V),g.toHandle=Ba(y,w,E,u,t,!1)}return g}const dm={onPointerDown:fm,isValid:Fa},hm=(l,e)=>l.x!==e.x||l.y!==e.y||l.zoom!==e.k,Lo=l=>({x:l.x,y:l.y,zoom:l.k}),Zo=({x:l,y:e,zoom:t})=>cs.translate(l,e).scale(t),wl=(l,e)=>l.target.closest(`.${e}`),Wa=(l,e)=>e===2&&Array.isArray(l)&&l.includes(2),qo=(l,e=0,t=()=>{})=>{const n=typeof e=="number"&&e>0;return n||t(),n?l.transition().duration(e).on("end",t):l},ja=l=>{const e=l.ctrlKey&&ko()?10:1;return-l.deltaY*(l.deltaMode===1?.05:l.deltaMode?1:.002)*e};function mm({zoomPanValues:l,noWheelClassName:e,d3Selection:t,d3Zoom:n,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:r,onPanZoomStart:i,onPanZoom:a,onPanZoomEnd:c}){return u=>{if(wl(u,e))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=t.property("__zoom").k||1;if(u.ctrlKey&&r){const v=On(u),g=ja(u),w=f*Math.pow(2,g);n.scaleTo(t,w,v,u);return}const d=u.deltaMode===1?20:1;let h=o===An.Vertical?0:u.deltaX*d,_=o===An.Horizontal?0:u.deltaY*d;!ko()&&u.shiftKey&&o!==An.Vertical&&(h=u.deltaY*d,_=0),n.translateBy(t,-(h/f)*s,-(_/f)*s,{internal:!0});const b=Lo(t.property("__zoom"));clearTimeout(l.panScrollTimeout),l.isPanScrolling||(l.isPanScrolling=!0,i==null||i(u,b)),l.isPanScrolling&&(a==null||a(u,b),l.panScrollTimeout=setTimeout(()=>{c==null||c(u,b),l.isPanScrolling=!1},150))}}function gm({noWheelClassName:l,preventScrolling:e,d3ZoomHandler:t}){return function(n,o){const s=n.type==="wheel",r=!e&&s&&!n.ctrlKey,i=wl(n,l);if(n.ctrlKey&&s&&i&&n.preventDefault(),r||i)return null;n.preventDefault(),t.call(this,n,o)}}function pm({zoomPanValues:l,onDraggingChange:e,onPanZoomStart:t}){return n=>{var s,r,i;if((s=n.sourceEvent)!=null&&s.internal)return;const o=Lo(n.transform);l.mouseButton=((r=n.sourceEvent)==null?void 0:r.button)||0,l.isZoomingOrPanning=!0,l.prevViewport=o,((i=n.sourceEvent)==null?void 0:i.type)==="mousedown"&&e(!0),t&&(t==null||t(n.sourceEvent,o))}}function _m({zoomPanValues:l,panOnDrag:e,onPaneContextMenu:t,onTransformChange:n,onPanZoom:o}){return s=>{var r,i;l.usedRightMouseButton=!!(t&&Wa(e,l.mouseButton??0)),(r=s.sourceEvent)!=null&&r.sync||n([s.transform.x,s.transform.y,s.transform.k]),o&&!((i=s.sourceEvent)!=null&&i.internal)&&(o==null||o(s.sourceEvent,Lo(s.transform)))}}function bm({zoomPanValues:l,panOnDrag:e,panOnScroll:t,onDraggingChange:n,onPanZoomEnd:o,onPaneContextMenu:s}){return r=>{var i;if(!((i=r.sourceEvent)!=null&&i.internal)&&(l.isZoomingOrPanning=!1,s&&Wa(e,l.mouseButton??0)&&!l.usedRightMouseButton&&r.sourceEvent&&s(r.sourceEvent),l.usedRightMouseButton=!1,n(!1),o&&hm(l.prevViewport,r.transform))){const a=Lo(r.transform);l.prevViewport=a,clearTimeout(l.timerId),l.timerId=setTimeout(()=>{o==null||o(r.sourceEvent,a)},t?150:0)}}}function vm({zoomActivationKeyPressed:l,zoomOnScroll:e,zoomOnPinch:t,panOnDrag:n,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:r,noWheelClassName:i,noPanClassName:a,lib:c}){return u=>{var _;const f=l||e,d=t&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(wl(u,`${c}-flow__node`)||wl(u,`${c}-flow__edge`)))return!0;if(!n&&!f&&!o&&!s&&!t||r||wl(u,i)&&u.type==="wheel"||wl(u,a)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!l)||!t&&u.ctrlKey&&u.type==="wheel")return!1;if(!t&&u.type==="touchstart"&&((_=u.touches)==null?void 0:_.length)>1)return u.preventDefault(),!1;if(!f&&!o&&!d&&u.type==="wheel"||!n&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(n)&&!n.includes(u.button)&&u.type==="mousedown")return!1;const h=Array.isArray(n)&&n.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&h}}function wm({domNode:l,minZoom:e,maxZoom:t,paneClickDistance:n,translateExtent:o,viewport:s,onPanZoom:r,onPanZoomStart:i,onPanZoomEnd:a,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=l.getBoundingClientRect(),d=xu().clickDistance(!Mn(n)||n<0?0:n).scaleExtent([e,t]).translateExtent(o),h=Cn(l).call(d);y({x:s.x,y:s.y,zoom:Cl(s.zoom,e,t)},[[0,0],[f.width,f.height]],o);const _=h.on("wheel.zoom"),b=h.on("dblclick.zoom");d.wheelDelta(ja);function v(j,U){return h?new Promise(C=>{d==null||d.transform(qo(h,U==null?void 0:U.duration,()=>C(!0)),j)}):Promise.resolve(!1)}function g({noWheelClassName:j,noPanClassName:U,onPaneContextMenu:C,userSelectionActive:I,panOnScroll:P,panOnDrag:K,panOnScrollMode:X,panOnScrollSpeed:F,preventScrolling:Z,zoomOnPinch:ae,zoomOnScroll:x,zoomOnDoubleClick:G,zoomActivationKeyPressed:oe,lib:de,onTransformChange:Se}){I&&!u.isZoomingOrPanning&&w();const ze=P&&!oe&&!I?mm({zoomPanValues:u,noWheelClassName:j,d3Selection:h,d3Zoom:d,panOnScrollMode:X,panOnScrollSpeed:F,zoomOnPinch:ae,onPanZoomStart:i,onPanZoom:r,onPanZoomEnd:a}):gm({noWheelClassName:j,preventScrolling:Z,d3ZoomHandler:_});if(h.on("wheel.zoom",ze,{passive:!1}),!I){const ue=pm({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:i});d.on("start",ue);const qe=_m({zoomPanValues:u,panOnDrag:K,onPaneContextMenu:!!C,onPanZoom:r,onTransformChange:Se});d.on("zoom",qe);const je=bm({zoomPanValues:u,panOnDrag:K,panOnScroll:P,onPaneContextMenu:C,onPanZoomEnd:a,onDraggingChange:c});d.on("end",je)}const me=vm({zoomActivationKeyPressed:oe,panOnDrag:K,zoomOnScroll:x,panOnScroll:P,zoomOnDoubleClick:G,zoomOnPinch:ae,userSelectionActive:I,noPanClassName:U,noWheelClassName:j,lib:de});d.filter(me),G?h.on("dblclick.zoom",b):h.on("dblclick.zoom",null)}function w(){d.on("zoom",null)}async function y(j,U,C){const I=Zo(j),P=d==null?void 0:d.constrain()(I,U,C);return P&&await v(P),new Promise(K=>K(P))}async function E(j,U){const C=Zo(j);return await v(C,U),new Promise(I=>I(C))}function M(j){if(h){const U=Zo(j),C=h.property("__zoom");(C.k!==j.zoom||C.x!==j.x||C.y!==j.y)&&(d==null||d.transform(h,U,null,{sync:!0}))}}function S(){const j=h?ru(h.node()):{x:0,y:0,k:1};return{x:j.x,y:j.y,zoom:j.k}}function V(j,U){return h?new Promise(C=>{d==null||d.scaleTo(qo(h,U==null?void 0:U.duration,()=>C(!0)),j)}):Promise.resolve(!1)}function A(j,U){return h?new Promise(C=>{d==null||d.scaleBy(qo(h,U==null?void 0:U.duration,()=>C(!0)),j)}):Promise.resolve(!1)}function H(j){d==null||d.scaleExtent(j)}function L(j){d==null||d.translateExtent(j)}function W(j){const U=!Mn(j)||j<0?0:j;d==null||d.clickDistance(U)}return{update:g,destroy:w,setViewport:E,setViewportConstrained:y,getViewport:S,scaleTo:V,scaleBy:A,setScaleExtent:H,setTranslateExtent:L,syncViewport:M,setClickDistance:W}}var li;(function(l){l.Line="line",l.Handle="handle"})(li||(li={}));function ym(l){let e,t,n,o,s,r;const i=l[45].default,a=Jt(i,l,l[44],null);return{c(){e=N("div"),a&&a.c(),this.h()},l(c){e=z(c,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var u=D(e);a&&a.l(u),u.forEach(p),this.h()},h(){m(e,"data-handleid",l[6]),m(e,"data-nodeid",l[14]),m(e,"data-handlepos",l[2]),m(e,"data-id",t=l[13]+"-"+l[14]+"-"+(l[0]||null)+"-"+l[1]),m(e,"class",n=Tt(["svelte-flow__handle",`svelte-flow__handle-${l[2]}`,"nodrag","nopan",l[2],l[4]])),m(e,"style",l[3]),m(e,"role","button"),m(e,"tabindex","-1"),nt(e,"valid",l[7]),nt(e,"connectingto",l[5]),nt(e,"connectingfrom",l[9]),nt(e,"source",!l[11]),nt(e,"target",l[11]),nt(e,"connectablestart",l[12]),nt(e,"connectableend",l[12]),nt(e,"connectable",l[12]),nt(e,"connectionindicator",l[12]&&(!l[10]||l[8]))},m(c,u){B(c,e,u),a&&a.m(e,null),o=!0,s||(r=[De(e,"mousedown",l[32]),De(e,"touchstart",l[32])],s=!0)},p(c,u){a&&a.p&&(!o||u[1]&8192)&&Qt(a,i,c,c[44],o?$t(i,c[44],u,null):xt(c[44]),null),(!o||u[0]&64)&&m(e,"data-handleid",c[6]),(!o||u[0]&4)&&m(e,"data-handlepos",c[2]),(!o||u[0]&8195&&t!==(t=c[13]+"-"+c[14]+"-"+(c[0]||null)+"-"+c[1]))&&m(e,"data-id",t),(!o||u[0]&20&&n!==(n=Tt(["svelte-flow__handle",`svelte-flow__handle-${c[2]}`,"nodrag","nopan",c[2],c[4]])))&&m(e,"class",n),(!o||u[0]&8)&&m(e,"style",c[3]),(!o||u[0]&148)&&nt(e,"valid",c[7]),(!o||u[0]&52)&&nt(e,"connectingto",c[5]),(!o||u[0]&532)&&nt(e,"connectingfrom",c[9]),(!o||u[0]&2068)&&nt(e,"source",!c[11]),(!o||u[0]&2068)&&nt(e,"target",c[11]),(!o||u[0]&4116)&&nt(e,"connectablestart",c[12]),(!o||u[0]&4116)&&nt(e,"connectableend",c[12]),(!o||u[0]&4116)&&nt(e,"connectable",c[12]),(!o||u[0]&5396)&&nt(e,"connectionindicator",c[12]&&(!c[10]||c[8]))},i(c){o||(T(a,c),o=!0)},o(c){O(a,c),o=!1},d(c){c&&p(e),a&&a.d(c),s=!1,an(r)}}}function km(l,e,t){let n,o,s,r,i,a,c,u,f,d,h,_,b,v,g,w,y,E,M,S,V,A,H,L,W,{$$slots:j={},$$scope:U}=e,{id:C=void 0}=e,{type:I="source"}=e,{position:P=lt.Top}=e,{style:K=void 0}=e,{isValidConnection:X=void 0}=e,{onconnect:F=void 0}=e,{ondisconnect:Z=void 0}=e,{isConnectable:ae=void 0}=e,{class:x=void 0}=e;const G=Nt("svelteflow__node_id"),oe=Nt("svelteflow__node_connectable");se(l,oe,le=>t(43,W=le));const de=Wt(),{connectionMode:Se,domNode:ie,nodeLookup:ze,connectionRadius:me,viewport:ue,isValidConnection:qe,lib:je,addEdge:ge,onedgecreate:re,panBy:Re,cancelConnection:rt,updateConnection:tt,autoPanOnConnect:et,edges:$e,connectionLookup:gt,onconnect:jt,onconnectstart:Pt,onconnectend:_t,flowId:Ot,connection:Ht}=de;se(l,Se,le=>t(40,d=le)),se(l,ie,le=>t(55,H=le)),se(l,ze,le=>t(54,A=le)),se(l,me,le=>t(56,L=le)),se(l,ue,le=>t(46,b=le)),se(l,qe,le=>t(51,E=le)),se(l,je,le=>t(53,V=le)),se(l,re,le=>t(50,y=le)),se(l,et,le=>t(52,S=le)),se(l,$e,le=>t(42,_=le)),se(l,gt,le=>t(41,h=le)),se(l,jt,le=>t(49,w=le)),se(l,Pt,le=>t(48,g=le)),se(l,_t,le=>t(47,v=le)),se(l,Ot,le=>t(13,M=le)),se(l,Ht,le=>t(39,f=le));function At(le){const Bt=Va(le);(Bt&&le.button===0||!Bt)&&dm.onPointerDown(le,{handleId:s,nodeId:G,isTarget:n,connectionRadius:L,domNode:H,nodeLookup:A,connectionMode:d,lib:V,autoPanOnConnect:S,flowId:M,isValidConnection:X??E,updateConnection:tt,cancelConnection:rt,panBy:Re,onConnect:ut=>{const ce=y?y(ut):ut;ce&&(ge(ce),w==null||w(ut))},onConnectStart:(ut,ce)=>{g==null||g(ut,{nodeId:ce.nodeId,handleId:ce.handleId,handleType:ce.handleType})},onConnectEnd:(ut,ce)=>{v==null||v(ut,ce)},getTransform:()=>[b.x,b.y,b.zoom],getFromHandle:()=>f.fromHandle})}let Vt=null,Lt;return l.$$set=le=>{"id"in le&&t(0,C=le.id),"type"in le&&t(1,I=le.type),"position"in le&&t(2,P=le.position),"style"in le&&t(3,K=le.style),"isValidConnection"in le&&t(33,X=le.isValidConnection),"onconnect"in le&&t(34,F=le.onconnect),"ondisconnect"in le&&t(35,Z=le.ondisconnect),"isConnectable"in le&&t(36,ae=le.isConnectable),"class"in le&&t(4,x=le.class),"$$scope"in le&&t(44,U=le.$$scope)},l.$$.update=()=>{var le,Bt,ut,ce,Ue,Ae,Ze,yt,vt;if(l.$$.dirty[0]&2&&t(11,n=I==="target"),l.$$.dirty[1]&4128&&t(12,o=ae!==void 0?ae:W),l.$$.dirty[0]&1&&t(6,s=C||null),l.$$.dirty[0]&3|l.$$.dirty[1]&3096&&(F||Z)&&t(38,Lt=h.get(`${G}-${I}${C?`-${C}`:""}`)),l.$$.dirty[1]&216){if(Vt&&!Sh(Lt,Vt)){const St=Lt??new Map;jr(Vt,St,Z),jr(St,Vt,F)}t(37,Vt=Lt??new Map)}l.$$.dirty[1]&256&&t(10,r=!!f.fromHandle),l.$$.dirty[0]&66|l.$$.dirty[1]&256&&t(9,i=((le=f.fromHandle)==null?void 0:le.nodeId)===G&&((Bt=f.fromHandle)==null?void 0:Bt.type)===I&&((ut=f.fromHandle)==null?void 0:ut.id)===s),l.$$.dirty[0]&66|l.$$.dirty[1]&256&&t(5,a=((ce=f.toHandle)==null?void 0:ce.nodeId)===G&&((Ue=f.toHandle)==null?void 0:Ue.type)===I&&((Ae=f.toHandle)==null?void 0:Ae.id)===s),l.$$.dirty[0]&66|l.$$.dirty[1]&768&&t(8,c=d===dl.Strict?((Ze=f.fromHandle)==null?void 0:Ze.type)!==I:G!==((yt=f.fromHandle)==null?void 0:yt.nodeId)||s!==((vt=f.fromHandle)==null?void 0:vt.id)),l.$$.dirty[0]&32|l.$$.dirty[1]&256&&t(7,u=a&&f.isValid)},[C,I,P,K,x,a,s,u,c,i,r,n,o,M,G,oe,Se,ie,ze,me,ue,qe,je,re,et,$e,gt,jt,Pt,_t,Ot,Ht,At,X,F,Z,ae,Vt,Lt,f,d,h,_,W,U,j]}class Vl extends Oe{constructor(e){super(),He(this,e,km,ym,Le,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function Em(l){var a;let e,t,n=((a=l[0])==null?void 0:a.label)+"",o,s,r,i;return e=new Vl({props:{type:"target",position:l[1]??lt.Top}}),r=new Vl({props:{type:"source",position:l[2]??lt.Bottom}}),{c(){te(e.$$.fragment),t=Q(),o=ke(n),s=Q(),te(r.$$.fragment)},l(c){ne(e.$$.fragment,c),t=J(c),o=ye(c,n),s=J(c),ne(r.$$.fragment,c)},m(c,u){ee(e,c,u),B(c,t,u),B(c,o,u),B(c,s,u),ee(r,c,u),i=!0},p(c,[u]){var h;const f={};u&2&&(f.position=c[1]??lt.Top),e.$set(f),(!i||u&1)&&n!==(n=((h=c[0])==null?void 0:h.label)+"")&&Ce(o,n);const d={};u&4&&(d.position=c[2]??lt.Bottom),r.$set(d)},i(c){i||(T(e.$$.fragment,c),T(r.$$.fragment,c),i=!0)},o(c){O(e.$$.fragment,c),O(r.$$.fragment,c),i=!1},d(c){c&&(p(t),p(o),p(s)),$(e,c),$(r,c)}}}function Im(l,e,t){const n=["data","targetPosition","sourcePosition"];Ft(e,n);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e,{sourcePosition:r=void 0}=e;return l.$$set=i=>{e=wt(wt({},e),Tn(i)),t(3,Ft(e,n)),"data"in i&&t(0,o=i.data),"targetPosition"in i&&t(1,s=i.targetPosition),"sourcePosition"in i&&t(2,r=i.sourcePosition)},[o,s,r]}class Ya extends Oe{constructor(e){super(),He(this,e,Im,Em,Le,{data:0,targetPosition:1,sourcePosition:2})}}function Sm(l){var r;let e=((r=l[0])==null?void 0:r.label)+"",t,n,o,s;return o=new Vl({props:{type:"source",position:l[1]??lt.Bottom}}),{c(){t=ke(e),n=Q(),te(o.$$.fragment)},l(i){t=ye(i,e),n=J(i),ne(o.$$.fragment,i)},m(i,a){B(i,t,a),B(i,n,a),ee(o,i,a),s=!0},p(i,[a]){var u;(!s||a&1)&&e!==(e=((u=i[0])==null?void 0:u.label)+"")&&Ce(t,e);const c={};a&2&&(c.position=i[1]??lt.Bottom),o.$set(c)},i(i){s||(T(o.$$.fragment,i),s=!0)},o(i){O(o.$$.fragment,i),s=!1},d(i){i&&(p(t),p(n)),$(o,i)}}}function Dm(l,e,t){const n=["data","sourcePosition"];Ft(e,n);let{data:o={label:"Node"}}=e,{sourcePosition:s=void 0}=e;return l.$$set=r=>{e=wt(wt({},e),Tn(r)),t(2,Ft(e,n)),"data"in r&&t(0,o=r.data),"sourcePosition"in r&&t(1,s=r.sourcePosition)},[o,s]}class Cm extends Oe{constructor(e){super(),He(this,e,Dm,Sm,Le,{data:0,sourcePosition:1})}}function Mm(l){var r;let e=((r=l[0])==null?void 0:r.label)+"",t,n,o,s;return o=new Vl({props:{type:"target",position:l[1]??lt.Top}}),{c(){t=ke(e),n=Q(),te(o.$$.fragment)},l(i){t=ye(i,e),n=J(i),ne(o.$$.fragment,i)},m(i,a){B(i,t,a),B(i,n,a),ee(o,i,a),s=!0},p(i,[a]){var u;(!s||a&1)&&e!==(e=((u=i[0])==null?void 0:u.label)+"")&&Ce(t,e);const c={};a&2&&(c.position=i[1]??lt.Top),o.$set(c)},i(i){s||(T(o.$$.fragment,i),s=!0)},o(i){O(o.$$.fragment,i),s=!1},d(i){i&&(p(t),p(n)),$(o,i)}}}function Tm(l,e,t){const n=["data","targetPosition"];Ft(e,n);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e;return l.$$set=r=>{e=wt(wt({},e),Tn(r)),t(2,Ft(e,n)),"data"in r&&t(0,o=r.data),"targetPosition"in r&&t(1,s=r.targetPosition)},[o,s]}class Vm extends Oe{constructor(e){super(),He(this,e,Tm,Mm,Le,{data:0,targetPosition:1})}}function zm(l,e,t){const n=[];return Ft(e,n),l.$$set=o=>{e=wt(wt({},e),Tn(o)),t(0,Ft(e,n))},[]}class Nm extends Oe{constructor(e){super(),He(this,e,zm,null,Le,{})}}function oi(l,e,t){if(!e)return;const n=t?e.querySelector(t):e;n&&n.appendChild(l)}function Pm(l,{target:e,domNode:t}){return oi(l,t,e),{async update({target:n,domNode:o}){oi(l,o,n)},destroy(){l.parentNode&&l.parentNode.removeChild(l)}}}function Om(l){let e,t,n,o,s;const r=l[3].default,i=Jt(r,l,l[2],null);return{c(){e=N("div"),i&&i.c()},l(a){e=z(a,"DIV",{});var c=D(e);i&&i.l(c),c.forEach(p)},m(a,c){B(a,e,c),i&&i.m(e,null),n=!0,o||(s=gn(t=Pm.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:l[0]})),o=!0)},p(a,[c]){i&&i.p&&(!n||c&4)&&Qt(i,r,a,a[2],n?$t(r,a[2],c,null):xt(a[2]),null),t&&sn(t.update)&&c&1&&t.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){n||(T(i,a),n=!0)},o(a){O(i,a),n=!1},d(a){a&&p(e),i&&i.d(a),o=!1,s()}}}function Hm(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const{domNode:r}=Wt();return se(l,r,i=>t(0,n=i)),l.$$set=i=>{"$$scope"in i&&t(2,s=i.$$scope)},[n,r,s,o]}class Am extends Oe{constructor(e){super(),He(this,e,Hm,Om,Le,{})}}function Ka(){const{edgeLookup:l,selectionRect:e,selectionRectMode:t,multiselectionKeyPressed:n,addSelectedEdges:o,unselectNodesAndEdges:s,elementsSelectable:r}=Wt();return i=>{const a=he(l).get(i);if(!a){console.warn("012",Dl.error012(i));return}(a.selectable||he(r)&&typeof a.selectable>"u")&&(e.set(null),t.set(null),a.selected?a.selected&&he(n)&&s({nodes:[],edges:[a]}):o([i]))}}function Lm(l){let e,t,n=`translate(-50%, -50%) translate(${l[1]}px,${l[2]}px)`,o,s,r;const i=l[5].default,a=Jt(i,l,l[7],null);return{c(){e=N("div"),a&&a.c(),this.h()},l(c){e=z(c,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var u=D(e);a&&a.l(u),u.forEach(p),this.h()},h(){m(e,"class","svelte-flow__edge-label"),m(e,"style",t="pointer-events: all;"+l[0]),m(e,"role","button"),m(e,"tabindex","-1"),Qe(e,"transform",n)},m(c,u){B(c,e,u),a&&a.m(e,null),o=!0,s||(r=[De(e,"keyup",Rm),De(e,"click",l[6])],s=!0)},p(c,u){a&&a.p&&(!o||u&128)&&Qt(a,i,c,c[7],o?$t(i,c[7],u,null):xt(c[7]),null),(!o||u&1&&t!==(t="pointer-events: all;"+c[0]))&&m(e,"style",t);const f=u&1;(u&7&&n!==(n=`translate(-50%, -50%) translate(${c[1]}px,${c[2]}px)`)||f)&&Qe(e,"transform",n)},i(c){o||(T(a,c),o=!0)},o(c){O(a,c),o=!1},d(c){c&&p(e),a&&a.d(c),s=!1,an(r)}}}function Bm(l){let e,t;return e=new Am({props:{$$slots:{default:[Lm]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,[o]){const s={};o&135&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}const Rm=()=>{};function Um(l,e,t){let{$$slots:n={},$$scope:o}=e,{style:s=void 0}=e,{x:r=void 0}=e,{y:i=void 0}=e;const a=Ka(),c=Nt("svelteflow__edge_id"),u=()=>{c&&a(c)};return l.$$set=f=>{"style"in f&&t(0,s=f.style),"x"in f&&t(1,r=f.x),"y"in f&&t(2,i=f.y),"$$scope"in f&&t(7,o=f.$$scope)},[s,r,i,a,c,n,u,o]}class Fm extends Oe{constructor(e){super(),He(this,e,Um,Bm,Le,{style:0,x:1,y:2})}}function Wm(l){let e;return{c(){e=ve("path"),this.h()},l(t){e=be(t,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),D(e).forEach(p),this.h()},h(){m(e,"d",l[1]),m(e,"stroke-opacity",0),m(e,"stroke-width",l[10]),m(e,"fill","none"),m(e,"class","svelte-flow__edge-interaction")},m(t,n){B(t,e,n)},p(t,n){n&2&&m(e,"d",t[1])},d(t){t&&p(e)}}}function si(l){let e,t;return e=new Fm({props:{x:l[3],y:l[4],style:l[5],$$slots:{default:[jm]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&8&&(s.x=n[3]),o&16&&(s.y=n[4]),o&32&&(s.style=n[5]),o&4100&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function jm(l){let e;return{c(){e=ke(l[2])},l(t){e=ye(t,l[2])},m(t,n){B(t,e,n)},p(t,n){n&4&&Ce(e,t[2])},d(t){t&&p(e)}}}function Ym(l){let e,t,n,o,s,r,i=l[10]&&Wm(l),a=l[2]&&si(l);return{c(){e=ve("path"),n=Q(),i&&i.c(),o=Q(),a&&a.c(),s=Me(),this.h()},l(c){e=be(c,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),D(e).forEach(p),n=J(c),i&&i.l(c),o=J(c),a&&a.l(c),s=Me(),this.h()},h(){m(e,"id",l[0]),m(e,"d",l[1]),m(e,"class",t=Tt(["svelte-flow__edge-path",l[9]])),m(e,"marker-start",l[6]),m(e,"marker-end",l[7]),m(e,"fill","none"),m(e,"style",l[8])},m(c,u){B(c,e,u),B(c,n,u),i&&i.m(c,u),B(c,o,u),a&&a.m(c,u),B(c,s,u),r=!0},p(c,[u]){(!r||u&1)&&m(e,"id",c[0]),(!r||u&2)&&m(e,"d",c[1]),(!r||u&512&&t!==(t=Tt(["svelte-flow__edge-path",c[9]])))&&m(e,"class",t),(!r||u&64)&&m(e,"marker-start",c[6]),(!r||u&128)&&m(e,"marker-end",c[7]),(!r||u&256)&&m(e,"style",c[8]),c[10]&&i.p(c,u),c[2]?a?(a.p(c,u),u&4&&T(a,1)):(a=si(c),a.c(),T(a,1),a.m(s.parentNode,s)):a&&(Te(),O(a,1,1,()=>{a=null}),Ve())},i(c){r||(T(a),r=!0)},o(c){O(a),r=!1},d(c){c&&(p(e),p(n),p(o),p(s)),i&&i.d(c),a&&a.d(c)}}}function Km(l,e,t){let{id:n=void 0}=e,{path:o}=e,{label:s=void 0}=e,{labelX:r=void 0}=e,{labelY:i=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:c=void 0}=e,{markerEnd:u=void 0}=e,{style:f=void 0}=e,{interactionWidth:d=20}=e,{class:h=void 0}=e,_=d===void 0?20:d;return l.$$set=b=>{"id"in b&&t(0,n=b.id),"path"in b&&t(1,o=b.path),"label"in b&&t(2,s=b.label),"labelX"in b&&t(3,r=b.labelX),"labelY"in b&&t(4,i=b.labelY),"labelStyle"in b&&t(5,a=b.labelStyle),"markerStart"in b&&t(6,c=b.markerStart),"markerEnd"in b&&t(7,u=b.markerEnd),"style"in b&&t(8,f=b.style),"interactionWidth"in b&&t(11,d=b.interactionWidth),"class"in b&&t(9,h=b.class)},[n,o,s,r,i,a,c,u,f,h,_,d]}class Bo extends Oe{constructor(e){super(),He(this,e,Km,Ym,Le,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Gm(l){let e,t;return e=new Bo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Xm(l,e,t){let n,o,s;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ft(e,r);let{label:i=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:_}=e,{sourcePosition:b}=e,{targetX:v}=e,{targetY:g}=e,{targetPosition:w}=e;return l.$$set=y=>{e=wt(wt({},e),Tn(y)),t(15,Ft(e,r)),"label"in y&&t(0,i=y.label),"labelStyle"in y&&t(1,a=y.labelStyle),"style"in y&&t(2,c=y.style),"markerStart"in y&&t(3,u=y.markerStart),"markerEnd"in y&&t(4,f=y.markerEnd),"interactionWidth"in y&&t(5,d=y.interactionWidth),"sourceX"in y&&t(9,h=y.sourceX),"sourceY"in y&&t(10,_=y.sourceY),"sourcePosition"in y&&t(11,b=y.sourcePosition),"targetX"in y&&t(12,v=y.targetX),"targetY"in y&&t(13,g=y.targetY),"targetPosition"in y&&t(14,w=y.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=za({sourceX:h,sourceY:_,targetX:v,targetY:g,sourcePosition:b,targetPosition:w}),n,(t(7,o),t(9,h),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)),(t(6,s),t(9,h),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)))},[i,a,c,u,f,d,s,o,n,h,_,b,v,g,w]}class Ga extends Oe{constructor(e){super(),He(this,e,Xm,Gm,Le,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Zm(l){let e,t;return e=new Bo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function qm(l,e,t){let n,o,s;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ft(e,r);let{label:i=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:_}=e,{sourcePosition:b}=e,{targetX:v}=e,{targetY:g}=e,{targetPosition:w}=e;return l.$$set=y=>{e=wt(wt({},e),Tn(y)),t(15,Ft(e,r)),"label"in y&&t(0,i=y.label),"labelStyle"in y&&t(1,a=y.labelStyle),"style"in y&&t(2,c=y.style),"markerStart"in y&&t(3,u=y.markerStart),"markerEnd"in y&&t(4,f=y.markerEnd),"interactionWidth"in y&&t(5,d=y.interactionWidth),"sourceX"in y&&t(9,h=y.sourceX),"sourceY"in y&&t(10,_=y.sourceY),"sourcePosition"in y&&t(11,b=y.sourcePosition),"targetX"in y&&t(12,v=y.targetX),"targetY"in y&&t(13,g=y.targetY),"targetPosition"in y&&t(14,w=y.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=Eo({sourceX:h,sourceY:_,targetX:v,targetY:g,sourcePosition:b,targetPosition:w}),n,(t(7,o),t(9,h),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)),(t(6,s),t(9,h),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)))},[i,a,c,u,f,d,s,o,n,h,_,b,v,g,w]}class Jm extends Oe{constructor(e){super(),He(this,e,qm,Zm,Le,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Qm(l){let e,t;return e=new Bo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function xm(l,e,t){let n,o,s;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Ft(e,r);let{label:i=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:_}=e,{targetX:b}=e,{targetY:v}=e;return l.$$set=g=>{e=wt(wt({},e),Tn(g)),t(13,Ft(e,r)),"label"in g&&t(0,i=g.label),"labelStyle"in g&&t(1,a=g.labelStyle),"style"in g&&t(2,c=g.style),"markerStart"in g&&t(3,u=g.markerStart),"markerEnd"in g&&t(4,f=g.markerEnd),"interactionWidth"in g&&t(5,d=g.interactionWidth),"sourceX"in g&&t(9,h=g.sourceX),"sourceY"in g&&t(10,_=g.sourceY),"targetX"in g&&t(11,b=g.targetX),"targetY"in g&&t(12,v=g.targetY)},l.$$.update=()=>{l.$$.dirty&7680&&t(8,[n,o,s]=Pa({sourceX:h,sourceY:_,targetX:b,targetY:v}),n,(t(7,o),t(9,h),t(10,_),t(11,b),t(12,v)),(t(6,s),t(9,h),t(10,_),t(11,b),t(12,v)))},[i,a,c,u,f,d,s,o,n,h,_,b,v]}class $m extends Oe{constructor(e){super(),He(this,e,xm,Qm,Le,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function e1(l){let e,t;return e=new Bo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function t1(l,e,t){let n,o,s;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ft(e,r);let{label:i=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:_}=e,{sourcePosition:b}=e,{targetX:v}=e,{targetY:g}=e,{targetPosition:w}=e;return l.$$set=y=>{e=wt(wt({},e),Tn(y)),t(15,Ft(e,r)),"label"in y&&t(0,i=y.label),"labelStyle"in y&&t(1,a=y.labelStyle),"style"in y&&t(2,c=y.style),"markerStart"in y&&t(3,u=y.markerStart),"markerEnd"in y&&t(4,f=y.markerEnd),"interactionWidth"in y&&t(5,d=y.interactionWidth),"sourceX"in y&&t(9,h=y.sourceX),"sourceY"in y&&t(10,_=y.sourceY),"sourcePosition"in y&&t(11,b=y.sourcePosition),"targetX"in y&&t(12,v=y.targetX),"targetY"in y&&t(13,g=y.targetY),"targetPosition"in y&&t(14,w=y.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=Eo({sourceX:h,sourceY:_,targetX:v,targetY:g,sourcePosition:b,targetPosition:w,borderRadius:0}),n,(t(7,o),t(9,h),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)),(t(6,s),t(9,h),t(10,_),t(12,v),t(13,g),t(11,b),t(14,w)))},[i,a,c,u,f,d,s,o,n,h,_,b,v,g,w]}class n1 extends Oe{constructor(e){super(),He(this,e,t1,e1,Le,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function l1(l,e){const t=l.set,n=e.set,o=he(l),s=he(e);let i=o.length===0&&s.length>0?s:o;l.set(i);const a=c=>{const u=t(c);return i=u,n(i),u};l.set=e.set=a,l.update=e.update=c=>a(c(i))}function o1(l,e){const t=l.set,n=e.set;let o=he(e);l.set(o);const s=r=>{t(r),n(r),o=r};l.set=e.set=s,l.update=e.update=r=>s(r(o))}const s1=(l,e,t)=>{if(!t)return;const n=he(l),o=e.set,s=t.set;let r=t?he(t):{x:0,y:0,zoom:1};e.set(r),e.set=i=>(o(i),s(i),r=i,i),t.set=i=>(n==null||n.syncViewport(i),o(i),s(i),r=i,i),e.update=i=>{e.set(i(r))},t.update=i=>{t.set(i(r))}},r1=(l,e,t,n=[0,0],o=_o,s,r,i,a,c,u,f,d)=>{const{subscribe:h,set:_,update:b}=Je([]);let v=l,g={},w=!0;const y=V=>{const A=Oa(V,e,t,{elevateNodesOnSelect:w,nodeOrigin:n,nodeExtent:o,defaults:g,checkEquality:!1});return he(s)&&A&&he(a)&&(Vh({nodes:e,width:he(c),height:he(u),panZoom:he(a),minZoom:he(f),maxZoom:he(d)},he(r)).then(L=>{var W;(W=he(i))==null||W.resolve(L),i.set(null)}),s.set(!1),r.set(void 0)),v=V,_(v),v},E=V=>y(V(v)),M=V=>{g=V},S=V=>{w=V.elevateNodesOnSelect??w};return y(v),{subscribe:h,set:y,update:E,setDefaultOptions:M,setOptions:S}},i1=(l,e,t,n)=>{const{subscribe:o,set:s,update:r}=Je([]);let i=l,a={};const c=d=>{const h=a?d.map(_=>({...a,..._})):d;Aa(e,t,h),i=h,s(i)},u=d=>c(d(i)),f=d=>{a=d};return c(i),{subscribe:o,set:c,update:u,setDefaultOptions:f}},Xa={input:Cm,output:Vm,default:Ya,group:Nm},Za={straight:$m,smoothstep:Jm,default:Ga,step:n1},a1=({nodes:l=[],edges:e=[],width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:r})=>{const i=new Map,a=new Map,c=new Map,u=new Map,f=s??[0,0],d=r??_o;Oa(l,i,a,{nodeExtent:d,nodeOrigin:f,elevateNodesOnSelect:!1,checkEquality:!1}),Aa(c,u,e);let h={x:0,y:0,zoom:1};if(o&&t&&n){const S=Oo(i,{filter:V=>!!((V.width||V.initialWidth)&&(V.height||V.initialHeight))});h=ds(S,t,n,.5,2,.1)}const _=Je(!1),b=Je(void 0),v=Je(null),g=Je(null),w=Je(500),y=Je(500),E=Je(.5),M=Je(2);return{flowId:Je(null),nodes:r1(l,i,a,f,d,_,b,v,g,w,y,E,M),nodeLookup:Sn(i),parentLookup:Sn(a),edgeLookup:Sn(u),visibleNodes:Sn([]),edges:i1(e,c,u),visibleEdges:Sn([]),connectionLookup:Sn(c),width:w,height:y,minZoom:E,maxZoom:M,nodeOrigin:Je(f),nodeDragThreshold:Je(1),nodeExtent:Je(d),translateExtent:Je(_o),autoPanOnNodeDrag:Je(!0),autoPanOnConnect:Je(!0),fitViewQueued:_,fitViewOptions:b,fitViewResolver:v,panZoom:g,snapGrid:Je(null),dragging:Je(!1),selectionRect:Je(null),selectionKeyPressed:Je(!1),multiselectionKeyPressed:Je(!1),deleteKeyPressed:Je(!1),panActivationKeyPressed:Je(!1),zoomActivationKeyPressed:Je(!1),selectionRectMode:Je(null),selectionMode:Je(bo.Partial),nodeTypes:Je(Xa),edgeTypes:Je(Za),viewport:Je(h),connectionMode:Je(dl.Strict),domNode:Je(null),connection:Sn(ns),connectionLineType:Je(El.Bezier),connectionRadius:Je(20),isValidConnection:Je(()=>!0),nodesDraggable:Je(!0),nodesConnectable:Je(!0),elementsSelectable:Je(!0),selectNodesOnDrag:Je(!0),markers:Sn([]),defaultMarkerColor:Je("#b1b1b7"),lib:Sn("svelte"),onlyRenderVisibleElements:Je(!1),onerror:Je(Ph),ondelete:Je(void 0),onedgecreate:Je(void 0),onconnect:Je(void 0),onconnectstart:Je(void 0),onconnectend:Je(void 0),onbeforedelete:Je(void 0),nodesInitialized:Je(!1),edgesInitialized:Je(!1),viewportInitialized:Je(!1),initialized:Sn(!1)}};function c1(l){const e=yl([l.edges,l.nodes,l.nodeLookup,l.onlyRenderVisibleElements,l.viewport,l.width,l.height],([t,,n,o,s,r,i])=>o&&r&&i?t.filter(c=>{const u=n.get(c.source),f=n.get(c.target);return u&&f&&jh({sourceNode:u,targetNode:f,width:r,height:i,transform:[s.x,s.y,s.zoom]})}):t);return yl([e,l.nodes,l.nodeLookup,l.connectionMode,l.onerror],([t,,n,o,s])=>t.reduce((i,a)=>{const c=n.get(a.source),u=n.get(a.target);if(!c||!u)return i;const f=Jh({id:a.id,sourceNode:c,targetNode:u,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:s});return f&&i.push({...a,zIndex:Wh({selected:a.selected,zIndex:a.zIndex,sourceNode:c,targetNode:u,elevateOnSelect:!1}),...f}),i},[]))}function u1(l){return yl([l.nodeLookup,l.onlyRenderVisibleElements,l.width,l.height,l.viewport,l.nodes],([e,t,n,o,s])=>{const r=[s.x,s.y,s.zoom];return t?Sa(e,{x:0,y:0,width:n,height:o},r,!0):Array.from(e.values())})}const Ro=Symbol();function qa({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:r}){const i=a1({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:r});function a(I){i.nodeTypes.set({...Xa,...I})}function c(I){i.edgeTypes.set({...Za,...I})}function u(I){const P=he(i.edges);i.edges.set(Gh(I,P))}const f=(I,P=!1)=>{var X;const K=he(i.nodeLookup);for(const[F,Z]of I){const ae=(X=K.get(F))==null?void 0:X.internals.userNode;ae&&(ae.position=Z.position,ae.dragging=P)}i.nodes.update(F=>F)};function d(I){var Z,ae,x;const P=he(i.nodeLookup),K=he(i.parentLookup),{changes:X,updatedInternals:F}=lm(I,P,he(i.parentLookup),he(i.domNode),he(i.nodeOrigin));if(F){$h(P,K,{nodeOrigin:s,nodeExtent:r});for(const G of X){const oe=(Z=P.get(G.id))==null?void 0:Z.internals.userNode;if(oe)switch(G.type){case"dimensions":{const de={...oe.measured,...G.dimensions};G.setAttributes&&(oe.width=((ae=G.dimensions)==null?void 0:ae.width)??oe.width,oe.height=((x=G.dimensions)==null?void 0:x.height)??oe.height),oe.measured=de;break}case"position":oe.position=G.position??oe.position;break}}i.nodes.update(G=>G),he(i.nodesInitialized)||i.nodesInitialized.set(!0)}}function h(I){const P=he(i.fitViewResolver)??Lh();return i.fitViewQueued.set(!0),i.fitViewOptions.set(I),i.fitViewResolver.set(P),i.nodes.set(he(i.nodes)),P.promise}function _(I,P){const K=he(i.panZoom);return K?K.scaleBy(I,P):Promise.resolve(!1)}function b(I){return _(1.2,I)}function v(I){return _(1/1.2,I)}function g(I){const P=he(i.panZoom);P&&(P.setScaleExtent([I,he(i.maxZoom)]),i.minZoom.set(I))}function w(I){const P=he(i.panZoom);P&&(P.setScaleExtent([he(i.minZoom),I]),i.maxZoom.set(I))}function y(I){const P=he(i.panZoom);P&&(P.setTranslateExtent(I),i.translateExtent.set(I))}function E(I){let P=!1;return I.forEach(K=>{K.selected&&(K.selected=!1,P=!0)}),P}function M(I){var P;(P=he(i.panZoom))==null||P.setClickDistance(I)}function S(I){E((I==null?void 0:I.nodes)||he(i.nodes))&&i.nodes.set(he(i.nodes)),E((I==null?void 0:I.edges)||he(i.edges))&&i.edges.set(he(i.edges))}i.deleteKeyPressed.subscribe(async I=>{var P;if(I){const K=he(i.nodes),X=he(i.edges),F=K.filter(G=>G.selected),Z=X.filter(G=>G.selected),{nodes:ae,edges:x}=await Da({nodesToRemove:F,edgesToRemove:Z,nodes:K,edges:X,onBeforeDelete:he(i.onbeforedelete)});(ae.length||x.length)&&(i.nodes.update(G=>G.filter(oe=>!ae.some(de=>de.id===oe.id))),i.edges.update(G=>G.filter(oe=>!x.some(de=>de.id===oe.id))),(P=he(i.ondelete))==null||P({nodes:ae,edges:x}))}});function V(I){const P=he(i.multiselectionKeyPressed);i.nodes.update(K=>K.map(X=>{const F=I.includes(X.id),Z=P&&X.selected||F;return X.selected=Z,X})),P||i.edges.update(K=>K.map(X=>(X.selected=!1,X)))}function A(I){const P=he(i.multiselectionKeyPressed);i.edges.update(K=>K.map(X=>{const F=I.includes(X.id),Z=P&&X.selected||F;return X.selected=Z,X})),P||i.nodes.update(K=>K.map(X=>(X.selected=!1,X)))}function H(I){var K;const P=(K=he(i.nodes))==null?void 0:K.find(X=>X.id===I);if(!P){console.warn("012",Dl.error012(I));return}i.selectionRect.set(null),i.selectionRectMode.set(null),P.selected?P.selected&&he(i.multiselectionKeyPressed)&&S({nodes:[P],edges:[]}):V([I])}function L(I){const P=he(i.viewport);return om({delta:I,panZoom:he(i.panZoom),transform:[P.x,P.y,P.zoom],translateExtent:he(i.translateExtent),width:he(i.width),height:he(i.height)})}const W=Je(ns),j=I=>{W.set({...I})};function U(){W.set(ns)}function C(){i.selectionRect.set(null),i.selectionRectMode.set(null),i.snapGrid.set(null),i.isValidConnection.set(()=>!0),S(),U()}return{...i,visibleEdges:c1(i),visibleNodes:u1(i),connection:yl([W,i.viewport],([I,P])=>I.inProgress?{...I,to:xl(I.to,[P.x,P.y,P.zoom])}:{...I}),markers:yl([i.edges,i.defaultMarkerColor,i.flowId],([I,P,K])=>Qh(I,{defaultColor:P,id:K})),initialized:(()=>{let I=!1;const P=he(i.nodes).length,K=he(i.edges).length;return yl([i.nodesInitialized,i.edgesInitialized,i.viewportInitialized],([X,F,Z])=>I||(P===0?I=Z:K===0?I=Z&&X:I=Z&&X&&F,I))})(),syncNodeStores:I=>l1(i.nodes,I),syncEdgeStores:I=>o1(i.edges,I),syncViewport:I=>s1(i.panZoom,i.viewport,I),setNodeTypes:a,setEdgeTypes:c,addEdge:u,updateNodePositions:f,updateNodeInternals:d,zoomIn:b,zoomOut:v,fitView:I=>h(I),setMinZoom:g,setMaxZoom:w,setTranslateExtent:y,setPaneClickDistance:M,unselectNodesAndEdges:S,addSelectedNodes:V,addSelectedEdges:A,handleNodeSelection:H,panBy:L,updateConnection:j,cancelConnection:U,reset:C}}function Wt(){const l=Nt(Ro);if(!l)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return l.getStore()}function f1({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:r}){const i=qa({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:r});return jl(Ro,{getStore:()=>i}),i}function d1(l,e){const{panZoom:t,minZoom:n,maxZoom:o,initialViewport:s,viewport:r,dragging:i,translateExtent:a,paneClickDistance:c}=e,u=wm({domNode:l,minZoom:n,maxZoom:o,translateExtent:a,viewport:s,paneClickDistance:c,onDraggingChange:i.set}),f=u.getViewport();return r.set(f),t.set(u),u.update(e),{update(d){u.update(d)}}}function h1(l){let e,t,n,o,s;const r=l[35].default,i=Jt(r,l,l[34],null);return{c(){e=N("div"),i&&i.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=D(e);i&&i.l(c),c.forEach(p),this.h()},h(){m(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,c){B(a,e,c),i&&i.m(e,null),n=!0,o||(s=gn(t=d1.call(null,e,{viewport:l[18],minZoom:l[12],maxZoom:l[13],initialViewport:l[11],dragging:l[23],panZoom:l[19],onPanZoomStart:l[0],onPanZoom:l[1],onPanZoomEnd:l[2],zoomOnScroll:l[5],zoomOnDoubleClick:l[6],zoomOnPinch:l[7],panOnScroll:l[9],panOnDrag:l[10],panOnScrollSpeed:.5,panOnScrollMode:l[3]||An.Free,zoomActivationKeyPressed:l[14],preventScrolling:typeof l[4]=="boolean"?l[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!l[15],translateExtent:l[16],lib:l[17],paneClickDistance:l[8],onTransformChange:l[29]})),o=!0)},p(a,c){i&&i.p&&(!n||c[1]&8)&&Qt(i,r,a,a[34],n?$t(r,a[34],c,null):xt(a[34]),null),t&&sn(t.update)&&c[0]&262143&&t.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||An.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8],onTransformChange:a[29]})},i(a){n||(T(i,a),n=!0)},o(a){O(i,a),n=!1},d(a){a&&p(e),i&&i.d(a),o=!1,s()}}}function m1(l,e,t){let n,o,s,r,i,a,c,u,f,d,h,{$$slots:_={},$$scope:b}=e,{initialViewport:v=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:w=void 0}=e,{onMoveEnd:y=void 0}=e,{panOnScrollMode:E}=e,{preventScrolling:M}=e,{zoomOnScroll:S}=e,{zoomOnDoubleClick:V}=e,{zoomOnPinch:A}=e,{panOnDrag:H}=e,{panOnScroll:L}=e,{paneClickDistance:W}=e;const{viewport:j,panZoom:U,selectionRect:C,minZoom:I,maxZoom:P,dragging:K,translateExtent:X,lib:F,panActivationKeyPressed:Z,zoomActivationKeyPressed:ae,viewportInitialized:x}=Wt();se(l,C,oe=>t(15,f=oe)),se(l,I,oe=>t(12,a=oe)),se(l,P,oe=>t(13,c=oe)),se(l,X,oe=>t(16,d=oe)),se(l,F,oe=>t(17,h=oe)),se(l,Z,oe=>t(33,i=oe)),se(l,ae,oe=>t(14,u=oe)),se(l,x,oe=>t(36,r=oe));const G=oe=>j.set({x:oe[0],y:oe[1],zoom:oe[2]});return hn(()=>{mo(x,r=!0,r)}),l.$$set=oe=>{"initialViewport"in oe&&t(30,v=oe.initialViewport),"onMoveStart"in oe&&t(0,g=oe.onMoveStart),"onMove"in oe&&t(1,w=oe.onMove),"onMoveEnd"in oe&&t(2,y=oe.onMoveEnd),"panOnScrollMode"in oe&&t(3,E=oe.panOnScrollMode),"preventScrolling"in oe&&t(4,M=oe.preventScrolling),"zoomOnScroll"in oe&&t(5,S=oe.zoomOnScroll),"zoomOnDoubleClick"in oe&&t(6,V=oe.zoomOnDoubleClick),"zoomOnPinch"in oe&&t(7,A=oe.zoomOnPinch),"panOnDrag"in oe&&t(31,H=oe.panOnDrag),"panOnScroll"in oe&&t(32,L=oe.panOnScroll),"paneClickDistance"in oe&&t(8,W=oe.paneClickDistance),"$$scope"in oe&&t(34,b=oe.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1073741824&&t(11,n=v||{x:0,y:0,zoom:1}),l.$$.dirty[1]&5&&t(10,o=i||H),l.$$.dirty[1]&6&&t(9,s=i||L)},[g,w,y,E,M,S,V,A,W,s,o,n,a,c,u,f,d,h,j,U,C,I,P,K,X,F,Z,ae,x,G,v,H,L,i,b,_]}class g1 extends Oe{constructor(e){super(),He(this,e,m1,h1,Le,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}function p1(l){let e,t,n,o;const s=l[29].default,r=Jt(s,l,l[28],null);return{c(){e=N("div"),r&&r.c(),this.h()},l(i){e=z(i,"DIV",{class:!0});var a=D(e);r&&r.l(a),a.forEach(p),this.h()},h(){m(e,"class","svelte-flow__pane svelte-1esy7hx"),nt(e,"draggable",l[0]===!0||Array.isArray(l[0])&&l[0].includes(0)),nt(e,"dragging",l[4]),nt(e,"selection",l[1])},m(i,a){B(i,e,a),r&&r.m(e,null),l[30](e),t=!0,n||(o=[De(e,"click",function(){sn(l[3]?void 0:fo(l[16],l[2]))&&(l[3]?void 0:fo(l[16],l[2])).apply(this,arguments)}),De(e,"pointerdown",function(){sn(l[3]?l[17]:void 0)&&(l[3]?l[17]:void 0).apply(this,arguments)}),De(e,"pointermove",function(){sn(l[3]?l[18]:void 0)&&(l[3]?l[18]:void 0).apply(this,arguments)}),De(e,"pointerup",function(){sn(l[3]?l[19]:void 0)&&(l[3]?l[19]:void 0).apply(this,arguments)}),De(e,"contextmenu",function(){sn(fo(l[20],l[2]))&&fo(l[20],l[2]).apply(this,arguments)})],n=!0)},p(i,a){l=i,r&&r.p&&(!t||a[0]&268435456)&&Qt(r,s,l,l[28],t?$t(s,l[28],a,null):xt(l[28]),null),(!t||a[0]&1)&&nt(e,"draggable",l[0]===!0||Array.isArray(l[0])&&l[0].includes(0)),(!t||a[0]&16)&&nt(e,"dragging",l[4]),(!t||a[0]&2)&&nt(e,"selection",l[1])},i(i){t||(T(r,i),t=!0)},o(i){O(r,i),t=!1},d(i){i&&p(e),r&&r.d(i),l[30](null),n=!1,an(o)}}}function fo(l,e){return t=>{t.target===e&&(l==null||l(t))}}function ri(l){return e=>{const t=l.includes(e.id);return e.selected!==t&&(e.selected=t),e}}function _1(l,e,t){let n,o,s,r,i,a,c,u,f,d,h,_,b,v,{$$slots:g={},$$scope:w}=e,{panOnDrag:y=void 0}=e,{selectionOnDrag:E=void 0}=e;const M=rn(),{nodes:S,nodeLookup:V,edges:A,viewport:H,dragging:L,elementsSelectable:W,selectionRect:j,selectionRectMode:U,selectionKeyPressed:C,selectionMode:I,panActivationKeyPressed:P,unselectNodesAndEdges:K,connection:X}=Wt();se(l,V,me=>t(37,f=me)),se(l,A,me=>t(34,a=me)),se(l,H,me=>t(36,u=me)),se(l,L,me=>t(4,v=me)),se(l,W,me=>t(26,_=me)),se(l,j,me=>t(25,d=me)),se(l,U,me=>t(24,i=me)),se(l,C,me=>t(23,r=me)),se(l,I,me=>t(35,c=me)),se(l,P,me=>t(27,b=me)),se(l,X,me=>t(38,h=me));let F,Z=null,ae=[],x=!1;function G(me){if(x||h.inProgress){x=!1;return}M("paneclick",{event:me}),K(),U.set(null)}function oe(me){var je,ge;if(Z=F.getBoundingClientRect(),!W||!o||me.button!==0||me.target!==F||!Z)return;(ge=(je=me.target)==null?void 0:je.setPointerCapture)==null||ge.call(je,me.pointerId);const{x:ue,y:qe}=Fn(me,Z);K(),j.set({width:0,height:0,startX:ue,startY:qe,x:ue,y:qe})}function de(me){if(!o||!Z||!d)return;x=!0;const ue=Fn(me,Z),qe=d.startX??0,je=d.startY??0,ge={...d,x:ue.x<qe?ue.x:qe,y:ue.y<je?ue.y:je,width:Math.abs(ue.x-qe),height:Math.abs(ue.y-je)},re=ae.map(et=>et.id),Re=ls(ae,a).map(et=>et.id);ae=Sa(f,ge,[u.x,u.y,u.zoom],c===bo.Partial,!0);const rt=ls(ae,a).map(et=>et.id),tt=ae.map(et=>et.id);(re.length!==tt.length||tt.some(et=>!re.includes(et)))&&S.update(et=>et.map(ri(tt))),(Re.length!==rt.length||rt.some(et=>!Re.includes(et)))&&A.update(et=>et.map(ri(rt))),U.set("user"),j.set(ge)}function Se(me){var ue,qe;me.button===0&&((qe=(ue=me.target)==null?void 0:ue.releasePointerCapture)==null||qe.call(ue,me.pointerId),!o&&i==="user"&&me.target===F&&(G==null||G(me)),j.set(null),ae.length>0&&mo(U,i="nodes",i),r&&(x=!1))}const ie=me=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){me.preventDefault();return}M("panecontextmenu",{event:me})};function ze(me){Pe[me?"unshift":"push"](()=>{F=me,t(2,F)})}return l.$$set=me=>{"panOnDrag"in me&&t(0,y=me.panOnDrag),"selectionOnDrag"in me&&t(21,E=me.selectionOnDrag),"$$scope"in me&&t(28,w=me.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&134217729&&t(22,n=b||y),l.$$.dirty[0]&48234496&&t(1,o=r||d||E&&n!==!0),l.$$.dirty[0]&83886082&&t(3,s=_&&(o||i==="user"))},[y,o,F,s,v,V,A,H,L,W,j,U,C,I,P,X,G,oe,de,Se,ie,E,n,r,i,d,_,b,w,g,ze]}class b1 extends Oe{constructor(e){super(),He(this,e,_1,p1,Le,{panOnDrag:0,selectionOnDrag:21},null,[-1,-1])}}function v1(l){let e,t;const n=l[3].default,o=Jt(n,l,l[2],null);return{c(){e=N("div"),o&&o.c(),this.h()},l(s){e=z(s,"DIV",{class:!0,style:!0});var r=D(e);o&&o.l(r),r.forEach(p),this.h()},h(){m(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),Qe(e,"transform","translate("+l[0].x+"px, "+l[0].y+"px) scale("+l[0].zoom+")")},m(s,r){B(s,e,r),o&&o.m(e,null),t=!0},p(s,[r]){o&&o.p&&(!t||r&4)&&Qt(o,n,s,s[2],t?$t(n,s[2],r,null):xt(s[2]),null),(!t||r&1)&&Qe(e,"transform","translate("+s[0].x+"px, "+s[0].y+"px) scale("+s[0].zoom+")")},i(s){t||(T(o,s),t=!0)},o(s){O(o,s),t=!1},d(s){s&&p(e),o&&o.d(s)}}}function w1(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const{viewport:r}=Wt();return se(l,r,i=>t(0,n=i)),l.$$set=i=>{"$$scope"in i&&t(2,s=i.$$scope)},[n,r,s,o]}class y1 extends Oe{constructor(e){super(),He(this,e,w1,v1,Le,{})}}function Ja(l,e){const{store:t,onDrag:n,onDragStart:o,onDragStop:s,onNodeMouseDown:r}=e,i=rm({onDrag:n,onDragStart:o,onDragStop:s,onNodeMouseDown:r,getStoreItems:()=>{const c=he(t.snapGrid),u=he(t.viewport);return{nodes:he(t.nodes),nodeLookup:he(t.nodeLookup),edges:he(t.edges),nodeExtent:he(t.nodeExtent),snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:he(t.nodeOrigin),multiSelectionActive:he(t.multiselectionKeyPressed),domNode:he(t.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:he(t.autoPanOnNodeDrag),nodesDraggable:he(t.nodesDraggable),selectNodesOnDrag:he(t.selectNodesOnDrag),nodeDragThreshold:he(t.nodeDragThreshold),unselectNodesAndEdges:t.unselectNodesAndEdges,updateNodePositions:t.updateNodePositions,panBy:t.panBy}}});function a(c,u){if(u.disabled){i.destroy();return}i.update({domNode:c,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return a(l,e),{update(c){a(l,c)},destroy(){i.destroy()}}}function k1({width:l,height:e,initialWidth:t,initialHeight:n,measuredWidth:o,measuredHeight:s}){if(o===void 0&&s===void 0){const r=l??t,i=e??n;return{width:r?`width:${r}px;`:"",height:i?`height:${i}px;`:""}}return{width:l?`width:${l}px;`:"",height:e?`height:${e}px;`:""}}function ii(l){let e,t,n,o,s,r=`translate(${l[12]}px, ${l[13]}px)`,i,a,c;var u=l[27];function f(d,h){return{props:{data:d[2],id:d[1],selected:d[3]??!1,selectable:d[5]??d[28]??!0,deletable:d[7]??!0,sourcePosition:d[14],targetPosition:d[15],zIndex:d[16],dragging:d[9],draggable:d[4]??d[29]??!0,dragHandle:d[19],parentId:d[21],type:d[25],isConnectable:d[30],positionAbsoluteX:d[12],positionAbsoluteY:d[13],width:d[17],height:d[18]}}}return u&&(t=go(u,f(l))),{c(){e=N("div"),t&&te(t.$$.fragment),this.h()},l(d){e=z(d,"DIV",{"data-id":!0,class:!0,style:!0});var h=D(e);t&&ne(t.$$.fragment,h),h.forEach(p),this.h()},h(){m(e,"data-id",l[1]),m(e,"class",n=Tt(["svelte-flow__node",`svelte-flow__node-${l[25]}`,l[23]])),m(e,"style",o=(l[10]??"")+";"+l[26].width+l[26].height),nt(e,"dragging",l[9]),nt(e,"selected",l[3]),nt(e,"draggable",l[4]),nt(e,"connectable",l[6]),nt(e,"selectable",l[5]),nt(e,"nopan",l[4]),nt(e,"parent",l[11]),Qe(e,"z-index",l[16]),Qe(e,"transform",r),Qe(e,"visibility",l[20]?"visible":"hidden")},m(d,h){B(d,e,h),t&&ee(t,e,null),l[54](e),i=!0,a||(c=[gn(s=Ja.call(null,e,{nodeId:l[1],isSelectable:l[5],disabled:!1,handleSelector:l[19],noDragClass:"nodrag",nodeClickDistance:l[22],onNodeMouseDown:l[33],onDrag:l[51],onDragStart:l[52],onDragStop:l[53],store:l[31]})),De(e,"click",l[38]),De(e,"mouseenter",l[55]),De(e,"mouseleave",l[56]),De(e,"mousemove",l[57]),De(e,"contextmenu",l[58])],a=!0)},p(d,h){if(h[0]&134217728&&u!==(u=d[27])){if(t){Te();const b=t;O(b.$$.fragment,1,0,()=>{$(b,1)}),Ve()}u?(t=go(u,f(d)),te(t.$$.fragment),T(t.$$.fragment,1),ee(t,e,null)):t=null}else if(u){const b={};h[0]&4&&(b.data=d[2]),h[0]&2&&(b.id=d[1]),h[0]&8&&(b.selected=d[3]??!1),h[0]&268435488&&(b.selectable=d[5]??d[28]??!0),h[0]&128&&(b.deletable=d[7]??!0),h[0]&16384&&(b.sourcePosition=d[14]),h[0]&32768&&(b.targetPosition=d[15]),h[0]&65536&&(b.zIndex=d[16]),h[0]&512&&(b.dragging=d[9]),h[0]&536870928&&(b.draggable=d[4]??d[29]??!0),h[0]&524288&&(b.dragHandle=d[19]),h[0]&2097152&&(b.parentId=d[21]),h[0]&33554432&&(b.type=d[25]),h[0]&1073741824&&(b.isConnectable=d[30]),h[0]&4096&&(b.positionAbsoluteX=d[12]),h[0]&8192&&(b.positionAbsoluteY=d[13]),h[0]&131072&&(b.width=d[17]),h[0]&262144&&(b.height=d[18]),t.$set(b)}(!i||h[0]&2)&&m(e,"data-id",d[1]),(!i||h[0]&41943040&&n!==(n=Tt(["svelte-flow__node",`svelte-flow__node-${d[25]}`,d[23]])))&&m(e,"class",n),(!i||h[0]&67109888&&o!==(o=(d[10]??"")+";"+d[26].width+d[26].height))&&m(e,"style",o),s&&sn(s.update)&&h[0]&4718626&&s.update.call(null,{nodeId:d[1],isSelectable:d[5],disabled:!1,handleSelector:d[19],noDragClass:"nodrag",nodeClickDistance:d[22],onNodeMouseDown:d[33],onDrag:d[51],onDragStart:d[52],onDragStop:d[53],store:d[31]}),(!i||h[0]&41943552)&&nt(e,"dragging",d[9]),(!i||h[0]&41943048)&&nt(e,"selected",d[3]),(!i||h[0]&41943056)&&nt(e,"draggable",d[4]),(!i||h[0]&41943104)&&nt(e,"connectable",d[6]),(!i||h[0]&41943072)&&nt(e,"selectable",d[5]),(!i||h[0]&41943056)&&nt(e,"nopan",d[4]),(!i||h[0]&41945088)&&nt(e,"parent",d[11]);const _=h[0]&67109888;(h[0]&67175424||_)&&Qe(e,"z-index",d[16]),(h[0]&67122176&&r!==(r=`translate(${d[12]}px, ${d[13]}px)`)||_)&&Qe(e,"transform",r),(h[0]&68158464||_)&&Qe(e,"visibility",d[20]?"visible":"hidden")},i(d){i||(t&&T(t.$$.fragment,d),i=!0)},o(d){t&&O(t.$$.fragment,d),i=!1},d(d){d&&p(e),t&&$(t),l[54](null),a=!1,an(c)}}}function E1(l){let e,t,n=!l[8]&&ii(l);return{c(){n&&n.c(),e=Me()},l(o){n&&n.l(o),e=Me()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[8]?n&&(Te(),O(n,1,1,()=>{n=null}),Ve()):n?(n.p(o,s),s[0]&256&&T(n,1)):(n=ii(o),n.c(),T(n,1),n.m(e.parentNode,e))},i(o){t||(T(n),t=!0)},o(o){O(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function I1(l,e,t){let n,o,s,r,i,a,c,u,{node:f}=e,{id:d}=e,{data:h={}}=e,{selected:_=!1}=e,{draggable:b=void 0}=e,{selectable:v=void 0}=e,{connectable:g=!0}=e,{deletable:w=!0}=e,{hidden:y=!1}=e,{dragging:E=!1}=e,{resizeObserver:M=null}=e,{style:S=void 0}=e,{type:V="default"}=e,{isParent:A=!1}=e,{positionX:H}=e,{positionY:L}=e,{sourcePosition:W=void 0}=e,{targetPosition:j=void 0}=e,{zIndex:U}=e,{measuredWidth:C=void 0}=e,{measuredHeight:I=void 0}=e,{initialWidth:P=void 0}=e,{initialHeight:K=void 0}=e,{width:X=void 0}=e,{height:F=void 0}=e,{dragHandle:Z=void 0}=e,{initialized:ae=!1}=e,{parentId:x=void 0}=e,{nodeClickDistance:G=void 0}=e,{class:oe=""}=e;const de=Wt(),{nodeTypes:Se,nodeDragThreshold:ie,selectNodesOnDrag:ze,handleNodeSelection:me,updateNodeInternals:ue,elementsSelectable:qe,nodesDraggable:je}=de;se(l,Se,le=>t(50,i=le)),se(l,qe,le=>t(28,a=le)),se(l,je,le=>t(29,c=le));let ge,re=null;const Re=rn(),rt=Je(g);se(l,rt,le=>t(30,u=le));let tt,et,$e;jl("svelteflow__node_id",d),jl("svelteflow__node_connectable",rt),xn(()=>{re&&(M==null||M.unobserve(re))});function gt(le){v&&(!he(ze)||!b||he(ie)>0)&&me(d),Re("nodeclick",{node:f.internals.userNode,event:le})}const jt=(le,Bt,ut,ce)=>{Re("nodedrag",{event:le,targetNode:ut,nodes:ce})},Pt=(le,Bt,ut,ce)=>{Re("nodedragstart",{event:le,targetNode:ut,nodes:ce})},_t=(le,Bt,ut,ce)=>{Re("nodedragstop",{event:le,targetNode:ut,nodes:ce})};function Ot(le){Pe[le?"unshift":"push"](()=>{ge=le,t(24,ge)})}const Ht=le=>Re("nodemouseenter",{node:f,event:le}),At=le=>Re("nodemouseleave",{node:f,event:le}),Vt=le=>Re("nodemousemove",{node:f,event:le}),Lt=le=>Re("nodecontextmenu",{node:f,event:le});return l.$$set=le=>{"node"in le&&t(0,f=le.node),"id"in le&&t(1,d=le.id),"data"in le&&t(2,h=le.data),"selected"in le&&t(3,_=le.selected),"draggable"in le&&t(4,b=le.draggable),"selectable"in le&&t(5,v=le.selectable),"connectable"in le&&t(6,g=le.connectable),"deletable"in le&&t(7,w=le.deletable),"hidden"in le&&t(8,y=le.hidden),"dragging"in le&&t(9,E=le.dragging),"resizeObserver"in le&&t(39,M=le.resizeObserver),"style"in le&&t(10,S=le.style),"type"in le&&t(40,V=le.type),"isParent"in le&&t(11,A=le.isParent),"positionX"in le&&t(12,H=le.positionX),"positionY"in le&&t(13,L=le.positionY),"sourcePosition"in le&&t(14,W=le.sourcePosition),"targetPosition"in le&&t(15,j=le.targetPosition),"zIndex"in le&&t(16,U=le.zIndex),"measuredWidth"in le&&t(41,C=le.measuredWidth),"measuredHeight"in le&&t(42,I=le.measuredHeight),"initialWidth"in le&&t(43,P=le.initialWidth),"initialHeight"in le&&t(44,K=le.initialHeight),"width"in le&&t(17,X=le.width),"height"in le&&t(18,F=le.height),"dragHandle"in le&&t(19,Z=le.dragHandle),"initialized"in le&&t(20,ae=le.initialized),"parentId"in le&&t(21,x=le.parentId),"nodeClickDistance"in le&&t(22,G=le.nodeClickDistance),"class"in le&&t(23,oe=le.class)},l.$$.update=()=>{l.$$.dirty[1]&512&&t(25,n=V||"default"),l.$$.dirty[0]&33554432|l.$$.dirty[1]&524288&&t(49,o=!!i[n]),l.$$.dirty[0]&33554432|l.$$.dirty[1]&524288&&t(27,s=i[n]||Ya),l.$$.dirty[1]&262656&&(o||console.warn("003",Dl.error003(V))),l.$$.dirty[0]&393216|l.$$.dirty[1]&15360&&t(26,r=k1({width:X,height:F,initialWidth:P,initialHeight:K,measuredWidth:C,measuredHeight:I})),l.$$.dirty[0]&64&&rt.set(!!g),l.$$.dirty[0]&50380802|l.$$.dirty[1]&229376&&((tt&&n!==tt||et&&W!==et||$e&&j!==$e)&&requestAnimationFrame(()=>ue(new Map([[d,{id:d,nodeElement:ge,force:!0}]]))),t(46,tt=n),t(47,et=W),t(48,$e=j)),l.$$.dirty[0]&17825792|l.$$.dirty[1]&16640&&M&&(ge!==re||!ae)&&(re&&M.unobserve(re),ge&&M.observe(ge),t(45,re=ge))},[f,d,h,_,b,v,g,w,y,E,S,A,H,L,W,j,U,X,F,Z,ae,x,G,oe,ge,n,r,s,a,c,u,de,Se,me,qe,je,Re,rt,gt,M,V,C,I,P,K,re,tt,et,$e,o,i,jt,Pt,_t,Ot,Ht,At,Vt,Lt]}class S1 extends Oe{constructor(e){super(),He(this,e,I1,E1,ua,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:39,style:10,type:40,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:41,measuredHeight:42,initialWidth:43,initialHeight:44,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:D1}=fa;function ai(l,e,t){const n=l.slice();return n[21]=e[t],n}function ci(l,e){let t,n,o;return n=new S1({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:Xr(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),n.$on("nodeclick",e[12]),n.$on("nodemouseenter",e[13]),n.$on("nodemousemove",e[14]),n.$on("nodemouseleave",e[15]),n.$on("nodedrag",e[16]),n.$on("nodedragstart",e[17]),n.$on("nodedragstop",e[18]),n.$on("nodecontextmenu",e[19]),{key:l,first:null,c(){t=Me(),te(n.$$.fragment),this.h()},l(s){t=Me(),ne(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,r){B(s,t,r),ee(n,s,r),o=!0},p(s,r){e=s;const i={};r&2&&(i.node=e[21]),r&2&&(i.id=e[21].id),r&2&&(i.data=e[21].data),r&2&&(i.selected=!!e[21].selected),r&2&&(i.hidden=!!e[21].hidden),r&6&&(i.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),r&10&&(i.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),r&18&&(i.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),r&2&&(i.deletable=e[21].deletable??!0),r&2&&(i.positionX=e[21].internals.positionAbsolute.x),r&2&&(i.positionY=e[21].internals.positionAbsolute.y),r&34&&(i.isParent=e[5].has(e[21].id)),r&2&&(i.style=e[21].style),r&2&&(i.class=e[21].class),r&2&&(i.type=e[21].type??"default"),r&2&&(i.sourcePosition=e[21].sourcePosition),r&2&&(i.targetPosition=e[21].targetPosition),r&2&&(i.dragging=e[21].dragging),r&2&&(i.zIndex=e[21].internals.z??0),r&2&&(i.dragHandle=e[21].dragHandle),r&2&&(i.initialized=Xr(e[21])),r&2&&(i.width=e[21].width),r&2&&(i.height=e[21].height),r&2&&(i.initialWidth=e[21].initialWidth),r&2&&(i.initialHeight=e[21].initialHeight),r&2&&(i.measuredWidth=e[21].measured.width),r&2&&(i.measuredHeight=e[21].measured.height),r&2&&(i.parentId=e[21].parentId),r&1&&(i.nodeClickDistance=e[0]),n.$set(i)},i(s){o||(T(n.$$.fragment,s),o=!0)},o(s){O(n.$$.fragment,s),o=!1},d(s){s&&p(t),$(n,s)}}}function C1(l){let e,t=[],n=new D1,o,s=mt(l[1]);const r=i=>i[21].id;for(let i=0;i<s.length;i+=1){let a=ai(l,s,i),c=r(a);n.set(c,t[i]=ci(c,a))}return{c(){e=N("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=z(i,"DIV",{class:!0});var a=D(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(p),this.h()},h(){m(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(i,a){B(i,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(i,[a]){a&2111&&(s=mt(i[1]),Te(),t=Do(t,a,r,1,i,s,n,e,Co,ci,null,ai),Ve())},i(i){if(!o){for(let a=0;a<s.length;a+=1)T(t[a]);o=!0}},o(i){for(let a=0;a<t.length;a+=1)O(t[a]);o=!1},d(i){i&&p(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function M1(l,e,t){let n,o,s,r,i,{nodeClickDistance:a=0}=e;const{visibleNodes:c,nodesDraggable:u,nodesConnectable:f,elementsSelectable:d,updateNodeInternals:h,parentLookup:_}=Wt();se(l,c,A=>t(1,n=A)),se(l,u,A=>t(2,o=A)),se(l,f,A=>t(4,r=A)),se(l,d,A=>t(3,s=A)),se(l,_,A=>t(5,i=A));const b=typeof ResizeObserver>"u"?null:new ResizeObserver(A=>{const H=new Map;A.forEach(L=>{const W=L.target.getAttribute("data-id");H.set(W,{id:W,nodeElement:L.target,force:!0})}),h(H)});xn(()=>{b==null||b.disconnect()});function v(A){dt.call(this,l,A)}function g(A){dt.call(this,l,A)}function w(A){dt.call(this,l,A)}function y(A){dt.call(this,l,A)}function E(A){dt.call(this,l,A)}function M(A){dt.call(this,l,A)}function S(A){dt.call(this,l,A)}function V(A){dt.call(this,l,A)}return l.$$set=A=>{"nodeClickDistance"in A&&t(0,a=A.nodeClickDistance)},[a,n,o,s,r,i,c,u,f,d,_,b,v,g,w,y,E,M,S,V]}class T1 extends Oe{constructor(e){super(),He(this,e,M1,C1,Le,{nodeClickDistance:0})}}function ui(l){let e,t,n,o,s,r,i,a;var c=l[27];function u(f,d){return{props:{id:f[0],source:f[1],target:f[2],sourceX:f[14],sourceY:f[15],targetX:f[16],targetY:f[17],sourcePosition:f[18],targetPosition:f[19],animated:f[6],selected:f[7],label:f[10],labelStyle:f[11],data:f[3],style:f[4],interactionWidth:f[21],selectable:f[24],deletable:f[8]??!0,type:f[23],sourceHandleId:f[12],targetHandleId:f[13],markerStart:f[26],markerEnd:f[25]}}}return c&&(n=go(c,u(l))),{c(){e=ve("svg"),t=ve("g"),n&&te(n.$$.fragment),this.h()},l(f){e=be(f,"svg",{});var d=D(e);t=be(d,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var h=D(t);n&&ne(n.$$.fragment,h),h.forEach(p),d.forEach(p),this.h()},h(){m(t,"class",o=Tt(["svelte-flow__edge",l[22]])),m(t,"data-id",l[0]),m(t,"aria-label",s=l[20]===null?void 0:l[20]?l[20]:`Edge from ${l[1]} to ${l[2]}`),m(t,"role","img"),nt(t,"animated",l[6]),nt(t,"selected",l[7]),nt(t,"selectable",l[24]),Qe(e,"z-index",l[5])},m(f,d){B(f,e,d),k(e,t),n&&ee(n,t,null),r=!0,i||(a=[De(t,"click",l[32]),De(t,"contextmenu",l[41]),De(t,"mouseenter",l[42]),De(t,"mouseleave",l[43])],i=!0)},p(f,d){if(d[0]&134217728&&c!==(c=f[27])){if(n){Te();const h=n;O(h.$$.fragment,1,0,()=>{$(h,1)}),Ve()}c?(n=go(c,u(f)),te(n.$$.fragment),T(n.$$.fragment,1),ee(n,t,null)):n=null}else if(c){const h={};d[0]&1&&(h.id=f[0]),d[0]&2&&(h.source=f[1]),d[0]&4&&(h.target=f[2]),d[0]&16384&&(h.sourceX=f[14]),d[0]&32768&&(h.sourceY=f[15]),d[0]&65536&&(h.targetX=f[16]),d[0]&131072&&(h.targetY=f[17]),d[0]&262144&&(h.sourcePosition=f[18]),d[0]&524288&&(h.targetPosition=f[19]),d[0]&64&&(h.animated=f[6]),d[0]&128&&(h.selected=f[7]),d[0]&1024&&(h.label=f[10]),d[0]&2048&&(h.labelStyle=f[11]),d[0]&8&&(h.data=f[3]),d[0]&16&&(h.style=f[4]),d[0]&2097152&&(h.interactionWidth=f[21]),d[0]&16777216&&(h.selectable=f[24]),d[0]&256&&(h.deletable=f[8]??!0),d[0]&8388608&&(h.type=f[23]),d[0]&4096&&(h.sourceHandleId=f[12]),d[0]&8192&&(h.targetHandleId=f[13]),d[0]&67108864&&(h.markerStart=f[26]),d[0]&33554432&&(h.markerEnd=f[25]),n.$set(h)}(!r||d[0]&4194304&&o!==(o=Tt(["svelte-flow__edge",f[22]])))&&m(t,"class",o),(!r||d[0]&1)&&m(t,"data-id",f[0]),(!r||d[0]&1048582&&s!==(s=f[20]===null?void 0:f[20]?f[20]:`Edge from ${f[1]} to ${f[2]}`))&&m(t,"aria-label",s),(!r||d[0]&4194368)&&nt(t,"animated",f[6]),(!r||d[0]&4194432)&&nt(t,"selected",f[7]),(!r||d[0]&20971520)&&nt(t,"selectable",f[24]),d[0]&32&&Qe(e,"z-index",f[5])},i(f){r||(n&&T(n.$$.fragment,f),r=!0)},o(f){n&&O(n.$$.fragment,f),r=!1},d(f){f&&p(e),n&&$(n),i=!1,an(a)}}}function V1(l){let e,t,n=!l[9]&&ui(l);return{c(){n&&n.c(),e=Me()},l(o){n&&n.l(o),e=Me()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[9]?n&&(Te(),O(n,1,1,()=>{n=null}),Ve()):n?(n.p(o,s),s[0]&512&&T(n,1)):(n=ui(o),n.c(),T(n,1),n.m(e.parentNode,e))},i(o){t||(T(n),t=!0)},o(o){O(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function z1(l,e,t){let n,o,s,r,i,a,c,u,f,{id:d}=e,{type:h="default"}=e,{source:_=""}=e,{target:b=""}=e,{data:v={}}=e,{style:g=void 0}=e,{zIndex:w=void 0}=e,{animated:y=!1}=e,{selected:E=!1}=e,{selectable:M=void 0}=e,{deletable:S=void 0}=e,{hidden:V=!1}=e,{label:A=void 0}=e,{labelStyle:H=void 0}=e,{markerStart:L=void 0}=e,{markerEnd:W=void 0}=e,{sourceHandle:j=void 0}=e,{targetHandle:U=void 0}=e,{sourceX:C}=e,{sourceY:I}=e,{targetX:P}=e,{targetY:K}=e,{sourcePosition:X}=e,{targetPosition:F}=e,{ariaLabel:Z=void 0}=e,{interactionWidth:ae=void 0}=e,{class:x=""}=e;jl("svelteflow__edge_id",d);const{edgeLookup:G,edgeTypes:oe,flowId:de,elementsSelectable:Se}=Wt();se(l,G,re=>t(44,a=re)),se(l,oe,re=>t(40,f=re)),se(l,de,re=>t(39,u=re)),se(l,Se,re=>t(38,c=re));const ie=rn(),ze=Ka();function me(re){const Re=a.get(d);Re&&(ze(d),ie("edgeclick",{event:re,edge:Re}))}function ue(re,Re){const rt=a.get(d);rt&&ie(Re,{event:re,edge:rt})}const qe=re=>{ue(re,"edgecontextmenu")},je=re=>{ue(re,"edgemouseenter")},ge=re=>{ue(re,"edgemouseleave")};return l.$$set=re=>{"id"in re&&t(0,d=re.id),"type"in re&&t(34,h=re.type),"source"in re&&t(1,_=re.source),"target"in re&&t(2,b=re.target),"data"in re&&t(3,v=re.data),"style"in re&&t(4,g=re.style),"zIndex"in re&&t(5,w=re.zIndex),"animated"in re&&t(6,y=re.animated),"selected"in re&&t(7,E=re.selected),"selectable"in re&&t(35,M=re.selectable),"deletable"in re&&t(8,S=re.deletable),"hidden"in re&&t(9,V=re.hidden),"label"in re&&t(10,A=re.label),"labelStyle"in re&&t(11,H=re.labelStyle),"markerStart"in re&&t(36,L=re.markerStart),"markerEnd"in re&&t(37,W=re.markerEnd),"sourceHandle"in re&&t(12,j=re.sourceHandle),"targetHandle"in re&&t(13,U=re.targetHandle),"sourceX"in re&&t(14,C=re.sourceX),"sourceY"in re&&t(15,I=re.sourceY),"targetX"in re&&t(16,P=re.targetX),"targetY"in re&&t(17,K=re.targetY),"sourcePosition"in re&&t(18,X=re.sourcePosition),"targetPosition"in re&&t(19,F=re.targetPosition),"ariaLabel"in re&&t(20,Z=re.ariaLabel),"interactionWidth"in re&&t(21,ae=re.interactionWidth),"class"in re&&t(22,x=re.class)},l.$$.update=()=>{l.$$.dirty[1]&8&&t(23,n=h||"default"),l.$$.dirty[0]&8388608|l.$$.dirty[1]&512&&t(27,o=f[n]||Ga),l.$$.dirty[1]&288&&t(26,s=L?`url('#${ss(L,u)}')`:void 0),l.$$.dirty[1]&320&&t(25,r=W?`url('#${ss(W,u)}')`:void 0),l.$$.dirty[1]&144&&t(24,i=M??c)},[d,_,b,v,g,w,y,E,S,V,A,H,j,U,C,I,P,K,X,F,Z,ae,x,n,i,r,s,o,G,oe,de,Se,me,ue,h,M,L,W,c,u,f,qe,je,ge]}class N1 extends Oe{constructor(e){super(),He(this,e,z1,V1,ua,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function P1(l,e,t){let{onMount:n=void 0}=e,{onDestroy:o=void 0}=e;return hn(()=>(n==null||n(),o)),l.$$set=s=>{"onMount"in s&&t(0,n=s.onMount),"onDestroy"in s&&t(1,o=s.onDestroy)},[n,o]}class O1 extends Oe{constructor(e){super(),He(this,e,P1,null,Le,{onMount:0,onDestroy:1})}}function fi(l,e,t){const n=l.slice();return n[2]=e[t],n}function di(l,e){let t,n,o;const s=[e[2]];let r={};for(let i=0;i<s.length;i+=1)r=wt(r,s[i]);return n=new W1({props:r}),{key:l,first:null,c(){t=Me(),te(n.$$.fragment),this.h()},l(i){t=Me(),ne(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){B(i,t,a),ee(n,i,a),o=!0},p(i,a){e=i;const c=a&1?Qn(s,[Yl(e[2])]):{};n.$set(c)},i(i){o||(T(n.$$.fragment,i),o=!0)},o(i){O(n.$$.fragment,i),o=!1},d(i){i&&p(t),$(n,i)}}}function H1(l){let e,t=[],n=new Map,o,s=mt(l[0]);const r=i=>i[2].id;for(let i=0;i<s.length;i+=1){let a=fi(l,s,i),c=r(a);n.set(c,t[i]=di(c,a))}return{c(){e=ve("defs");for(let i=0;i<t.length;i+=1)t[i].c()},l(i){e=be(i,"defs",{});var a=D(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(p)},m(i,a){B(i,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(i,[a]){a&1&&(s=mt(i[0]),Te(),t=Do(t,a,r,1,i,s,n,e,Co,di,null,fi),Ve())},i(i){if(!o){for(let a=0;a<s.length;a+=1)T(t[a]);o=!0}},o(i){for(let a=0;a<t.length;a+=1)O(t[a]);o=!1},d(i){i&&p(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function A1(l,e,t){let n;const{markers:o}=Wt();return se(l,o,s=>t(0,n=s)),[n,o]}class L1 extends Oe{constructor(e){super(),He(this,e,A1,H1,Le,{})}}function B1(l){let e;return{c(){e=ve("polyline"),this.h()},l(t){e=be(t,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),D(e).forEach(p),this.h()},h(){m(e,"stroke",l[6]),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"stroke-width",l[7]),m(e,"fill",l[6]),m(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(t,n){B(t,e,n)},p(t,n){n&64&&m(e,"stroke",t[6]),n&128&&m(e,"stroke-width",t[7]),n&64&&m(e,"fill",t[6])},d(t){t&&p(e)}}}function R1(l){let e;return{c(){e=ve("polyline"),this.h()},l(t){e=be(t,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),D(e).forEach(p),this.h()},h(){m(e,"stroke",l[6]),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"stroke-width",l[7]),m(e,"fill","none"),m(e,"points","-5,-4 0,0 -5,4")},m(t,n){B(t,e,n)},p(t,n){n&64&&m(e,"stroke",t[6]),n&128&&m(e,"stroke-width",t[7])},d(t){t&&p(e)}}}function U1(l){let e,t,n;function o(i,a){if(i[1]===vo.Arrow)return R1;if(i[1]===vo.ArrowClosed)return B1}let s=o(l),r=s&&s(l);return{c(){e=ve("marker"),r&&r.c(),this.h()},l(i){e=be(i,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=D(e);r&&r.l(a),a.forEach(p),this.h()},h(){m(e,"class","svelte-flow__arrowhead"),m(e,"id",l[0]),m(e,"markerWidth",t=`${l[2]}`),m(e,"markerHeight",n=`${l[3]}`),m(e,"viewBox","-10 -10 20 20"),m(e,"markerUnits",l[4]),m(e,"orient",l[5]),m(e,"refX","0"),m(e,"refY","0")},m(i,a){B(i,e,a),r&&r.m(e,null)},p(i,[a]){s===(s=o(i))&&r?r.p(i,a):(r&&r.d(1),r=s&&s(i),r&&(r.c(),r.m(e,null))),a&1&&m(e,"id",i[0]),a&4&&t!==(t=`${i[2]}`)&&m(e,"markerWidth",t),a&8&&n!==(n=`${i[3]}`)&&m(e,"markerHeight",n),a&16&&m(e,"markerUnits",i[4]),a&32&&m(e,"orient",i[5])},i:Ie,o:Ie,d(i){i&&p(e),r&&r.d()}}}function F1(l,e,t){let{id:n}=e,{type:o}=e,{width:s=12.5}=e,{height:r=12.5}=e,{markerUnits:i="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:c=void 0}=e,{strokeWidth:u=void 0}=e;return l.$$set=f=>{"id"in f&&t(0,n=f.id),"type"in f&&t(1,o=f.type),"width"in f&&t(2,s=f.width),"height"in f&&t(3,r=f.height),"markerUnits"in f&&t(4,i=f.markerUnits),"orient"in f&&t(5,a=f.orient),"color"in f&&t(6,c=f.color),"strokeWidth"in f&&t(7,u=f.strokeWidth)},[n,o,s,r,i,a,c,u]}class W1 extends Oe{constructor(e){super(),He(this,e,F1,U1,Le,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function hi(l,e,t){const n=l.slice();return n[14]=e[t],n}function mi(l,e){let t,n,o;return n=new N1({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),n.$on("edgeclick",e[7]),n.$on("edgecontextmenu",e[8]),n.$on("edgemouseenter",e[9]),n.$on("edgemouseleave",e[10]),{key:l,first:null,c(){t=Me(),te(n.$$.fragment),this.h()},l(s){t=Me(),ne(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,r){B(s,t,r),ee(n,s,r),o=!0},p(s,r){e=s;const i={};r&1&&(i.id=e[14].id),r&1&&(i.source=e[14].source),r&1&&(i.target=e[14].target),r&1&&(i.data=e[14].data),r&1&&(i.style=e[14].style),r&1&&(i.animated=e[14].animated),r&1&&(i.selected=e[14].selected),r&3&&(i.selectable=e[14].selectable??e[1]),r&1&&(i.deletable=e[14].deletable),r&1&&(i.hidden=e[14].hidden),r&1&&(i.label=e[14].label),r&1&&(i.labelStyle=e[14].labelStyle),r&1&&(i.markerStart=e[14].markerStart),r&1&&(i.markerEnd=e[14].markerEnd),r&1&&(i.sourceHandle=e[14].sourceHandle),r&1&&(i.targetHandle=e[14].targetHandle),r&1&&(i.sourceX=e[14].sourceX),r&1&&(i.sourceY=e[14].sourceY),r&1&&(i.targetX=e[14].targetX),r&1&&(i.targetY=e[14].targetY),r&1&&(i.sourcePosition=e[14].sourcePosition),r&1&&(i.targetPosition=e[14].targetPosition),r&1&&(i.ariaLabel=e[14].ariaLabel),r&1&&(i.interactionWidth=e[14].interactionWidth),r&1&&(i.class=e[14].class),r&1&&(i.type=e[14].type||"default"),r&1&&(i.zIndex=e[14].zIndex),n.$set(i)},i(s){o||(T(n.$$.fragment,s),o=!0)},o(s){O(n.$$.fragment,s),o=!1},d(s){s&&p(t),$(n,s)}}}function gi(l){let e,t;return e=new O1({props:{onMount:l[11],onDestroy:l[12]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&4&&(s.onMount=n[11]),o&4&&(s.onDestroy=n[12]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function j1(l){let e,t,n,o,s=[],r=new Map,i,a;n=new L1({});let c=mt(l[0]);const u=d=>d[14].id;for(let d=0;d<c.length;d+=1){let h=hi(l,c,d),_=u(h);r.set(_,s[d]=mi(_,h))}let f=l[0].length>0&&gi(l);return{c(){e=N("div"),t=ve("svg"),te(n.$$.fragment),o=Q();for(let d=0;d<s.length;d+=1)s[d].c();i=Q(),f&&f.c(),this.h()},l(d){e=z(d,"DIV",{class:!0});var h=D(e);t=be(h,"svg",{class:!0});var _=D(t);ne(n.$$.fragment,_),_.forEach(p),o=J(h);for(let b=0;b<s.length;b+=1)s[b].l(h);i=J(h),f&&f.l(h),h.forEach(p),this.h()},h(){m(t,"class","svelte-flow__marker"),m(e,"class","svelte-flow__edges")},m(d,h){B(d,e,h),k(e,t),ee(n,t,null),k(e,o);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(e,null);k(e,i),f&&f.m(e,null),a=!0},p(d,[h]){h&3&&(c=mt(d[0]),Te(),s=Do(s,h,u,1,d,c,r,e,Co,mi,i,hi),Ve()),d[0].length>0?f?(f.p(d,h),h&1&&T(f,1)):(f=gi(d),f.c(),T(f,1),f.m(e,null)):f&&(Te(),O(f,1,1,()=>{f=null}),Ve())},i(d){if(!a){T(n.$$.fragment,d);for(let h=0;h<c.length;h+=1)T(s[h]);T(f),a=!0}},o(d){O(n.$$.fragment,d);for(let h=0;h<s.length;h+=1)O(s[h]);O(f),a=!1},d(d){d&&p(e),$(n);for(let h=0;h<s.length;h+=1)s[h].d();f&&f.d()}}}function Y1(l,e,t){let n,o,s,{defaultEdgeOptions:r}=e;const{visibleEdges:i,edgesInitialized:a,edges:{setDefaultOptions:c},elementsSelectable:u}=Wt();se(l,i,g=>t(0,n=g)),se(l,a,g=>t(2,s=g)),se(l,u,g=>t(1,o=g)),hn(()=>{r&&c(r)});function f(g){dt.call(this,l,g)}function d(g){dt.call(this,l,g)}function h(g){dt.call(this,l,g)}function _(g){dt.call(this,l,g)}const b=()=>{mo(a,s=!0,s)},v=()=>{mo(a,s=!1,s)};return l.$$set=g=>{"defaultEdgeOptions"in g&&t(6,r=g.defaultEdgeOptions)},[n,o,s,i,a,u,r,f,d,h,_,b,v]}class K1 extends Oe{constructor(e){super(),He(this,e,Y1,j1,Le,{defaultEdgeOptions:6})}}function pi(l){let e;return{c(){e=N("div"),this.h()},l(t){e=z(t,"DIV",{class:!0}),D(e).forEach(p),this.h()},h(){m(e,"class","svelte-flow__selection svelte-1iugwpu"),Qe(e,"width",typeof l[2]=="string"?l[2]:`${l[2]}px`),Qe(e,"height",typeof l[3]=="string"?l[3]:`${l[3]}px`),Qe(e,"transform",`translate(${l[0]}px, ${l[1]}px)`)},m(t,n){B(t,e,n)},p(t,n){n&4&&Qe(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),n&8&&Qe(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),n&3&&Qe(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},d(t){t&&p(e)}}}function G1(l){let e,t=l[4]&&pi(l);return{c(){t&&t.c(),e=Me()},l(n){t&&t.l(n),e=Me()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[4]?t?t.p(n,o):(t=pi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ie,o:Ie,d(n){n&&p(e),t&&t.d(n)}}}function X1(l,e,t){let{x:n=0}=e,{y:o=0}=e,{width:s=0}=e,{height:r=0}=e,{isVisible:i=!0}=e;return l.$$set=a=>{"x"in a&&t(0,n=a.x),"y"in a&&t(1,o=a.y),"width"in a&&t(2,s=a.width),"height"in a&&t(3,r=a.height),"isVisible"in a&&t(4,i=a.isVisible)},[n,o,s,r,i]}class Qa extends Oe{constructor(e){super(),He(this,e,X1,G1,Le,{x:0,y:1,width:2,height:3,isVisible:4})}}function Z1(l){var n,o,s,r;let e,t;return e=new Qa({props:{isVisible:!!(l[0]&&l[1]==="user"),width:(n=l[0])==null?void 0:n.width,height:(o=l[0])==null?void 0:o.height,x:(s=l[0])==null?void 0:s.x,y:(r=l[0])==null?void 0:r.y}}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,a){ee(e,i,a),t=!0},p(i,[a]){var u,f,d,h;const c={};a&3&&(c.isVisible=!!(i[0]&&i[1]==="user")),a&1&&(c.width=(u=i[0])==null?void 0:u.width),a&1&&(c.height=(f=i[0])==null?void 0:f.height),a&1&&(c.x=(d=i[0])==null?void 0:d.x),a&1&&(c.y=(h=i[0])==null?void 0:h.y),e.$set(c)},i(i){t||(T(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){$(e,i)}}}function q1(l,e,t){let n,o;const{selectionRect:s,selectionRectMode:r}=Wt();return se(l,s,i=>t(0,n=i)),se(l,r,i=>t(1,o=i)),[n,o,s,r]}class J1 extends Oe{constructor(e){super(),He(this,e,q1,Z1,Le,{})}}function _i(l){let e,t,n,o,s;return t=new Qa({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(r){e=z(r,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var i=D(e);ne(t.$$.fragment,i),i.forEach(p),this.h()},h(){m(e,"class","selection-wrapper nopan svelte-5pxri"),Qe(e,"width",l[1].width+"px"),Qe(e,"height",l[1].height+"px"),Qe(e,"transform","translate("+l[1].x+"px, "+l[1].y+"px)"),m(e,"role","button"),m(e,"tabindex","-1")},m(r,i){B(r,e,i),ee(t,e,null),n=!0,o||(s=[gn(Ja.call(null,e,{disabled:!1,store:l[2],onDrag:l[11],onDragStart:l[12],onDragStop:l[13]})),De(e,"contextmenu",l[7]),De(e,"click",l[8]),De(e,"keyup",x1)],o=!0)},p(r,i){(!n||i&2)&&Qe(e,"width",r[1].width+"px"),(!n||i&2)&&Qe(e,"height",r[1].height+"px"),(!n||i&2)&&Qe(e,"transform","translate("+r[1].x+"px, "+r[1].y+"px)")},i(r){n||(T(t.$$.fragment,r),n=!0)},o(r){O(t.$$.fragment,r),n=!1},d(r){r&&p(e),$(t),o=!1,an(s)}}}function Q1(l){let e=l[0]==="nodes"&&l[1]&&Mn(l[1].x)&&Mn(l[1].y),t,n,o=e&&_i(l);return{c(){o&&o.c(),t=Me()},l(s){o&&o.l(s),t=Me()},m(s,r){o&&o.m(s,r),B(s,t,r),n=!0},p(s,[r]){r&3&&(e=s[0]==="nodes"&&s[1]&&Mn(s[1].x)&&Mn(s[1].y)),e?o?(o.p(s,r),r&3&&T(o,1)):(o=_i(s),o.c(),T(o,1),o.m(t.parentNode,t)):o&&(Te(),O(o,1,1,()=>{o=null}),Ve())},i(s){n||(T(o),n=!0)},o(s){O(o),n=!1},d(s){s&&p(t),o&&o.d(s)}}}const x1=()=>{};function $1(l,e,t){let n,o,s;const r=Wt(),{selectionRectMode:i,nodes:a,nodeLookup:c}=r;se(l,i,g=>t(0,s=g)),se(l,a,g=>t(9,n=g)),se(l,c,g=>t(10,o=g));const u=rn();let f=null;function d(g){const w=n.filter(y=>y.selected);u("selectioncontextmenu",{nodes:w,event:g})}function h(g){const w=n.filter(y=>y.selected);u("selectionclick",{nodes:w,event:g})}const _=(g,w,y,E)=>{u("nodedrag",{event:g,targetNode:null,nodes:E})},b=(g,w,y,E)=>{u("nodedragstart",{event:g,targetNode:null,nodes:E})},v=(g,w,y,E)=>{u("nodedragstop",{event:g,targetNode:null,nodes:E})};return l.$$.update=()=>{l.$$.dirty&1537&&s==="nodes"&&t(1,f=Oo(o,{filter:g=>!!g.selected}))},[s,f,r,i,a,c,u,d,h,n,o,_,b,v]}class eg extends Oe{constructor(e){super(),He(this,e,$1,Q1,Le,{})}}function Nn(l,e){let{enabled:t=!0,trigger:n,type:o="keydown"}=e;function s(r){const i=Array.isArray(n)?n:[n],a={alt:r.altKey,ctrl:r.ctrlKey,shift:r.shiftKey,meta:r.metaKey};for(const c of i){const u={modifier:[],preventDefault:!1,enabled:!0,...c},{modifier:f,key:d,callback:h,preventDefault:_,enabled:b}=u;if(b){if(f.length&&!(Array.isArray(f)?f:[f]).map(w=>typeof w=="string"?[w]:w).some(w=>w.every(y=>a[y])))continue;if(r.key===d){_&&r.preventDefault();const v={node:l,trigger:u,originalEvent:r};l.dispatchEvent(new CustomEvent("shortcut",{detail:v})),h==null||h(v)}}}}return t&&l.addEventListener(o,s),{update:r=>{const{enabled:i=!0,type:a="keydown"}=r;t&&(!i||o!==a)?l.removeEventListener(o,s):!t&&i&&l.addEventListener(a,s),t=i,o=a,n=r.trigger},destroy:()=>{l.removeEventListener(o,s)}}}function tg(l){let e,t,n,o,s,r,i,a,c,u,f,d;return{c:Ie,l:Ie,m(h,_){f||(d=[gn(e=Nn.call(null,window,{trigger:Xt(l[0],l[11]),type:"keydown"})),gn(t=Nn.call(null,window,{trigger:Xt(l[0],l[12]),type:"keyup"})),gn(n=Nn.call(null,window,{trigger:Xt(l[1],l[13]),type:"keydown"})),gn(o=Nn.call(null,window,{trigger:Xt(l[1],l[14]),type:"keyup"})),gn(s=Nn.call(null,window,{trigger:Xt(l[2],l[15]),type:"keydown"})),gn(r=Nn.call(null,window,{trigger:Xt(l[2],l[16]),type:"keyup"})),gn(i=Nn.call(null,window,{trigger:Xt(l[3],l[17]),type:"keydown"})),gn(a=Nn.call(null,window,{trigger:Xt(l[3],l[18]),type:"keyup"})),gn(c=Nn.call(null,window,{trigger:Xt(l[4],l[19]),type:"keydown"})),gn(u=Nn.call(null,window,{trigger:Xt(l[4],l[20]),type:"keyup"})),De(window,"blur",l[10]),De(window,"contextmenu",l[10])],f=!0)},p(h,[_]){e&&sn(e.update)&&_&1&&e.update.call(null,{trigger:Xt(h[0],h[11]),type:"keydown"}),t&&sn(t.update)&&_&1&&t.update.call(null,{trigger:Xt(h[0],h[12]),type:"keyup"}),n&&sn(n.update)&&_&2&&n.update.call(null,{trigger:Xt(h[1],h[13]),type:"keydown"}),o&&sn(o.update)&&_&2&&o.update.call(null,{trigger:Xt(h[1],h[14]),type:"keyup"}),s&&sn(s.update)&&_&4&&s.update.call(null,{trigger:Xt(h[2],h[15]),type:"keydown"}),r&&sn(r.update)&&_&4&&r.update.call(null,{trigger:Xt(h[2],h[16]),type:"keyup"}),i&&sn(i.update)&&_&8&&i.update.call(null,{trigger:Xt(h[3],h[17]),type:"keydown"}),a&&sn(a.update)&&_&8&&a.update.call(null,{trigger:Xt(h[3],h[18]),type:"keyup"}),c&&sn(c.update)&&_&16&&c.update.call(null,{trigger:Xt(h[4],h[19]),type:"keydown"}),u&&sn(u.update)&&_&16&&u.update.call(null,{trigger:Xt(h[4],h[20]),type:"keyup"})},i:Ie,o:Ie,d(h){f=!1,an(d)}}}function xa(l){return l!==null&&typeof l=="object"}function ng(l){return xa(l)?l.modifier||[]:[]}function lg(l){return l==null?"":xa(l)?l.key:l}function Xt(l,e){return(Array.isArray(l)?l:[l]).map(n=>{const o=lg(n);return{key:o,modifier:ng(n),enabled:o!==null,callback:e}})}function og(l,e,t){let{selectionKey:n="Shift"}=e,{multiSelectionKey:o=ko()?"Meta":"Control"}=e,{deleteKey:s="Backspace"}=e,{panActivationKey:r=" "}=e,{zoomActivationKey:i=ko()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:c,deleteKeyPressed:u,panActivationKeyPressed:f,zoomActivationKeyPressed:d,selectionRect:h}=Wt();function _(){h.set(null),a.set(!1),c.set(!1),u.set(!1),f.set(!1),d.set(!1)}const b=()=>a.set(!0),v=()=>a.set(!1),g=()=>c.set(!0),w=()=>c.set(!1),y=H=>{!(H.originalEvent.ctrlKey||H.originalEvent.metaKey||H.originalEvent.shiftKey)&&!Uh(H.originalEvent)&&u.set(!0)},E=()=>u.set(!1),M=()=>f.set(!0),S=()=>f.set(!1),V=()=>d.set(!0),A=()=>d.set(!1);return l.$$set=H=>{"selectionKey"in H&&t(0,n=H.selectionKey),"multiSelectionKey"in H&&t(1,o=H.multiSelectionKey),"deleteKey"in H&&t(2,s=H.deleteKey),"panActivationKey"in H&&t(3,r=H.panActivationKey),"zoomActivationKey"in H&&t(4,i=H.zoomActivationKey)},[n,o,s,r,i,a,c,u,f,d,_,b,v,g,w,y,E,M,S,V,A]}class sg extends Oe{constructor(e){super(),He(this,e,og,tg,Le,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const rg=l=>({}),bi=l=>({});function vi(l){let e,t,n,o;const s=l[13].connectionLine,r=Jt(s,l,l[12],bi);let i=!l[2]&&wi(l);return{c(){e=ve("svg"),t=ve("g"),r&&r.c(),i&&i.c(),this.h()},l(a){e=be(a,"svg",{width:!0,height:!0,class:!0,style:!0});var c=D(e);t=be(c,"g",{class:!0});var u=D(t);r&&r.l(u),i&&i.l(u),u.forEach(p),c.forEach(p),this.h()},h(){m(t,"class",n=Tt(["svelte-flow__connection",Yr(l[3].isValid)])),m(e,"width",l[5]),m(e,"height",l[6]),m(e,"class","svelte-flow__connectionline"),m(e,"style",l[0])},m(a,c){B(a,e,c),k(e,t),r&&r.m(t,null),i&&i.m(t,null),o=!0},p(a,c){r&&r.p&&(!o||c&4096)&&Qt(r,s,a,a[12],o?$t(s,a[12],c,rg):xt(a[12]),bi),a[2]?i&&(i.d(1),i=null):i?i.p(a,c):(i=wi(a),i.c(),i.m(t,null)),(!o||c&8&&n!==(n=Tt(["svelte-flow__connection",Yr(a[3].isValid)])))&&m(t,"class",n),(!o||c&32)&&m(e,"width",a[5]),(!o||c&64)&&m(e,"height",a[6]),(!o||c&1)&&m(e,"style",a[0])},i(a){o||(T(r,a),o=!0)},o(a){O(r,a),o=!1},d(a){a&&p(e),r&&r.d(a),i&&i.d()}}}function wi(l){let e;return{c(){e=ve("path"),this.h()},l(t){e=be(t,"path",{d:!0,style:!0,fill:!0,class:!0}),D(e).forEach(p),this.h()},h(){m(e,"d",l[4]),m(e,"style",l[1]),m(e,"fill","none"),m(e,"class","svelte-flow__connection-path")},m(t,n){B(t,e,n)},p(t,n){n&16&&m(e,"d",t[4]),n&2&&m(e,"style",t[1])},d(t){t&&p(e)}}}function ig(l){let e,t,n=l[3].inProgress&&vi(l);return{c(){n&&n.c(),e=Me()},l(o){n&&n.l(o),e=Me()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,[s]){o[3].inProgress?n?(n.p(o,s),s&8&&T(n,1)):(n=vi(o),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(Te(),O(n,1,1,()=>{n=null}),Ve())},i(o){t||(T(n),t=!0)},o(o){O(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function ag(l,e,t){let n,o,s,r,{$$slots:i={},$$scope:a}=e,{containerStyle:c=""}=e,{style:u=""}=e,{isCustomComponent:f=!1}=e;const{width:d,height:h,connection:_,connectionLineType:b}=Wt();se(l,d,g=>t(5,s=g)),se(l,h,g=>t(6,r=g)),se(l,_,g=>t(3,o=g)),se(l,b,g=>t(11,n=g));let v=null;return l.$$set=g=>{"containerStyle"in g&&t(0,c=g.containerStyle),"style"in g&&t(1,u=g.style),"isCustomComponent"in g&&t(2,f=g.isCustomComponent),"$$scope"in g&&t(12,a=g.$$scope)},l.$$.update=()=>{if(l.$$.dirty&2060&&o.inProgress&&!f){const{from:g,to:w,fromPosition:y,toPosition:E}=o,M={sourceX:g.x,sourceY:g.y,sourcePosition:y,targetX:w.x,targetY:w.y,targetPosition:E};switch(n){case El.Bezier:t(4,[v]=za(M),v);break;case El.Step:t(4,[v]=Eo({...M,borderRadius:0}),v);break;case El.SmoothStep:t(4,[v]=Eo(M),v);break;default:t(4,[v]=Pa(M),v)}}},[c,u,f,o,v,s,r,d,h,_,b,n,a,i]}class cg extends Oe{constructor(e){super(),He(this,e,ag,ig,Le,{containerStyle:0,style:1,isCustomComponent:2})}}function ug(l){let e,t,n;const o=l[8].default,s=Jt(o,l,l[7],null);let r=[{class:t=Tt(["svelte-flow__panel",l[1],...l[2]])},{style:l[0]},l[5]],i={};for(let a=0;a<r.length;a+=1)i=wt(i,r[a]);return{c(){e=N("div"),s&&s.c(),this.h()},l(a){e=z(a,"DIV",{class:!0,style:!0});var c=D(e);s&&s.l(c),c.forEach(p),this.h()},h(){Il(e,i),Qe(e,"pointer-events",l[3]?"none":"")},m(a,c){B(a,e,c),s&&s.m(e,null),n=!0},p(a,[c]){s&&s.p&&(!n||c&128)&&Qt(s,o,a,a[7],n?$t(o,a[7],c,null):xt(a[7]),null),Il(e,i=Qn(r,[(!n||c&6&&t!==(t=Tt(["svelte-flow__panel",a[1],...a[2]])))&&{class:t},(!n||c&1)&&{style:a[0]},c&32&&a[5]])),Qe(e,"pointer-events",a[3]?"none":"")},i(a){n||(T(s,a),n=!0)},o(a){O(s,a),n=!1},d(a){a&&p(e),s&&s.d(a)}}}function fg(l,e,t){let n;const o=["position","style","class"];let s=Ft(e,o),r,{$$slots:i={},$$scope:a}=e,{position:c="top-right"}=e,{style:u=void 0}=e,{class:f=void 0}=e;const{selectionRectMode:d}=Wt();return se(l,d,h=>t(3,r=h)),l.$$set=h=>{e=wt(wt({},e),Tn(h)),t(5,s=Ft(e,o)),"position"in h&&t(6,c=h.position),"style"in h&&t(0,u=h.style),"class"in h&&t(1,f=h.class),"$$scope"in h&&t(7,a=h.$$scope)},l.$$.update=()=>{l.$$.dirty&64&&t(2,n=`${c}`.split("-"))},[u,f,n,r,d,s,c,a,i]}class $a extends Oe{constructor(e){super(),He(this,e,fg,ug,Le,{position:6,style:0,class:1})}}function yi(l){let e,t;return e=new $a({props:{position:l[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[dg]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.position=n[1]),o&4&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function dg(l){let e,t="Svelte Flow";return{c(){e=N("a"),e.textContent=t,this.h()},l(n){e=z(n,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),at(e)!=="svelte-2vm8e4"&&(e.textContent=t),this.h()},h(){m(e,"href","https://svelteflow.dev"),m(e,"target","_blank"),m(e,"rel","noopener noreferrer"),m(e,"aria-label","Svelte Flow attribution")},m(n,o){B(n,e,o)},p:Ie,d(n){n&&p(e)}}}function hg(l){var o;let e,t,n=!((o=l[0])!=null&&o.hideAttribution)&&yi(l);return{c(){n&&n.c(),e=Me()},l(s){n&&n.l(s),e=Me()},m(s,r){n&&n.m(s,r),B(s,e,r),t=!0},p(s,[r]){var i;(i=s[0])!=null&&i.hideAttribution?n&&(Te(),O(n,1,1,()=>{n=null}),Ve()):n?(n.p(s,r),r&1&&T(n,1)):(n=yi(s),n.c(),T(n,1),n.m(e.parentNode,e))},i(s){t||(T(n),t=!0)},o(s){O(n),t=!1},d(s){s&&p(e),n&&n.d(s)}}}function mg(l,e,t){let{proOptions:n=void 0}=e,{position:o="bottom-right"}=e;return l.$$set=s=>{"proOptions"in s&&t(0,n=s.proOptions),"position"in s&&t(1,o=s.position)},[n,o]}class gg extends Oe{constructor(e){super(),He(this,e,mg,hg,Le,{proOptions:0,position:1})}}function ki(l,{nodeTypes:e,edgeTypes:t,minZoom:n,maxZoom:o,translateExtent:s,paneClickDistance:r}){e!==void 0&&l.setNodeTypes(e),t!==void 0&&l.setEdgeTypes(t),n!==void 0&&l.setMinZoom(n),o!==void 0&&l.setMaxZoom(o),s!==void 0&&l.setTranslateExtent(s),r!==void 0&&l.setPaneClickDistance(r)}const pg=l=>Object.keys(l);function _g(l,e){pg(e).forEach(t=>{const n=e[t];n!==void 0&&l[t].set(n)})}function bg(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function vg(l="light"){return Sn("light",t=>{if(l!=="system"){t(l);return}const n=bg(),o=()=>t(n!=null&&n.matches?"dark":"light");return t(n!=null&&n.matches?"dark":"light"),n==null||n.addEventListener("change",o),()=>{n==null||n.removeEventListener("change",o)}})}const wg=l=>({}),Ei=l=>({slot:"connectionLine"});function yg(l){let e;const t=l[75].connectionLine,n=Jt(t,l,l[99],Ei);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s[3]&64)&&Qt(n,t,o,o[99],e?$t(t,o[99],s,wg):xt(o[99]),Ei)},i(o){e||(T(n,o),e=!0)},o(o){O(n,o),e=!1},d(o){n&&n.d(o)}}}function kg(l){let e,t,n,o,s,r,i,a,c,u,f,d;return e=new K1({props:{defaultEdgeOptions:l[21]}}),e.$on("edgeclick",l[78]),e.$on("edgecontextmenu",l[79]),e.$on("edgemouseenter",l[80]),e.$on("edgemouseleave",l[81]),n=new cg({props:{containerStyle:l[7],style:l[6],isCustomComponent:l[34].connectionLine,$$slots:{connectionLine:[yg]},$$scope:{ctx:l}}}),c=new T1({props:{nodeClickDistance:l[23]}}),c.$on("nodeclick",l[82]),c.$on("nodemouseenter",l[83]),c.$on("nodemousemove",l[84]),c.$on("nodemouseleave",l[85]),c.$on("nodedragstart",l[86]),c.$on("nodedrag",l[87]),c.$on("nodedragstop",l[88]),c.$on("nodecontextmenu",l[89]),f=new eg({}),f.$on("selectionclick",l[90]),f.$on("selectioncontextmenu",l[91]),f.$on("nodedragstart",l[92]),f.$on("nodedrag",l[93]),f.$on("nodedragstop",l[94]),{c(){te(e.$$.fragment),t=Q(),te(n.$$.fragment),o=Q(),s=N("div"),r=Q(),i=N("div"),a=Q(),te(c.$$.fragment),u=Q(),te(f.$$.fragment),this.h()},l(h){ne(e.$$.fragment,h),t=J(h),ne(n.$$.fragment,h),o=J(h),s=z(h,"DIV",{class:!0}),D(s).forEach(p),r=J(h),i=z(h,"DIV",{class:!0}),D(i).forEach(p),a=J(h),ne(c.$$.fragment,h),u=J(h),ne(f.$$.fragment,h),this.h()},h(){m(s,"class","svelte-flow__edgelabel-renderer"),m(i,"class","svelte-flow__viewport-portal")},m(h,_){ee(e,h,_),B(h,t,_),ee(n,h,_),B(h,o,_),B(h,s,_),B(h,r,_),B(h,i,_),B(h,a,_),ee(c,h,_),B(h,u,_),ee(f,h,_),d=!0},p(h,_){const b={};_[0]&2097152&&(b.defaultEdgeOptions=h[21]),e.$set(b);const v={};_[0]&128&&(v.containerStyle=h[7]),_[0]&64&&(v.style=h[6]),_[1]&8&&(v.isCustomComponent=h[34].connectionLine),_[3]&64&&(v.$$scope={dirty:_,ctx:h}),n.$set(v);const g={};_[0]&8388608&&(g.nodeClickDistance=h[23]),c.$set(g)},i(h){d||(T(e.$$.fragment,h),T(n.$$.fragment,h),T(c.$$.fragment,h),T(f.$$.fragment,h),d=!0)},o(h){O(e.$$.fragment,h),O(n.$$.fragment,h),O(c.$$.fragment,h),O(f.$$.fragment,h),d=!1},d(h){h&&(p(t),p(o),p(s),p(r),p(i),p(a),p(u)),$(e,h),$(n,h),$(c,h),$(f,h)}}}function Eg(l){let e,t,n,o;return e=new y1({props:{$$slots:{default:[kg]},$$scope:{ctx:l}}}),n=new J1({}),{c(){te(e.$$.fragment),t=Q(),te(n.$$.fragment)},l(s){ne(e.$$.fragment,s),t=J(s),ne(n.$$.fragment,s)},m(s,r){ee(e,s,r),B(s,t,r),ee(n,s,r),o=!0},p(s,r){const i={};r[0]&10485952|r[1]&8|r[3]&64&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){o||(T(e.$$.fragment,s),T(n.$$.fragment,s),o=!0)},o(s){O(e.$$.fragment,s),O(n.$$.fragment,s),o=!1},d(s){s&&p(t),$(e,s),$(n,s)}}}function Ig(l){let e,t;return e=new b1({props:{panOnDrag:l[17]===void 0?!0:l[17],selectionOnDrag:l[18],$$slots:{default:[Eg]},$$scope:{ctx:l}}}),e.$on("paneclick",l[95]),e.$on("panecontextmenu",l[96]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&131072&&(s.panOnDrag=n[17]===void 0?!0:n[17]),o[0]&262144&&(s.selectionOnDrag=n[18]),o[0]&10485952|o[1]&8|o[3]&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Sg(l){let e,t,n,o,s,r,i,a,c,u,f,d;t=new sg({props:{selectionKey:l[1],deleteKey:l[5],panActivationKey:l[2],multiSelectionKey:l[3],zoomActivationKey:l[4]}}),o=new g1({props:{initialViewport:l[31],onMoveStart:l[8],onMove:l[9],onMoveEnd:l[10],panOnScrollMode:l[11]===void 0?An.Free:l[11],preventScrolling:l[12]===void 0?!0:l[12],zoomOnScroll:l[13]===void 0?!0:l[13],zoomOnDoubleClick:l[14]===void 0?!0:l[14],zoomOnPinch:l[15]===void 0?!0:l[15],panOnScroll:l[16]===void 0?!1:l[16],panOnDrag:l[17]===void 0?!0:l[17],paneClickDistance:l[22]===void 0?0:l[22],$$slots:{default:[Ig]},$$scope:{ctx:l}}}),r=new gg({props:{proOptions:l[20],position:l[19]}});const h=l[75].default,_=Jt(h,l,l[99],null);let b=[{style:l[24]},{class:a=Tt(["svelte-flow",l[25],l[30]])},{"data-testid":"svelte-flow__wrapper"},l[33],{role:"application"}],v={};for(let g=0;g<b.length;g+=1)v=wt(v,b[g]);return{c(){e=N("div"),te(t.$$.fragment),n=Q(),te(o.$$.fragment),s=Q(),te(r.$$.fragment),i=Q(),_&&_.c(),this.h()},l(g){e=z(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var w=D(e);ne(t.$$.fragment,w),n=J(w),ne(o.$$.fragment,w),s=J(w),ne(r.$$.fragment,w),i=J(w),_&&_.l(w),w.forEach(p),this.h()},h(){Il(e,v),ul(()=>l[98].call(e)),nt(e,"svelte-18e9ir1",!0)},m(g,w){B(g,e,w),ee(t,e,null),k(e,n),ee(o,e,null),k(e,s),ee(r,e,null),k(e,i),_&&_.m(e,null),l[97](e),c=oc(e,l[98].bind(e)),u=!0,f||(d=[De(e,"dragover",l[76]),De(e,"drop",l[77])],f=!0)},p(g,w){const y={};w[0]&2&&(y.selectionKey=g[1]),w[0]&32&&(y.deleteKey=g[5]),w[0]&4&&(y.panActivationKey=g[2]),w[0]&8&&(y.multiSelectionKey=g[3]),w[0]&16&&(y.zoomActivationKey=g[4]),t.$set(y);const E={};w[0]&256&&(E.onMoveStart=g[8]),w[0]&512&&(E.onMove=g[9]),w[0]&1024&&(E.onMoveEnd=g[10]),w[0]&2048&&(E.panOnScrollMode=g[11]===void 0?An.Free:g[11]),w[0]&4096&&(E.preventScrolling=g[12]===void 0?!0:g[12]),w[0]&8192&&(E.zoomOnScroll=g[13]===void 0?!0:g[13]),w[0]&16384&&(E.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),w[0]&32768&&(E.zoomOnPinch=g[15]===void 0?!0:g[15]),w[0]&65536&&(E.panOnScroll=g[16]===void 0?!1:g[16]),w[0]&131072&&(E.panOnDrag=g[17]===void 0?!0:g[17]),w[0]&4194304&&(E.paneClickDistance=g[22]===void 0?0:g[22]),w[0]&10879168|w[1]&8|w[3]&64&&(E.$$scope={dirty:w,ctx:g}),o.$set(E);const M={};w[0]&1048576&&(M.proOptions=g[20]),w[0]&524288&&(M.position=g[19]),r.$set(M),_&&_.p&&(!u||w[3]&64)&&Qt(_,h,g,g[99],u?$t(h,g[99],w,null):xt(g[99]),null),Il(e,v=Qn(b,[(!u||w[0]&16777216)&&{style:g[24]},(!u||w[0]&1107296256&&a!==(a=Tt(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},w[1]&4&&g[33],{role:"application"}])),nt(e,"svelte-18e9ir1",!0)},i(g){u||(T(t.$$.fragment,g),T(o.$$.fragment,g),T(r.$$.fragment,g),T(_,g),u=!0)},o(g){O(t.$$.fragment,g),O(o.$$.fragment,g),O(r.$$.fragment,g),O(_,g),u=!1},d(g){g&&p(e),$(t),$(o),$(r),_&&_.d(g),l[97](null),c(),f=!1,an(d)}}}function Dg(l,e,t){let n;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let s=Ft(e,o),r,i,a=Ie,c=()=>(a(),a=Ds(A,q=>t(100,i=q)),A),u,f=Ie,d=()=>(f(),f=Ds(n,q=>t(30,u=q)),n);l.$$.on_destroy.push(()=>a()),l.$$.on_destroy.push(()=>f());let{$$slots:h={},$$scope:_}=e;const b=sc(h);let{id:v="1"}=e,{nodes:g}=e,{edges:w}=e,{fitView:y=void 0}=e,{fitViewOptions:E=void 0}=e,{minZoom:M=void 0}=e,{maxZoom:S=void 0}=e,{initialViewport:V=void 0}=e,{viewport:A=void 0}=e;c();let{nodeTypes:H=void 0}=e,{edgeTypes:L=void 0}=e,{selectionKey:W=void 0}=e,{selectionMode:j=void 0}=e,{panActivationKey:U=void 0}=e,{multiSelectionKey:C=void 0}=e,{zoomActivationKey:I=void 0}=e,{nodesDraggable:P=void 0}=e,{nodesConnectable:K=void 0}=e,{nodeDragThreshold:X=void 0}=e,{elementsSelectable:F=void 0}=e,{snapGrid:Z=void 0}=e,{deleteKey:ae=void 0}=e,{connectionRadius:x=void 0}=e,{connectionLineType:G=void 0}=e,{connectionMode:oe=dl.Strict}=e,{connectionLineStyle:de=""}=e,{connectionLineContainerStyle:Se=""}=e,{onMoveStart:ie=void 0}=e,{onMove:ze=void 0}=e,{onMoveEnd:me=void 0}=e,{isValidConnection:ue=void 0}=e,{translateExtent:qe=void 0}=e,{nodeExtent:je=void 0}=e,{onlyRenderVisibleElements:ge=void 0}=e,{panOnScrollMode:re=An.Free}=e,{preventScrolling:Re=!0}=e,{zoomOnScroll:rt=!0}=e,{zoomOnDoubleClick:tt=!0}=e,{zoomOnPinch:et=!0}=e,{panOnScroll:$e=!1}=e,{panOnDrag:gt=!0}=e,{selectionOnDrag:jt=void 0}=e,{autoPanOnConnect:Pt=!0}=e,{autoPanOnNodeDrag:_t=!0}=e,{onerror:Ot=void 0}=e,{ondelete:Ht=void 0}=e,{onedgecreate:At=void 0}=e,{attributionPosition:Vt=void 0}=e,{proOptions:Lt=void 0}=e,{defaultEdgeOptions:le=void 0}=e,{width:Bt=void 0}=e,{height:ut=void 0}=e,{colorMode:ce="light"}=e,{onconnect:Ue=void 0}=e,{onconnectstart:Ae=void 0}=e,{onconnectend:Ze=void 0}=e,{onbeforedelete:yt=void 0}=e,{oninit:vt=void 0}=e,{nodeOrigin:St=void 0}=e,{paneClickDistance:Dt=0}=e,{nodeClickDistance:cn=0}=e,{defaultMarkerColor:Rt="#b1b1b7"}=e,{style:Ut=void 0}=e,{class:Yt=void 0}=e,Kt,en,un;const zt=i||V,kt=rc(Ro)?Wt():f1({nodes:he(g),edges:he(w),width:Bt,height:ut,fitView:y,nodeOrigin:St,nodeExtent:je});hn(()=>(kt.width.set(en),kt.height.set(un),kt.domNode.set(Kt),kt.syncNodeStores(g),kt.syncEdgeStores(w),kt.syncViewport(A),y!==void 0&&kt.fitViewQueued.set(y),E&&kt.fitViewOptions.set(E),ki(kt,{nodeTypes:H,edgeTypes:L,minZoom:M,maxZoom:S,translateExtent:qe,paneClickDistance:Dt}),()=>{kt.reset()}));const{initialized:vn}=kt;se(l,vn,q=>t(74,r=q));let mn=!1;function Y(q){dt.call(this,l,q)}function Ee(q){dt.call(this,l,q)}function Ye(q){dt.call(this,l,q)}function ot(q){dt.call(this,l,q)}function Ne(q){dt.call(this,l,q)}function Xe(q){dt.call(this,l,q)}function pt(q){dt.call(this,l,q)}function it(q){dt.call(this,l,q)}function Gt(q){dt.call(this,l,q)}function tn(q){dt.call(this,l,q)}function nn(q){dt.call(this,l,q)}function ln(q){dt.call(this,l,q)}function on(q){dt.call(this,l,q)}function Ln(q){dt.call(this,l,q)}function $n(q){dt.call(this,l,q)}function wn(q){dt.call(this,l,q)}function Vn(q){dt.call(this,l,q)}function Bn(q){dt.call(this,l,q)}function Kn(q){dt.call(this,l,q)}function el(q){dt.call(this,l,q)}function En(q){dt.call(this,l,q)}function pl(q){Pe[q?"unshift":"push"](()=>{Kt=q,t(28,Kt)})}function tl(){en=this.clientWidth,un=this.clientHeight,t(26,en),t(27,un)}return l.$$set=q=>{e=wt(wt({},e),Tn(q)),t(33,s=Ft(e,o)),"id"in q&&t(35,v=q.id),"nodes"in q&&t(36,g=q.nodes),"edges"in q&&t(37,w=q.edges),"fitView"in q&&t(38,y=q.fitView),"fitViewOptions"in q&&t(39,E=q.fitViewOptions),"minZoom"in q&&t(40,M=q.minZoom),"maxZoom"in q&&t(41,S=q.maxZoom),"initialViewport"in q&&t(42,V=q.initialViewport),"viewport"in q&&c(t(0,A=q.viewport)),"nodeTypes"in q&&t(43,H=q.nodeTypes),"edgeTypes"in q&&t(44,L=q.edgeTypes),"selectionKey"in q&&t(1,W=q.selectionKey),"selectionMode"in q&&t(45,j=q.selectionMode),"panActivationKey"in q&&t(2,U=q.panActivationKey),"multiSelectionKey"in q&&t(3,C=q.multiSelectionKey),"zoomActivationKey"in q&&t(4,I=q.zoomActivationKey),"nodesDraggable"in q&&t(46,P=q.nodesDraggable),"nodesConnectable"in q&&t(47,K=q.nodesConnectable),"nodeDragThreshold"in q&&t(48,X=q.nodeDragThreshold),"elementsSelectable"in q&&t(49,F=q.elementsSelectable),"snapGrid"in q&&t(50,Z=q.snapGrid),"deleteKey"in q&&t(5,ae=q.deleteKey),"connectionRadius"in q&&t(51,x=q.connectionRadius),"connectionLineType"in q&&t(52,G=q.connectionLineType),"connectionMode"in q&&t(53,oe=q.connectionMode),"connectionLineStyle"in q&&t(6,de=q.connectionLineStyle),"connectionLineContainerStyle"in q&&t(7,Se=q.connectionLineContainerStyle),"onMoveStart"in q&&t(8,ie=q.onMoveStart),"onMove"in q&&t(9,ze=q.onMove),"onMoveEnd"in q&&t(10,me=q.onMoveEnd),"isValidConnection"in q&&t(54,ue=q.isValidConnection),"translateExtent"in q&&t(55,qe=q.translateExtent),"nodeExtent"in q&&t(56,je=q.nodeExtent),"onlyRenderVisibleElements"in q&&t(57,ge=q.onlyRenderVisibleElements),"panOnScrollMode"in q&&t(11,re=q.panOnScrollMode),"preventScrolling"in q&&t(12,Re=q.preventScrolling),"zoomOnScroll"in q&&t(13,rt=q.zoomOnScroll),"zoomOnDoubleClick"in q&&t(14,tt=q.zoomOnDoubleClick),"zoomOnPinch"in q&&t(15,et=q.zoomOnPinch),"panOnScroll"in q&&t(16,$e=q.panOnScroll),"panOnDrag"in q&&t(17,gt=q.panOnDrag),"selectionOnDrag"in q&&t(18,jt=q.selectionOnDrag),"autoPanOnConnect"in q&&t(58,Pt=q.autoPanOnConnect),"autoPanOnNodeDrag"in q&&t(59,_t=q.autoPanOnNodeDrag),"onerror"in q&&t(60,Ot=q.onerror),"ondelete"in q&&t(61,Ht=q.ondelete),"onedgecreate"in q&&t(62,At=q.onedgecreate),"attributionPosition"in q&&t(19,Vt=q.attributionPosition),"proOptions"in q&&t(20,Lt=q.proOptions),"defaultEdgeOptions"in q&&t(21,le=q.defaultEdgeOptions),"width"in q&&t(63,Bt=q.width),"height"in q&&t(64,ut=q.height),"colorMode"in q&&t(65,ce=q.colorMode),"onconnect"in q&&t(66,Ue=q.onconnect),"onconnectstart"in q&&t(67,Ae=q.onconnectstart),"onconnectend"in q&&t(68,Ze=q.onconnectend),"onbeforedelete"in q&&t(69,yt=q.onbeforedelete),"oninit"in q&&t(70,vt=q.oninit),"nodeOrigin"in q&&t(71,St=q.nodeOrigin),"paneClickDistance"in q&&t(22,Dt=q.paneClickDistance),"nodeClickDistance"in q&&t(23,cn=q.nodeClickDistance),"defaultMarkerColor"in q&&t(72,Rt=q.defaultMarkerColor),"style"in q&&t(24,Ut=q.style),"class"in q&&t(25,Yt=q.class),"$$scope"in q&&t(99,_=q.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&201326592&&en!==void 0&&un!==void 0&&(kt.width.set(en),kt.height.set(un)),l.$$.dirty[2]&6400&&!mn&&r&&(vt==null||vt(),t(73,mn=!0)),l.$$.dirty[1]&2097135632|l.$$.dirty[2]&1777&&_g(kt,{flowId:v,connectionLineType:G,connectionRadius:x,selectionMode:j,snapGrid:Z,defaultMarkerColor:Rt,nodesDraggable:P,nodesConnectable:K,elementsSelectable:F,onlyRenderVisibleElements:ge,isValidConnection:ue,autoPanOnConnect:Pt,autoPanOnNodeDrag:_t,onerror:Ot,ondelete:Ht,onedgecreate:At,connectionMode:oe,nodeDragThreshold:X,onconnect:Ue,onconnectstart:Ae,onconnectend:Ze,onbeforedelete:yt,nodeOrigin:St}),l.$$.dirty[0]&4194304|l.$$.dirty[1]&16791040&&ki(kt,{nodeTypes:H,edgeTypes:L,minZoom:M,maxZoom:S,translateExtent:qe,paneClickDistance:Dt}),l.$$.dirty[2]&8&&d(t(29,n=vg(ce)))},[A,W,U,C,I,ae,de,Se,ie,ze,me,re,Re,rt,tt,et,$e,gt,jt,Vt,Lt,le,Dt,cn,Ut,Yt,en,un,Kt,n,u,zt,vn,s,b,v,g,w,y,E,M,S,V,H,L,j,P,K,X,F,Z,x,G,oe,ue,qe,je,ge,Pt,_t,Ot,Ht,At,Bt,ut,ce,Ue,Ae,Ze,yt,vt,St,Rt,mn,r,h,Y,Ee,Ye,ot,Ne,Xe,pt,it,Gt,tn,nn,ln,on,Ln,$n,wn,Vn,Bn,Kn,el,En,pl,tl,_]}class Cg extends Oe{constructor(e){super(),He(this,e,Dg,Sg,Le,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}function Mg(l){let e;const t=l[7].default,n=Jt(t,l,l[6],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,[s]){n&&n.p&&(!e||s&64)&&Qt(n,t,o,o[6],e?$t(t,o[6],s,null):xt(o[6]),null)},i(o){e||(T(n,o),e=!0)},o(o){O(n,o),e=!1},d(o){n&&n.d(o)}}}function Tg(l,e,t){let{$$slots:n={},$$scope:o}=e,{initialNodes:s=void 0}=e,{initialEdges:r=void 0}=e,{initialWidth:i=void 0}=e,{initialHeight:a=void 0}=e,{fitView:c=void 0}=e,{nodeOrigin:u=void 0}=e;const f=qa({nodes:s,edges:r,width:i,height:a,nodeOrigin:u,fitView:c});return jl(Ro,{getStore:()=>f}),xn(()=>{f.reset()}),l.$$set=d=>{"initialNodes"in d&&t(0,s=d.initialNodes),"initialEdges"in d&&t(1,r=d.initialEdges),"initialWidth"in d&&t(2,i=d.initialWidth),"initialHeight"in d&&t(3,a=d.initialHeight),"fitView"in d&&t(4,c=d.fitView),"nodeOrigin"in d&&t(5,u=d.nodeOrigin),"$$scope"in d&&t(6,o=d.$$scope)},[s,r,i,a,c,u,o,n]}class Vg extends Oe{constructor(e){super(),He(this,e,Tg,Mg,Le,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}const zg=l=>({}),Ii=l=>({class:"button-svg"});function Ng(l){let e,t,n,o,s;const r=l[8].default,i=Jt(r,l,l[7],Ii);let a=[{type:"button"},{class:t=Tt(["svelte-flow__controls-button",l[0]])},l[6]],c={};for(let u=0;u<a.length;u+=1)c=wt(c,a[u]);return{c(){e=N("button"),i&&i.c(),this.h()},l(u){e=z(u,"BUTTON",{type:!0,class:!0});var f=D(e);i&&i.l(f),f.forEach(p),this.h()},h(){Il(e,c),Qe(e,"--xy-controls-button-background-color-props",l[1]),Qe(e,"--xy-controls-button-background-color-hover-props",l[2]),Qe(e,"--xy-controls-button-color-props",l[3]),Qe(e,"--xy-controls-button-color-hover-props",l[4]),Qe(e,"--xy-controls-button-border-color-props",l[5])},m(u,f){B(u,e,f),i&&i.m(e,null),e.autofocus&&e.focus(),n=!0,o||(s=De(e,"click",l[9]),o=!0)},p(u,[f]){i&&i.p&&(!n||f&128)&&Qt(i,r,u,u[7],n?$t(r,u[7],f,zg):xt(u[7]),Ii),Il(e,c=Qn(a,[{type:"button"},(!n||f&1&&t!==(t=Tt(["svelte-flow__controls-button",u[0]])))&&{class:t},f&64&&u[6]])),Qe(e,"--xy-controls-button-background-color-props",u[1]),Qe(e,"--xy-controls-button-background-color-hover-props",u[2]),Qe(e,"--xy-controls-button-color-props",u[3]),Qe(e,"--xy-controls-button-color-hover-props",u[4]),Qe(e,"--xy-controls-button-border-color-props",u[5])},i(u){n||(T(i,u),n=!0)},o(u){O(i,u),n=!1},d(u){u&&p(e),i&&i.d(u),o=!1,s()}}}function Pg(l,e,t){const n=["class","bgColor","bgColorHover","color","colorHover","borderColor"];let o=Ft(e,n),{$$slots:s={},$$scope:r}=e,{class:i=void 0}=e,{bgColor:a=void 0}=e,{bgColorHover:c=void 0}=e,{color:u=void 0}=e,{colorHover:f=void 0}=e,{borderColor:d=void 0}=e;function h(_){dt.call(this,l,_)}return l.$$set=_=>{e=wt(wt({},e),Tn(_)),t(6,o=Ft(e,n)),"class"in _&&t(0,i=_.class),"bgColor"in _&&t(1,a=_.bgColor),"bgColorHover"in _&&t(2,c=_.bgColorHover),"color"in _&&t(3,u=_.color),"colorHover"in _&&t(4,f=_.colorHover),"borderColor"in _&&t(5,d=_.borderColor),"$$scope"in _&&t(7,r=_.$$scope)},[i,a,c,u,f,d,o,r,s,h]}class Io extends Oe{constructor(e){super(),He(this,e,Pg,Ng,Le,{class:0,bgColor:1,bgColorHover:2,color:3,colorHover:4,borderColor:5})}}function Og(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,viewBox:!0});var o=D(e);t=be(o,"path",{d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 32")},m(n,o){B(n,e,o),k(e,t)},p:Ie,i:Ie,o:Ie,d(n){n&&p(e)}}}class Hg extends Oe{constructor(e){super(),He(this,e,null,Og,Le,{})}}function Ag(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,viewBox:!0});var o=D(e);t=be(o,"path",{d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M0 0h32v4.2H0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 5")},m(n,o){B(n,e,o),k(e,t)},p:Ie,i:Ie,o:Ie,d(n){n&&p(e)}}}class Lg extends Oe{constructor(e){super(),He(this,e,null,Ag,Le,{})}}function Bg(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,viewBox:!0});var o=D(e);t=be(o,"path",{d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 30")},m(n,o){B(n,e,o),k(e,t)},p:Ie,i:Ie,o:Ie,d(n){n&&p(e)}}}class Rg extends Oe{constructor(e){super(),He(this,e,null,Bg,Le,{})}}function Ug(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,viewBox:!0});var o=D(e);t=be(o,"path",{d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 25 32")},m(n,o){B(n,e,o),k(e,t)},p:Ie,i:Ie,o:Ie,d(n){n&&p(e)}}}class Fg extends Oe{constructor(e){super(),He(this,e,null,Ug,Le,{})}}function Wg(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,viewBox:!0});var o=D(e);t=be(o,"path",{d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 25 32")},m(n,o){B(n,e,o),k(e,t)},p:Ie,i:Ie,o:Ie,d(n){n&&p(e)}}}class jg extends Oe{constructor(e){super(),He(this,e,null,Wg,Le,{})}}const Yg=l=>({}),Si=l=>({}),Kg=l=>({}),Di=l=>({});function Ci(l){let e,t,n,o;const s=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:l[9]},l[17]];let r={$$slots:{default:[Gg]},$$scope:{ctx:l}};for(let c=0;c<s.length;c+=1)r=wt(r,s[c]);e=new Io({props:r}),e.$on("click",l[18]);const i=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:l[10]},l[17]];let a={$$slots:{default:[Xg]},$$scope:{ctx:l}};for(let c=0;c<i.length;c+=1)a=wt(a,i[c]);return n=new Io({props:a}),n.$on("click",l[19]),{c(){te(e.$$.fragment),t=Q(),te(n.$$.fragment)},l(c){ne(e.$$.fragment,c),t=J(c),ne(n.$$.fragment,c)},m(c,u){ee(e,c,u),B(c,t,u),ee(n,c,u),o=!0},p(c,u){const f=u[0]&131584?Qn(s,[s[0],s[1],s[2],u[0]&512&&{disabled:c[9]},u[0]&131072&&Yl(c[17])]):{};u[1]&32&&(f.$$scope={dirty:u,ctx:c}),e.$set(f);const d=u[0]&132096?Qn(i,[i[0],i[1],i[2],u[0]&1024&&{disabled:c[10]},u[0]&131072&&Yl(c[17])]):{};u[1]&32&&(d.$$scope={dirty:u,ctx:c}),n.$set(d)},i(c){o||(T(e.$$.fragment,c),T(n.$$.fragment,c),o=!0)},o(c){O(e.$$.fragment,c),O(n.$$.fragment,c),o=!1},d(c){c&&p(t),$(e,c),$(n,c)}}}function Gg(l){let e,t;return e=new Hg({}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Xg(l){let e,t;return e=new Lg({}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Mi(l){let e,t;const n=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},l[17]];let o={$$slots:{default:[Zg]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=wt(o,n[s]);return e=new Io({props:o}),e.$on("click",l[20]),{c(){te(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,r){ee(e,s,r),t=!0},p(s,r){const i=r[0]&131072?Qn(n,[n[0],n[1],n[2],Yl(s[17])]):{};r[1]&32&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(T(e.$$.fragment,s),t=!0)},o(s){O(e.$$.fragment,s),t=!1},d(s){$(e,s)}}}function Zg(l){let e,t;return e=new Rg({}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Ti(l){let e,t;const n=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},l[17]];let o={$$slots:{default:[Qg]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=wt(o,n[s]);return e=new Io({props:o}),e.$on("click",l[21]),{c(){te(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,r){ee(e,s,r),t=!0},p(s,r){const i=r[0]&131072?Qn(n,[n[0],n[1],n[2],Yl(s[17])]):{};r[0]&256|r[1]&32&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(T(e.$$.fragment,s),t=!0)},o(s){O(e.$$.fragment,s),t=!1},d(s){$(e,s)}}}function qg(l){let e,t;return e=new Fg({}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Jg(l){let e,t;return e=new jg({}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Qg(l){let e,t,n,o;const s=[Jg,qg],r=[];function i(a,c){return a[8]?0:1}return e=i(l),t=r[e]=s[e](l),{c(){t.c(),n=Me()},l(a){t.l(a),n=Me()},m(a,c){r[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=i(a),e!==u&&(Te(),O(r[u],1,1,()=>{r[u]=null}),Ve(),t=r[e],t||(t=r[e]=s[e](a),t.c()),T(t,1),t.m(n.parentNode,n))},i(a){o||(T(t),o=!0)},o(a){O(t),o=!1},d(a){a&&p(n),r[e].d(a)}}}function xg(l){let e,t,n,o,s,r;const i=l[35].before,a=Jt(i,l,l[36],Di);let c=l[1]&&Ci(l),u=l[2]&&Mi(l),f=l[3]&&Ti(l);const d=l[35].default,h=Jt(d,l,l[36],null),_=l[35].after,b=Jt(_,l,l[36],Si);return{c(){a&&a.c(),e=Q(),c&&c.c(),t=Q(),u&&u.c(),n=Q(),f&&f.c(),o=Q(),h&&h.c(),s=Q(),b&&b.c()},l(v){a&&a.l(v),e=J(v),c&&c.l(v),t=J(v),u&&u.l(v),n=J(v),f&&f.l(v),o=J(v),h&&h.l(v),s=J(v),b&&b.l(v)},m(v,g){a&&a.m(v,g),B(v,e,g),c&&c.m(v,g),B(v,t,g),u&&u.m(v,g),B(v,n,g),f&&f.m(v,g),B(v,o,g),h&&h.m(v,g),B(v,s,g),b&&b.m(v,g),r=!0},p(v,g){a&&a.p&&(!r||g[1]&32)&&Qt(a,i,v,v[36],r?$t(i,v[36],g,Kg):xt(v[36]),Di),v[1]?c?(c.p(v,g),g[0]&2&&T(c,1)):(c=Ci(v),c.c(),T(c,1),c.m(t.parentNode,t)):c&&(Te(),O(c,1,1,()=>{c=null}),Ve()),v[2]?u?(u.p(v,g),g[0]&4&&T(u,1)):(u=Mi(v),u.c(),T(u,1),u.m(n.parentNode,n)):u&&(Te(),O(u,1,1,()=>{u=null}),Ve()),v[3]?f?(f.p(v,g),g[0]&8&&T(f,1)):(f=Ti(v),f.c(),T(f,1),f.m(o.parentNode,o)):f&&(Te(),O(f,1,1,()=>{f=null}),Ve()),h&&h.p&&(!r||g[1]&32)&&Qt(h,d,v,v[36],r?$t(d,v[36],g,null):xt(v[36]),null),b&&b.p&&(!r||g[1]&32)&&Qt(b,_,v,v[36],r?$t(_,v[36],g,Yg):xt(v[36]),Si)},i(v){r||(T(a,v),T(c),T(u),T(f),T(h,v),T(b,v),r=!0)},o(v){O(a,v),O(c),O(u),O(f),O(h,v),O(b,v),r=!1},d(v){v&&(p(e),p(t),p(n),p(o),p(s)),a&&a.d(v),c&&c.d(v),u&&u.d(v),f&&f.d(v),h&&h.d(v),b&&b.d(v)}}}function $g(l){let e,t;return e=new $a({props:{class:Tt(["svelte-flow__controls",l[7],l[6]]),position:l[0],"data-testid":"svelte-flow__controls","aria-label":l[4]??"Svelte Flow controls",style:l[5],$$slots:{default:[xg]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&192&&(s.class=Tt(["svelte-flow__controls",n[7],n[6]])),o[0]&1&&(s.position=n[0]),o[0]&16&&(s["aria-label"]=n[4]??"Svelte Flow controls"),o[0]&32&&(s.style=n[5]),o[0]&1806|o[1]&32&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function e0(l,e,t){let n,o,s,r,i,a,c,u,f,d,{$$slots:h={},$$scope:_}=e,{position:b="bottom-left"}=e,{showZoom:v=!0}=e,{showFitView:g=!0}=e,{showLock:w=!0}=e,{buttonBgColor:y=void 0}=e,{buttonBgColorHover:E=void 0}=e,{buttonColor:M=void 0}=e,{buttonColorHover:S=void 0}=e,{buttonBorderColor:V=void 0}=e,{ariaLabel:A=void 0}=e,{style:H=void 0}=e,{orientation:L="vertical"}=e,{fitViewOptions:W=void 0}=e,{class:j=""}=e;const{zoomIn:U,zoomOut:C,fitView:I,viewport:P,minZoom:K,maxZoom:X,nodesDraggable:F,nodesConnectable:Z,elementsSelectable:ae}=Wt();se(l,P,ie=>t(30,a=ie)),se(l,K,ie=>t(31,c=ie)),se(l,X,ie=>t(29,i=ie)),se(l,F,ie=>t(34,d=ie)),se(l,Z,ie=>t(33,f=ie)),se(l,ae,ie=>t(32,u=ie));const x={bgColor:y,bgColorHover:E,color:M,colorHover:S,borderColor:V},G=()=>{U()},oe=()=>{C()},de=()=>{I(W)},Se=()=>{t(8,n=!n),F.set(n),Z.set(n),ae.set(n)};return l.$$set=ie=>{"position"in ie&&t(0,b=ie.position),"showZoom"in ie&&t(1,v=ie.showZoom),"showFitView"in ie&&t(2,g=ie.showFitView),"showLock"in ie&&t(3,w=ie.showLock),"buttonBgColor"in ie&&t(22,y=ie.buttonBgColor),"buttonBgColorHover"in ie&&t(23,E=ie.buttonBgColorHover),"buttonColor"in ie&&t(24,M=ie.buttonColor),"buttonColorHover"in ie&&t(25,S=ie.buttonColorHover),"buttonBorderColor"in ie&&t(26,V=ie.buttonBorderColor),"ariaLabel"in ie&&t(4,A=ie.ariaLabel),"style"in ie&&t(5,H=ie.style),"orientation"in ie&&t(27,L=ie.orientation),"fitViewOptions"in ie&&t(28,W=ie.fitViewOptions),"class"in ie&&t(6,j=ie.class),"$$scope"in ie&&t(36,_=ie.$$scope)},l.$$.update=()=>{l.$$.dirty[1]&14&&t(8,n=d||f||u),l.$$.dirty[0]&1073741824|l.$$.dirty[1]&1&&t(10,o=a.zoom<=c),l.$$.dirty[0]&1610612736&&t(9,s=a.zoom>=i),l.$$.dirty[0]&134217728&&t(7,r=L==="horizontal"?"horizontal":"vertical")},[b,v,g,w,A,H,j,r,n,s,o,P,K,X,F,Z,ae,x,G,oe,de,Se,y,E,M,S,V,L,W,i,a,c,u,f,d,h,_]}let t0=class extends Oe{constructor(e){super(),He(this,e,e0,$g,Le,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}};var Wn;(function(l){l.Lines="lines",l.Dots="dots",l.Cross="cross"})(Wn||(Wn={}));function n0(l){let e,t;return{c(){e=ve("circle"),this.h()},l(n){e=be(n,"circle",{cx:!0,cy:!0,r:!0,class:!0}),D(e).forEach(p),this.h()},h(){m(e,"cx",l[0]),m(e,"cy",l[0]),m(e,"r",l[0]),m(e,"class",t=Tt(["svelte-flow__background-pattern","dots",l[1]]))},m(n,o){B(n,e,o)},p(n,[o]){o&1&&m(e,"cx",n[0]),o&1&&m(e,"cy",n[0]),o&1&&m(e,"r",n[0]),o&2&&t!==(t=Tt(["svelte-flow__background-pattern","dots",n[1]]))&&m(e,"class",t)},i:Ie,o:Ie,d(n){n&&p(e)}}}function l0(l,e,t){let{radius:n=5}=e,{class:o=""}=e;return l.$$set=s=>{"radius"in s&&t(0,n=s.radius),"class"in s&&t(1,o=s.class)},[n,o]}class o0 extends Oe{constructor(e){super(),He(this,e,l0,n0,Le,{radius:0,class:1})}}function s0(l){let e,t,n;return{c(){e=ve("path"),this.h()},l(o){e=be(o,"path",{"stroke-width":!0,d:!0,class:!0}),D(e).forEach(p),this.h()},h(){m(e,"stroke-width",l[0]),m(e,"d",t=`M${l[1][0]/2} 0 V${l[1][1]} M0 ${l[1][1]/2} H${l[1][0]}`),m(e,"class",n=Tt(["svelte-flow__background-pattern",l[2],l[3]]))},m(o,s){B(o,e,s)},p(o,[s]){s&1&&m(e,"stroke-width",o[0]),s&2&&t!==(t=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&m(e,"d",t),s&12&&n!==(n=Tt(["svelte-flow__background-pattern",o[2],o[3]]))&&m(e,"class",n)},i:Ie,o:Ie,d(o){o&&p(e)}}}function r0(l,e,t){let{lineWidth:n=1}=e,{dimensions:o}=e,{variant:s=void 0}=e,{class:r=""}=e;return l.$$set=i=>{"lineWidth"in i&&t(0,n=i.lineWidth),"dimensions"in i&&t(1,o=i.dimensions),"variant"in i&&t(2,s=i.variant),"class"in i&&t(3,r=i.class)},[n,o,s,r]}class i0 extends Oe{constructor(e){super(),He(this,e,r0,s0,Le,{lineWidth:0,dimensions:1,variant:2,class:3})}}function a0(l){let e,t;return e=new i0({props:{dimensions:l[6],variant:l[0],lineWidth:l[1],class:l[4]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&64&&(s.dimensions=n[6]),o&1&&(s.variant=n[0]),o&2&&(s.lineWidth=n[1]),o&16&&(s.class=n[4]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function c0(l){let e,t;return e=new o0({props:{radius:l[7]/2,class:l[4]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.radius=n[7]/2),o&16&&(s.class=n[4]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function u0(l){let e,t,n,o,s,r,i,a,c,u,f,d,h;const _=[c0,a0],b=[];function v(g,w){return g[14]?0:1}return n=v(l),o=b[n]=_[n](l),{c(){e=ve("svg"),t=ve("pattern"),o.c(),u=ve("rect"),this.h()},l(g){e=be(g,"svg",{class:!0,"data-testid":!0});var w=D(e);t=be(w,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var y=D(t);o.l(y),y.forEach(p),u=be(w,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),D(u).forEach(p),w.forEach(p),this.h()},h(){m(t,"id",l[11]),m(t,"x",s=l[9].x%l[8][0]),m(t,"y",r=l[9].y%l[8][1]),m(t,"width",i=l[8][0]),m(t,"height",a=l[8][1]),m(t,"patternUnits","userSpaceOnUse"),m(t,"patternTransform",c=`translate(-${l[10][0]},-${l[10][1]})`),m(u,"x","0"),m(u,"y","0"),m(u,"width","100%"),m(u,"height","100%"),m(u,"fill",f=`url(#${l[11]})`),m(e,"class",d=Cs(Tt(["svelte-flow__background",l[5]]))+" svelte-1r7pe8d"),m(e,"data-testid","svelte-flow__background"),Qe(e,"--xy-background-color-props",l[2]),Qe(e,"--xy-background-pattern-color-props",l[3])},m(g,w){B(g,e,w),k(e,t),b[n].m(t,null),k(e,u),h=!0},p(g,[w]){o.p(g,w),(!h||w&2048)&&m(t,"id",g[11]),(!h||w&768&&s!==(s=g[9].x%g[8][0]))&&m(t,"x",s),(!h||w&768&&r!==(r=g[9].y%g[8][1]))&&m(t,"y",r),(!h||w&256&&i!==(i=g[8][0]))&&m(t,"width",i),(!h||w&256&&a!==(a=g[8][1]))&&m(t,"height",a),(!h||w&1024&&c!==(c=`translate(-${g[10][0]},-${g[10][1]})`))&&m(t,"patternTransform",c),(!h||w&2048&&f!==(f=`url(#${g[11]})`))&&m(u,"fill",f),(!h||w&32&&d!==(d=Cs(Tt(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&m(e,"class",d),w&4&&Qe(e,"--xy-background-color-props",g[2]),w&8&&Qe(e,"--xy-background-pattern-color-props",g[3])},i(g){h||(T(o),h=!0)},o(g){O(o),h=!1},d(g){g&&p(e),b[n].d()}}}const f0={[Wn.Dots]:1,[Wn.Lines]:1,[Wn.Cross]:6};function d0(l,e,t){let n,o,s,r,i,a,c,{id:u=void 0}=e,{variant:f=Wn.Dots}=e,{gap:d=20}=e,{size:h=1}=e,{lineWidth:_=1}=e,{bgColor:b=void 0}=e,{patternColor:v=void 0}=e,{patternClass:g=void 0}=e,{class:w=""}=e;const{viewport:y,flowId:E}=Wt();se(l,y,H=>t(9,a=H)),se(l,E,H=>t(18,c=H));const M=h||f0[f],S=f===Wn.Dots,V=f===Wn.Cross,A=Array.isArray(d)?d:[d,d];return l.$$set=H=>{"id"in H&&t(15,u=H.id),"variant"in H&&t(0,f=H.variant),"gap"in H&&t(16,d=H.gap),"size"in H&&t(17,h=H.size),"lineWidth"in H&&t(1,_=H.lineWidth),"bgColor"in H&&t(2,b=H.bgColor),"patternColor"in H&&t(3,v=H.patternColor),"patternClass"in H&&t(4,g=H.patternClass),"class"in H&&t(5,w=H.class)},l.$$.update=()=>{l.$$.dirty&294912&&t(11,n=`background-pattern-${c}-${u||""}`),l.$$.dirty&512&&t(8,o=[A[0]*a.zoom||1,A[1]*a.zoom||1]),l.$$.dirty&512&&t(7,s=M*a.zoom),l.$$.dirty&384&&t(6,r=V?[s,s]:o),l.$$.dirty&192&&t(10,i=S?[s/2,s/2]:[r[0]/2,r[1]/2])},[f,_,b,v,g,w,r,s,o,a,i,n,y,E,S,u,d,h,c]}class h0 extends Oe{constructor(e){super(),He(this,e,d0,u0,Le,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const Vi=l=>Ch(l);function m0(){const{zoomIn:l,zoomOut:e,fitView:t,onbeforedelete:n,snapGrid:o,viewport:s,width:r,height:i,minZoom:a,maxZoom:c,panZoom:u,nodes:f,edges:d,domNode:h,nodeLookup:_,nodeOrigin:b,edgeLookup:v,connectionLookup:g}=Wt(),w=M=>{var L,W;const S=he(_),V=Vi(M)?M:S.get(M.id),A=V.parentId?Ah(V.position,V.measured,V.parentId,S,he(b)):V.position,H={...V,position:A,width:((L=V.measured)==null?void 0:L.width)??V.width,height:((W=V.measured)==null?void 0:W.height)??V.height};return Ml(H)},y=(M,S,V={replace:!1})=>{var L;const A=(L=he(_).get(M))==null?void 0:L.internals.userNode;if(!A)return;const H=typeof S=="function"?S(A):S;V.replace?f.update(W=>W.map(j=>j.id===M?Vi(H)?H:{...j,...H}:j)):(Object.assign(A,H),f.update(W=>W))},E=M=>he(_).get(M);return{zoomIn:l,zoomOut:e,getInternalNode:E,getNode:M=>{var S;return(S=E(M))==null?void 0:S.internals.userNode},getNodes:M=>M===void 0?he(f):zi(he(_),M),getEdge:M=>he(v).get(M),getEdges:M=>M===void 0?he(d):zi(he(v),M),setZoom:(M,S)=>{const V=he(u);return V?V.scaleTo(M,{duration:S==null?void 0:S.duration}):Promise.resolve(!1)},getZoom:()=>he(s).zoom,setViewport:async(M,S)=>{const V=he(s),A=he(u);return A?(await A.setViewport({x:M.x??V.x,y:M.y??V.y,zoom:M.zoom??V.zoom},{duration:S==null?void 0:S.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>he(s),setCenter:async(M,S,V)=>{const A=typeof(V==null?void 0:V.zoom)<"u"?V.zoom:he(c),H=he(u);return H?(await H.setViewport({x:he(r)/2-M*A,y:he(i)/2-S*A,zoom:A},{duration:V==null?void 0:V.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:t,fitBounds:async(M,S)=>{const V=he(u);if(!V)return Promise.resolve(!1);const A=ds(M,he(r),he(i),he(a),he(c),(S==null?void 0:S.padding)??.1);return await V.setViewport(A,{duration:S==null?void 0:S.duration}),Promise.resolve(!0)},getIntersectingNodes:(M,S=!0,V)=>{const A=Gr(M),H=A?M:w(M);return H?(V||he(f)).filter(L=>{const W=he(_).get(L.id);if(!W||!A&&L.id===M.id)return!1;const j=Ml(W),U=Zl(j,H);return S&&U>0||U>=H.width*H.height}):[]},isNodeIntersecting:(M,S,V=!0)=>{const H=Gr(M)?M:w(M);if(!H)return!1;const L=Zl(H,S);return V&&L>0||L>=H.width*H.height},deleteElements:async({nodes:M=[],edges:S=[]})=>{const{nodes:V,edges:A}=await Da({nodesToRemove:M,edgesToRemove:S,nodes:he(f),edges:he(d),onBeforeDelete:he(n)});return V&&f.update(H=>H.filter(L=>!V.some(({id:W})=>W===L.id))),A&&d.update(H=>H.filter(L=>!A.some(({id:W})=>W===L.id))),{deletedNodes:V,deletedEdges:A}},screenToFlowPosition:(M,S={snapToGrid:!0})=>{const V=he(h);if(!V)return M;const A=S.snapToGrid?he(o):!1,{x:H,y:L,zoom:W}=he(s),{x:j,y:U}=V.getBoundingClientRect(),C={x:M.x-j,y:M.y-U};return xl(C,[H,L,W],A!==null,A||[1,1])},flowToScreenPosition:M=>{const S=he(h);if(!S)return M;const{x:V,y:A,zoom:H}=he(s),{x:L,y:W}=S.getBoundingClientRect(),j=yo(M,[V,A,H]);return{x:j.x+L,y:j.y+W}},toObject:()=>({nodes:he(f).map(M=>({...M,position:{...M.position},data:{...M.data}})),edges:he(d).map(M=>({...M})),viewport:{...he(s)}}),updateNode:y,updateNodeData:(M,S,V)=>{var L;const A=(L=he(_).get(M))==null?void 0:L.internals.userNode;if(!A)return;const H=typeof S=="function"?S(A):S;A.data=V!=null&&V.replace?H:{...A.data,...H},f.update(W=>W)},getNodesBounds:M=>{const S=he(_),V=he(b);return Mh(M,{nodeLookup:S,nodeOrigin:V})},getHandleConnections:({type:M,id:S,nodeId:V})=>{var A;return Array.from(((A=he(g).get(`${V}-${M}-${S??null}`))==null?void 0:A.values())??[])},viewport:s}}function zi(l,e){var n;const t=[];for(const o of e){const s=l.get(o);if(s){const r="internals"in s?(n=s.internals)==null?void 0:n.userNode:s;t.push(r)}}return t}function g0(){const{nodesInitialized:l}=Wt();return{subscribe:l.subscribe}}function Ni(l,e,t){const n=l.slice();return n[25]=e[t],n[27]=t,n}function Pi(l,e,t){const n=l.slice();return n[22]=e[t],n[24]=t,n}function p0(l){let e,t;return e=new No({props:{className:"size-4"}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p:Ie,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function _0(l){let e,t,n,o,s,r,i,a=l[8].t("Tools")+"",c,u,f=l[8].t("Functions")+"",d,h,_,b,v,g,w,y;function E(A,H){if(A[1]==="tools")return v0;if(A[1]==="functions")return b0}let M=E(l),S=M&&M(l),V=l[2]&&Ai(l);return{c(){e=N("form"),t=N("div"),n=N("div"),o=N("div"),s=N("div"),r=N("select"),i=N("option"),c=ke(a),u=N("option"),d=ke(f),h=Q(),_=N("div"),b=N("select"),S&&S.c(),v=Q(),V&&V.c(),this.h()},l(A){e=z(A,"FORM",{class:!0});var H=D(e);t=z(H,"DIV",{class:!0});var L=D(t);n=z(L,"DIV",{class:!0});var W=D(n);o=z(W,"DIV",{class:!0});var j=D(o);s=z(j,"DIV",{class:!0});var U=D(s);r=z(U,"SELECT",{class:!0,placeholder:!0});var C=D(r);i=z(C,"OPTION",{class:!0});var I=D(i);c=ye(I,a),I.forEach(p),u=z(C,"OPTION",{class:!0});var P=D(u);d=ye(P,f),P.forEach(p),C.forEach(p),U.forEach(p),h=J(j),_=z(j,"DIV",{class:!0});var K=D(_);b=z(K,"SELECT",{class:!0});var X=D(b);S&&S.l(X),X.forEach(p),K.forEach(p),j.forEach(p),W.forEach(p),v=J(L),V&&V.l(L),L.forEach(p),H.forEach(p),this.h()},h(){i.__value="tools",kn(i,i.__value),m(i,"class","bg-gray-100 dark:bg-gray-800"),u.__value="functions",kn(u,u.__value),m(u,"class","bg-gray-100 dark:bg-gray-800"),m(r,"class","w-full rounded-sm text-xs py-2 px-1 bg-transparent outline-hidden"),m(r,"placeholder","Select"),l[1]===void 0&&ul(()=>l[13].call(r)),m(s,"class","flex-1"),m(b,"class","w-full rounded-sm py-2 px-1 text-xs bg-transparent outline-hidden"),l[2]===void 0&&ul(()=>l[14].call(b)),m(_,"class","flex-1"),m(o,"class","flex gap-2"),m(n,"class","space-y-1"),m(t,"class","flex flex-col"),m(e,"class","flex flex-col h-full justify-between space-y-3 text-sm")},m(A,H){B(A,e,H),k(e,t),k(t,n),k(n,o),k(o,s),k(s,r),k(r,i),k(i,c),k(r,u),k(u,d),so(r,l[1],!0),k(o,h),k(o,_),k(_,b),S&&S.m(b,null),so(b,l[2],!0),k(t,v),V&&V.m(t,null),g=!0,w||(y=[De(r,"change",l[13]),De(b,"change",l[14]),De(b,"change",l[15]),De(e,"submit",So(l[18]))],w=!0)},p(A,H){(!g||H&256)&&a!==(a=A[8].t("Tools")+"")&&Ce(c,a),(!g||H&256)&&f!==(f=A[8].t("Functions")+"")&&Ce(d,f),H&2&&so(r,A[1]),M===(M=E(A))&&S?S.p(A,H):(S&&S.d(1),S=M&&M(A),S&&(S.c(),S.m(b,null))),H&196&&so(b,A[2]),A[2]?V?(V.p(A,H),H&4&&T(V,1)):(V=Ai(A),V.c(),T(V,1),V.m(t,null)):V&&(Te(),O(V,1,1,()=>{V=null}),Ve())},i(A){g||(T(V),g=!0)},o(A){O(V),g=!1},d(A){A&&p(e),S&&S.d(),V&&V.d(),w=!1,an(y)}}}function b0(l){let e,t=l[8].t("Select a function")+"",n,o,s=mt(l[7]),r=[];for(let i=0;i<s.length;i+=1)r[i]=Oi(Ni(l,s,i));return{c(){e=N("option"),n=ke(t);for(let i=0;i<r.length;i+=1)r[i].c();o=Me(),this.h()},l(i){e=z(i,"OPTION",{class:!0});var a=D(e);n=ye(a,t),a.forEach(p);for(let c=0;c<r.length;c+=1)r[c].l(i);o=Me(),this.h()},h(){e.__value="",kn(e,e.__value),e.selected=!0,e.disabled=!0,m(e,"class","bg-gray-100 dark:bg-gray-800")},m(i,a){B(i,e,a),k(e,n);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(i,a);B(i,o,a)},p(i,a){if(a&256&&t!==(t=i[8].t("Select a function")+"")&&Ce(n,t),a&128){s=mt(i[7]);let c;for(c=0;c<s.length;c+=1){const u=Ni(i,s,c);r[c]?r[c].p(u,a):(r[c]=Oi(u),r[c].c(),r[c].m(o.parentNode,o))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(i){i&&(p(e),p(o)),bn(r,i)}}}function v0(l){let e,t=l[8].t("Select a tool")+"",n,o,s=mt(l[6]),r=[];for(let i=0;i<s.length;i+=1)r[i]=Hi(Pi(l,s,i));return{c(){e=N("option"),n=ke(t);for(let i=0;i<r.length;i+=1)r[i].c();o=Me(),this.h()},l(i){e=z(i,"OPTION",{class:!0});var a=D(e);n=ye(a,t),a.forEach(p);for(let c=0;c<r.length;c+=1)r[c].l(i);o=Me(),this.h()},h(){e.__value="",kn(e,e.__value),e.selected=!0,e.disabled=!0,m(e,"class","bg-gray-100 dark:bg-gray-800")},m(i,a){B(i,e,a),k(e,n);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(i,a);B(i,o,a)},p(i,a){if(a&256&&t!==(t=i[8].t("Select a tool")+"")&&Ce(n,t),a&64){s=mt(i[6]);let c;for(c=0;c<s.length;c+=1){const u=Pi(i,s,c);r[c]?r[c].p(u,a):(r[c]=Hi(u),r[c].c(),r[c].m(o.parentNode,o))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(i){i&&(p(e),p(o)),bn(r,i)}}}function Oi(l){let e,t=l[25].name+"",n,o;return{c(){e=N("option"),n=ke(t),this.h()},l(s){e=z(s,"OPTION",{class:!0});var r=D(e);n=ye(r,t),r.forEach(p),this.h()},h(){e.__value=o=l[25].id,kn(e,e.__value),m(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,r){B(s,e,r),k(e,n)},p(s,r){r&128&&t!==(t=s[25].name+"")&&Ce(n,t),r&128&&o!==(o=s[25].id)&&(e.__value=o,kn(e,e.__value))},d(s){s&&p(e)}}}function Hi(l){let e,t=l[22].name+"",n,o;return{c(){e=N("option"),n=ke(t),this.h()},l(s){e=z(s,"OPTION",{class:!0});var r=D(e);n=ye(r,t),r.forEach(p),this.h()},h(){e.__value=o=l[22].id,kn(e,e.__value),m(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,r){B(s,e,r),k(e,n)},p(s,r){r&64&&t!==(t=s[22].name+"")&&Ce(n,t),r&64&&o!==(o=s[22].id)&&(e.__value=o,kn(e,e.__value))},d(s){s&&p(e)}}}function Ai(l){let e,t,n,o,s,r;const i=[y0,w0],a=[];function c(u,f){return u[3]?1:0}return o=c(l),s=a[o]=i[o](l),{c(){e=N("hr"),t=Q(),n=N("div"),s.c(),this.h()},l(u){e=z(u,"HR",{class:!0}),t=J(u),n=z(u,"DIV",{class:!0});var f=D(n);s.l(f),f.forEach(p),this.h()},h(){m(e,"class","dark:border-gray-800 my-1 w-full"),m(n,"class","my-2 text-xs")},m(u,f){B(u,e,f),B(u,t,f),B(u,n,f),a[o].m(n,null),r=!0},p(u,f){let d=o;o=c(u),o===d?a[o].p(u,f):(Te(),O(a[d],1,1,()=>{a[d]=null}),Ve(),s=a[o],s?s.p(u,f):(s=a[o]=i[o](u),s.c()),T(s,1),s.m(n,null))},i(u){r||(T(s),r=!0)},o(u){O(s),r=!1},d(u){u&&(p(e),p(t),p(n)),a[o].d()}}}function w0(l){let e,t;return e=new No({props:{className:"size-5"}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p:Ie,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function y0(l){let e,t,n;function o(r){l[16](r)}let s={valvesSpec:l[4]};return l[5]!==void 0&&(s.valves=l[5]),e=new Mu({props:s}),Pe.push(()=>Ge(e,"valves",o)),e.$on("change",l[17]),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,i){ee(e,r,i),n=!0},p(r,i){const a={};i&16&&(a.valvesSpec=r[4]),!t&&i&32&&(t=!0,a.valves=r[5],Ke(()=>t=!1)),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function k0(l){let e,t,n,o;const s=[_0,p0],r=[];function i(a,c){return a[0]&&!a[3]?0:1}return e=i(l),t=r[e]=s[e](l),{c(){t.c(),n=Me()},l(a){t.l(a),n=Me()},m(a,c){r[e].m(a,c),B(a,n,c),o=!0},p(a,[c]){let u=e;e=i(a),e===u?r[e].p(a,c):(Te(),O(r[u],1,1,()=>{r[u]=null}),Ve(),t=r[e],t?t.p(a,c):(t=r[e]=s[e](a),t.c()),T(t,1),t.m(n.parentNode,n))},i(a){o||(T(t),o=!0)},o(a){O(t),o=!1},d(a){a&&p(n),r[e].d(a)}}}function E0(l,e,t){let n,o,s;se(l,fl,H=>t(6,n=H)),se(l,Ns,H=>t(7,o=H));const r=rn(),i=Nt("i18n");se(l,i,H=>t(8,s=H));let{show:a=!1}=e,c="tools",u="",f=!1,d=null,h={},_;const b=async()=>{_&&clearTimeout(_),_=setTimeout(()=>{g()},500)},v=async()=>{var H;if(t(3,f=!0),c==="tools"?(t(5,h=await Gc(localStorage.token,u)),t(4,d=await Xc(localStorage.token,u))):c==="functions"&&(t(5,h=await Su(localStorage.token,u)),t(4,d=await Du(localStorage.token,u))),d)for(const L in d.properties)((H=d.properties[L])==null?void 0:H.type)==="array"&&t(5,h[L]=(h[L]??[]).join(","),h);t(3,f=!1)},g=async()=>{var H;if(d){for(const L in d.properties)((H=d.properties[L])==null?void 0:H.type)==="array"&&t(5,h[L]=(h[L]??"").split(",").map(W=>W.trim()),h);if(c==="tools"){const L=await Zc(localStorage.token,u,h).catch(W=>(ht.error(`${W}`),null));L&&(ht.success(s.t("Valves updated")),t(5,h=L))}else if(c==="functions"){const L=await Cu(localStorage.token,u,h).catch(W=>(ht.error(`${W}`),null));L&&(ht.success(s.t("Valves updated")),t(5,h=L))}}},w=async()=>{t(3,f=!0),o===null&&Ns.set(await Iu(localStorage.token)),n===null&&fl.set(await is(localStorage.token)),t(3,f=!1)};function y(){c=Ms(this),t(1,c)}function E(){u=Ms(this),t(2,u),t(1,c)}const M=async()=>{await xe()};function S(H){h=H,t(5,h)}const V=()=>{b()},A=()=>{g(),r("save")};return l.$$set=H=>{"show"in H&&t(0,a=H.show)},l.$$.update=()=>{l.$$.dirty&2&&c&&t(2,u=""),l.$$.dirty&4&&u&&v(),l.$$.dirty&1&&a&&w()},[a,c,u,f,d,h,n,o,s,r,i,b,g,y,E,M,S,V,A]}class I0 extends Oe{constructor(e){super(),He(this,e,E0,k0,Le,{show:0})}}function Li(l,e,t){const n=l.slice();return n[14]=e[t],n[16]=t,n}function S0(l){let e,t=l[3].t("You do not have permission to access this feature.")+"",n;return{c(){e=N("div"),n=ke(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);n=ye(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-sm dark:text-gray-300 text-center py-2 px-10")},m(o,s){B(o,e,s),k(e,n)},p(o,s){s&8&&t!==(t=o[3].t("You do not have permission to access this feature.")+"")&&Ce(n,t)},i:Ie,o:Ie,d(o){o&&p(e)}}}function D0(l){let e,t,n,o,s,r,i,a,c,u,f,d,h,_=l[0].length>0&&Bi(l);function b(g){l[11](g)}let v={title:l[3].t("Valves"),buttonClassName:"w-full",$$slots:{content:[M0]},$$scope:{ctx:l}};return l[2]!==void 0&&(v.open=l[2]),n=new ho({props:v}),Pe.push(()=>Ge(n,"open",b)),a=new ho({props:{title:l[3].t("System Prompt"),open:!0,buttonClassName:"w-full",$$slots:{content:[T0]},$$scope:{ctx:l}}}),d=new ho({props:{title:l[3].t("Advanced Params"),open:!0,buttonClassName:"w-full",$$slots:{content:[V0]},$$scope:{ctx:l}}}),{c(){e=N("div"),_&&_.c(),t=Q(),te(n.$$.fragment),s=Q(),r=N("hr"),i=Q(),te(a.$$.fragment),c=Q(),u=N("hr"),f=Q(),te(d.$$.fragment),this.h()},l(g){e=z(g,"DIV",{class:!0});var w=D(e);_&&_.l(w),t=J(w),ne(n.$$.fragment,w),s=J(w),r=z(w,"HR",{class:!0}),i=J(w),ne(a.$$.fragment,w),c=J(w),u=z(w,"HR",{class:!0}),f=J(w),ne(d.$$.fragment,w),w.forEach(p),this.h()},h(){m(r,"class","my-2 border-gray-50 dark:border-gray-700/10"),m(u,"class","my-2 border-gray-50 dark:border-gray-700/10"),m(e,"class","dark:text-gray-200 text-sm font-primary py-0.5 px-0.5")},m(g,w){B(g,e,w),_&&_.m(e,null),k(e,t),ee(n,e,null),k(e,s),k(e,r),k(e,i),ee(a,e,null),k(e,c),k(e,u),k(e,f),ee(d,e,null),h=!0},p(g,w){g[0].length>0?_?(_.p(g,w),w&1&&T(_,1)):(_=Bi(g),_.c(),T(_,1),_.m(e,t)):_&&(Te(),O(_,1,1,()=>{_=null}),Ve());const y={};w&8&&(y.title=g[3].t("Valves")),w&131076&&(y.$$scope={dirty:w,ctx:g}),!o&&w&4&&(o=!0,y.open=g[2],Ke(()=>o=!1)),n.$set(y);const E={};w&8&&(E.title=g[3].t("System Prompt")),w&131082&&(E.$$scope={dirty:w,ctx:g}),a.$set(E);const M={};w&8&&(M.title=g[3].t("Advanced Params")),w&131090&&(M.$$scope={dirty:w,ctx:g}),d.$set(M)},i(g){h||(T(_),T(n.$$.fragment,g),T(a.$$.fragment,g),T(d.$$.fragment,g),h=!0)},o(g){O(_),O(n.$$.fragment,g),O(a.$$.fragment,g),O(d.$$.fragment,g),h=!1},d(g){g&&p(e),_&&_.d(),$(n),$(a),$(d)}}}function Bi(l){let e,t,n,o;return e=new ho({props:{title:l[3].t("Files"),open:!0,buttonClassName:"w-full",$$slots:{content:[C0]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment),t=Q(),n=N("hr"),this.h()},l(s){ne(e.$$.fragment,s),t=J(s),n=z(s,"HR",{class:!0}),this.h()},h(){m(n,"class","my-2 border-gray-50 dark:border-gray-700/10")},m(s,r){ee(e,s,r),B(s,t,r),B(s,n,r),o=!0},p(s,r){const i={};r&8&&(i.title=s[3].t("Files")),r&131073&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){o||(T(e.$$.fragment,s),o=!0)},o(s){O(e.$$.fragment,s),o=!1},d(s){s&&(p(t),p(n)),$(e,s)}}}function Ri(l){var s,r;let e,t;function n(){return l[9](l[16])}function o(){return l[10](l[14])}return e=new as({props:{className:"w-full",item:l[14],edit:!0,url:(s=l[14])!=null&&s.url?l[14].url:null,name:l[14].name,type:l[14].type,size:(r=l[14])==null?void 0:r.size,dismissible:!0}}),e.$on("dismiss",n),e.$on("click",o),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,a){ee(e,i,a),t=!0},p(i,a){var u,f;l=i;const c={};a&1&&(c.item=l[14]),a&1&&(c.url=(u=l[14])!=null&&u.url?l[14].url:null),a&1&&(c.name=l[14].name),a&1&&(c.type=l[14].type),a&1&&(c.size=(f=l[14])==null?void 0:f.size),e.$set(c)},i(i){t||(T(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){$(e,i)}}}function C0(l){let e,t,n=mt(l[0]),o=[];for(let r=0;r<n.length;r+=1)o[r]=Ri(Li(l,n,r));const s=r=>O(o[r],1,1,()=>{o[r]=null});return{c(){e=N("div");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=z(r,"DIV",{class:!0,slot:!0});var i=D(e);for(let a=0;a<o.length;a+=1)o[a].l(i);i.forEach(p),this.h()},h(){m(e,"class","flex flex-col gap-1 mt-1.5"),m(e,"slot","content")},m(r,i){B(r,e,i);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t=!0},p(r,i){if(i&1){n=mt(r[0]);let a;for(a=0;a<n.length;a+=1){const c=Li(r,n,a);o[a]?(o[a].p(c,i),T(o[a],1)):(o[a]=Ri(c),o[a].c(),T(o[a],1),o[a].m(e,null))}for(Te(),a=n.length;a<o.length;a+=1)s(a);Ve()}},i(r){if(!t){for(let i=0;i<n.length;i+=1)T(o[i]);t=!0}},o(r){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)O(o[i]);t=!1},d(r){r&&p(e),bn(o,r)}}}function M0(l){let e,t,n;return t=new I0({props:{show:l[2]}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0,slot:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","text-sm"),m(e,"slot","content")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p(o,s){const r={};s&4&&(r.show=o[2]),t.$set(r)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function T0(l){let e,t,n,o,s;return{c(){e=N("div"),t=N("textarea"),this.h()},l(r){e=z(r,"DIV",{class:!0,slot:!0});var i=D(e);t=z(i,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),D(t).forEach(p),i.forEach(p),this.h()},h(){m(t,"class","w-full text-xs py-1.5 bg-transparent outline-hidden resize-none"),m(t,"rows","4"),m(t,"placeholder",n=l[3].t("Enter system prompt")),m(e,"class",""),m(e,"slot","content")},m(r,i){B(r,e,i),k(e,t),kn(t,l[1].system),o||(s=De(t,"input",l[12]),o=!0)},p(r,i){i&8&&n!==(n=r[3].t("Enter system prompt"))&&m(t,"placeholder",n),i&2&&kn(t,r[1].system)},d(r){r&&p(e),o=!1,s()}}}function V0(l){var a;let e,t,n,o,s;function r(c){l[13](c)}let i={admin:((a=l[4])==null?void 0:a.role)==="admin"};return l[1]!==void 0&&(i.params=l[1]),n=new Eu({props:i}),Pe.push(()=>Ge(n,"params",r)),{c(){e=N("div"),t=N("div"),te(n.$$.fragment),this.h()},l(c){e=z(c,"DIV",{class:!0,slot:!0});var u=D(e);t=z(u,"DIV",{});var f=D(t);ne(n.$$.fragment,f),f.forEach(p),u.forEach(p),this.h()},h(){m(e,"class","text-sm mt-1.5"),m(e,"slot","content")},m(c,u){B(c,e,u),k(e,t),ee(n,t,null),s=!0},p(c,u){var d;const f={};u&16&&(f.admin=((d=c[4])==null?void 0:d.role)==="admin"),!o&&u&2&&(o=!0,f.params=c[1],Ke(()=>o=!1)),n.$set(f)},i(c){s||(T(n.$$.fragment,c),s=!0)},o(c){O(n.$$.fragment,c),s=!1},d(c){c&&p(e),$(n)}}}function z0(l){let e,t,n,o=l[3].t("Chat Controls")+"",s,r,i,a,c,u,f,d,h,_;a=new Po({props:{className:"size-3.5"}});const b=[D0,S0],v=[];function g(w,y){var E,M;return w[4].role==="admin"||(M=(E=w[4])==null?void 0:E.permissions.chat)!=null&&M.controls?0:1}return u=g(l),f=v[u]=b[u](l),{c(){e=N("div"),t=N("div"),n=N("div"),s=ke(o),r=Q(),i=N("button"),te(a.$$.fragment),c=Q(),f.c(),this.h()},l(w){e=z(w,"DIV",{class:!0});var y=D(e);t=z(y,"DIV",{class:!0});var E=D(t);n=z(E,"DIV",{class:!0});var M=D(n);s=ye(M,o),M.forEach(p),r=J(E),i=z(E,"BUTTON",{class:!0});var S=D(i);ne(a.$$.fragment,S),S.forEach(p),E.forEach(p),c=J(y),f.l(y),y.forEach(p),this.h()},h(){m(n,"class","text-lg font-medium self-center font-primary"),m(i,"class","self-center"),m(t,"class","flex items-center justify-between dark:text-gray-100 mb-2"),m(e,"class","dark:text-white")},m(w,y){B(w,e,y),k(e,t),k(t,n),k(n,s),k(t,r),k(t,i),ee(a,i,null),k(e,c),v[u].m(e,null),d=!0,h||(_=De(i,"click",l[8]),h=!0)},p(w,[y]){(!d||y&8)&&o!==(o=w[3].t("Chat Controls")+"")&&Ce(s,o);let E=u;u=g(w),u===E?v[u].p(w,y):(Te(),O(v[E],1,1,()=>{v[E]=null}),Ve(),f=v[u],f?f.p(w,y):(f=v[u]=b[u](w),f.c()),T(f,1),f.m(e,null))},i(w){d||(T(a.$$.fragment,w),T(f),d=!0)},o(w){O(a.$$.fragment,w),O(f),d=!1},d(w){w&&p(e),$(a),v[u].d(),h=!1,_()}}}function N0(l,e,t){let n,o;se(l,Yn,g=>t(4,o=g));const s=rn(),r=Nt("i18n");se(l,r,g=>t(3,n=g));let{models:i=[]}=e,{chatFiles:a=[]}=e,{params:c={}}=e,u=!1;const f=()=>{s("close")},d=g=>{a.splice(g,1),t(0,a)},h=g=>{console.log(g)};function _(g){u=g,t(2,u)}function b(){c.system=this.value,t(1,c)}function v(g){c=g,t(1,c)}return l.$$set=g=>{"models"in g&&t(7,i=g.models),"chatFiles"in g&&t(0,a=g.chatFiles),"params"in g&&t(1,c=g.params)},[a,c,u,n,o,s,r,i,f,d,h,_,b,v]}class ec extends Oe{constructor(e){super(),He(this,e,N0,z0,Le,{models:7,chatFiles:0,params:1})}}function Ui(l,e,t){const n=l.slice();return n[10]=e[t],n}function P0(l){let e;const t=l[4].default,n=Jt(t,l,l[8],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&256)&&Qt(n,t,o,o[8],e?$t(t,o[8],s,null):xt(o[8]),null)},i(o){e||(T(n,o),e=!0)},o(o){O(n,o),e=!1},d(o){n&&n.d(o)}}}function O0(l){var r;let e,t,n=(((r=l[10])==null?void 0:r.label)??"Camera")+"",o,s;return{c(){e=N("div"),t=N("div"),o=ke(n),s=Q(),this.h()},l(i){e=z(i,"DIV",{class:!0});var a=D(e);t=z(a,"DIV",{class:!0});var c=D(t);o=ye(c,n),c.forEach(p),a.forEach(p),s=J(i),this.h()},h(){m(t,"class","line-clamp-1"),m(e,"class","flex items-center")},m(i,a){B(i,e,a),k(e,t),k(t,o),B(i,s,a)},p(i,a){var c;a&2&&n!==(n=(((c=i[10])==null?void 0:c.label)??"Camera")+"")&&Ce(o,n)},d(i){i&&(p(e),p(s))}}}function Fi(l){let e,t;function n(){return l[5](l[10])}return e=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[O0]},$$scope:{ctx:l}}}),e.$on("click",n),{c(){te(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,s){ee(e,o,s),t=!0},p(o,s){l=o;const r={};s&258&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){O(e.$$.fragment,o),t=!1},d(o){$(e,o)}}}function H0(l){let e,t,n=mt(l[1]),o=[];for(let r=0;r<n.length;r+=1)o[r]=Fi(Ui(l,n,r));const s=r=>O(o[r],1,1,()=>{o[r]=null});return{c(){for(let r=0;r<o.length;r+=1)o[r].c();e=Me()},l(r){for(let i=0;i<o.length;i+=1)o[i].l(r);e=Me()},m(r,i){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(r,i);B(r,e,i),t=!0},p(r,i){if(i&10){n=mt(r[1]);let a;for(a=0;a<n.length;a+=1){const c=Ui(r,n,a);o[a]?(o[a].p(c,i),T(o[a],1)):(o[a]=Fi(c),o[a].c(),T(o[a],1),o[a].m(e.parentNode,e))}for(Te(),a=n.length;a<o.length;a+=1)s(a);Ve()}},i(r){if(!t){for(let i=0;i<n.length;i+=1)T(o[i]);t=!0}},o(r){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)O(o[i]);t=!1},d(r){r&&p(e),bn(o,r)}}}function A0(l){let e,t,n;return t=new zo({props:{class:"w-full max-w-[180px] rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-9999 bg-white dark:bg-gray-900 dark:text-white shadow-xs",sideOffset:6,side:"top",align:"start",transition:Jl,$$slots:{default:[H0]},$$scope:{ctx:l}}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p(o,s){const r={};s&258&&(r.$$scope={dirty:s,ctx:o}),t.$set(r)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function L0(l){let e,t,n;function o(r){l[6](r)}let s={$$slots:{content:[A0],default:[P0]},$$scope:{ctx:l}};return l[2]!==void 0&&(s.show=l[2]),e=new Vo({props:s}),Pe.push(()=>Ge(e,"show",o)),e.$on("change",l[7]),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,i){ee(e,r,i),n=!0},p(r,[i]){const a={};i&258&&(a.$$scope={dirty:i,ctx:r}),!t&&i&4&&(t=!0,a.show=r[2],Ke(()=>t=!1)),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function B0(l,e,t){let{$$slots:n={},$$scope:o}=e;Nt("i18n");const s=rn();let{onClose:r=()=>{}}=e,{devices:i}=e,a=!1;const c=d=>{s("change",d.deviceId)};function u(d){a=d,t(2,a)}const f=d=>{d.detail===!1&&r()};return l.$$set=d=>{"onClose"in d&&t(0,r=d.onClose),"devices"in d&&t(1,i=d.devices),"$$scope"in d&&t(8,o=d.$$scope)},[r,i,a,s,n,c,u,f,o]}class R0 extends Oe{constructor(e){super(),He(this,e,B0,L0,Le,{onClose:0,devices:1})}}function Wi(l){let e,t,n,o,s,r,i,a,c,u,f,d,h,_,b,v='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"></path></svg>',g,w,y,E=l[4]&&ji(l);function M(C,I){return C[4]?j0:Y0}let S=M(l),V=S(l);const A=[q0,Z0],H=[];function L(C,I){return C[4]?0:1}i=L(l),a=H[i]=A[i](l);function W(C,I){return C[1]?ep:C[2]?$0:x0}let j=W(l),U=j(l);return{c(){e=N("div"),E&&E.c(),t=Q(),n=N("div"),V.c(),o=Q(),s=N("div"),r=N("div"),a.c(),c=Q(),u=N("div"),f=N("button"),d=N("div"),U.c(),h=Q(),_=N("div"),b=N("button"),b.innerHTML=v,this.h()},l(C){e=z(C,"DIV",{class:!0});var I=D(e);E&&E.l(I),t=J(I),n=z(I,"DIV",{class:!0});var P=D(n);V.l(P),P.forEach(p),o=J(I),s=z(I,"DIV",{class:!0});var K=D(s);r=z(K,"DIV",{});var X=D(r);a.l(X),X.forEach(p),c=J(K),u=z(K,"DIV",{});var F=D(u);f=z(F,"BUTTON",{type:!0});var Z=D(f);d=z(Z,"DIV",{class:!0});var ae=D(d);U.l(ae),ae.forEach(p),Z.forEach(p),F.forEach(p),h=J(K),_=z(K,"DIV",{});var x=D(_);b=z(x,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),at(b)!=="svelte-1k5eavb"&&(b.innerHTML=v),x.forEach(p),K.forEach(p),I.forEach(p),this.h()},h(){m(n,"class","flex justify-center items-center flex-1 h-full w-full max-h-full"),m(d,"class","line-clamp-1 text-sm font-medium"),m(f,"type","button"),m(b,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(b,"type","button"),m(s,"class","flex justify-between items-center pb-2 w-full"),m(e,"class","max-w-lg w-full h-full max-h-[100dvh] flex flex-col justify-between p-3 md:p-6")},m(C,I){B(C,e,I),E&&E.m(e,null),k(e,t),k(e,n),V.m(n,null),k(e,o),k(e,s),k(s,r),H[i].m(r,null),k(s,c),k(s,u),k(u,f),k(f,d),U.m(d,null),k(s,h),k(s,_),k(_,b),g=!0,w||(y=[De(f,"click",l[31]),De(b,"click",l[32])],w=!0)},p(C,I){C[4]?E?E.p(C,I):(E=ji(C),E.c(),E.m(e,t)):E&&(E.d(1),E=null),S===(S=M(C))&&V?V.p(C,I):(V.d(1),V=S(C),V&&(V.c(),V.m(n,null)));let P=i;i=L(C),i===P?H[i].p(C,I):(Te(),O(H[P],1,1,()=>{H[P]=null}),Ve(),a=H[i],a?a.p(C,I):(a=H[i]=A[i](C),a.c()),T(a,1),a.m(r,null)),j===(j=W(C))&&U?U.p(C,I):(U.d(1),U=j(C),U&&(U.c(),U.m(d,null)))},i(C){g||(T(a),g=!0)},o(C){O(a),g=!1},d(C){C&&p(e),E&&E.d(),V.d(),H[i].d(),U.d(),w=!1,an(y)}}}function ji(l){let e,t,n;function o(i,a){return i[3]?W0:i[1]||i[2]?F0:U0}let s=o(l),r=s(l);return{c(){e=N("button"),r.c(),this.h()},l(i){e=z(i,"BUTTON",{type:!0,class:!0});var a=D(e);r.l(a),a.forEach(p),this.h()},h(){m(e,"type","button"),m(e,"class","flex justify-center items-center w-full h-20 min-h-20")},m(i,a){B(i,e,a),r.m(e,null),t||(n=De(e,"click",l[26]),t=!0)},p(i,a){s===(s=o(i))&&r?r.p(i,a):(r.d(1),r=s(i),r&&(r.c(),r.m(e,null)))},d(i){i&&p(e),r.d(),t=!1,n()}}}function U0(l){let e,t,n;return{c(){e=N("div"),this.h()},l(o){e=z(o,"DIV",{class:!0,style:!0}),D(e).forEach(p),this.h()},h(){var o,s,r,i,a,c,u,f,d;m(e,"class",t=(l[6]*100>4?" size-[4.5rem]":l[6]*100>2?" size-16":l[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((r=(s=(o=l[0])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:r.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white"),m(e,"style",n=(((c=(a=(i=l[0])==null?void 0:i.info)==null?void 0:a.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(d=(f=(u=l[0])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:d.profile_image_url}');`:"")},m(o,s){B(o,e,s)},p(o,s){var r,i,a,c,u,f,d,h,_;s[0]&65&&t!==(t=(o[6]*100>4?" size-[4.5rem]":o[6]*100>2?" size-16":o[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((a=(i=(r=o[0])==null?void 0:r.info)==null?void 0:i.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white")&&m(e,"class",t),s[0]&1&&n!==(n=(((f=(u=(c=o[0])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(_=(h=(d=o[0])==null?void 0:d.info)==null?void 0:h.meta)==null?void 0:_.profile_image_url}');`:"")&&m(e,"style",n)},d(o){o&&p(e)}}}function F0(l){let e,t,n,o,s,r;return{c(){e=ve("svg"),t=ve("style"),n=ke(`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),o=ve("circle"),s=ve("circle"),r=ve("circle"),this.h()},l(i){e=be(i,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=D(e);t=be(a,"style",{});var c=D(t);n=ye(c,`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),c.forEach(p),o=be(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),D(o).forEach(p),s=be(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),D(s).forEach(p),r=be(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),D(r).forEach(p),a.forEach(p),this.h()},h(){m(o,"class","spinner_qM83"),m(o,"cx","4"),m(o,"cy","12"),m(o,"r","3"),m(s,"class","spinner_qM83 spinner_oXPr"),m(s,"cx","12"),m(s,"cy","12"),m(s,"r","3"),m(r,"class","spinner_qM83 spinner_ZTLf"),m(r,"cx","20"),m(r,"cy","12"),m(r,"r","3"),m(e,"class","size-12 text-gray-900 dark:text-gray-400"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(i,a){B(i,e,a),k(e,t),k(t,n),k(e,o),k(e,s),k(e,r)},p:Ie,d(i){i&&p(e)}}}function W0(l){let e,t;return{c(){e=N("div"),t=ke(l[3]),this.h()},l(n){e=z(n,"DIV",{class:!0,style:!0});var o=D(e);t=ye(o,l[3]),o.forEach(p),this.h()},h(){m(e,"class","transition-all rounded-full"),Qe(e,"font-size",(l[6]*100>4?"4.5":l[6]*100>2?"4.25":l[6]*100>1?"3.75":"3.5")+"rem"),Qe(e,"width","100%"),Qe(e,"text-align","center")},m(n,o){B(n,e,o),k(e,t)},p(n,o){o[0]&8&&Ce(t,n[3]),o[0]&64&&Qe(e,"font-size",(n[6]*100>4?"4.5":n[6]*100>2?"4.25":n[6]*100>1?"3.75":"3.5")+"rem")},d(n){n&&p(e)}}}function j0(l){let e,t,n,o,s,r,i,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-6"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"></path></svg>',c,u;return{c(){e=N("div"),t=N("video"),n=Q(),o=N("canvas"),s=Q(),r=N("div"),i=N("button"),i.innerHTML=a,this.h()},l(f){e=z(f,"DIV",{class:!0});var d=D(e);t=z(d,"VIDEO",{id:!0,class:!0}),D(t).forEach(p),n=J(d),o=z(d,"CANVAS",{id:!0,style:!0}),D(o).forEach(p),s=J(d),r=z(d,"DIV",{class:!0});var h=D(r);i=z(h,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),at(i)!=="svelte-16ul42n"&&(i.innerHTML=a),h.forEach(p),d.forEach(p),this.h()},h(){m(t,"id","camera-feed"),t.autoplay=!0,m(t,"class","rounded-2xl h-full min-w-full object-cover object-center"),t.playsInline=!0,m(o,"id","camera-canvas"),Qe(o,"display","none"),m(i,"type","button"),m(i,"class","p-1.5 text-white cursor-pointer backdrop-blur-xl bg-black/10 rounded-full"),m(r,"class","absolute top-4 md:top-8 left-4"),m(e,"class","relative flex video-container w-full max-h-full pt-2 pb-4 md:py-6 px-2 h-full")},m(f,d){B(f,e,d),k(e,t),k(e,n),k(e,o),k(e,s),k(e,r),k(r,i),c||(u=De(i,"click",l[28]),c=!0)},p:Ie,d(f){f&&p(e),c=!1,u()}}}function Y0(l){let e,t,n;function o(i,a){return i[3]?X0:i[1]||i[2]?G0:K0}let s=o(l),r=s(l);return{c(){e=N("button"),r.c(),this.h()},l(i){e=z(i,"BUTTON",{type:!0});var a=D(e);r.l(a),a.forEach(p),this.h()},h(){m(e,"type","button")},m(i,a){B(i,e,a),r.m(e,null),t||(n=De(e,"click",l[27]),t=!0)},p(i,a){s===(s=o(i))&&r?r.p(i,a):(r.d(1),r=s(i),r&&(r.c(),r.m(e,null)))},d(i){i&&p(e),r.d(),t=!1,n()}}}function K0(l){let e,t,n;return{c(){e=N("div"),this.h()},l(o){e=z(o,"DIV",{class:!0,style:!0}),D(e).forEach(p),this.h()},h(){var o,s,r,i,a,c,u,f,d;m(e,"class",t=(l[6]*100>4?" size-52":l[6]*100>2?"size-48":l[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((r=(s=(o=l[0])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:r.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")),m(e,"style",n=(((c=(a=(i=l[0])==null?void 0:i.info)==null?void 0:a.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(d=(f=(u=l[0])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:d.profile_image_url}');`:"")},m(o,s){B(o,e,s)},p(o,s){var r,i,a,c,u,f,d,h,_;s[0]&65&&t!==(t=(o[6]*100>4?" size-52":o[6]*100>2?"size-48":o[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((a=(i=(r=o[0])==null?void 0:r.info)==null?void 0:i.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white"))&&m(e,"class",t),s[0]&1&&n!==(n=(((f=(u=(c=o[0])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(_=(h=(d=o[0])==null?void 0:d.info)==null?void 0:h.meta)==null?void 0:_.profile_image_url}');`:"")&&m(e,"style",n)},d(o){o&&p(e)}}}function G0(l){let e,t,n,o,s,r;return{c(){e=ve("svg"),t=ve("style"),n=ke(`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),o=ve("circle"),s=ve("circle"),r=ve("circle"),this.h()},l(i){e=be(i,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=D(e);t=be(a,"style",{});var c=D(t);n=ye(c,`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),c.forEach(p),o=be(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),D(o).forEach(p),s=be(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),D(s).forEach(p),r=be(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),D(r).forEach(p),a.forEach(p),this.h()},h(){m(o,"class","spinner_qM83"),m(o,"cx","4"),m(o,"cy","12"),m(o,"r","3"),m(s,"class","spinner_qM83 spinner_oXPr"),m(s,"cx","12"),m(s,"cy","12"),m(s,"r","3"),m(r,"class","spinner_qM83 spinner_ZTLf"),m(r,"cx","20"),m(r,"cy","12"),m(r,"r","3"),m(e,"class","size-44 text-gray-900 dark:text-gray-400"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(i,a){B(i,e,a),k(e,t),k(t,n),k(e,o),k(e,s),k(e,r)},p:Ie,d(i){i&&p(e)}}}function X0(l){let e,t;return{c(){e=N("div"),t=ke(l[3]),this.h()},l(n){e=z(n,"DIV",{class:!0,style:!0});var o=D(e);t=ye(o,l[3]),o.forEach(p),this.h()},h(){m(e,"class","transition-all rounded-full"),Qe(e,"font-size",(l[6]*100>4?"13":l[6]*100>2?"12":l[6]*100>1?"11.5":"11")+"rem"),Qe(e,"width","100%"),Qe(e,"text-align","center")},m(n,o){B(n,e,o),k(e,t)},p(n,o){o[0]&8&&Ce(t,n[3]),o[0]&64&&Qe(e,"font-size",(n[6]*100>4?"13":n[6]*100>2?"12":n[6]*100>1?"11.5":"11")+"rem")},d(n){n&&p(e)}}}function Z0(l){let e,t;return e=new Zt({props:{content:l[11].t("Camera"),$$slots:{default:[J0]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&2048&&(s.content=n[11].t("Camera")),o[2]&16&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function q0(l){let e,t;return e=new R0({props:{devices:l[8],$$slots:{default:[Q0]},$$scope:{ctx:l}}}),e.$on("change",l[29]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&256&&(s.devices=n[8]),o[2]&16&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function J0(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"></path></svg>',n,o;return{c(){e=N("button"),e.innerHTML=t,this.h()},l(s){e=z(s,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),at(e)!=="svelte-1n1gs9g"&&(e.innerHTML=t),this.h()},h(){m(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(e,"type","button")},m(s,r){B(s,e,r),n||(o=De(e,"click",l[30]),n=!0)},p:Ie,d(s){s&&p(e),n=!1,o()}}}function Q0(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"></path></svg>';return{c(){e=N("button"),e.innerHTML=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),at(e)!=="svelte-5e0pue"&&(e.innerHTML=t),this.h()},h(){m(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(e,"type","button")},m(n,o){B(n,e,o)},p:Ie,d(n){n&&p(e)}}}function x0(l){let e=l[11].t("Listening...")+"",t;return{c(){t=ke(e)},l(n){t=ye(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Listening...")+"")&&Ce(t,e)},d(n){n&&p(t)}}}function $0(l){let e=l[11].t("Tap to interrupt")+"",t;return{c(){t=ke(e)},l(n){t=ye(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Tap to interrupt")+"")&&Ce(t,e)},d(n){n&&p(t)}}}function ep(l){let e=l[11].t("Thinking...")+"",t;return{c(){t=ke(e)},l(n){t=ye(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Thinking...")+"")&&Ce(t,e)},d(n){n&&p(t)}}}function tp(l){let e,t,n=l[10]&&Wi(l);return{c(){n&&n.c(),e=Me()},l(o){n&&n.l(o),e=Me()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[10]?n?(n.p(o,s),s[0]&1024&&T(n,1)):(n=Wi(o),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(Te(),O(n,1,1,()=>{n=null}),Ve())},i(o){t||(T(n),t=!0)},o(o){O(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function np(l,e,t){let n,o,s,r,i,a;se(l,ml,ce=>t(45,n=ce)),se(l,Mo,ce=>t(46,o=ce)),se(l,Un,ce=>t(47,s=ce)),se(l,pc,ce=>t(48,r=ce)),se(l,Dn,ce=>t(10,i=ce));const c=rn(),u=Nt("i18n");se(l,u,ce=>t(11,a=ce));let{eventTarget:f}=e,{submitPrompt:d}=e,{stopResponse:h}=e,{files:_}=e,{chatId:b}=e,{modelId:v}=e,g=null,w=null,y=!1,E=!1,M=!1,S=null,V=!1,A=null,H=!1,L=0,W=!1,j,U=null,C=[],I=[],P=null;const K=async()=>{const ce=await navigator.mediaDevices.enumerateDevices();t(8,I=ce.filter(Ue=>Ue.kind==="videoinput")),navigator.mediaDevices.getDisplayMedia&&t(8,I=[...I,{deviceId:"screen",label:"Screen Share"}]),console.log(I),P===null&&I.length>0&&t(9,P=I[0].deviceId)},X=async()=>{if(await K(),A===null){t(4,V=!0),await xe();try{await F()}catch(ce){console.error("Error accessing webcam: ",ce)}}},F=async()=>{const ce=document.getElementById("camera-feed");ce&&(P==="screen"?t(5,A=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1})):t(5,A=await navigator.mediaDevices.getUserMedia({video:{deviceId:P?{exact:P}:void 0}})),A&&(await K(),ce.srcObject=A,await ce.play()))},Z=async()=>{A&&A.getTracks().forEach(Ue=>Ue.stop()),t(5,A=null)},ae=()=>{const ce=document.getElementById("camera-feed"),Ue=document.getElementById("camera-canvas");if(!Ue)return;const Ae=Ue.getContext("2d");Ue.width=ce.videoWidth,Ue.height=ce.videoHeight,Ae.drawImage(ce,0,0,ce.videoWidth,ce.videoHeight);const Ze=Ue.toDataURL("image/png");return console.log(Ze),Ze},x=async()=>{await Z(),t(4,V=!1)},G=-55,oe=async ce=>{await xe();const Ue=Tc(ce,"recording.wav"),Ae=await zu(localStorage.token,Ue).catch(Ze=>(ht.error(`${Ze}`),null));if(Ae&&(console.log(Ae.text),Ae.text!=="")){const Ze=await d(Ae.text,{_raw:!0});console.log(Ze)}},de=async(ce=!0)=>{if(i){console.log("%c%s","color: red; font-size: 20px;","ðŸš¨ stopRecordingCallback ðŸš¨");const Ue=C.slice(0);if(C=[],j=!1,ce&&Se(),E){if(t(1,y=!0),t(3,S=null),A){const Ze=ae();t(20,_=[{type:"image",url:Ze}])}const Ae=new Blob(Ue,{type:"audio/wav"});await oe(Ae),E=!1,t(1,y=!1)}}else C=[],j=!1,U&&U.getTracks().forEach(Ae=>Ae.stop()),t(7,U=null)},Se=async()=>{i&&(U||t(7,U=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})),j=new MediaRecorder(U),j.onstart=()=>{console.log("Recording started"),C=[],me(U)},j.ondataavailable=ce=>{W&&C.push(ce.data)},j.onstop=ce=>{console.log("Recording stopped",U,ce),de()},j.start())},ie=async()=>{try{j&&j.stop()}catch(ce){console.log("Error stopping audio stream:",ce)}U&&(U.getAudioTracks().forEach(function(ce){ce.stop()}),t(7,U=null))},ze=ce=>{let Ue=0;for(let Ae=0;Ae<ce.length;Ae++){const Ze=(ce[Ae]-128)/128;Ue+=Ze*Ze}return Math.sqrt(Ue/ce.length)},me=ce=>{const Ue=new AudioContext,Ae=Ue.createMediaStreamSource(ce),Ze=Ue.createAnalyser();Ze.minDecibels=G,Ae.connect(Ze);const yt=Ze.frequencyBinCount,vt=new Uint8Array(yt),St=new Uint8Array(Ze.fftSize);let Dt=Date.now();W=!1,console.log("ðŸ”Š Sound detection started",Dt,W),(()=>{const Rt=()=>{if(!j||!i)return;if(M&&!((s==null?void 0:s.voiceInterruption)??!1)?(Ze.maxDecibels=0,Ze.minDecibels=-1):(Ze.minDecibels=G,Ze.maxDecibels=-30),Ze.getByteTimeDomainData(St),Ze.getByteFrequencyData(vt),t(6,L=ze(St)),vt.some(Yt=>Yt>0)&&(console.log("%c%s","color: red; font-size: 20px;","ðŸ”Š Sound detected"),W||(W=!0,Re()),Dt=Date.now()),W&&Date.now()-Dt>2e3&&(E=!0,j)){console.log("%c%s","color: red; font-size: 20px;","ðŸ”‡ Silence detected"),j.stop();return}window.requestAnimationFrame(Rt)};window.requestAnimationFrame(Rt)})()};let ue={},qe=null,je=null;const ge=ce=>i?new Promise(Ue=>{let Ae=[];const Ze=setInterval(async()=>{var yt,vt,St;if(Ae=await speechSynthesis.getVoices(),Ae.length>0){clearInterval(Ze);const Dt=((yt=Ae==null?void 0:Ae.filter(cn=>{var Rt,Ut,Yt,Kt;return cn.voiceURI===(((Ut=(Rt=s==null?void 0:s.audio)==null?void 0:Rt.tts)==null?void 0:Ut.voice)??((Kt=(Yt=o==null?void 0:o.audio)==null?void 0:Yt.tts)==null?void 0:Kt.voice))}))==null?void 0:yt.at(0))??void 0;je=new SpeechSynthesisUtterance(ce),je.rate=((St=(vt=s.audio)==null?void 0:vt.tts)==null?void 0:St.playbackRate)??1,Dt&&(je.voice=Dt),speechSynthesis.speak(je),je.onend=async cn=>{await new Promise(Rt=>setTimeout(Rt,200)),Ue(cn)}}},100)}):Promise.resolve(),re=ce=>i?new Promise(Ue=>{var Ze,yt;const Ae=document.getElementById("audioElement");Ae&&(Ae.src=ce.src,Ae.muted=!0,Ae.playbackRate=((yt=(Ze=s.audio)==null?void 0:Ze.tts)==null?void 0:yt.playbackRate)??1,Ae.play().then(()=>{Ae.muted=!1}).catch(vt=>{console.error(vt)}),Ae.onended=async vt=>{await new Promise(St=>setTimeout(St,100)),Ue(vt)})}):Promise.resolve(),Re=async()=>{t(2,M=!1),H&&h(),je&&(speechSynthesis.cancel(),je=null);const ce=document.getElementById("audioElement");ce&&(ce.muted=!0,ce.pause(),ce.currentTime=0)};let rt=new AbortController;const tt=new Map,et=new Map,$e=async ce=>{var Ue,Ae,Ze,yt,vt,St,Dt,cn,Rt,Ut,Yt,Kt,en,un;if(!tt.has(ce))try{if((s==null?void 0:s.showEmojiInCall)??!1){const zt=await Wc(localStorage.token,v,ce,b);zt&&et.set(ce,zt)}if(((Ae=(Ue=s.audio)==null?void 0:Ue.tts)==null?void 0:Ae.engine)==="browser-kokoro"){const zt=await r.generate({text:ce,voice:((yt=(Ze=s==null?void 0:s.audio)==null?void 0:Ze.tts)==null?void 0:yt.voice)??((St=(vt=o==null?void 0:o.audio)==null?void 0:vt.tts)==null?void 0:St.voice)}).catch(kt=>{console.error(kt),ht.error(`${kt}`)});zt&&tt.set(ce,new Audio(zt))}else if(o.audio.tts.engine!==""){const zt=await Vu(localStorage.token,((cn=(Dt=s==null?void 0:s.audio)==null?void 0:Dt.tts)==null?void 0:cn.defaultVoice)===o.audio.tts.voice?((Ut=(Rt=s==null?void 0:s.audio)==null?void 0:Rt.tts)==null?void 0:Ut.voice)??((Kt=(Yt=o==null?void 0:o.audio)==null?void 0:Yt.tts)==null?void 0:Kt.voice):(un=(en=o==null?void 0:o.audio)==null?void 0:en.tts)==null?void 0:un.voice,ce).catch(kt=>(console.error(kt),null));if(zt){const kt=await zt.blob(),vn=URL.createObjectURL(kt);tt.set(ce,new Audio(vn))}}else tt.set(ce,!0)}catch(zt){console.error("Error synthesizing speech:",zt)}return tt.get(ce)};let gt={};const jt=async(ce,Ue)=>{for(;!Ue.aborted;)if(gt[ce]&&gt[ce].length>0){const Ae=gt[ce].shift();if(tt.has(Ae))if(((s==null?void 0:s.showEmojiInCall)??!1)&&et.has(Ae)?t(3,S=et.get(Ae)):t(3,S=null),o.audio.tts.engine!=="")try{console.log("%c%s","color: red; font-size: 20px;",`Playing audio for content: ${Ae}`);const Ze=tt.get(Ae);await re(Ze),console.log(`Played audio for content: ${Ae}`),await new Promise(yt=>setTimeout(yt,200))}catch(Ze){console.error("Error playing audio:",Ze)}else await ge(Ae);else gt[ce].unshift(Ae),console.log(`Audio for "${Ae}" not yet available in the cache, re-queued...`),await new Promise(Ze=>setTimeout(Ze,200))}else if(ue[ce]&&gt[ce]&&gt[ce].length===0){t(2,M=!1);break}else await new Promise(Ae=>setTimeout(Ae,200));console.log(`Audio monitoring and playing stopped for message ID ${ce}`)},Pt=async ce=>{const{id:Ue}=ce.detail;H=!0,qe!==Ue&&(console.log(`Received chat start event for message ID ${Ue}`),qe=Ue,rt&&rt.abort(),rt=new AbortController,t(2,M=!0),jt(Ue,rt.signal))},_t=async ce=>{const{id:Ue,content:Ae}=ce.detail;if(qe===Ue){console.log(`Received chat event for message ID ${Ue}: ${Ae}`);try{gt[Ue]===void 0?gt[Ue]=[Ae]:gt[Ue].push(Ae),console.log(Ae),$e(Ae)}catch(Ze){console.error("Failed to fetch or play audio:",Ze)}}},Ot=async ce=>{const{id:Ue,content:Ae}=ce.detail;ue[Ue]=!0,H=!1};hn(async()=>{const ce=async()=>{try{g=await navigator.wakeLock.request("screen")}catch(Ue){console.log(Ue)}g&&g.addEventListener("release",()=>{console.log("Wake Lock released")})};return"wakeLock"in navigator&&(await ce(),document.addEventListener("visibilitychange",async()=>{g!==null&&document.visibilityState==="visible"&&await ce()})),t(0,w=n.find(Ue=>Ue.id===v)),Se(),f.addEventListener("chat:start",Pt),f.addEventListener("chat",_t),f.addEventListener("chat:finish",Ot),async()=>{await Re(),ie(),f.removeEventListener("chat:start",Pt),f.removeEventListener("chat",_t),f.removeEventListener("chat:finish",Ot),rt.abort(),await xe(),await Re(),await de(!1),await x()}}),xn(async()=>{await Re(),await de(!1),await x(),await ie(),f.removeEventListener("chat:start",Pt),f.removeEventListener("chat",_t),f.removeEventListener("chat:finish",Ot),rt.abort(),await xe(),await Re()});const Ht=()=>{M&&Re()},At=()=>{M&&Re()},Vt=()=>{x()},Lt=async ce=>{console.log(ce.detail),t(9,P=ce.detail),await Z(),await F()},le=async()=>{await navigator.mediaDevices.getUserMedia({video:!0}),X()},Bt=()=>{M&&Re()},ut=async()=>{await ie(),await Z(),console.log(U),console.log(A),Dn.set(!1),c("close")};return l.$$set=ce=>{"eventTarget"in ce&&t(21,f=ce.eventTarget),"submitPrompt"in ce&&t(22,d=ce.submitPrompt),"stopResponse"in ce&&t(23,h=ce.stopResponse),"files"in ce&&t(20,_=ce.files),"chatId"in ce&&t(24,b=ce.chatId),"modelId"in ce&&t(25,v=ce.modelId)},[w,y,M,S,V,A,L,U,I,P,i,a,c,u,X,F,Z,x,ie,Re,_,f,d,h,b,v,Ht,At,Vt,Lt,le,Bt,ut]}class tc extends Oe{constructor(e){super(),He(this,e,np,tp,Le,{eventTarget:21,submitPrompt:22,stopResponse:23,files:20,chatId:24,modelId:25},null,[-1,-1,-1])}}function lp(l){var E,M,S,V,A,H,L,W,j,U;let e,t,n,o,s,r,i=(((M=(E=l[0])==null?void 0:E.model)==null?void 0:M.name)??((V=(S=l[0])==null?void 0:S.message)==null?void 0:V.model)??"Assistant")+"",a,c,u,f,d,h,_,b,v;t=new wa({props:{src:((W=(L=(H=(A=l[0])==null?void 0:A.model)==null?void 0:H.info)==null?void 0:L.meta)==null?void 0:W.profile_image_url)??"",className:"size-5 -translate-y-[1px]"}}),f=new Tu({props:{className:"size-3 "+((U=(j=l[0])==null?void 0:j.message)!=null&&U.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" ",strokeWidth:"2.5"}});function g(C,I){var P,K;return(K=(P=C[0])==null?void 0:P.message)!=null&&K.error?rp:sp}let w=g(l),y=w(l);return{c(){e=N("div"),te(t.$$.fragment),n=Q(),o=N("div"),s=N("div"),r=N("div"),a=ke(i),c=Q(),u=N("button"),te(f.$$.fragment),h=Q(),y.c(),this.h()},l(C){e=z(C,"DIV",{class:!0});var I=D(e);ne(t.$$.fragment,I),n=J(I),o=z(I,"DIV",{class:!0});var P=D(o);s=z(P,"DIV",{class:!0});var K=D(s);r=z(K,"DIV",{class:!0});var X=D(r);a=ye(X,i),X.forEach(p),c=J(K),u=z(K,"BUTTON",{class:!0});var F=D(u);ne(f.$$.fragment,F),F.forEach(p),K.forEach(p),h=J(P),y.l(P),P.forEach(p),I.forEach(p),this.h()},h(){var C,I;m(r,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),m(u,"class",d=(I=(C=l[0])==null?void 0:C.message)!=null&&I.favorite?"":"invisible group-hover:visible"),m(s,"class","flex justify-between items-center"),m(o,"class","ml-2"),m(e,"class","flex w-full")},m(C,I){B(C,e,I),ee(t,e,null),k(e,n),k(e,o),k(o,s),k(s,r),k(r,a),k(s,c),k(s,u),ee(f,u,null),k(o,h),y.m(o,null),_=!0,b||(v=De(u,"click",l[1]),b=!0)},p(C,I){var X,F,Z,ae,x,G,oe,de,Se,ie,ze,me;const P={};I&1&&(P.src=((ae=(Z=(F=(X=C[0])==null?void 0:X.model)==null?void 0:F.info)==null?void 0:Z.meta)==null?void 0:ae.profile_image_url)??""),t.$set(P),(!_||I&1)&&i!==(i=(((G=(x=C[0])==null?void 0:x.model)==null?void 0:G.name)??((de=(oe=C[0])==null?void 0:oe.message)==null?void 0:de.model)??"Assistant")+"")&&Ce(a,i);const K={};I&1&&(K.className="size-3 "+((ie=(Se=C[0])==null?void 0:Se.message)!=null&&ie.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" "),f.$set(K),(!_||I&1&&d!==(d=(me=(ze=C[0])==null?void 0:ze.message)!=null&&me.favorite?"":"invisible group-hover:visible"))&&m(u,"class",d),w===(w=g(C))&&y?y.p(C,I):(y.d(1),y=w(C),y&&(y.c(),y.m(o,null)))},i(C){_||(T(t.$$.fragment,C),T(f.$$.fragment,C),_=!0)},o(C){O(t.$$.fragment,C),O(f.$$.fragment,C),_=!1},d(C){C&&p(e),$(t),$(f),y.d(),b=!1,v()}}}function op(l){var _,b,v;let e,t,n,o,s,r,i=(((b=(_=l[0])==null?void 0:_.user)==null?void 0:b.name)??"User")+"",a,c,u;t=new wa({props:{src:((v=l[0].user)==null?void 0:v.profile_image_url)??"/user.png",className:"size-5 -translate-y-[1px]"}});function f(g,w){var y,E;return(E=(y=g[0])==null?void 0:y.message)!=null&&E.error?ap:ip}let d=f(l),h=d(l);return{c(){e=N("div"),te(t.$$.fragment),n=Q(),o=N("div"),s=N("div"),r=N("div"),a=ke(i),c=Q(),h.c(),this.h()},l(g){e=z(g,"DIV",{class:!0});var w=D(e);ne(t.$$.fragment,w),n=J(w),o=z(w,"DIV",{class:!0});var y=D(o);s=z(y,"DIV",{class:!0});var E=D(s);r=z(E,"DIV",{class:!0});var M=D(r);a=ye(M,i),M.forEach(p),E.forEach(p),c=J(y),h.l(y),y.forEach(p),w.forEach(p),this.h()},h(){m(r,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),m(s,"class","flex justify-between items-center"),m(o,"class","ml-2"),m(e,"class","flex w-full")},m(g,w){B(g,e,w),ee(t,e,null),k(e,n),k(e,o),k(o,s),k(s,r),k(r,a),k(o,c),h.m(o,null),u=!0},p(g,w){var E,M,S;const y={};w&1&&(y.src=((E=g[0].user)==null?void 0:E.profile_image_url)??"/user.png"),t.$set(y),(!u||w&1)&&i!==(i=(((S=(M=g[0])==null?void 0:M.user)==null?void 0:S.name)??"User")+"")&&Ce(a,i),d===(d=f(g))&&h?h.p(g,w):(h.d(1),h=d(g),h&&(h.c(),h.m(o,null)))},i(g){u||(T(t.$$.fragment,g),u=!0)},o(g){O(t.$$.fragment,g),u=!1},d(g){g&&p(e),$(t),h.d()}}}function sp(l){let e,t=l[0].message.content+"",n;return{c(){e=N("div"),n=ke(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);n=ye(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),k(e,n)},p(o,s){s&1&&t!==(t=o[0].message.content+"")&&Ce(n,t)},d(o){o&&p(e)}}}function rp(l){let e,t=l[0].message.error.content+"",n;return{c(){e=N("div"),n=ke(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);n=ye(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),k(e,n)},p(o,s){s&1&&t!==(t=o[0].message.error.content+"")&&Ce(n,t)},d(o){o&&p(e)}}}function ip(l){let e,t=l[0].message.content+"",n;return{c(){e=N("div"),n=ke(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);n=ye(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),k(e,n)},p(o,s){s&1&&t!==(t=o[0].message.content+"")&&Ce(n,t)},d(o){o&&p(e)}}}function ap(l){let e,t=l[0].message.error.content+"",n;return{c(){e=N("div"),n=ke(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);n=ye(s,t),s.forEach(p),this.h()},h(){m(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),k(e,n)},p(o,s){s&1&&t!==(t=o[0].message.error.content+"")&&Ce(n,t)},d(o){o&&p(e)}}}function cp(l){let e,t,n,o;const s=[op,lp],r=[];function i(a,c){return a[0].message.role==="user"?0:1}return e=i(l),t=r[e]=s[e](l),{c(){t.c(),n=Me()},l(a){t.l(a),n=Me()},m(a,c){r[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=i(a),e===u?r[e].p(a,c):(Te(),O(r[u],1,1,()=>{r[u]=null}),Ve(),t=r[e],t?t.p(a,c):(t=r[e]=s[e](a),t.c()),T(t,1),t.m(n.parentNode,n))},i(a){o||(T(t),o=!0)},o(a){O(t),o=!1},d(a){a&&p(n),r[e].d(a)}}}function up(l){var a,c;let e,t,n,o,s,r,i;return t=new Zt({props:{content:(c=(a=l[0])==null?void 0:a.message)!=null&&c.error?l[0].message.error.content:l[0].message.content,class:"w-full",allowHTML:!1,$$slots:{default:[cp]},$$scope:{ctx:l}}}),o=new Vl({props:{type:"target",position:lt.Top,class:"w-2 rounded-full dark:bg-gray-900"}}),r=new Vl({props:{type:"source",position:lt.Bottom,class:"w-2 rounded-full dark:bg-gray-900"}}),{c(){e=N("div"),te(t.$$.fragment),n=Q(),te(o.$$.fragment),s=Q(),te(r.$$.fragment),this.h()},l(u){e=z(u,"DIV",{class:!0});var f=D(e);ne(t.$$.fragment,f),n=J(f),ne(o.$$.fragment,f),s=J(f),ne(r.$$.fragment,f),f.forEach(p),this.h()},h(){m(e,"class","px-4 py-3 shadow-md rounded-xl dark:bg-black bg-white border dark:border-gray-900 w-60 h-20 group")},m(u,f){B(u,e,f),ee(t,e,null),k(e,n),ee(o,e,null),k(e,s),ee(r,e,null),i=!0},p(u,[f]){var h,_;const d={};f&1&&(d.content=(_=(h=u[0])==null?void 0:h.message)!=null&&_.error?u[0].message.error.content:u[0].message.content),f&5&&(d.$$scope={dirty:f,ctx:u}),t.$set(d)},i(u){i||(T(t.$$.fragment,u),T(o.$$.fragment,u),T(r.$$.fragment,u),i=!0)},o(u){O(t.$$.fragment,u),O(o.$$.fragment,u),O(r.$$.fragment,u),i=!1},d(u){u&&p(e),$(t),$(o),$(r)}}}function fp(l,e,t){let{data:n}=e;const o=()=>{var s;t(0,n.message.favorite=!(((s=n==null?void 0:n.message)==null?void 0:s.favorite)??!1),n)};return l.$$set=s=>{"data"in s&&t(0,n=s.data)},[n,o]}class dp extends Oe{constructor(e){super(),He(this,e,fp,up,Le,{data:0})}}function hp(l){let e,t,n,o;return e=new t0({props:{showLock:!1}}),n=new h0({props:{variant:Wn.Dots}}),{c(){te(e.$$.fragment),t=Q(),te(n.$$.fragment)},l(s){ne(e.$$.fragment,s),t=J(s),ne(n.$$.fragment,s)},m(s,r){ee(e,s,r),B(s,t,r),ee(n,s,r),o=!0},p:Ie,i(s){o||(T(e.$$.fragment,s),T(n.$$.fragment,s),o=!0)},o(s){O(e.$$.fragment,s),O(n.$$.fragment,s),o=!1},d(s){s&&p(t),$(e,s),$(n,s)}}}function mp(l){let e,t;return e=new Cg({props:{nodes:l[0],nodeTypes:l[1],edges:l[2],fitView:!0,minZoom:.001,colorMode:l[3].includes("dark")||l[3]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",nodesConnectable:!1,nodesDraggable:!1,oninit:l[5],$$slots:{default:[hp]},$$scope:{ctx:l}}}),e.$on("nodeclick",l[6]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,[o]){const s={};o&1&&(s.nodes=n[0]),o&2&&(s.nodeTypes=n[1]),o&4&&(s.edges=n[2]),o&8&&(s.colorMode=n[3].includes("dark")||n[3]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),o&128&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function gp(l,e,t){let n;se(l,_c,u=>t(3,n=u));const o=rn();let{nodes:s}=e,{nodeTypes:r}=e,{edges:i}=e;const a=()=>{console.log("Flow initialized")},c=u=>o("nodeclick",u.detail);return l.$$set=u=>{"nodes"in u&&t(0,s=u.nodes),"nodeTypes"in u&&t(1,r=u.nodeTypes),"edges"in u&&t(2,i=u.edges)},[s,r,i,n,o,a,c]}class pp extends Oe{constructor(e){super(),He(this,e,gp,mp,Le,{nodes:0,nodeTypes:1,edges:2})}}function _p(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=D(e);t=be(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),k(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:Ie,o:Ie,d(n){n&&p(e)}}}function bp(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class vp extends Oe{constructor(e){super(),He(this,e,bp,_p,Le,{className:0,strokeWidth:1})}}function Yi(l){let e,t;return e=new pp({props:{nodes:l[6],nodeTypes:l[8],edges:l[7]}}),e.$on("nodeclick",l[11]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p:Ie,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function wp(l){let e,t,n,o,s=l[1].t("Chat Overview")+"",r,i,a,c,u,f,d,h;c=new Po({props:{className:"size-3.5"}});let _=l[2].length>0&&Yi(l);return{c(){e=N("div"),t=N("div"),n=N("div"),o=N("div"),r=ke(s),i=Q(),a=N("button"),te(c.$$.fragment),u=Q(),_&&_.c(),this.h()},l(b){e=z(b,"DIV",{class:!0});var v=D(e);t=z(v,"DIV",{class:!0});var g=D(t);n=z(g,"DIV",{class:!0});var w=D(n);o=z(w,"DIV",{class:!0});var y=D(o);r=ye(y,s),y.forEach(p),w.forEach(p),i=J(g),a=z(g,"BUTTON",{class:!0});var E=D(a);ne(c.$$.fragment,E),E.forEach(p),g.forEach(p),u=J(v),_&&_.l(v),v.forEach(p),this.h()},h(){m(o,"class","text-lg font-medium self-center font-primary"),m(n,"class","flex items-center gap-2.5"),m(a,"class","self-center p-0.5"),m(t,"class","absolute z-50 w-full flex justify-between dark:text-gray-100 px-4 py-3.5"),m(e,"class","w-full h-full relative")},m(b,v){B(b,e,v),k(e,t),k(t,n),k(n,o),k(o,r),k(t,i),k(t,a),ee(c,a,null),k(e,u),_&&_.m(e,null),f=!0,d||(h=De(a,"click",l[10]),d=!0)},p(b,[v]){(!f||v&2)&&s!==(s=b[1].t("Chat Overview")+"")&&Ce(r,s),b[2].length>0?_?(_.p(b,v),v&4&&T(_,1)):(_=Yi(b),_.c(),T(_,1),_.m(e,null)):_&&(Te(),O(_,1,1,()=>{_=null}),Ve())},i(b){f||(T(c.$$.fragment,b),T(_),f=!0)},o(b){O(c.$$.fragment,b),O(_),f=!1},d(b){b&&p(e),$(c),_&&_.d(),d=!1,h()}}}function yp(l,e,t){let n,o,s,r;se(l,ml,V=>t(12,n=V)),se(l,Yn,V=>t(13,o=V));const i=rn(),a=Nt("i18n");se(l,a,V=>t(1,s=V));const{width:c,height:u}=Wt(),{fitView:f}=m0(),d=g0();let{history:h}=e,_=null;const b=Je([]);se(l,b,V=>t(2,r=V));const v=Je([]),g={custom:dp},w=async()=>{_===null?await f({nodes:[{id:h.currentId}]}):await f({nodes:[{id:_}]}),t(0,_=null)},y=async()=>{const V=[],A=[];let W=new Map,j={};Object.keys(h.messages).forEach(U=>{var P;const C=h.messages[U],I=C.parentId?(((P=W.get(C.parentId))==null?void 0:P.level)??-1)+1:0;j[I]||(j[I]=0),W.set(U,{id:C.id,level:I,position:j[I]++})}),Object.keys(h.messages).forEach(U=>{const C=W.get(U),I=C.position*250,P=C.level*150,K=I;V.push({id:C.id,type:"custom",data:{user:o,message:h.messages[U],model:n.find(F=>F.id===h.messages[U].model)},position:{x:K,y:P}});const X=h.messages[U].parentId;X&&A.push({id:X+"-"+C.id,source:X,target:C.id,selectable:!1,class:" dark:fill-gray-300 fill-gray-300",type:"smoothstep",animated:h.currentId===U||E(U,h.currentId)})}),await v.set([...A]),await b.set([...V])},E=(V,A)=>{const H=h.messages[V];return H.childrenIds&&H.childrenIds.some(L=>L===A||E(L,A))};hn(()=>{y(),d.subscribe(async V=>{V&&(await xe(),await f({nodes:[{id:h.currentId}]}))}),c.subscribe(V=>{V&&f({nodes:[{id:h.currentId}]})}),u.subscribe(V=>{V&&f({nodes:[{id:h.currentId}]})})}),xn(()=>{console.log("Overview destroyed"),b.set([]),v.set([])});const M=()=>{i("close"),Jn.set(!1)},S=V=>{console.log(V.detail.node.data),i("nodeclick",V.detail),t(0,_=V.detail.node.data.message.id),f({nodes:[{id:_}]})};return l.$$set=V=>{"history"in V&&t(9,h=V.history)},l.$$.update=()=>{l.$$.dirty&512&&h&&y(),l.$$.dirty&512&&h&&h.currentId&&w()},[_,s,r,i,a,f,b,v,g,h,M,S]}class nc extends Oe{constructor(e){super(),He(this,e,yp,wp,Le,{history:9})}}function kp(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=D(e);t=be(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),k(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:Ie,o:Ie,d(n){n&&p(e)}}}function Ep(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Ip extends Oe{constructor(e){super(),He(this,e,Ep,kp,Le,{className:0,strokeWidth:1})}}function Ki(l){let e;return{c(){e=N("div"),this.h()},l(t){e=z(t,"DIV",{class:!0}),D(e).forEach(p),this.h()},h(){m(e,"class","absolute top-0 left-0 right-0 bottom-0 z-10")},m(t,n){B(t,e,n)},d(t){t&&p(e)}}}function Sp(l){let e,t=l[5].t("No HTML, CSS, or JavaScript content found.")+"",n;return{c(){e=N("div"),n=ke(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);n=ye(s,t),s.forEach(p),this.h()},h(){m(e,"class","m-auto font-medium text-xs text-gray-900 dark:text-white")},m(o,s){B(o,e,s),k(e,n)},p(o,s){s&32&&t!==(t=o[5].t("No HTML, CSS, or JavaScript content found.")+"")&&Ce(n,t)},i:Ie,o:Ie,d(o){o&&p(e)}}}function Dp(l){let e,t,n,o;const s=[Mp,Cp],r=[];function i(a,c){return a[1][a[2]].type==="iframe"?0:a[1][a[2]].type==="svg"?1:-1}return~(t=i(l))&&(n=r[t]=s[t](l)),{c(){e=N("div"),n&&n.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=D(e);n&&n.l(c),c.forEach(p),this.h()},h(){m(e,"class","max-w-full w-full h-full")},m(a,c){B(a,e,c),~t&&r[t].m(e,null),o=!0},p(a,c){let u=t;t=i(a),t===u?~t&&r[t].p(a,c):(n&&(Te(),O(r[u],1,1,()=>{r[u]=null}),Ve()),~t?(n=r[t],n?n.p(a,c):(n=r[t]=s[t](a),n.c()),T(n,1),n.m(e,null)):n=null)},i(a){o||(T(n),o=!0)},o(a){O(n),o=!1},d(a){a&&p(e),~t&&r[t].d()}}}function Cp(l){let e,t;return e=new iu({props:{className:" w-full h-full max-h-full overflow-hidden",svg:l[1][l[2]].content}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&6&&(s.svg=n[1][n[2]].content),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Mp(l){let e,t,n,o;return{c(){e=N("iframe"),this.h()},l(s){e=z(s,"IFRAME",{title:!0,srcdoc:!0,class:!0,sandbox:!0}),D(e).forEach(p),this.h()},h(){m(e,"title","Content"),m(e,"srcdoc",t=l[1][l[2]].content),m(e,"class","w-full border-0 h-full rounded-none"),m(e,"sandbox","allow-scripts allow-forms allow-same-origin")},m(s,r){B(s,e,r),l[14](e),n||(o=De(e,"load",l[9]),n=!0)},p(s,r){r&6&&t!==(t=s[1][s[2]].content)&&m(e,"srcdoc",t)},i:Ie,o:Ie,d(s){s&&p(e),l[14](null),n=!1,o()}}}function Gi(l){let e,t,n,o,s,r,i,a,c,u=l[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:l[2]+1,totalVersions:l[1].length})+"",f,d,h,_,b,v,g,w,y,E=(l[3]?l[5].t("Copied"):l[5].t("Copy"))+"",M,S,V,A,H,L=l[1][l[2]].type==="iframe"&&Xi(l);return{c(){e=N("div"),t=N("div"),n=N("div"),o=N("button"),s=ve("svg"),r=ve("path"),a=Q(),c=N("div"),f=ke(u),d=Q(),h=N("button"),_=ve("svg"),b=ve("path"),g=Q(),w=N("div"),y=N("button"),M=ke(E),S=Q(),L&&L.c(),this.h()},l(W){e=z(W,"DIV",{class:!0});var j=D(e);t=z(j,"DIV",{class:!0});var U=D(t);n=z(U,"DIV",{class:!0,dir:!0});var C=D(n);o=z(C,"BUTTON",{class:!0});var I=D(o);s=be(I,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var P=D(s);r=be(P,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(r).forEach(p),P.forEach(p),I.forEach(p),a=J(C),c=z(C,"DIV",{class:!0});var K=D(c);f=ye(K,u),K.forEach(p),d=J(C),h=z(C,"BUTTON",{class:!0});var X=D(h);_=be(X,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var F=D(_);b=be(F,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(b).forEach(p),F.forEach(p),X.forEach(p),C.forEach(p),U.forEach(p),g=J(j),w=z(j,"DIV",{class:!0});var Z=D(w);y=z(Z,"BUTTON",{class:!0});var ae=D(y);M=ye(ae,E),ae.forEach(p),S=J(Z),L&&L.l(Z),Z.forEach(p),j.forEach(p),this.h()},h(){m(r,"stroke-linecap","round"),m(r,"stroke-linejoin","round"),m(r,"d","M15.75 19.5 8.25 12l7.5-7.5"),m(s,"xmlns","http://www.w3.org/2000/svg"),m(s,"fill","none"),m(s,"viewBox","0 0 24 24"),m(s,"stroke","currentColor"),m(s,"stroke-width","2.5"),m(s,"class","size-3.5"),m(o,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),o.disabled=i=l[1].length<=1,m(c,"class","text-xs self-center dark:text-gray-100 min-w-fit"),m(b,"stroke-linecap","round"),m(b,"stroke-linejoin","round"),m(b,"d","m8.25 4.5 7.5 7.5-7.5 7.5"),m(_,"xmlns","http://www.w3.org/2000/svg"),m(_,"fill","none"),m(_,"viewBox","0 0 24 24"),m(_,"stroke","currentColor"),m(_,"stroke-width","2.5"),m(_,"class","size-3.5"),m(h,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),h.disabled=v=l[1].length<=1,m(n,"class","flex items-center gap-0.5 self-center min-w-fit"),m(n,"dir","ltr"),m(t,"class","flex items-center space-x-2"),m(y,"class","copy-code-button bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md px-1.5 py-0.5"),m(w,"class","flex items-center gap-1"),m(e,"class","flex justify-between items-center p-2.5 font-primar text-gray-900 dark:text-white")},m(W,j){B(W,e,j),k(e,t),k(t,n),k(n,o),k(o,s),k(s,r),k(n,a),k(n,c),k(c,f),k(n,d),k(n,h),k(h,_),k(_,b),k(e,g),k(e,w),k(w,y),k(y,M),k(w,S),L&&L.m(w,null),V=!0,A||(H=[De(o,"click",l[15]),De(h,"click",l[16]),De(y,"click",l[17])],A=!0)},p(W,j){(!V||j&2&&i!==(i=W[1].length<=1))&&(o.disabled=i),(!V||j&38)&&u!==(u=W[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:W[2]+1,totalVersions:W[1].length})+"")&&Ce(f,u),(!V||j&2&&v!==(v=W[1].length<=1))&&(h.disabled=v),(!V||j&40)&&E!==(E=(W[3]?W[5].t("Copied"):W[5].t("Copy"))+"")&&Ce(M,E),W[1][W[2]].type==="iframe"?L?(L.p(W,j),j&6&&T(L,1)):(L=Xi(W),L.c(),T(L,1),L.m(w,null)):L&&(Te(),O(L,1,1,()=>{L=null}),Ve())},i(W){V||(T(L),V=!0)},o(W){O(L),V=!1},d(W){W&&p(e),L&&L.d(),A=!1,an(H)}}}function Xi(l){let e,t;return e=new Zt({props:{content:l[5].t("Open in full screen"),$$slots:{default:[Tp]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&32&&(s.content=n[5].t("Open in full screen")),o&1048576&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Tp(l){let e,t,n,o,s;return t=new Ip({props:{className:"size-3.5"}}),{c(){e=N("button"),te(t.$$.fragment),this.h()},l(r){e=z(r,"BUTTON",{class:!0});var i=D(e);ne(t.$$.fragment,i),i.forEach(p),this.h()},h(){m(e,"class","bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md p-0.5")},m(r,i){B(r,e,i),ee(t,e,null),n=!0,o||(s=De(e,"click",l[10]),o=!0)},p:Ie,i(r){n||(T(t.$$.fragment,r),n=!0)},o(r){O(t.$$.fragment,r),n=!1},d(r){r&&p(e),$(t),o=!1,s()}}}function Vp(l){let e,t,n,o,s,r,i,a,c,u,f,d,h,_,b,v,g,w,y,E=l[0]&&Ki();r=new vp({props:{className:"size-3.5  text-gray-900 dark:text-white"}}),u=new Po({props:{className:"size-3.5 text-gray-900 dark:text-white"}});const M=[Dp,Sp],S=[];function V(H,L){return H[1].length>0?0:1}_=V(l),b=S[_]=M[_](l);let A=l[1].length>0&&Gi(l);return{c(){e=N("div"),t=N("div"),E&&E.c(),n=Q(),o=N("div"),s=N("button"),te(r.$$.fragment),i=Q(),a=N("div"),c=N("button"),te(u.$$.fragment),f=Q(),d=N("div"),h=N("div"),b.c(),v=Q(),A&&A.c(),this.h()},l(H){e=z(H,"DIV",{class:!0});var L=D(e);t=z(L,"DIV",{class:!0});var W=D(t);E&&E.l(W),n=J(W),o=z(W,"DIV",{class:!0});var j=D(o);s=z(j,"BUTTON",{class:!0});var U=D(s);ne(r.$$.fragment,U),U.forEach(p),j.forEach(p),i=J(W),a=z(W,"DIV",{class:!0});var C=D(a);c=z(C,"BUTTON",{class:!0});var I=D(c);ne(u.$$.fragment,I),I.forEach(p),C.forEach(p),f=J(W),d=z(W,"DIV",{class:!0});var P=D(d);h=z(P,"DIV",{class:!0});var K=D(h);b.l(K),K.forEach(p),P.forEach(p),W.forEach(p),v=J(L),A&&A.l(L),L.forEach(p),this.h()},h(){m(s,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),m(o,"class","absolute pointer-events-none z-50 w-full flex items-center justify-start p-4"),m(c,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),m(a,"class","absolute pointer-events-none z-50 w-full flex items-center justify-end p-4"),m(h,"class","h-full flex flex-col"),m(d,"class","flex-1 w-full h-full"),m(t,"class","w-full h-full flex-1 relative"),m(e,"class","w-full h-full relative flex flex-col bg-gray-50 dark:bg-gray-850")},m(H,L){B(H,e,L),k(e,t),E&&E.m(t,null),k(t,n),k(t,o),k(o,s),ee(r,s,null),k(t,i),k(t,a),k(a,c),ee(u,c,null),k(t,f),k(t,d),k(d,h),S[_].m(h,null),k(e,v),A&&A.m(e,null),g=!0,w||(y=[De(s,"click",l[12]),De(c,"click",l[13])],w=!0)},p(H,[L]){H[0]?E||(E=Ki(),E.c(),E.m(t,n)):E&&(E.d(1),E=null);let W=_;_=V(H),_===W?S[_].p(H,L):(Te(),O(S[W],1,1,()=>{S[W]=null}),Ve(),b=S[_],b?b.p(H,L):(b=S[_]=M[_](H),b.c()),T(b,1),b.m(h,null)),H[1].length>0?A?(A.p(H,L),L&2&&T(A,1)):(A=Gi(H),A.c(),T(A,1),A.m(e,null)):A&&(Te(),O(A,1,1,()=>{A=null}),Ve())},i(H){g||(T(r.$$.fragment,H),T(u.$$.fragment,H),T(b),T(A),g=!0)},o(H){O(r.$$.fragment,H),O(u.$$.fragment,H),O(b),O(A),g=!1},d(H){H&&p(e),E&&E.d(),$(r),$(u),S[_].d(),A&&A.d(),w=!1,an(y)}}}function zp(l,e,t){let n;const o=Nt("i18n");se(l,o,V=>t(5,n=V));const s=rn();let{overlay:r=!1}=e,{history:i}=e,a=[],c=[],u=0,f=!1,d;const h=()=>{t(1,c=[]),a.forEach(V=>{if((V==null?void 0:V.role)!=="user"&&(V!=null&&V.content)){const A=V.content.match(/```[\s\S]*?```/g);let H=[];A&&A.forEach(P=>{const K=P.split(`
`)[0].replace("```","").trim().toLowerCase(),X=P.replace(/```[\s\S]*?\n/,"").replace(/```$/,"");H.push({lang:K,code:X})});let L="",W="",j="";H.forEach(P=>{const{lang:K,code:X}=P;K==="html"?L+=X+`
`:K==="css"?W+=X+`
`:(K==="javascript"||K==="js")&&(j+=X+`
`)});const U=V.content.match(/<html>[\s\S]*?<\/html>/gi),C=V.content.match(/<style>[\s\S]*?<\/style>/gi),I=V.content.match(/<script>[\s\S]*?<\/script>/gi);if(U&&U.forEach(P=>{const K=P.replace(/<\/?html>/gi,"");L+=K+`
`}),C&&C.forEach(P=>{const K=P.replace(/<\/?style>/gi,"");W+=K+`
`}),I&&I.forEach(P=>{const K=P.replace(/<\/?script>/gi,"");j+=K+`
`}),L||W||j){const P=`
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
							<style>
								body {
									background-color: white; /* Ensure the iframe has a white background */
								}

								${W}
							</style>
                        </head>
                        <body>
                            ${L}

							<script>
                            	${j}
							<\/script>
                        </body>
                        </html>
                    `;t(1,c=[...c,{type:"iframe",content:P}])}else for(const P of H)(P.lang==="svg"||P.lang==="xml"&&P.code.includes("<svg"))&&t(1,c=[...c,{type:"svg",content:P.code}])}}),c.length===0&&(qt.set(!1),Hn.set(!1)),t(2,u=c?c.length-1:0)};function _(V){console.log(u),t(2,u=V==="prev"?Math.max(u-1,0):Math.min(u+1,c.length-1)),console.log(u)}const b=()=>{d.contentWindow.addEventListener("click",function(V){const A=V.target.closest("a");if(A&&A.href){V.preventDefault();const H=new URL(A.href,d.baseURI);H.origin===window.location.origin?d.contentWindow.history.pushState(null,"",H.pathname+H.search+H.hash):console.log("External navigation blocked:",H.href)}},!0),d.contentWindow.addEventListener("mouseenter",function(V){V.preventDefault(),d.contentWindow.addEventListener("dragstart",A=>{A.preventDefault()})})},v=()=>{d.requestFullscreen?d.requestFullscreen():d.webkitRequestFullscreen?d.webkitRequestFullscreen():d.msRequestFullscreen&&d.msRequestFullscreen()};hn(()=>{});const g=()=>{Hn.set(!1)},w=()=>{s("close"),qt.set(!1),Hn.set(!1)};function y(V){Pe[V?"unshift":"push"](()=>{d=V,t(4,d)})}const E=()=>_("prev"),M=()=>_("next"),S=()=>{_a(c[u].content),t(3,f=!0),setTimeout(()=>{t(3,f=!1)},2e3)};return l.$$set=V=>{"overlay"in V&&t(0,r=V.overlay),"history"in V&&t(11,i=V.history)},l.$$.update=()=>{l.$$.dirty&2048&&(i?(a=_n(i,i.currentId),h()):(a=[],h()))},[r,c,u,f,d,n,o,s,_,b,v,i,g,w,y,E,M,S]}class lc extends Oe{constructor(e){super(),He(this,e,zp,Vp,Le,{overlay:0,history:11})}}function Np(l){let e,t,n,o,s=l[16]&&Zi(l);function r(a){l[37](a)}let i={defaultSize:0,onResize:l[35],onCollapse:l[36],collapsible:!0,class:"pt-8",$$slots:{default:[Rp]},$$scope:{ctx:l}};return l[4]!==void 0&&(i.pane=l[4]),t=new da({props:i}),Pe.push(()=>Ge(t,"pane",r)),{c(){s&&s.c(),e=Q(),te(t.$$.fragment)},l(a){s&&s.l(a),e=J(a),ne(t.$$.fragment,a)},m(a,c){s&&s.m(a,c),B(a,e,c),ee(t,a,c),o=!0},p(a,c){a[16]?s?c[0]&65536&&T(s,1):(s=Zi(a),s.c(),T(s,1),s.m(e.parentNode,e)):s&&(Te(),O(s,1,1,()=>{s=null}),Ve());const u={};c[0]&81936&&(u.onResize=a[35]),c[0]&503791|c[1]&4096&&(u.$$scope={dirty:c,ctx:a}),!n&&c[0]&16&&(n=!0,u.pane=a[4],Ke(()=>n=!1)),t.$set(u)},i(a){o||(T(s),T(t.$$.fragment,a),o=!0)},o(a){O(s),O(t.$$.fragment,a),o=!1},d(a){a&&p(e),s&&s.d(a),$(t,a)}}}function Pp(l){let e,t,n=l[16]&&Ji(l);return{c(){n&&n.c(),e=Me()},l(o){n&&n.l(o),e=Me()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[16]?n?(n.p(o,s),s[0]&65536&&T(n,1)):(n=Ji(o),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(Te(),O(n,1,1,()=>{n=null}),Ve())},i(o){t||(T(n),t=!0)},o(o){O(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function Zi(l){let e,t;return e=new fc({props:{class:"relative flex w-2 items-center justify-center bg-background group",$$slots:{default:[Op]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Op(l){let e,t,n;return t=new Pu({props:{className:"size-4 invisible group-hover:visible"}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","z-10 flex h-7 w-5 items-center justify-center rounded-xs")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p:Ie,i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function qi(l){let e,t,n,o,s,r;const i=[Bp,Lp,Ap,Hp],a=[];function c(u,f){return u[15]?0:u[18]?1:u[17]?2:3}return n=c(l),o=a[n]=i[n](l),{c(){e=N("div"),t=N("div"),o.c(),this.h()},l(u){e=z(u,"DIV",{class:!0});var f=D(e);t=z(f,"DIV",{class:!0});var d=D(t);o.l(d),d.forEach(p),f.forEach(p),this.h()},h(){m(t,"class",s="w-full "+((l[17]||l[18])&&!l[15]?" ":"px-4 py-4 bg-white dark:shadow-lg dark:bg-gray-850  border border-gray-100 dark:border-gray-850")+" rounded-xl z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"),m(e,"class","pr-4 pb-8 flex max-h-full min-h-full")},m(u,f){B(u,e,f),k(e,t),a[n].m(t,null),r=!0},p(u,f){let d=n;n=c(u),n===d?a[n].p(u,f):(Te(),O(a[d],1,1,()=>{a[d]=null}),Ve(),o=a[n],o?o.p(u,f):(o=a[n]=i[n](u),o.c()),T(o,1),o.m(t,null)),(!r||f[0]&425984&&s!==(s="w-full "+((u[17]||u[18])&&!u[15]?" ":"px-4 py-4 bg-white dark:shadow-lg dark:bg-gray-850  border border-gray-100 dark:border-gray-850")+" rounded-xl z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"))&&m(t,"class",s)},i(u){r||(T(o),r=!0)},o(u){O(o),r=!1},d(u){u&&p(e),a[n].d()}}}function Hp(l){let e,t,n,o;function s(a){l[32](a)}function r(a){l[33](a)}let i={models:l[5]};return l[1]!==void 0&&(i.chatFiles=l[1]),l[2]!==void 0&&(i.params=l[2]),e=new ec({props:i}),Pe.push(()=>Ge(e,"chatFiles",s)),Pe.push(()=>Ge(e,"params",r)),e.$on("close",l[34]),{c(){te(e.$$.fragment)},l(a){ne(e.$$.fragment,a)},m(a,c){ee(e,a,c),o=!0},p(a,c){const u={};c[0]&32&&(u.models=a[5]),!t&&c[0]&2&&(t=!0,u.chatFiles=a[1],Ke(()=>t=!1)),!n&&c[0]&4&&(n=!0,u.params=a[2],Ke(()=>n=!1)),e.$set(u)},i(a){o||(T(e.$$.fragment,a),o=!0)},o(a){O(e.$$.fragment,a),o=!1},d(a){$(e,a)}}}function Ap(l){let e,t;return e=new nc({props:{history:l[0]}}),e.$on("nodeclick",l[30]),e.$on("close",l[31]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Lp(l){let e,t;return e=new lc({props:{history:l[0],overlay:l[13]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),o[0]&8192&&(s.overlay=n[13]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Bp(l){let e,t,n,o;function s(i){l[28](i)}let r={submitPrompt:l[8],stopResponse:l[9],modelId:l[11],chatId:l[6],eventTarget:l[7]};return l[3]!==void 0&&(r.files=l[3]),t=new tc({props:r}),Pe.push(()=>Ge(t,"files",s)),t.$on("close",l[29]),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0});var a=D(e);ne(t.$$.fragment,a),a.forEach(p),this.h()},h(){m(e,"class","w-full h-full flex justify-center")},m(i,a){B(i,e,a),ee(t,e,null),o=!0},p(i,a){const c={};a[0]&256&&(c.submitPrompt=i[8]),a[0]&512&&(c.stopResponse=i[9]),a[0]&2048&&(c.modelId=i[11]),a[0]&64&&(c.chatId=i[6]),a[0]&128&&(c.eventTarget=i[7]),!n&&a[0]&8&&(n=!0,c.files=i[3],Ke(()=>n=!1)),t.$set(c)},i(i){o||(T(t.$$.fragment,i),o=!0)},o(i){O(t.$$.fragment,i),o=!1},d(i){i&&p(e),$(t)}}}function Rp(l){let e,t,n=l[16]&&qi(l);return{c(){n&&n.c(),e=Me()},l(o){n&&n.l(o),e=Me()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[16]?n?(n.p(o,s),s[0]&65536&&T(n,1)):(n=qi(o),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(Te(),O(n,1,1,()=>{n=null}),Ve())},i(o){t||(T(n),t=!0)},o(o){O(n),t=!1},d(o){o&&p(e),n&&n.d(o)}}}function Ji(l){let e,t;return e=new Nu({props:{show:l[16],$$slots:{default:[Yp]},$$scope:{ctx:l}}}),e.$on("close",l[27]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&65536&&(s.show=n[16]),o[0]&430063|o[1]&4096&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Up(l){let e,t,n,o;function s(a){l[24](a)}function r(a){l[25](a)}let i={models:l[5]};return l[1]!==void 0&&(i.chatFiles=l[1]),l[2]!==void 0&&(i.params=l[2]),e=new ec({props:i}),Pe.push(()=>Ge(e,"chatFiles",s)),Pe.push(()=>Ge(e,"params",r)),e.$on("close",l[26]),{c(){te(e.$$.fragment)},l(a){ne(e.$$.fragment,a)},m(a,c){ee(e,a,c),o=!0},p(a,c){const u={};c[0]&32&&(u.models=a[5]),!t&&c[0]&2&&(t=!0,u.chatFiles=a[1],Ke(()=>t=!1)),!n&&c[0]&4&&(n=!0,u.params=a[2],Ke(()=>n=!1)),e.$set(u)},i(a){o||(T(e.$$.fragment,a),o=!0)},o(a){O(e.$$.fragment,a),o=!1},d(a){$(e,a)}}}function Fp(l){let e,t;return e=new nc({props:{history:l[0]}}),e.$on("nodeclick",l[22]),e.$on("close",l[23]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Wp(l){let e,t;return e=new lc({props:{history:l[0]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function jp(l){let e,t,n,o;function s(i){l[20](i)}let r={submitPrompt:l[8],stopResponse:l[9],modelId:l[11],chatId:l[6],eventTarget:l[7]};return l[3]!==void 0&&(r.files=l[3]),t=new tc({props:r}),Pe.push(()=>Ge(t,"files",s)),t.$on("close",l[21]),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0});var a=D(e);ne(t.$$.fragment,a),a.forEach(p),this.h()},h(){m(e,"class","h-full max-h-[100dvh] bg-white text-gray-700 dark:bg-black dark:text-gray-300 flex justify-center")},m(i,a){B(i,e,a),ee(t,e,null),o=!0},p(i,a){const c={};a[0]&256&&(c.submitPrompt=i[8]),a[0]&512&&(c.stopResponse=i[9]),a[0]&2048&&(c.modelId=i[11]),a[0]&64&&(c.chatId=i[6]),a[0]&128&&(c.eventTarget=i[7]),!n&&a[0]&8&&(n=!0,c.files=i[3],Ke(()=>n=!1)),t.$set(c)},i(i){o||(T(t.$$.fragment,i),o=!0)},o(i){O(t.$$.fragment,i),o=!1},d(i){i&&p(e),$(t)}}}function Yp(l){let e,t,n,o,s;const r=[jp,Wp,Fp,Up],i=[];function a(c,u){return c[15]?0:c[18]?1:c[17]?2:3}return t=a(l),n=i[t]=r[t](l),{c(){e=N("div"),n.c(),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=D(e);n.l(u),u.forEach(p),this.h()},h(){m(e,"class",o=(l[15]||l[17]||l[18]?" h-screen  w-full":"px-6 py-4")+" h-full")},m(c,u){B(c,e,u),i[t].m(e,null),s=!0},p(c,u){let f=t;t=a(c),t===f?i[t].p(c,u):(Te(),O(i[f],1,1,()=>{i[f]=null}),Ve(),n=i[t],n?n.p(c,u):(n=i[t]=r[t](c),n.c()),T(n,1),n.m(e,null)),(!s||u[0]&425984&&o!==(o=(c[15]||c[17]||c[18]?" h-screen  w-full":"px-6 py-4")+" h-full"))&&m(e,"class",o)},i(c){s||(T(n),s=!0)},o(c){O(n),s=!1},d(c){c&&p(e),i[t].d()}}}function Kp(l){let e,t,n,o;const s=[Pp,Np],r=[];function i(a,c){return a[12]?1:0}return e=i(l),t=r[e]=s[e](l),{c(){t.c(),n=Me()},l(a){t.l(a),n=Me()},m(a,c){r[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=i(a),e===u?r[e].p(a,c):(Te(),O(r[u],1,1,()=>{r[u]=null}),Ve(),t=r[e],t?t.p(a,c):(t=r[e]=s[e](a),t.c()),T(t,1),t.m(n.parentNode,n))},i(a){o||(T(t),o=!0)},o(a){O(t),o=!1},d(a){a&&p(n),r[e].d(a)}}}function Gp(l){let e,t;return e=new Vg({props:{$$slots:{default:[Kp]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&524287|o[1]&4096&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Xp(l,e,t){let n,o,s,r;se(l,Dn,ue=>t(15,n=ue)),se(l,qt,ue=>t(16,o=ue)),se(l,Jn,ue=>t(17,s=ue)),se(l,Hn,ue=>t(18,r=ue));let{history:i}=e,{models:a=[]}=e,{chatId:c=null}=e,{chatFiles:u=[]}=e,{params:f={}}=e,{eventTarget:d}=e,{submitPrompt:h}=e,{stopResponse:_}=e,{showMessage:b}=e,{files:v}=e,{modelId:g}=e,{pane:w}=e,y,E=!1,M=!1,S=0;const V=()=>{parseInt(localStorage==null?void 0:localStorage.chatControlsSize)?w.resize(parseInt(localStorage==null?void 0:localStorage.chatControlsSize)):w.resize(S)},A=async ue=>{ue.matches?(t(12,E=!0),n&&(Dn.set(!1),await xe(),Dn.set(!0))):(t(12,E=!1),n&&(Dn.set(!1),await xe(),Dn.set(!0)),t(4,w=null))},H=ue=>{t(13,M=!0)},L=ue=>{t(13,M=!1)};hn(()=>{y=window.matchMedia("(min-width: 1024px)"),y.addEventListener("change",A),A(y);const ue=document.getElementById("chat-container");t(14,S=Math.floor(350/ue.clientWidth*100)),new ResizeObserver(je=>{for(let ge of je){const Re=350/ge.contentRect.width*100;t(14,S=Math.floor(Re)),o&&w&&w.isExpanded()&&w.getSize()<S&&w.resize(S)}}).observe(ue),document.addEventListener("mousedown",H),document.addEventListener("mouseup",L)}),xn(()=>{qt.set(!1),y.removeEventListener("change",A),document.removeEventListener("mousedown",H),document.removeEventListener("mouseup",L)});const W=()=>{qt.set(!1),Jn.set(!1),Hn.set(!1),n&&Dn.set(!1)};function j(ue){v=ue,t(3,v)}const U=()=>{qt.set(!1)},C=ue=>{b(ue.detail.node.data.message)},I=()=>{qt.set(!1)};function P(ue){u=ue,t(1,u)}function K(ue){f=ue,t(2,f)}const X=()=>{qt.set(!1)},F=()=>{qt.set(!1)};function Z(ue){v=ue,t(3,v)}const ae=()=>{qt.set(!1)},x=ue=>{ue.detail.node.data.message.favorite?t(0,i.messages[ue.detail.node.data.message.id].favorite=!0,i):t(0,i.messages[ue.detail.node.data.message.id].favorite=null,i),b(ue.detail.node.data.message)},G=()=>{qt.set(!1)};function oe(ue){u=ue,t(1,u)}function de(ue){f=ue,t(2,f)}const Se=()=>{qt.set(!1)},ie=ue=>{console.log("size",ue,S),o&&w.isExpanded()&&(ue<S&&w.resize(S),ue<S?localStorage.chatControlsSize=0:localStorage.chatControlsSize=ue)},ze=()=>{qt.set(!1)};function me(ue){w=ue,t(4,w)}return l.$$set=ue=>{"history"in ue&&t(0,i=ue.history),"models"in ue&&t(5,a=ue.models),"chatId"in ue&&t(6,c=ue.chatId),"chatFiles"in ue&&t(1,u=ue.chatFiles),"params"in ue&&t(2,f=ue.params),"eventTarget"in ue&&t(7,d=ue.eventTarget),"submitPrompt"in ue&&t(8,h=ue.submitPrompt),"stopResponse"in ue&&t(9,_=ue.stopResponse),"showMessage"in ue&&t(10,b=ue.showMessage),"files"in ue&&t(3,v=ue.files),"modelId"in ue&&t(11,g=ue.modelId),"pane"in ue&&t(4,w=ue.pane)},l.$$.update=()=>{l.$$.dirty[0]&64&&(c||W())},[i,u,f,v,w,a,c,d,h,_,b,g,E,M,S,n,o,s,r,V,j,U,C,I,P,K,X,F,Z,ae,x,G,oe,de,Se,ie,ze,me]}class Zp extends Oe{constructor(e){super(),He(this,e,Xp,Gp,Le,{history:0,models:5,chatId:6,chatFiles:1,params:2,eventTarget:7,submitPrompt:8,stopResponse:9,showMessage:10,files:3,modelId:11,pane:4,openPane:19},null,[-1,-1])}get openPane(){return this.$$.ctx[19]}}function Qi(l,e,t){const n=l.slice();return n[33]=e[t],n[35]=t,n}function xi(l){let e,t;return e=new Zt({props:{content:"This chat won't appear in history and your messages will not be saved.",className:"w-full flex justify-center mb-0.5",placement:"top",$$slots:{default:[qp]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function qp(l){let e,t,n,o;return t=new cu({props:{strokeWidth:"2.5",className:"size-5"}}),{c(){e=N("div"),te(t.$$.fragment),n=ke(" Temporary Chat"),this.h()},l(s){e=z(s,"DIV",{class:!0});var r=D(e);ne(t.$$.fragment,r),n=ye(r," Temporary Chat"),r.forEach(p),this.h()},h(){m(e,"class","flex items-center gap-2 text-gray-500 font-medium text-lg my-2 w-fit")},m(s,r){B(s,e,r),ee(t,e,null),k(e,n),o=!0},p:Ie,i(s){o||(T(t.$$.fragment,s),o=!0)},o(s){O(t.$$.fragment,s),o=!1},d(s){s&&p(e),$(t)}}}function Jp(l){let e,t,n,o,s,r;function i(){return l[21](l[35])}return{c(){e=N("button"),t=N("img"),o=Q(),this.h()},l(a){e=z(a,"BUTTON",{});var c=D(e);t=z(c,"IMG",{crossorigin:!0,src:!0,class:!0,alt:!0,draggable:!0}),c.forEach(p),o=J(a),this.h()},h(){var a,c,u;m(t,"crossorigin","anonymous"),jn(t.src,n=((u=(c=(a=l[33])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.profile_image_url)??(l[15].language==="dg-DG"?"/doge.png":"static/favicon.png"))||m(t,"src",n),m(t,"class","size-9 @sm:size-10 rounded-full border-[1px] border-gray-200 dark:border-none"),m(t,"alt","logo"),m(t,"draggable","false")},m(a,c){B(a,e,c),k(e,t),B(a,o,c),s||(r=De(e,"click",i),s=!0)},p(a,c){var u,f,d;l=a,c[0]&40960&&!jn(t.src,n=((d=(f=(u=l[33])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:d.profile_image_url)??(l[15].language==="dg-DG"?"/doge.png":"static/favicon.png"))&&m(t,"src",n)},d(a){a&&(p(e),p(o)),s=!1,r()}}}function $i(l){var n,o,s;let e,t;return e=new Zt({props:{content:(((s=(o=(n=l[13][l[35]])==null?void 0:n.info)==null?void 0:o.meta)==null?void 0:s.tags)??[]).map(na).join(", "),placement:"top",$$slots:{default:[Jp]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,i){ee(e,r,i),t=!0},p(r,i){var c,u,f;const a={};i[0]&8192&&(a.content=(((f=(u=(c=r[13][r[35]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.tags)??[]).map(na).join(", ")),i[0]&57344|i[1]&32&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function Qp(l){let e=l[15].t("Hello, {{name}}",{name:l[17].name})+"",t;return{c(){t=ke(e)},l(n){t=ye(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&163840&&e!==(e=n[15].t("Hello, {{name}}",{name:n[17].name})+"")&&Ce(t,e)},d(n){n&&p(t)}}}function xp(l){var n;let e=((n=l[13][l[14]])==null?void 0:n.name)+"",t;return{c(){t=ke(e)},l(o){t=ye(o,e)},m(o,s){B(o,t,s)},p(o,s){var r;s[0]&24576&&e!==(e=((r=o[13][o[14]])==null?void 0:r.name)+"")&&Ce(t,e)},d(o){o&&p(t)}}}function ea(l){var r,i,a,c,u,f;let e,t,n,o;e=new Zt({props:{className:" w-fit",content:Sl.parse(po(((a=(i=(r=l[13][l[14]])==null?void 0:r.info)==null?void 0:i.meta)==null?void 0:a.description)??"")),placement:"top",$$slots:{default:[$p]},$$scope:{ctx:l}}});let s=((f=(u=(c=l[13][l[14]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.user)&&ta(l);return{c(){te(e.$$.fragment),t=Q(),s&&s.c(),n=Me()},l(d){ne(e.$$.fragment,d),t=J(d),s&&s.l(d),n=Me()},m(d,h){ee(e,d,h),B(d,t,h),s&&s.m(d,h),B(d,n,h),o=!0},p(d,h){var b,v,g,w,y,E;const _={};h[0]&24576&&(_.content=Sl.parse(po(((g=(v=(b=d[13][d[14]])==null?void 0:b.info)==null?void 0:v.meta)==null?void 0:g.description)??""))),h[0]&24576|h[1]&32&&(_.$$scope={dirty:h,ctx:d}),e.$set(_),(E=(y=(w=d[13][d[14]])==null?void 0:w.info)==null?void 0:y.meta)!=null&&E.user?s?s.p(d,h):(s=ta(d),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(d){o||(T(e.$$.fragment,d),o=!0)},o(d){O(e.$$.fragment,d),o=!1},d(d){d&&(p(t),p(n)),$(e,d),s&&s.d(d)}}}function $p(l){var o,s,r;let e,t,n=Sl.parse(po((r=(s=(o=l[13][l[14]])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:r.description))+"";return{c(){e=N("div"),t=new ca(!1),this.h()},l(i){e=z(i,"DIV",{class:!0});var a=D(e);t=aa(a,!1),a.forEach(p),this.h()},h(){t.a=null,m(e,"class","mt-0.5 px-2 text-sm font-normal text-gray-500 dark:text-gray-400 line-clamp-2 max-w-xl markdown")},m(i,a){B(i,e,a),t.m(n,e)},p(i,a){var c,u,f;a[0]&24576&&n!==(n=Sl.parse(po((f=(u=(c=i[13][i[14]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.description))+"")&&t.p(n)},d(i){i&&p(e)}}}function ta(l){let e,t;function n(r,i){var a,c,u;return(u=(c=(a=r[13][r[14]])==null?void 0:a.info)==null?void 0:c.meta)!=null&&u.user.community?t_:e_}let o=n(l),s=o(l);return{c(){e=N("div"),t=ke(`By
								`),s.c(),this.h()},l(r){e=z(r,"DIV",{class:!0});var i=D(e);t=ye(i,`By
								`),s.l(i),i.forEach(p),this.h()},h(){m(e,"class","mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500")},m(r,i){B(r,e,i),k(e,t),s.m(e,null)},p(r,i){o===(o=n(r))&&s?s.p(r,i):(s.d(1),s=o(r),s&&(s.c(),s.m(e,null)))},d(r){r&&p(e),s.d()}}}function e_(l){var n,o,s;let e=((s=(o=(n=l[13][l[14]])==null?void 0:n.info)==null?void 0:o.meta)==null?void 0:s.user.name)+"",t;return{c(){t=ke(e)},l(r){t=ye(r,e)},m(r,i){B(r,t,i)},p(r,i){var a,c,u;i[0]&24576&&e!==(e=((u=(c=(a=r[13][r[14]])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.user.name)+"")&&Ce(t,e)},d(r){r&&p(t)}}}function t_(l){var s,r,i,a,c,u,f,d,h;let e,t=((i=(r=(s=l[13][l[14]])==null?void 0:s.info)==null?void 0:r.meta)!=null&&i.user.name?(u=(c=(a=l[13][l[14]])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.user.name:`@${(h=(d=(f=l[13][l[14]])==null?void 0:f.info)==null?void 0:d.meta)==null?void 0:h.user.username}`)+"",n,o;return{c(){e=N("a"),n=ke(t),this.h()},l(_){e=z(_,"A",{href:!0});var b=D(e);n=ye(b,t),b.forEach(p),this.h()},h(){var _,b,v;m(e,"href",o="https://openwebui.com/m/"+((v=(b=(_=l[13][l[14]])==null?void 0:_.info)==null?void 0:b.meta)==null?void 0:v.user.username))},m(_,b){B(_,e,b),k(e,n)},p(_,b){var v,g,w,y,E,M,S,V,A,H,L,W;b[0]&24576&&t!==(t=((w=(g=(v=_[13][_[14]])==null?void 0:v.info)==null?void 0:g.meta)!=null&&w.user.name?(M=(E=(y=_[13][_[14]])==null?void 0:y.info)==null?void 0:E.meta)==null?void 0:M.user.name:`@${(A=(V=(S=_[13][_[14]])==null?void 0:S.info)==null?void 0:V.meta)==null?void 0:A.user.username}`)+"")&&Ce(n,t),b[0]&24576&&o!==(o="https://openwebui.com/m/"+((W=(L=(H=_[13][_[14]])==null?void 0:H.info)==null?void 0:L.meta)==null?void 0:W.user.username))&&m(e,"href",o)},d(_){_&&p(e)}}}function n_(l){var ue,qe,je;let e,t,n,o,s,r,i,a,c,u,f,d,h,_,b,v,g,w,y,E,M,S,V,A,H,L,W,j,U=l[16]&&xi(l),C=mt(l[13]),I=[];for(let ge=0;ge<C.length;ge+=1)I[ge]=$i(Qi(l,C,ge));const P=ge=>O(I[ge],1,1,()=>{I[ge]=null});function K(ge,re){var Re;return(Re=ge[13][ge[14]])!=null&&Re.name?xp:Qp}let X=K(l),F=X(l),Z=(((je=(qe=(ue=l[13][l[14]])==null?void 0:ue.info)==null?void 0:qe.meta)==null?void 0:je.description)??null)&&ea(l);function ae(ge){l[22](ge)}function x(ge){l[23](ge)}function G(ge){l[24](ge)}function oe(ge){l[25](ge)}function de(ge){l[26](ge)}function Se(ge){l[27](ge)}function ie(ge){l[28](ge)}function ze(ge){l[29](ge)}let me={history:l[12],selectedModels:l[11],transparentBackground:l[8],stopResponse:l[10],createMessagePair:l[9],placeholder:l[15].t("How can I help you today?")};return l[3]!==void 0&&(me.files=l[3]),l[2]!==void 0&&(me.prompt=l[2]),l[0]!==void 0&&(me.autoScroll=l[0]),l[4]!==void 0&&(me.selectedToolIds=l[4]),l[5]!==void 0&&(me.imageGenerationEnabled=l[5]),l[6]!==void 0&&(me.codeInterpreterEnabled=l[6]),l[7]!==void 0&&(me.webSearchEnabled=l[7]),l[1]!==void 0&&(me.atSelectedModel=l[1]),w=new Ia({props:me}),Pe.push(()=>Ge(w,"files",ae)),Pe.push(()=>Ge(w,"prompt",x)),Pe.push(()=>Ge(w,"autoScroll",G)),Pe.push(()=>Ge(w,"selectedToolIds",oe)),Pe.push(()=>Ge(w,"imageGenerationEnabled",de)),Pe.push(()=>Ge(w,"codeInterpreterEnabled",Se)),Pe.push(()=>Ge(w,"webSearchEnabled",ie)),Pe.push(()=>Ge(w,"atSelectedModel",ze)),w.$on("upload",l[30]),w.$on("submit",l[31]),{c(){e=N("div"),U&&U.c(),t=Q(),n=N("div"),o=N("div"),s=N("div"),r=N("div"),i=N("div");for(let ge=0;ge<I.length;ge+=1)I[ge].c();c=Q(),u=N("div"),F.c(),d=Q(),h=N("div"),_=N("div"),Z&&Z.c(),v=Q(),g=N("div"),te(w.$$.fragment),this.h()},l(ge){e=z(ge,"DIV",{class:!0});var re=D(e);U&&U.l(re),t=J(re),n=z(re,"DIV",{class:!0});var Re=D(n);o=z(Re,"DIV",{class:!0});var rt=D(o);s=z(rt,"DIV",{class:!0});var tt=D(s);r=z(tt,"DIV",{class:!0});var et=D(r);i=z(et,"DIV",{class:!0});var $e=D(i);for(let Ot=0;Ot<I.length;Ot+=1)I[Ot].l($e);$e.forEach(p),et.forEach(p),c=J(tt),u=z(tt,"DIV",{class:!0});var gt=D(u);F.l(gt),gt.forEach(p),tt.forEach(p),d=J(rt),h=z(rt,"DIV",{class:!0});var jt=D(h);_=z(jt,"DIV",{});var Pt=D(_);Z&&Z.l(Pt),Pt.forEach(p),jt.forEach(p),v=J(rt),g=z(rt,"DIV",{class:!0});var _t=D(g);ne(w.$$.fragment,_t),_t.forEach(p),rt.forEach(p),Re.forEach(p),re.forEach(p),this.h()},h(){m(i,"class","flex -space-x-4 mb-0.5"),m(r,"class","flex shrink-0 justify-center"),m(u,"class","text-3xl @sm:text-4xl line-clamp-1"),m(s,"class","flex flex-row justify-center gap-3 @sm:gap-3.5 w-fit px-5"),m(h,"class","flex mt-1 mb-2"),m(g,"class",W="text-base font-normal @md:max-w-3xl w-full py-3 "+(l[1]?"mt-2":"")),m(o,"class","w-full flex flex-col justify-center items-center"),m(n,"class","w-full text-3xl text-gray-800 dark:text-gray-100 font-medium text-center flex items-center gap-4 font-primary"),m(e,"class","m-auto w-full max-w-6xl px-2 @2xl:px-20 translate-y-6 py-24 text-center")},m(ge,re){B(ge,e,re),U&&U.m(e,null),k(e,t),k(e,n),k(n,o),k(o,s),k(s,r),k(r,i);for(let Re=0;Re<I.length;Re+=1)I[Re]&&I[Re].m(i,null);k(s,c),k(s,u),F.m(u,null),k(o,d),k(o,h),k(h,_),Z&&Z.m(_,null),k(o,v),k(o,g),ee(w,g,null),j=!0},p(ge,re){var rt,tt,et;if(ge[16]?U?re[0]&65536&&T(U,1):(U=xi(ge),U.c(),T(U,1),U.m(e,t)):U&&(Te(),O(U,1,1,()=>{U=null}),Ve()),re[0]&57344){C=mt(ge[13]);let $e;for($e=0;$e<C.length;$e+=1){const gt=Qi(ge,C,$e);I[$e]?(I[$e].p(gt,re),T(I[$e],1)):(I[$e]=$i(gt),I[$e].c(),T(I[$e],1),I[$e].m(i,null))}for(Te(),$e=C.length;$e<I.length;$e+=1)P($e);Ve()}X===(X=K(ge))&&F?F.p(ge,re):(F.d(1),F=X(ge),F&&(F.c(),F.m(u,null))),((et=(tt=(rt=ge[13][ge[14]])==null?void 0:rt.info)==null?void 0:tt.meta)==null?void 0:et.description)??null?Z?(Z.p(ge,re),re[0]&24576&&T(Z,1)):(Z=ea(ge),Z.c(),T(Z,1),Z.m(_,null)):Z&&(Te(),O(Z,1,1,()=>{Z=null}),Ve());const Re={};re[0]&4096&&(Re.history=ge[12]),re[0]&2048&&(Re.selectedModels=ge[11]),re[0]&256&&(Re.transparentBackground=ge[8]),re[0]&1024&&(Re.stopResponse=ge[10]),re[0]&512&&(Re.createMessagePair=ge[9]),re[0]&32768&&(Re.placeholder=ge[15].t("How can I help you today?")),!y&&re[0]&8&&(y=!0,Re.files=ge[3],Ke(()=>y=!1)),!E&&re[0]&4&&(E=!0,Re.prompt=ge[2],Ke(()=>E=!1)),!M&&re[0]&1&&(M=!0,Re.autoScroll=ge[0],Ke(()=>M=!1)),!S&&re[0]&16&&(S=!0,Re.selectedToolIds=ge[4],Ke(()=>S=!1)),!V&&re[0]&32&&(V=!0,Re.imageGenerationEnabled=ge[5],Ke(()=>V=!1)),!A&&re[0]&64&&(A=!0,Re.codeInterpreterEnabled=ge[6],Ke(()=>A=!1)),!H&&re[0]&128&&(H=!0,Re.webSearchEnabled=ge[7],Ke(()=>H=!1)),!L&&re[0]&2&&(L=!0,Re.atSelectedModel=ge[1],Ke(()=>L=!1)),w.$set(Re),(!j||re[0]&2&&W!==(W="text-base font-normal @md:max-w-3xl w-full py-3 "+(ge[1]?"mt-2":"")))&&m(g,"class",W)},i(ge){if(!j){T(U);for(let re=0;re<C.length;re+=1)T(I[re]);ge&&(a||ul(()=>{a=Uo(i,Fl,{duration:100}),a.start()})),ge&&(f||ul(()=>{f=Uo(u,Fl,{duration:100}),f.start()})),T(Z),ge&&(b||ul(()=>{b=Uo(_,Fl,{duration:100,delay:50}),b.start()})),T(w.$$.fragment,ge),j=!0}},o(ge){O(U),I=I.filter(Boolean);for(let re=0;re<I.length;re+=1)O(I[re]);O(Z),O(w.$$.fragment,ge),j=!1},d(ge){ge&&p(e),U&&U.d(),bn(I,ge),F.d(),Z&&Z.d(),$(w)}}}const na=l=>l.name.toUpperCase();function l_(l,e,t){let n,o,s,r;se(l,ml,F=>t(20,n=F)),se(l,To,F=>t(16,s=F)),se(l,Yn,F=>t(17,r=F));const i=rn(),a=Nt("i18n");se(l,a,F=>t(15,o=F));let{transparentBackground:c=!1}=e,{createMessagePair:u}=e,{stopResponse:f}=e,{autoScroll:d=!1}=e,{atSelectedModel:h}=e,{selectedModels:_}=e,{history:b}=e,{prompt:v=""}=e,{files:g=[]}=e,{selectedToolIds:w=[]}=e,{imageGenerationEnabled:y=!1}=e,{codeInterpreterEnabled:E=!1}=e,{webSearchEnabled:M=!1}=e,S=[],V=0;hn(()=>{});const A=F=>{t(14,V=F)};function H(F){g=F,t(3,g)}function L(F){v=F,t(2,v)}function W(F){d=F,t(0,d)}function j(F){w=F,t(4,w)}function U(F){y=F,t(5,y)}function C(F){E=F,t(6,E)}function I(F){M=F,t(7,M)}function P(F){h=F,t(1,h)}const K=F=>{i("upload",F.detail)},X=F=>{i("submit",F.detail)};return l.$$set=F=>{"transparentBackground"in F&&t(8,c=F.transparentBackground),"createMessagePair"in F&&t(9,u=F.createMessagePair),"stopResponse"in F&&t(10,f=F.stopResponse),"autoScroll"in F&&t(0,d=F.autoScroll),"atSelectedModel"in F&&t(1,h=F.atSelectedModel),"selectedModels"in F&&t(11,_=F.selectedModels),"history"in F&&t(12,b=F.history),"prompt"in F&&t(2,v=F.prompt),"files"in F&&t(3,g=F.files),"selectedToolIds"in F&&t(4,w=F.selectedToolIds),"imageGenerationEnabled"in F&&t(5,y=F.imageGenerationEnabled),"codeInterpreterEnabled"in F&&t(6,E=F.codeInterpreterEnabled),"webSearchEnabled"in F&&t(7,M=F.webSearchEnabled)},l.$$.update=()=>{l.$$.dirty[0]&1050624&&t(13,S=_.map(F=>n.find(Z=>Z.id===F))),l.$$.dirty[0]&10240&&_.length>0&&t(14,V=S.length-1)},[d,h,v,g,w,y,E,M,c,u,f,_,b,S,V,o,s,r,i,a,n,A,H,L,W,j,U,C,I,P,K,X]}class o_ extends Oe{constructor(e){super(),He(this,e,l_,n_,Le,{transparentBackground:8,createMessagePair:9,stopResponse:10,autoScroll:0,atSelectedModel:1,selectedModels:11,history:12,prompt:2,files:3,selectedToolIds:4,imageGenerationEnabled:5,codeInterpreterEnabled:6,webSearchEnabled:7},null,[-1,-1])}}const{Boolean:s_,document:Jo}=fa;function la(l,e,t){const n=l.slice();return n[113]=e[t],n}function r_(l){let e,t,n,o;return n=new No({}),{c(){e=N("div"),t=N("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var r=D(e);t=z(r,"DIV",{class:!0});var i=D(t);ne(n.$$.fragment,i),i.forEach(p),r.forEach(p),this.h()},h(){m(t,"class","m-auto"),m(e,"class","flex items-center justify-center h-full w-full")},m(s,r){B(s,e,r),k(e,t),ee(n,t,null),o=!0},p:Ie,i(s){o||(T(n.$$.fragment,s),o=!0)},o(s){O(n.$$.fragment,s),o=!1},d(s){s&&p(e),$(n)}}}function i_(l){var u;let e,t,n,o,s,r,i=(((u=l[21])==null?void 0:u.backgroundImageUrl)??null)&&oa(l);function a(f){l[48](f)}let c={chat:{id:l[20],chat:{title:l[23],models:l[1],system:l[21].system??void 0,params:l[19],history:l[15],timestamp:Date.now()}},title:l[23],shareEnabled:!!l[15].currentId,initNewChat:l[33]};return l[1]!==void 0&&(c.selectedModels=l[1]),t=new Ih({props:c}),l[47](t),Pe.push(()=>Ge(t,"selectedModels",a)),s=new dc({props:{direction:"horizontal",class:"w-full h-full",$$slots:{default:[f_]},$$scope:{ctx:l}}}),{c(){i&&i.c(),e=Q(),te(t.$$.fragment),o=Q(),te(s.$$.fragment)},l(f){i&&i.l(f),e=J(f),ne(t.$$.fragment,f),o=J(f),ne(s.$$.fragment,f)},m(f,d){i&&i.m(f,d),B(f,e,d),ee(t,f,d),B(f,o,d),ee(s,f,d),r=!0},p(f,d){var b;((b=f[21])==null?void 0:b.backgroundImageUrl)??null?i?i.p(f,d):(i=oa(f),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null);const h={};d[0]&12091394&&(h.chat={id:f[20],chat:{title:f[23],models:f[1],system:f[21].system??void 0,params:f[19],history:f[15],timestamp:Date.now()}}),d[0]&8388608&&(h.title=f[23]),d[0]&32768&&(h.shareEnabled=!!f[15].currentId),!n&&d[0]&2&&(n=!0,h.selectedModels=f[1],Ke(()=>n=!1)),t.$set(h);const _={};d[0]&75496694|d[3]&8388608&&(_.$$scope={dirty:d,ctx:f}),s.$set(_)},i(f){r||(T(t.$$.fragment,f),T(s.$$.fragment,f),r=!0)},o(f){O(t.$$.fragment,f),O(s.$$.fragment,f),r=!1},d(f){f&&(p(e),p(o)),i&&i.d(f),l[47](null),$(t,f),$(s,f)}}}function oa(l){let e,t,n,o;return{c(){e=N("div"),n=Q(),o=N("div"),this.h()},l(s){e=z(s,"DIV",{class:!0,style:!0}),D(e).forEach(p),n=J(s),o=z(s,"DIV",{class:!0}),D(o).forEach(p),this.h()},h(){m(e,"class",t="absolute "+(l[25]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat"),Qe(e,"background-image","url("+l[21].backgroundImageUrl+")"),m(o,"class","absolute top-0 left-0 w-full h-full bg-linear-to-t from-white to-white/85 dark:from-gray-900 dark:to-gray-900/90 z-0")},m(s,r){B(s,e,r),B(s,n,r),B(s,o,r)},p(s,r){r[0]&33554432&&t!==(t="absolute "+(s[25]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat")&&m(e,"class",t),r[0]&2097152&&Qe(e,"background-image","url("+s[21].backgroundImageUrl+")")},d(s){s&&(p(e),p(n),p(o))}}}function sa(l){let e,t,n,o=mt(l[26].filter(l[49])),s=[];for(let i=0;i<o.length;i+=1)s[i]=ra(la(l,o,i));const r=i=>O(s[i],1,1,()=>{s[i]=null});return{c(){e=N("div"),t=N("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=z(i,"DIV",{class:!0});var a=D(e);t=z(a,"DIV",{class:!0});var c=D(t);for(let u=0;u<s.length;u+=1)s[u].l(c);c.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","flex flex-col gap-1 w-full"),m(e,"class","absolute top-12 left-0 right-0 w-full z-30")},m(i,a){B(i,e,a),k(e,t);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);n=!0},p(i,a){if(a[0]&67108864){o=mt(i[26].filter(i[49]));let c;for(c=0;c<o.length;c+=1){const u=la(i,o,c);s[c]?(s[c].p(u,a),T(s[c],1)):(s[c]=ra(u),s[c].c(),T(s[c],1),s[c].m(t,null))}for(Te(),c=o.length;c<s.length;c+=1)r(c);Ve()}},i(i){if(!n){for(let a=0;a<o.length;a+=1)T(s[a]);n=!0}},o(i){s=s.filter(s_);for(let a=0;a<s.length;a+=1)O(s[a]);n=!1},d(i){i&&p(e),bn(s,i)}}}function ra(l){let e,t;return e=new cf({props:{banner:l[113]}}),e.$on("dismiss",l[50]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o[0]&67108864&&(s.banner=n[113]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function a_(l){var M;let e,t,n,o,s,r,i,a,c,u,f;function d(S){l[67](S)}function h(S){l[68](S)}function _(S){l[69](S)}function b(S){l[70](S)}function v(S){l[71](S)}function g(S){l[72](S)}function w(S){l[73](S)}function y(S){l[74](S)}let E={history:l[15],selectedModels:l[1],transparentBackground:((M=l[21])==null?void 0:M.backgroundImageUrl)??!1,stopResponse:l[39],createMessagePair:l[35]};return l[18]!==void 0&&(E.files=l[18]),l[16]!==void 0&&(E.prompt=l[16]),l[6]!==void 0&&(E.autoScroll=l[6]),l[11]!==void 0&&(E.selectedToolIds=l[11]),l[12]!==void 0&&(E.imageGenerationEnabled=l[12]),l[14]!==void 0&&(E.codeInterpreterEnabled=l[14]),l[13]!==void 0&&(E.webSearchEnabled=l[13]),l[2]!==void 0&&(E.atSelectedModel=l[2]),t=new o_({props:E}),Pe.push(()=>Ge(t,"files",d)),Pe.push(()=>Ge(t,"prompt",h)),Pe.push(()=>Ge(t,"autoScroll",_)),Pe.push(()=>Ge(t,"selectedToolIds",b)),Pe.push(()=>Ge(t,"imageGenerationEnabled",v)),Pe.push(()=>Ge(t,"codeInterpreterEnabled",g)),Pe.push(()=>Ge(t,"webSearchEnabled",w)),Pe.push(()=>Ge(t,"atSelectedModel",y)),t.$on("upload",l[75]),t.$on("submit",l[76]),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(S){e=z(S,"DIV",{class:!0});var V=D(e);ne(t.$$.fragment,V),V.forEach(p),this.h()},h(){m(e,"class","overflow-auto w-full h-full flex items-center")},m(S,V){B(S,e,V),ee(t,e,null),f=!0},p(S,V){var H;const A={};V[0]&32768&&(A.history=S[15]),V[0]&2&&(A.selectedModels=S[1]),V[0]&2097152&&(A.transparentBackground=((H=S[21])==null?void 0:H.backgroundImageUrl)??!1),!n&&V[0]&262144&&(n=!0,A.files=S[18],Ke(()=>n=!1)),!o&&V[0]&65536&&(o=!0,A.prompt=S[16],Ke(()=>o=!1)),!s&&V[0]&64&&(s=!0,A.autoScroll=S[6],Ke(()=>s=!1)),!r&&V[0]&2048&&(r=!0,A.selectedToolIds=S[11],Ke(()=>r=!1)),!i&&V[0]&4096&&(i=!0,A.imageGenerationEnabled=S[12],Ke(()=>i=!1)),!a&&V[0]&16384&&(a=!0,A.codeInterpreterEnabled=S[14],Ke(()=>a=!1)),!c&&V[0]&8192&&(c=!0,A.webSearchEnabled=S[13],Ke(()=>c=!1)),!u&&V[0]&4&&(u=!0,A.atSelectedModel=S[2],Ke(()=>u=!1)),t.$set(A)},i(S){f||(T(t.$$.fragment,S),f=!0)},o(S){O(t.$$.fragment,S),f=!1},d(S){S&&p(e),$(t)}}}function c_(l){var ae;let e,t,n,o,s,r,i,a,c,u,f,d,h,_,b,v,g,w,y,E="",M,S,V;function A(x){l[51](x)}function H(x){l[52](x)}function L(x){l[53](x)}let W={chatId:l[20],selectedModels:l[1],atSelectedModel:l[2],sendPrompt:l[38],showMessage:l[29],submitMessage:l[40],continueResponse:l[42],regenerateResponse:l[41],mergeResponses:l[43],chatActionHandler:l[34],addMessages:l[36],bottomPadding:l[18].length>0};l[15]!==void 0&&(W.history=l[15]),l[6]!==void 0&&(W.autoScroll=l[6]),l[16]!==void 0&&(W.prompt=l[16]),n=new uu({props:W}),Pe.push(()=>Ge(n,"history",A)),Pe.push(()=>Ge(n,"autoScroll",H)),Pe.push(()=>Ge(n,"prompt",L));function j(x){l[57](x)}function U(x){l[58](x)}function C(x){l[59](x)}function I(x){l[60](x)}function P(x){l[61](x)}function K(x){l[62](x)}function X(x){l[63](x)}function F(x){l[64](x)}let Z={history:l[15],selectedModels:l[1],transparentBackground:((ae=l[21])==null?void 0:ae.backgroundImageUrl)??!1,stopResponse:l[39],createMessagePair:l[35],onChange:l[56]};return l[18]!==void 0&&(Z.files=l[18]),l[16]!==void 0&&(Z.prompt=l[16]),l[6]!==void 0&&(Z.autoScroll=l[6]),l[11]!==void 0&&(Z.selectedToolIds=l[11]),l[12]!==void 0&&(Z.imageGenerationEnabled=l[12]),l[14]!==void 0&&(Z.codeInterpreterEnabled=l[14]),l[13]!==void 0&&(Z.webSearchEnabled=l[13]),l[2]!==void 0&&(Z.atSelectedModel=l[2]),c=new Ia({props:Z}),Pe.push(()=>Ge(c,"files",j)),Pe.push(()=>Ge(c,"prompt",U)),Pe.push(()=>Ge(c,"autoScroll",C)),Pe.push(()=>Ge(c,"selectedToolIds",I)),Pe.push(()=>Ge(c,"imageGenerationEnabled",P)),Pe.push(()=>Ge(c,"codeInterpreterEnabled",K)),Pe.push(()=>Ge(c,"webSearchEnabled",X)),Pe.push(()=>Ge(c,"atSelectedModel",F)),c.$on("upload",l[65]),c.$on("submit",l[66]),{c(){e=N("div"),t=N("div"),te(n.$$.fragment),i=Q(),a=N("div"),te(c.$$.fragment),w=Q(),y=N("div"),y.innerHTML=E,this.h()},l(x){e=z(x,"DIV",{class:!0,id:!0});var G=D(e);t=z(G,"DIV",{class:!0});var oe=D(t);ne(n.$$.fragment,oe),oe.forEach(p),G.forEach(p),i=J(x),a=z(x,"DIV",{class:!0});var de=D(a);ne(c.$$.fragment,de),w=J(de),y=z(de,"DIV",{class:!0,"data-svelte-h":!0}),at(y)!=="svelte-1t2gtm5"&&(y.innerHTML=E),de.forEach(p),this.h()},h(){m(t,"class","h-full w-full flex flex-col"),m(e,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10 scrollbar-hidden"),m(e,"id","messages-container"),m(y,"class","absolute bottom-1 text-xs text-gray-500 text-center line-clamp-1 right-0 left-0"),m(a,"class","pb-[1rem]")},m(x,G){B(x,e,G),k(e,t),ee(n,t,null),l[54](e),B(x,i,G),B(x,a,G),ee(c,a,null),k(a,w),k(a,y),M=!0,S||(V=De(e,"scroll",l[55]),S=!0)},p(x,G){var Se;const oe={};G[0]&1048576&&(oe.chatId=x[20]),G[0]&2&&(oe.selectedModels=x[1]),G[0]&4&&(oe.atSelectedModel=x[2]),G[0]&262144&&(oe.bottomPadding=x[18].length>0),!o&&G[0]&32768&&(o=!0,oe.history=x[15],Ke(()=>o=!1)),!s&&G[0]&64&&(s=!0,oe.autoScroll=x[6],Ke(()=>s=!1)),!r&&G[0]&65536&&(r=!0,oe.prompt=x[16],Ke(()=>r=!1)),n.$set(oe);const de={};G[0]&32768&&(de.history=x[15]),G[0]&2&&(de.selectedModels=x[1]),G[0]&2097152&&(de.transparentBackground=((Se=x[21])==null?void 0:Se.backgroundImageUrl)??!1),G[0]&1048576&&(de.onChange=x[56]),!u&&G[0]&262144&&(u=!0,de.files=x[18],Ke(()=>u=!1)),!f&&G[0]&65536&&(f=!0,de.prompt=x[16],Ke(()=>f=!1)),!d&&G[0]&64&&(d=!0,de.autoScroll=x[6],Ke(()=>d=!1)),!h&&G[0]&2048&&(h=!0,de.selectedToolIds=x[11],Ke(()=>h=!1)),!_&&G[0]&4096&&(_=!0,de.imageGenerationEnabled=x[12],Ke(()=>_=!1)),!b&&G[0]&16384&&(b=!0,de.codeInterpreterEnabled=x[14],Ke(()=>b=!1)),!v&&G[0]&8192&&(v=!0,de.webSearchEnabled=x[13],Ke(()=>v=!1)),!g&&G[0]&4&&(g=!0,de.atSelectedModel=x[2],Ke(()=>g=!1)),c.$set(de)},i(x){M||(T(n.$$.fragment,x),T(c.$$.fragment,x),M=!0)},o(x){O(n.$$.fragment,x),O(c.$$.fragment,x),M=!1},d(x){x&&(p(e),p(i),p(a)),$(n),l[54](null),$(c),S=!1,V()}}}function u_(l){let e,t,n,o,s,r,i=l[26].length>0&&!l[15].currentId&&!l[20]&&l[1].length<=1&&sa(l);const a=[c_,a_],c=[];function u(f,d){var h;return d[0]&2129920&&(n=null),n==null&&(n=((h=f[21])==null?void 0:h.landingPageMode)==="chat"||_n(f[15],f[15].currentId).length>0||!0),n?0:1}return o=u(l,[-1,-1,-1,-1]),s=c[o]=a[o](l),{c(){i&&i.c(),e=Q(),t=N("div"),s.c(),this.h()},l(f){i&&i.l(f),e=J(f),t=z(f,"DIV",{class:!0});var d=D(t);s.l(d),d.forEach(p),this.h()},h(){m(t,"class","flex flex-col flex-auto z-10 w-full @container")},m(f,d){i&&i.m(f,d),B(f,e,d),B(f,t,d),c[o].m(t,null),r=!0},p(f,d){f[26].length>0&&!f[15].currentId&&!f[20]&&f[1].length<=1?i?(i.p(f,d),d[0]&68190210&&T(i,1)):(i=sa(f),i.c(),T(i,1),i.m(e.parentNode,e)):i&&(Te(),O(i,1,1,()=>{i=null}),Ve());let h=o;o=u(f,d),o===h?c[o].p(f,d):(Te(),O(c[h],1,1,()=>{c[h]=null}),Ve(),s=c[o],s?s.p(f,d):(s=c[o]=a[o](f),s.c()),T(s,1),s.m(t,null))},i(f){r||(T(i),T(s),r=!0)},o(f){O(i),O(s),r=!1},d(f){f&&(p(e),p(t)),i&&i.d(f),c[o].d()}}}function f_(l){var v;let e,t,n,o,s,r,i,a,c;e=new da({props:{defaultSize:50,class:"h-full flex w-full relative",$$slots:{default:[u_]},$$scope:{ctx:l}}});function u(g){l[79](g)}function f(g){l[80](g)}function d(g){l[81](g)}function h(g){l[82](g)}function _(g){l[83](g)}let b={chatId:l[20],modelId:((v=l[10])==null?void 0:v.at(0))??null,models:l[10].reduce(l[77],[]),submitPrompt:l[37],stopResponse:l[39],showMessage:l[29],eventTarget:l[28]};return l[15]!==void 0&&(b.history=l[15]),l[17]!==void 0&&(b.chatFiles=l[17]),l[19]!==void 0&&(b.params=l[19]),l[18]!==void 0&&(b.files=l[18]),l[4]!==void 0&&(b.pane=l[4]),n=new Zp({props:b}),l[78](n),Pe.push(()=>Ge(n,"history",u)),Pe.push(()=>Ge(n,"chatFiles",f)),Pe.push(()=>Ge(n,"params",d)),Pe.push(()=>Ge(n,"files",h)),Pe.push(()=>Ge(n,"pane",_)),{c(){te(e.$$.fragment),t=Q(),te(n.$$.fragment)},l(g){ne(e.$$.fragment,g),t=J(g),ne(n.$$.fragment,g)},m(g,w){ee(e,g,w),B(g,t,w),ee(n,g,w),c=!0},p(g,w){var M;const y={};w[0]&70645958|w[3]&8388608&&(y.$$scope={dirty:w,ctx:g}),e.$set(y);const E={};w[0]&1048576&&(E.chatId=g[20]),w[0]&1024&&(E.modelId=((M=g[10])==null?void 0:M.at(0))??null),w[0]&4195328&&(E.models=g[10].reduce(g[77],[])),!o&&w[0]&32768&&(o=!0,E.history=g[15],Ke(()=>o=!1)),!s&&w[0]&131072&&(s=!0,E.chatFiles=g[17],Ke(()=>s=!1)),!r&&w[0]&524288&&(r=!0,E.params=g[19],Ke(()=>r=!1)),!i&&w[0]&262144&&(i=!0,E.files=g[18],Ke(()=>i=!1)),!a&&w[0]&16&&(a=!0,E.pane=g[4],Ke(()=>a=!1)),n.$set(E)},i(g){c||(T(e.$$.fragment,g),T(n.$$.fragment,g),c=!0)},o(g){O(e.$$.fragment,g),O(n.$$.fragment,g),c=!1},d(g){g&&p(t),$(e,g),l[78](null),$(n,g)}}}function d_(l){let e,t,n,o,s,r,i,a,c,u,f,d,h;Jo.title=e=`
		`+(l[23]?`${l[23].length>30?`${l[23].slice(0,30)}...`:l[23]} | ${l[24]}`:`${l[24]}`)+`
	`;function _(y){l[44](y)}let b={title:h_,message:m_,input:g_,inputPlaceholder:p_,inputValue:__};l[9]!==void 0&&(b.show=l[9]),r=new Ou({props:b}),Pe.push(()=>Ge(r,"show",_)),r.$on("confirm",l[45]),r.$on("cancel",l[46]);const v=[i_,r_],g=[];function w(y,E){return y[0]===""||!y[3]&&y[0]?0:y[3]?1:-1}return~(u=w(l))&&(f=g[u]=v[u](l)),{c(){t=Q(),n=N("audio"),s=Q(),te(r.$$.fragment),a=Q(),c=N("div"),f&&f.c(),this.h()},l(y){ic("svelte-8uu834",Jo.head).forEach(p),t=J(y),n=z(y,"AUDIO",{id:!0,src:!0,style:!0}),D(n).forEach(p),s=J(y),ne(r.$$.fragment,y),a=J(y),c=z(y,"DIV",{class:!0,id:!0});var M=D(c);f&&f.l(M),M.forEach(p),this.h()},h(){m(n,"id","audioElement"),jn(n.src,o="")||m(n,"src",o),Qe(n,"display","none"),m(c,"class",d="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(l[25]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"),m(c,"id","chat-container")},m(y,E){B(y,t,E),B(y,n,E),B(y,s,E),ee(r,y,E),B(y,a,E),B(y,c,E),~u&&g[u].m(c,null),h=!0},p(y,E){(!h||E[0]&25165824)&&e!==(e=`
		`+(y[23]?`${y[23].length>30?`${y[23].slice(0,30)}...`:y[23]} | ${y[24]}`:`${y[24]}`)+`
	`)&&(Jo.title=e);const M={};!i&&E[0]&512&&(i=!0,M.show=y[9],Ke(()=>i=!1)),r.$set(M);let S=u;u=w(y),u===S?~u&&g[u].p(y,E):(f&&(Te(),O(g[S],1,1,()=>{g[S]=null}),Ve()),~u?(f=g[u],f?f.p(y,E):(f=g[u]=v[u](y),f.c()),T(f,1),f.m(c,null)):f=null),(!h||E[0]&33554432&&d!==(d="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(y[25]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"))&&m(c,"class",d)},i(y){h||(T(r.$$.fragment,y),T(f),h=!0)},o(y){O(r.$$.fragment,y),O(f),h=!1},d(y){y&&(p(t),p(n),p(s),p(a),p(c)),$(r,y),~u&&g[u].d()}}}let h_="",m_="",g_=!1,p_="",__="",Qo=null;function b_(l,e,t){let n,o,s,r,i,a,c,u,f,d,h,_,b,v,g,w,y;se(l,_l,R=>t(88,n=R)),se(l,To,R=>t(89,o=R)),se(l,qn,R=>t(20,s=R)),se(l,Un,R=>t(21,r=R)),se(l,ml,R=>t(22,a=R)),se(l,bc,R=>t(91,c=R)),se(l,ha,R=>t(92,u=R)),se(l,Yn,R=>t(93,f=R)),se(l,Mo,R=>t(94,d=R)),se(l,hc,R=>t(95,h=R)),se(l,rs,R=>t(96,_=R)),se(l,fl,R=>t(97,b=R)),se(l,ro,R=>t(23,v=R)),se(l,pa,R=>t(24,g=R)),se(l,xo,R=>t(25,w=R)),se(l,vc,R=>t(26,y=R));const E=Nt("i18n");se(l,E,R=>t(90,i=R));let{chatIdProp:M=""}=e,S=!1;const V=new EventTarget;let A,H,L=!0,W,j,U=!1,C,I=[""],P,K=[],X=[],F=!1,Z=!1,ae=!1,x=null,G={messages:{},currentId:null},oe=null,de="",Se=[],ie=[],ze={};const me=()=>{I.length===0||I.length===1&&I[0]===""||(sessionStorage.selectedModels=JSON.stringify(I),console.log("saveSessionSelectedModels",I,sessionStorage.selectedModels))},ue=async()=>{var fe,_e;if(b||fl.set(await is(localStorage.token)),I.length!==1&&!P)return;const R=P??a.find(We=>We.id===I[0]);R&&t(11,X=(((_e=(fe=R==null?void 0:R.info)==null?void 0:fe.meta)==null?void 0:_e.toolIds)??[]).filter(We=>b.find(pe=>pe.id===We)))},qe=async R=>{const fe=JSON.parse(JSON.stringify(s));let _e=JSON.parse(JSON.stringify(R.id)),We=G.messages[_e].childrenIds;for(;We.length!==0;)_e=We.at(-1),We=G.messages[_e].childrenIds;t(15,G.currentId=_e,G),await xe(),await xe(),await xe();const pe=document.getElementById(`message-${R.id}`);pe&&pe.scrollIntoView({behavior:"smooth"}),await xe(),Ue(fe,G)},je=async(R,fe)=>{var _e,We;if(console.log("ðŸ“¥ Socket event received:",R&&JSON.stringify(R).substring(0,200)+"..."),R.chat_id===s){await xe();let pe=G.messages[R.message_id];if(pe){const Fe=((_e=R==null?void 0:R.data)==null?void 0:_e.type)??null,we=((We=R==null?void 0:R.data)==null?void 0:We.data)??null;if(console.log("ðŸ“¥ Event type:",Fe,"Data ID:",we==null?void 0:we.id),console.log("ðŸ“¥ Content preview:",we!=null&&we.content?we.content.substring(0,50)+"...":"No content"),Fe==="chat:completion")console.log("ðŸ¤– Processing agent API response from socket event"),we.content&&(console.log("ðŸ“ Content length:",we.content.length),pe.isLoading&&(pe.isLoading=!1),pe.content=we.content,we.done!==!1&&(pe.done=!0,console.log("âœ… Marking message as done")),t(15,G.messages[R.message_id]={...pe},G),console.log("âœ… Updated message in history.messages"),await xe(),console.log("âœ… Forced UI update"),we.done&&L&&$e());else if(Fe==="status")pe!=null&&pe.statusHistory?pe.statusHistory.push(we):pe.statusHistory=[we];else if(Fe==="source"||Fe==="citation")if((we==null?void 0:we.type)==="code_execution"){pe.codeExecutions||(pe.codeExecutions=[]);const Be=pe.codeExecutions.findIndex(ct=>ct.id===we.execution_id);Be!==-1?pe.codeExecutions[Be]={...pe.codeExecutions[Be],...we,updated:Date.now()}:pe.codeExecutions.push({...we,created:Date.now(),updated:Date.now()})}else pe.sources||(pe.sources=[]),pe.sources.push(we);else if(Fe==="chat:title")ro.set(we),_l.set(1),await bl.set(await Bl(localStorage.token,n));else if(Fe==="chat:tags")x=await $o(localStorage.token,s),wc.set(await Oc(localStorage.token));else if(Fe==="message")console.log("ðŸ“ Appending message content:",we.content),pe.isLoading&&(pe.isLoading=!1),pe.content+=we.content;else if(Fe==="replace")console.log("ðŸ“ Replacing message content:",we.content),pe.isLoading&&(pe.isLoading=!1),pe.content=we.content;else if(Fe==="action"){if(we.action==="continue"){const Be=document.getElementById("continue-response-button");Be&&Be.click()}}else console.log("â“ Unknown message type:",Fe,we);t(15,G={...G}),fe&&typeof fe=="function"&&fe(R,pe)}else console.warn("âš ï¸ No message found for ID:",R.message_id)}},ge=async R=>{if(R.origin===window.origin){if(R.data.type==="input:prompt"){console.debug(R.data.text);const fe=document.getElementById("chat-input");fe&&(t(16,de=R.data.text),fe.focus())}R.data.type==="action:submit"&&(console.debug(R.data.text),de!==""&&(await xe(),_t(de))),R.data.type==="input:prompt:submit"&&(console.debug(R.data.text),de!==""&&(await xe(),_t(R.data.text)))}};hn(async()=>{if(console.log("mounted"),console.log("Initial userAPIKey value:",u?"Present":"Empty/None"),window.addEventListener("message",ge),c==null||c.on("chat-events",je),s?o&&await Fo("/"):C=qn.subscribe(async fe=>{fe||await tt()}),localStorage.getItem(`chat-input-${M}`))try{const fe=JSON.parse(localStorage.getItem(`chat-input-${M}`));t(16,de=fe.prompt),t(18,ie=fe.files),t(11,X=fe.selectedToolIds),t(13,Z=fe.webSearchEnabled),t(12,F=fe.imageGenerationEnabled)}catch{t(16,de=""),t(18,ie=[]),t(11,X=[]),t(13,Z=!1),t(12,F=!1)}qt.subscribe(async fe=>{if(A&&!_)try{fe?H.openPane():A.collapse()}catch{}fe||(Dn.set(!1),Jn.set(!1),Hn.set(!1))});const R=document.getElementById("chat-input");R==null||R.focus(),bl.subscribe(()=>{}),window.addEventListener("beforeunload",fe=>{localStorage.setItem(`chat-input-${s}`,JSON.stringify({prompt:de,files:ie,selectedToolIds:X,webSearchEnabled:Z,imageGenerationEnabled:F}))})}),xn(()=>{C==null||C(),window.removeEventListener("message",ge),c==null||c.off("chat-events",je)});const re=async R=>{var We,pe;if(console.log("Starting uploadGoogleDriveFile with:",{id:R.id,name:R.name,url:R.url,headers:{Authorization:`Bearer ${token}`}}),!(R!=null&&R.id)||!(R!=null&&R.name)||!(R!=null&&R.url)||!((We=R==null?void 0:R.headers)!=null&&We.Authorization))throw new Error("Invalid file data provided");const fe=Pn(),_e={type:"file",file:"",id:null,url:R.url,name:R.name,collection_name:"",status:"uploading",error:"",itemId:fe,size:0};try{t(18,ie=[...ie,_e]),console.log("Processing web file with URL:",R.url);const Fe={headers:{Authorization:R.headers.Authorization,Accept:"*/*"},method:"GET"};console.log("Fetching file content from Google Drive...");const we=await fetch(R.url,Fe);if(!we.ok){const Ct=await we.text();throw new Error(`Failed to fetch file (${we.status}): ${Ct}`)}const Be=we.headers.get("content-type")||"application/octet-stream";console.log("Response received with content-type:",Be),console.log("Converting response to blob...");const ct=await we.blob();if(ct.size===0)throw new Error("Retrieved file is empty");console.log("Blob created:",{size:ct.size,type:ct.type||Be});const bt=new File([ct],R.name,{type:ct.type||Be});if(console.log("File object created:",{name:bt.name,size:bt.size,type:bt.type}),bt.size===0)throw new Error("Created file is empty");console.log("Uploading file to server...");const ft=await uploadFile(localStorage.token,bt);if(!ft)throw new Error("Server returned null response for file upload");console.log("File uploaded successfully:",ft),_e.status="uploaded",_e.file=ft,_e.id=ft.id,_e.size=bt.size,_e.collection_name=(pe=ft==null?void 0:ft.meta)==null?void 0:pe.collection_name,_e.url=`${WEBUI_API_BASE_URL}/files/${ft.id}`,t(18,ie),t(0,M),ht.success(i.t("File uploaded successfully"))}catch(Fe){console.error("Error uploading file:",Fe),t(18,ie=ie.filter(we=>we.itemId!==fe)),ht.error(i.t("Error uploading file: {{error}}",{error:Fe.message||"Unknown error"}))}},Re=async R=>{console.log(R);const fe={type:"doc",name:R,collection_name:"",status:"uploading",url:R,error:""};try{t(18,ie=[...ie,fe]);const _e=await Bc(localStorage.token,"",R);_e&&(fe.status="uploaded",fe.collection_name=_e.collection_name,fe.file={..._e.file,...fe.file},t(18,ie),t(0,M))}catch(_e){t(18,ie=ie.filter(We=>We.name!==R)),ht.error(JSON.stringify(_e))}},rt=async R=>{console.log(R);const fe={type:"doc",name:R,collection_name:"",status:"uploading",context:"full",url:R,error:""};try{t(18,ie=[...ie,fe]);const _e=await Lc(localStorage.token,R);_e&&(fe.status="uploaded",fe.collection_name=_e.collection_name,fe.file={..._e.file,...fe.file},t(18,ie),t(0,M))}catch(_e){t(18,ie=ie.filter(We=>We.name!==R)),ht.error(`${_e}`)}},tt=async()=>{var _e,We,pe,Fe;if(h.url.searchParams.get("models"))t(1,I=(_e=h.url.searchParams.get("models"))==null?void 0:_e.split(","));else if(h.url.searchParams.get("model")){const we=(We=h.url.searchParams.get("model"))==null?void 0:We.split(",");if(we.length===1)if(a.find(ct=>ct.id===we[0]))t(1,I=we);else{const ct=document.getElementById("model-selector-0-button");if(ct){ct.click(),await xe();const bt=document.getElementById("model-search-input");bt&&(bt.focus(),bt.value=we[0],bt.dispatchEvent(new Event("input")))}}else t(1,I=we)}else sessionStorage.selectedModels?(t(1,I=JSON.parse(sessionStorage.selectedModels)),sessionStorage.removeItem("selectedModels")):r!=null&&r.models?t(1,I=r==null?void 0:r.models):d!=null&&d.default_models&&(console.log((d==null?void 0:d.default_models.split(","))??""),t(1,I=d==null?void 0:d.default_models.split(",")));t(1,I=I.filter(we=>a.map(Be=>Be.id).includes(we))),(I.length===0||I.length===1&&I[0]==="")&&(a.length>0?t(1,I=[a[0].id]):t(1,I=[""])),await qt.set(!1),await Dn.set(!1),await Jn.set(!1),await Hn.set(!1),h.url.pathname.includes("/c/")&&window.history.replaceState(G.state,"","/"),t(6,L=!0),await qn.set(""),await ro.set(""),t(15,G={messages:{},currentId:null}),Ae(),t(17,Se=[]),t(19,ze={}),h.url.searchParams.get("youtube")&&rt(`https://www.youtube.com/watch?v=${h.url.searchParams.get("youtube")}`),h.url.searchParams.get("web-search")==="true"&&t(13,Z=!0),h.url.searchParams.get("image-generation")==="true"&&t(12,F=!0),h.url.searchParams.get("tools")?t(11,X=(pe=h.url.searchParams.get("tools"))==null?void 0:pe.split(",").map(we=>we.trim()).filter(we=>we)):h.url.searchParams.get("tool-ids")&&t(11,X=(Fe=h.url.searchParams.get("tool-ids"))==null?void 0:Fe.split(",").map(we=>we.trim()).filter(we=>we)),h.url.searchParams.get("call")==="true"&&(Dn.set(!0),qt.set(!0)),h.url.searchParams.get("q")&&(t(16,de=h.url.searchParams.get("q")??""),de&&(await xe(),_t(de))),t(1,I=I.map(we=>a.map(Be=>Be.id).includes(we)?we:""));const R=await As(localStorage.token);R?Un.set(R.ui):Un.set(JSON.parse(localStorage.getItem("settings")??"{}"));const fe=document.getElementById("chat-input");setTimeout(()=>fe==null?void 0:fe.focus(),0)},et=async()=>{if(qn.set(M),x=await $o(localStorage.token,s).catch(async R=>(await Fo("/"),null)),x){await Hc(localStorage.token,s).catch(async fe=>[]);const R=x.chat;if(R){console.log(R),t(1,I=((R==null?void 0:R.models)??void 0)!==void 0?R.models:[R.models??""]),t(15,G=((R==null?void 0:R.history)??void 0)!==void 0?R.history:Pc(R.messages)),ro.set(R.title);const fe=await As(localStorage.token);return fe?await Un.set(fe.ui):await Un.set(JSON.parse(localStorage.getItem("settings")??"{}")),t(19,ze=(R==null?void 0:R.params)??{}),t(17,Se=(R==null?void 0:R.files)??[]),t(6,L=!0),await xe(),G.currentId&&t(15,G.messages[G.currentId].done=!0,G),await xe(),!0}else return null}},$e=async()=>{await xe(),W&&t(7,W.scrollTop=W.scrollHeight,W)},gt=async(R,fe,_e,We,pe=null)=>{const Fe=_n(G,We),we=await jc(localStorage.token,fe,{model:_e,messages:Fe.map(Be=>({id:Be.id,role:Be.role,content:Be.content,info:Be.info?Be.info:void 0,timestamp:Be.timestamp,...Be.sources?{sources:Be.sources}:{}})),...pe?{event:pe}:{},model_item:a.find(Be=>Be.id===_e),chat_id:R,session_id:c==null?void 0:c.id,id:We}).catch(Be=>(ht.error(`${Be}`),Fe.at(-1).error={content:Be},null));if(we!==null&&we.messages)for(const Be of we.messages)t(15,G.messages[Be.id]={...G.messages[Be.id],...G.messages[Be.id].content!==Be.content?{originalContent:G.messages[Be.id].content}:{},...Be},G);s==R&&(o||(x=await Hs(localStorage.token,R,{models:I,messages:Fe,history:G,params:ze,files:Se}),_l.set(1),await bl.set(await Bl(localStorage.token,n))))},jt=async R=>{if(t(16,de=""),I.length===0)ht.error(i.t("Model not selected"));else{const fe=I[0],_e=a.filter(bt=>bt.id===fe).at(0),We=_n(G,G.currentId),pe=We.length!==0?We.at(-1):null,Fe=Pn(),we=Pn(),Be={id:Fe,parentId:pe?pe.id:null,childrenIds:[we],role:"user",content:R||`[PROMPT] ${Fe}`,timestamp:Math.floor(Date.now()/1e3)},ct={id:we,parentId:Fe,childrenIds:[],role:"assistant",content:`[RESPONSE] ${we}`,done:!0,model:fe,modelName:_e.name??_e.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3)};pe&&(pe.childrenIds.push(Fe),t(15,G.messages[pe.id]=pe,G)),t(15,G.messages[Fe]=Be,G),t(15,G.messages[we]=ct,G),t(15,G.currentId=we,G),await xe(),L&&$e(),We.length===0?await ce(G):await Ue(s,G)}},Pt=async({modelId:R,parentId:fe,messages:_e})=>{const We=a.filter(we=>we.id===R).at(0);let pe=G.messages[fe],Fe=pe?pe.id:null;for(const we of _e){let Be=Pn();if(we.role==="user"){const ct={id:Be,parentId:Fe,childrenIds:[],timestamp:Math.floor(Date.now()/1e3),...we};pe&&(pe.childrenIds.push(Be),t(15,G.messages[pe.id]=pe,G)),t(15,G.messages[Be]=ct,G),pe=ct,Fe=Be}else{const ct={id:Be,parentId:Fe,childrenIds:[],done:!0,model:We.id,modelName:We.name??We.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3),...we};pe&&(pe.childrenIds.push(Be),t(15,G.messages[pe.id]=pe,G)),t(15,G.messages[Be]=ct,G),pe=ct,Fe=Be}}t(15,G.currentId=Fe,G),await xe(),L&&$e(),_e.length===0?await ce(G):await Ue(s,G)},_t=async(R,{_raw:fe=!1}={})=>{var bt,ft,Ct;console.log("ðŸš€ submitPrompt",R,s),console.log("ðŸ“‹ Current history IDs:",{currentId:G.currentId,messagesCount:Object.keys(G.messages).length});const _e=_n(G,G.currentId);_e&&console.log("ðŸ“‹ Last message:",_e.length>0?{role:_e[_e.length-1].role,content:_e[_e.length-1].content.slice(0,50)+"..."}:"No messages");const We=I.map(It=>a.map(yn=>yn.id).includes(It)?It:"");if(JSON.stringify(I)!==JSON.stringify(We)&&t(1,I=We),R===""&&ie.length===0){ht.error(i.t("Please enter a prompt"));return}if(I.includes("")){ht.error(i.t("Model not selected"));return}if(_e.length!=0&&_e.at(-1).done!=!0)return;if(_e.length!=0&&_e.at(-1).error&&!_e.at(-1).content){ht.error(i.t("Oops! There was an error in the previous response."));return}if(ie.length>0&&ie.filter(It=>It.type!=="image"&&It.status==="uploading").length>0){ht.error(i.t("Oops! There are files still uploading. Please wait for the upload to complete."));return}if((((bt=d==null?void 0:d.file)==null?void 0:bt.max_count)??null)!==null&&ie.length+Se.length>((ft=d==null?void 0:d.file)==null?void 0:ft.max_count)){ht.error(i.t("You can only chat with a maximum of {{maxCount}} file(s) at a time.",{maxCount:(Ct=d==null?void 0:d.file)==null?void 0:Ct.max_count}));return}t(16,de="");const pe=document.getElementById("chat-input");pe&&(await xe(),pe.style.height="",pe.style.height=Math.min(pe.scrollHeight,320)+"px");const Fe=JSON.parse(JSON.stringify(ie));Se.push(...Fe.filter(It=>["doc","file","collection"].includes(It.type))),t(17,Se=Se.filter((It,yn,zn)=>zn.findIndex(fn=>JSON.stringify(fn)===JSON.stringify(It))===yn)),t(18,ie=[]),t(16,de="");let we=Pn(),Be={id:we,parentId:_e.length!==0?_e.at(-1).id:null,childrenIds:[],role:"user",content:R,files:Fe.length>0?Fe:void 0,timestamp:Math.floor(Date.now()/1e3),models:I};t(15,G.messages[we]=Be,G),t(15,G.currentId=we,G),_e.length!==0&&G.messages[_e.at(-1).id].childrenIds.push(we);const ct=document.getElementById("chat-input");ct==null||ct.focus(),me(),await Ht(G,R,we,{newChat:!0})},Ot=async(R,fe,_e,We)=>{var It,yn,zn,fn,Mt,Et,nl,zl,Nl,ll,pn,ol,Pl,sl,Ol,rl,Hl,il,Al;console.log("ðŸ”Œ sendPromptSocket:",{modelId:fe.id,responseMessageId:_e,chatId:We});const pe=R.messages[_e],Fe=R.messages[pe.parentId];let we=JSON.parse(JSON.stringify(Se));we.push(...((Fe==null?void 0:Fe.files)??[]).filter(st=>["doc","file","collection"].includes(st.type)),...((pe==null?void 0:pe.files)??[]).filter(st=>["web_search_results"].includes(st.type))),we=we.filter((st,Gn,In)=>In.findIndex(Rn=>JSON.stringify(Rn)===JSON.stringify(st))===Gn),$e(),V.dispatchEvent(new CustomEvent("chat:start",{detail:{id:_e}})),await xe();const ct=await(async()=>{if(r!=null&&r.userLocation)try{return await Uc(localStorage.token)}catch(st){console.error(st);return}})();console.log("Sending userAPIKey to backend:",u?"Present":"Empty/None"),pe.content="",((r==null?void 0:r.processingMessage)??!1)&&(pe.content=r.processingMessage===!0?"...":r.processingMessage);const bt=((yn=(It=fe==null?void 0:fe.info)==null?void 0:It.params)==null?void 0:yn.stream_response)??((zn=r==null?void 0:r.params)==null?void 0:zn.stream_response)??(ze==null?void 0:ze.stream_response)??!0;let ft=[ze!=null&&ze.system||r.system||((pe==null?void 0:pe.userContext)??null)?{role:"system",content:`${Vc((ze==null?void 0:ze.system)??(r==null?void 0:r.system)??"",f.name,ct,u)}${(pe==null?void 0:pe.userContext)??null?`

User Context:
${(pe==null?void 0:pe.userContext)??""}`:""}`}:void 0,..._n(R,_e).map(st=>({...st,content:zc(st.content,["reasoning","code_interpreter"])}))].filter(Boolean);ft=ft.map((st,Gn,In)=>{var Rn,Ll,al;return{role:st.role,...((Rn=st.files)==null?void 0:Rn.filter(Xn=>Xn.type==="image").length)>0&&st.role==="user"?{content:[{type:"text",text:((Ll=st==null?void 0:st.merged)==null?void 0:Ll.content)??st.content},...st.files.filter(Xn=>Xn.type==="image").map(Xn=>({type:"image_url",image_url:{url:Xn.url}}))]}:{content:((al=st==null?void 0:st.merged)==null?void 0:al.content)??st.content}}}).filter(st=>{var Gn;return(st==null?void 0:st.role)==="user"||((Gn=st==null?void 0:st.content)==null?void 0:Gn.trim())});const Ct=await Ac(localStorage.token,{stream:bt,model:fe.id,messages:ft,params:{...r==null?void 0:r.params,...ze,format:r.requestFormat??void 0,keep_alive:r.keepAlive??void 0,stop:(ze==null?void 0:ze.stop)??((fn=r==null?void 0:r.params)==null?void 0:fn.stop)??void 0?((ze==null?void 0:ze.stop.split(",").map(st=>st.trim()))??r.params.stop).map(st=>decodeURIComponent(JSON.parse('"'+st.replace(/\"/g,'\\"')+'"'))):void 0},files:((we==null?void 0:we.length)??0)>0?we:void 0,tool_ids:X.length>0?X:void 0,features:{image_generation:(Mt=d==null?void 0:d.features)!=null&&Mt.enable_image_generation&&(f.role==="admin"||(nl=(Et=f==null?void 0:f.permissions)==null?void 0:Et.features)!=null&&nl.image_generation)?F:!1,code_interpreter:(zl=d==null?void 0:d.features)!=null&&zl.enable_code_interpreter&&(f.role==="admin"||(ll=(Nl=f==null?void 0:f.permissions)==null?void 0:Nl.features)!=null&&ll.code_interpreter)?ae:!1,web_search:(pn=d==null?void 0:d.features)!=null&&pn.enable_web_search&&(f.role==="admin"||(Pl=(ol=f==null?void 0:f.permissions)==null?void 0:ol.features)!=null&&Pl.web_search)?Z||((r==null?void 0:r.webSearch)??!1)==="always":!1},variables:(console.log("Sending userAPIKey to backend:",u?"Present":"Empty/None"),Nc(f.name,ct,u)),model_item:a.find(st=>st.id===fe.id),session_id:c==null?void 0:c.id,chat_id:We,id:_e,...!o&&(ft.length==1||ft.length==2&&((sl=ft.at(0))==null?void 0:sl.role)==="system"&&((Ol=ft.at(1))==null?void 0:Ol.role)==="user")&&(I[0]===fe.id||P!==void 0)?{background_tasks:{title_generation:((rl=r==null?void 0:r.title)==null?void 0:rl.auto)??!0,tags_generation:(r==null?void 0:r.autoTags)??!0}}:{},...bt&&(((Al=(il=(Hl=fe.info)==null?void 0:Hl.meta)==null?void 0:il.capabilities)==null?void 0:Al.usage)??!1)?{stream_options:{include_usage:!0}}:{}},`${mc}/api`).catch(st=>(ht.error(`${st}`),pe.error={content:st},pe.done=!0,t(15,G.messages[_e]=pe,G),t(15,G.currentId=_e,G),null));console.log(Ct),Ct&&(oe=Ct.task_id),await xe(),$e()},Ht=async(R,fe,_e,We={})=>{const{modelId:pe,modelIdx:Fe=0,newChat:we=!1}=We;let Be=s;if(we&&!o&&!Be){console.log("ðŸ†• Creating new chat for prompt");try{x=await Os(localStorage.token,{id:Be,title:i.t("New Chat"),models:I,system:r.system??void 0,params:ze,history:G,messages:_n(G,G.currentId),tags:[],timestamp:Date.now()}),Be=x.id,await qn.set(Be),await bl.set(await Bl(localStorage.token,n)),_l.set(1);try{window.history.pushState({},"",`/c/${Be}`)}catch(fn){console.error("âŒ Error updating URL:",fn)}}catch(fn){console.error("âŒ Error creating chat:",fn),Be=null}}const bt=_n(R,_e).at(-1),ft=Pn();let Ct;if(pe)Ct=a.find(fn=>fn.id===pe);else{const fn=((bt==null?void 0:bt.models)??I)[0];Ct=a.find(Mt=>Mt.id===fn)}if(!Ct){ht.error(i.t("Model not selected"));return}const It=Ct.id==="accounting_en"||Ct.id.includes("accounting");console.log(`ðŸ·ï¸ Model ${Ct.id} is agent model: ${It}`);const yn=It?i.t("Agent is helping..."):"",zn={id:ft,parentId:_e,childrenIds:[],role:"assistant",content:yn,model:Ct.id,modelName:(Ct==null?void 0:Ct.name)??Ct.id,modelIdx:Fe,timestamp:Math.floor(Date.now()/1e3),isAgentResponse:It,isLoading:It};return R.messages[ft]=zn,R.currentId=ft,R.messages[_e].childrenIds.push(ft),await xe(),L&&$e(),It&&At(ft),await Ot(R,Ct,ft,Be),ft},At=async R=>{const fe=[i.t("Agent is helping..."),i.t("Agent is processing your request..."),i.t("Agent is working on it..."),i.t("Agent is analyzing...")];let _e=0,We=0;const pe=()=>{const Fe=G.messages[R];if(!Fe||!Fe.isLoading||Fe.content&&Fe.content.length>30)return;const we=fe[_e],Be=".".repeat(We%4);t(15,G.messages[R].content=we+Be,G),t(15,G={...G}),We++,We%12===0&&(_e=(_e+1)%fe.length),setTimeout(pe,400)};pe()},Vt=()=>{if(oe&&Yc(localStorage.token,oe).catch(fe=>null)){oe=null;const fe=G.messages[G.currentId];fe.done=!0,t(15,G.messages[G.currentId]=fe,G),L&&$e()}},Lt=async(R,fe)=>{let _e=fe,We=Pn(),pe={id:We,parentId:R,childrenIds:[],role:"user",content:_e,models:I};R!==null&&t(15,G.messages[R].childrenIds=[...G.messages[R].childrenIds,We],G),t(15,G.messages[We]=pe,G),t(15,G.currentId=We,G),await xe(),await Ht(G,_e,We)},le=async R=>{if(console.log("regenerateResponse"),G.currentId){let fe=G.messages[R.parentId],_e=fe.content;((fe==null?void 0:fe.models)??[...I]).length==1?await Ht(G,_e,fe.id):await Ht(G,_e,fe.id,{modelId:R.model,modelIdx:R.modelIdx})}},Bt=async()=>{if(console.log("continueResponse"),JSON.parse(JSON.stringify(s)),G.currentId&&G.messages[G.currentId].done==!0){const R=G.messages[G.currentId];R.done=!1,await xe();const fe=a.filter(_e=>_e.id===((R==null?void 0:R.selectedModelId)??R.model)).at(0);fe&&await Ht(G,R.content,R.parentId,{modelId:fe.id,modelIdx:R.modelIdx})}},ut=async(R,fe,_e)=>{console.log("mergeResponses",R,fe);const We=G.messages[R],pe={status:!0,content:""};We.merged=pe,t(15,G.messages[R]=We,G);try{const[Fe,we]=await Kc(localStorage.token,We.model,G.messages[We.parentId].content,fe);if(Fe&&Fe.ok&&Fe.body){const Be=await nf(Fe.body,r.splitLargeChunks);for await(const ct of Be){const{value:bt,done:ft,sources:Ct,error:It,usage:yn}=ct;if(It||ft)break;pe.content==""&&bt==`
`||(pe.content+=bt,t(15,G.messages[R]=We,G),L&&$e())}await Ue(_e,G)}else console.error(Fe)}catch(Fe){console.error(Fe)}},ce=async R=>{let fe=s;return o?(fe="local",await qn.set("local")):(x=await Os(localStorage.token,{id:fe,title:i.t("New Chat"),models:I,system:r.system??void 0,params:ze,history:R,messages:_n(R,R.currentId),tags:[],timestamp:Date.now()}),fe=x.id,await qn.set(fe),await bl.set(await Bl(localStorage.token,n)),_l.set(1),window.history.replaceState(R.state,"",`/c/${fe}`)),await xe(),fe},Ue=async(R,fe)=>{s==R&&(o||(x=await Hs(localStorage.token,R,{models:I,history:fe,messages:_n(fe,fe.currentId),params:ze,files:Se}),_l.set(1),await bl.set(await Bl(localStorage.token,n))))},Ae=()=>{let R=Pn();const _e=localStorage.getItem("locale")==="zh-CN"?"æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„ä¼šè®¡åŠ©æ‰‹ã€‚è¯·å‘Šè¯‰æˆ‘æ‚¨éœ€è¦åˆ†æžçš„è´¢åŠ¡æ•°æ®æˆ–æœ‰ä»€ä¹ˆè´¢åŠ¡é—®é¢˜ã€‚":"Hello! I'm your accounting assistant. How can I help with your financial data analysis?";t(15,G.messages[R]={id:R,role:"assistant",content:_e,model:"Assistant",modelName:"Assistant",parentId:null,timestamp:Math.floor(Date.now()/1e3),childrenIds:[],done:!0},G),t(15,G.currentId=R,G)};function Ze(R){U=R,t(9,U)}const yt=R=>{R.detail?Qo(R.detail):Qo(!0)},vt=()=>{Qo(!1)};function St(R){Pe[R?"unshift":"push"](()=>{j=R,t(8,j)})}function Dt(R){I=R,t(1,I)}const cn=R=>R.dismissible?!JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]").includes(R.id):!0,Rt=R=>{const fe=R.detail;localStorage.setItem("dismissedBannerIds",JSON.stringify([fe,...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]")].filter(_e=>y.find(We=>We.id===_e))))};function Ut(R){G=R,t(15,G)}function Yt(R){L=R,t(6,L)}function Kt(R){de=R,t(16,de),t(0,M)}function en(R){Pe[R?"unshift":"push"](()=>{W=R,t(7,W)})}const un=R=>{t(6,L=W.scrollHeight-W.scrollTop<=W.clientHeight+5)},zt=R=>{R.prompt?localStorage.setItem(`chat-input-${s}`,JSON.stringify(R)):localStorage.removeItem(`chat-input-${s}`)};function kt(R){ie=R,t(18,ie),t(0,M)}function vn(R){de=R,t(16,de),t(0,M)}function mn(R){L=R,t(6,L)}function Y(R){X=R,t(11,X),t(0,M)}function Ee(R){F=R,t(12,F),t(0,M)}function Ye(R){ae=R,t(14,ae)}function ot(R){Z=R,t(13,Z),t(0,M)}function Ne(R){P=R,t(2,P)}const Xe=async R=>{const{type:fe,data:_e}=R.detail;fe==="web"?await Re(_e):fe==="youtube"?await rt(_e):fe==="google-drive"&&await re(_e)},pt=async R=>{(R.detail||ie.length>0)&&(await xe(),_t((r==null?void 0:r.richTextInput)??!0?R.detail.replaceAll(`

`,`
`):R.detail))};function it(R){ie=R,t(18,ie),t(0,M)}function Gt(R){de=R,t(16,de),t(0,M)}function tn(R){L=R,t(6,L)}function nn(R){X=R,t(11,X),t(0,M)}function ln(R){F=R,t(12,F),t(0,M)}function on(R){ae=R,t(14,ae)}function Ln(R){Z=R,t(13,Z),t(0,M)}function $n(R){P=R,t(2,P)}const wn=async R=>{const{type:fe,data:_e}=R.detail;fe==="web"?await Re(_e):fe==="youtube"&&await rt(_e)},Vn=async R=>{(R.detail||ie.length>0)&&(await xe(),_t((r==null?void 0:r.richTextInput)??!0?R.detail.replaceAll(`

`,`
`):R.detail))},Bn=(R,fe,_e,We)=>{const pe=a.find(Fe=>Fe.id===fe);return pe?[...R,pe]:R};function Kn(R){Pe[R?"unshift":"push"](()=>{H=R,t(5,H)})}function el(R){G=R,t(15,G)}function En(R){Se=R,t(17,Se)}function pl(R){ze=R,t(19,ze)}function tl(R){ie=R,t(18,ie),t(0,M)}function q(R){A=R,t(4,A)}return l.$$set=R=>{"chatIdProp"in R&&t(0,M=R.chatIdProp)},l.$$.update=()=>{l.$$.dirty[0]&6&&t(10,K=P!==void 0?[P.id]:I),l.$$.dirty[0]&1&&M&&(async()=>{if(t(3,S=!0),console.log(M),t(16,de=""),t(18,ie=[]),t(11,X=[]),t(13,Z=!1),t(12,F=!1),M&&await et()){if(await xe(),t(3,S=!1),localStorage.getItem(`chat-input-${M}`))try{const fe=JSON.parse(localStorage.getItem(`chat-input-${M}`));t(16,de=fe.prompt),t(18,ie=fe.files),t(11,X=fe.selectedToolIds),t(13,Z=fe.webSearchEnabled),t(12,F=fe.imageGenerationEnabled)}catch{}window.setTimeout(()=>$e(),0);const R=document.getElementById("chat-input");R==null||R.focus()}else await Fo("/")})(),l.$$.dirty[0]&3&&I&&M!==""&&me(),l.$$.dirty[0]&2&&I&&ue(),l.$$.dirty[0]&6&&(P||I)&&ue()},[M,I,P,S,A,H,L,W,j,U,K,X,F,Z,ae,G,de,Se,ie,ze,s,r,a,v,g,w,y,E,V,qe,re,Re,rt,tt,gt,jt,Pt,_t,Ht,Vt,Lt,le,Bt,ut,Ze,yt,vt,St,Dt,cn,Rt,Ut,Yt,Kt,en,un,zt,kt,vn,mn,Y,Ee,Ye,ot,Ne,Xe,pt,it,Gt,tn,nn,ln,on,Ln,$n,wn,Vn,Bn,Kn,el,En,pl,tl,q]}class Kb extends Oe{constructor(e){super(),He(this,e,b_,d_,Le,{chatIdProp:0},null,[-1,-1,-1,-1])}}function v_(l){let e,t,n,o=l[1].t("Keyboard shortcuts")+"",s,r,i,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,u,f,d,h,_,b=l[1].t("Open new chat")+"",v,g,w,y='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">O</div>',E,M,S,V=l[1].t("Focus chat input")+"",A,H,L,W='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Esc</div>',j,U,C,I=l[1].t("Copy last code block")+"",P,K,X,F='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">;</div>',Z,ae,x,G=l[1].t("Copy last response")+"",oe,de,Se,ie='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">C</div>',ze,me,ue,qe=l[1].t("Generate prompt pair")+"",je,ge,re,Re='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Enter</div>',rt,tt,et,$e,gt=l[1].t("Toggle settings")+"",jt,Pt,_t,Ot='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">.</div>',Ht,At,Vt,Lt=l[1].t("Toggle sidebar")+"",le,Bt,ut,ce='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">S</div>',Ue,Ae,Ze,yt=l[1].t("Delete chat")+"",vt,St,Dt,cn='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">âŒ«/Delete</div>',Rt,Ut,Yt,Kt=l[1].t("Show shortcuts")+"",en,un,zt,kt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',vn,mn,Y,Ee=l[1].t("Input commands")+"",Ye,ot,Ne,Xe,pt,it,Gt,tn=l[1].t("Attach file from knowledge")+"",nn,ln,on,Ln='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">#</div>',$n,wn,Vn,Bn=l[1].t("Add custom prompt")+"",Kn,el,En,pl='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',tl,q,R,fe=l[1].t("Talk to model")+"",_e,We,pe,Fe='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">@</div>',we,Be,ct,bt=l[1].t("Accept autocomplete generation / Jump to prompt variable")+"",ft,Ct,It,yn='<div class="h-fit py-1 px-2 flex items-center justify-center rounded-sm border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">TAB</div>',zn,fn;return{c(){e=N("div"),t=N("div"),n=N("div"),s=ke(o),r=Q(),i=N("button"),i.innerHTML=a,c=Q(),u=N("div"),f=N("div"),d=N("div"),h=N("div"),_=N("div"),v=ke(b),g=Q(),w=N("div"),w.innerHTML=y,E=Q(),M=N("div"),S=N("div"),A=ke(V),H=Q(),L=N("div"),L.innerHTML=W,j=Q(),U=N("div"),C=N("div"),P=ke(I),K=Q(),X=N("div"),X.innerHTML=F,Z=Q(),ae=N("div"),x=N("div"),oe=ke(G),de=Q(),Se=N("div"),Se.innerHTML=ie,ze=Q(),me=N("div"),ue=N("div"),je=ke(qe),ge=Q(),re=N("div"),re.innerHTML=Re,rt=Q(),tt=N("div"),et=N("div"),$e=N("div"),jt=ke(gt),Pt=Q(),_t=N("div"),_t.innerHTML=Ot,Ht=Q(),At=N("div"),Vt=N("div"),le=ke(Lt),Bt=Q(),ut=N("div"),ut.innerHTML=ce,Ue=Q(),Ae=N("div"),Ze=N("div"),vt=ke(yt),St=Q(),Dt=N("div"),Dt.innerHTML=cn,Rt=Q(),Ut=N("div"),Yt=N("div"),en=ke(Kt),un=Q(),zt=N("div"),zt.innerHTML=kt,vn=Q(),mn=N("div"),Y=N("div"),Ye=ke(Ee),ot=Q(),Ne=N("div"),Xe=N("div"),pt=N("div"),it=N("div"),Gt=N("div"),nn=ke(tn),ln=Q(),on=N("div"),on.innerHTML=Ln,$n=Q(),wn=N("div"),Vn=N("div"),Kn=ke(Bn),el=Q(),En=N("div"),En.innerHTML=pl,tl=Q(),q=N("div"),R=N("div"),_e=ke(fe),We=Q(),pe=N("div"),pe.innerHTML=Fe,we=Q(),Be=N("div"),ct=N("div"),ft=ke(bt),Ct=Q(),It=N("div"),It.innerHTML=yn,this.h()},l(Mt){e=z(Mt,"DIV",{class:!0});var Et=D(e);t=z(Et,"DIV",{class:!0});var nl=D(t);n=z(nl,"DIV",{class:!0});var zl=D(n);s=ye(zl,o),zl.forEach(p),r=J(nl),i=z(nl,"BUTTON",{class:!0,"data-svelte-h":!0}),at(i)!=="svelte-745w2y"&&(i.innerHTML=a),nl.forEach(p),c=J(Et),u=z(Et,"DIV",{class:!0});var Nl=D(u);f=z(Nl,"DIV",{class:!0});var ll=D(f);d=z(ll,"DIV",{class:!0});var pn=D(d);h=z(pn,"DIV",{class:!0});var ol=D(h);_=z(ol,"DIV",{class:!0});var Pl=D(_);v=ye(Pl,b),Pl.forEach(p),g=J(ol),w=z(ol,"DIV",{class:!0,"data-svelte-h":!0}),at(w)!=="svelte-1ykt4pq"&&(w.innerHTML=y),ol.forEach(p),E=J(pn),M=z(pn,"DIV",{class:!0});var sl=D(M);S=z(sl,"DIV",{class:!0});var Ol=D(S);A=ye(Ol,V),Ol.forEach(p),H=J(sl),L=z(sl,"DIV",{class:!0,"data-svelte-h":!0}),at(L)!=="svelte-9s7il5"&&(L.innerHTML=W),sl.forEach(p),j=J(pn),U=z(pn,"DIV",{class:!0});var rl=D(U);C=z(rl,"DIV",{class:!0});var Hl=D(C);P=ye(Hl,I),Hl.forEach(p),K=J(rl),X=z(rl,"DIV",{class:!0,"data-svelte-h":!0}),at(X)!=="svelte-1rhjj6y"&&(X.innerHTML=F),rl.forEach(p),Z=J(pn),ae=z(pn,"DIV",{class:!0});var il=D(ae);x=z(il,"DIV",{class:!0});var Al=D(x);oe=ye(Al,G),Al.forEach(p),de=J(il),Se=z(il,"DIV",{class:!0,"data-svelte-h":!0}),at(Se)!=="svelte-88t2mq"&&(Se.innerHTML=ie),il.forEach(p),ze=J(pn),me=z(pn,"DIV",{class:!0});var st=D(me);ue=z(st,"DIV",{class:!0});var Gn=D(ue);je=ye(Gn,qe),Gn.forEach(p),ge=J(st),re=z(st,"DIV",{class:!0,"data-svelte-h":!0}),at(re)!=="svelte-71xcgz"&&(re.innerHTML=Re),st.forEach(p),pn.forEach(p),rt=J(ll),tt=z(ll,"DIV",{class:!0});var In=D(tt);et=z(In,"DIV",{class:!0});var Rn=D(et);$e=z(Rn,"DIV",{class:!0});var Ll=D($e);jt=ye(Ll,gt),Ll.forEach(p),Pt=J(Rn),_t=z(Rn,"DIV",{class:!0,"data-svelte-h":!0}),at(_t)!=="svelte-sstb0e"&&(_t.innerHTML=Ot),Rn.forEach(p),Ht=J(In),At=z(In,"DIV",{class:!0});var al=D(At);Vt=z(al,"DIV",{class:!0});var Xn=D(Vt);le=ye(Xn,Lt),Xn.forEach(p),Bt=J(al),ut=z(al,"DIV",{class:!0,"data-svelte-h":!0}),at(ut)!=="svelte-shqiv6"&&(ut.innerHTML=ce),al.forEach(p),Ue=J(In),Ae=z(In,"DIV",{class:!0});var $l=D(Ae);Ze=z($l,"DIV",{class:!0});var ps=D(Ze);vt=ye(ps,yt),ps.forEach(p),St=J($l),Dt=z($l,"DIV",{class:!0,"data-svelte-h":!0}),at(Dt)!=="svelte-1czc2xm"&&(Dt.innerHTML=cn),$l.forEach(p),Rt=J(In),Ut=z(In,"DIV",{class:!0});var eo=D(Ut);Yt=z(eo,"DIV",{class:!0});var _s=D(Yt);en=ye(_s,Kt),_s.forEach(p),un=J(eo),zt=z(eo,"DIV",{class:!0,"data-svelte-h":!0}),at(zt)!=="svelte-10s6aob"&&(zt.innerHTML=kt),eo.forEach(p),In.forEach(p),ll.forEach(p),Nl.forEach(p),vn=J(Et),mn=z(Et,"DIV",{class:!0});var bs=D(mn);Y=z(bs,"DIV",{class:!0});var vs=D(Y);Ye=ye(vs,Ee),vs.forEach(p),bs.forEach(p),ot=J(Et),Ne=z(Et,"DIV",{class:!0});var ws=D(Ne);Xe=z(ws,"DIV",{class:!0});var ys=D(Xe);pt=z(ys,"DIV",{class:!0});var Zn=D(pt);it=z(Zn,"DIV",{class:!0});var to=D(it);Gt=z(to,"DIV",{class:!0});var ks=D(Gt);nn=ye(ks,tn),ks.forEach(p),ln=J(to),on=z(to,"DIV",{class:!0,"data-svelte-h":!0}),at(on)!=="svelte-npid8c"&&(on.innerHTML=Ln),to.forEach(p),$n=J(Zn),wn=z(Zn,"DIV",{class:!0});var no=D(wn);Vn=z(no,"DIV",{class:!0});var Es=D(Vn);Kn=ye(Es,Bn),Es.forEach(p),el=J(no),En=z(no,"DIV",{class:!0,"data-svelte-h":!0}),at(En)!=="svelte-1x4z9aw"&&(En.innerHTML=pl),no.forEach(p),tl=J(Zn),q=z(Zn,"DIV",{class:!0});var lo=D(q);R=z(lo,"DIV",{class:!0});var Is=D(R);_e=ye(Is,fe),Is.forEach(p),We=J(lo),pe=z(lo,"DIV",{class:!0,"data-svelte-h":!0}),at(pe)!=="svelte-1ia95ih"&&(pe.innerHTML=Fe),lo.forEach(p),we=J(Zn),Be=z(Zn,"DIV",{class:!0});var oo=D(Be);ct=z(oo,"DIV",{class:!0});var Ss=D(ct);ft=ye(Ss,bt),Ss.forEach(p),Ct=J(oo),It=z(oo,"DIV",{class:!0,"data-svelte-h":!0}),at(It)!=="svelte-1hbxzzi"&&(It.innerHTML=yn),oo.forEach(p),Zn.forEach(p),ys.forEach(p),ws.forEach(p),Et.forEach(p),this.h()},h(){m(n,"class","text-lg font-medium self-center"),m(i,"class","self-center"),m(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),m(_,"class","text-sm"),m(w,"class","flex space-x-1 text-xs"),m(h,"class","w-full flex justify-between items-center"),m(S,"class","text-sm"),m(L,"class","flex space-x-1 text-xs"),m(M,"class","w-full flex justify-between items-center"),m(C,"class","text-sm"),m(X,"class","flex space-x-1 text-xs"),m(U,"class","w-full flex justify-between items-center"),m(x,"class","text-sm"),m(Se,"class","flex space-x-1 text-xs"),m(ae,"class","w-full flex justify-between items-center"),m(ue,"class","text-sm"),m(re,"class","flex space-x-1 text-xs"),m(me,"class","w-full flex justify-between items-center"),m(d,"class","flex flex-col space-y-3 w-full self-start"),m($e,"class","text-sm"),m(_t,"class","flex space-x-1 text-xs"),m(et,"class","w-full flex justify-between items-center"),m(Vt,"class","text-sm"),m(ut,"class","flex space-x-1 text-xs"),m(At,"class","w-full flex justify-between items-center"),m(Ze,"class","text-sm"),m(Dt,"class","flex space-x-1 text-xs"),m(Ae,"class","w-full flex justify-between items-center"),m(Yt,"class","text-sm"),m(zt,"class","flex space-x-1 text-xs"),m(Ut,"class","w-full flex justify-between items-center"),m(tt,"class","flex flex-col space-y-3 w-full self-start"),m(f,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),m(u,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),m(Y,"class","text-lg font-medium self-center"),m(mn,"class","flex justify-between dark:text-gray-300 px-5"),m(Gt,"class","text-sm"),m(on,"class","flex space-x-1 text-xs"),m(it,"class","w-full flex justify-between items-center"),m(Vn,"class","text-sm"),m(En,"class","flex space-x-1 text-xs"),m(wn,"class","w-full flex justify-between items-center"),m(R,"class","text-sm"),m(pe,"class","flex space-x-1 text-xs"),m(q,"class","w-full flex justify-between items-center"),m(ct,"class","text-sm"),m(It,"class","flex space-x-1 text-xs"),m(Be,"class","w-full flex justify-between items-center"),m(pt,"class","flex flex-col space-y-3 w-full self-start"),m(Xe,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),m(Ne,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),m(e,"class","text-gray-700 dark:text-gray-100")},m(Mt,Et){B(Mt,e,Et),k(e,t),k(t,n),k(n,s),k(t,r),k(t,i),k(e,c),k(e,u),k(u,f),k(f,d),k(d,h),k(h,_),k(_,v),k(h,g),k(h,w),k(d,E),k(d,M),k(M,S),k(S,A),k(M,H),k(M,L),k(d,j),k(d,U),k(U,C),k(C,P),k(U,K),k(U,X),k(d,Z),k(d,ae),k(ae,x),k(x,oe),k(ae,de),k(ae,Se),k(d,ze),k(d,me),k(me,ue),k(ue,je),k(me,ge),k(me,re),k(f,rt),k(f,tt),k(tt,et),k(et,$e),k($e,jt),k(et,Pt),k(et,_t),k(tt,Ht),k(tt,At),k(At,Vt),k(Vt,le),k(At,Bt),k(At,ut),k(tt,Ue),k(tt,Ae),k(Ae,Ze),k(Ze,vt),k(Ae,St),k(Ae,Dt),k(tt,Rt),k(tt,Ut),k(Ut,Yt),k(Yt,en),k(Ut,un),k(Ut,zt),k(e,vn),k(e,mn),k(mn,Y),k(Y,Ye),k(e,ot),k(e,Ne),k(Ne,Xe),k(Xe,pt),k(pt,it),k(it,Gt),k(Gt,nn),k(it,ln),k(it,on),k(pt,$n),k(pt,wn),k(wn,Vn),k(Vn,Kn),k(wn,el),k(wn,En),k(pt,tl),k(pt,q),k(q,R),k(R,_e),k(q,We),k(q,pe),k(pt,we),k(pt,Be),k(Be,ct),k(ct,ft),k(Be,Ct),k(Be,It),zn||(fn=De(i,"click",l[3]),zn=!0)},p(Mt,Et){Et&2&&o!==(o=Mt[1].t("Keyboard shortcuts")+"")&&Ce(s,o),Et&2&&b!==(b=Mt[1].t("Open new chat")+"")&&Ce(v,b),Et&2&&V!==(V=Mt[1].t("Focus chat input")+"")&&Ce(A,V),Et&2&&I!==(I=Mt[1].t("Copy last code block")+"")&&Ce(P,I),Et&2&&G!==(G=Mt[1].t("Copy last response")+"")&&Ce(oe,G),Et&2&&qe!==(qe=Mt[1].t("Generate prompt pair")+"")&&Ce(je,qe),Et&2&&gt!==(gt=Mt[1].t("Toggle settings")+"")&&Ce(jt,gt),Et&2&&Lt!==(Lt=Mt[1].t("Toggle sidebar")+"")&&Ce(le,Lt),Et&2&&yt!==(yt=Mt[1].t("Delete chat")+"")&&Ce(vt,yt),Et&2&&Kt!==(Kt=Mt[1].t("Show shortcuts")+"")&&Ce(en,Kt),Et&2&&Ee!==(Ee=Mt[1].t("Input commands")+"")&&Ce(Ye,Ee),Et&2&&tn!==(tn=Mt[1].t("Attach file from knowledge")+"")&&Ce(nn,tn),Et&2&&Bn!==(Bn=Mt[1].t("Add custom prompt")+"")&&Ce(Kn,Bn),Et&2&&fe!==(fe=Mt[1].t("Talk to model")+"")&&Ce(_e,fe),Et&2&&bt!==(bt=Mt[1].t("Accept autocomplete generation / Jump to prompt variable")+"")&&Ce(ft,bt)},d(Mt){Mt&&p(e),zn=!1,fn()}}}function w_(l){let e,t,n;function o(r){l[4](r)}let s={$$slots:{default:[v_]},$$scope:{ctx:l}};return l[0]!==void 0&&(s.show=l[0]),e=new ku({props:s}),Pe.push(()=>Ge(e,"show",o)),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,i){ee(e,r,i),n=!0},p(r,[i]){const a={};i&35&&(a.$$scope={dirty:i,ctx:r}),!t&&i&1&&(t=!0,a.show=r[0],Ke(()=>t=!1)),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function y_(l,e,t){let n;const o=Nt("i18n");se(l,o,a=>t(1,n=a));let{show:s=!1}=e;const r=()=>{t(0,s=!1)};function i(a){s=a,t(0,s)}return l.$$set=a=>{"show"in a&&t(0,s=a.show)},[s,n,o,r,i]}class k_ extends Oe{constructor(e){super(),He(this,e,y_,w_,Le,{show:0})}}function E_(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=D(e);t=be(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),k(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:Ie,o:Ie,d(n){n&&p(e)}}}function I_(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class S_ extends Oe{constructor(e){super(),He(this,e,I_,E_,Le,{className:0,strokeWidth:1})}}function D_(l){let e,t;return{c(){e=ve("svg"),t=ve("path"),this.h()},l(n){e=be(n,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var o=D(e);t=be(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),D(t).forEach(p),o.forEach(p),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7Zm5.01 1H5v2.01h2.01V8Zm3 0H8v2.01h2.01V8Zm3 0H11v2.01h2.01V8Zm3 0H14v2.01h2.01V8Zm3 0H17v2.01h2.01V8Zm-12 3H5v2.01h2.01V11Zm3 0H8v2.01h2.01V11Zm3 0H11v2.01h2.01V11Zm3 0H14v2.01h2.01V11Zm3 0H17v2.01h2.01V11Zm-12 3H5v2.01h2.01V14ZM8 14l-.001 2 8.011.01V14H8Zm11.01 0H17v2.01h2.01V14Z"),m(t,"clip-rule","evenodd"),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","currentColor"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"class",l[0])},m(n,o){B(n,e,o),k(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:Ie,o:Ie,d(n){n&&p(e)}}}function C_(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class M_ extends Oe{constructor(e){super(),He(this,e,C_,D_,Le,{className:0,strokeWidth:1})}}function T_(l){let e;const t=l[5].default,n=Jt(t,l,l[9],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&512)&&Qt(n,t,o,o[9],e?$t(t,o[9],s,null):xt(o[9]),null)},i(o){e||(T(n,o),e=!0)},o(o){O(n,o),e=!1},d(o){n&&n.d(o)}}}function V_(l){let e,t,n,o=l[2].t("Documentation")+"",s,r;return e=new S_({props:{className:"size-5"}}),{c(){te(e.$$.fragment),t=Q(),n=N("div"),s=ke(o),this.h()},l(i){ne(e.$$.fragment,i),t=J(i),n=z(i,"DIV",{class:!0});var a=D(n);s=ye(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(i,a){ee(e,i,a),B(i,t,a),B(i,n,a),k(n,s),r=!0},p(i,a){(!r||a&4)&&o!==(o=i[2].t("Documentation")+"")&&Ce(s,o)},i(i){r||(T(e.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),r=!1},d(i){i&&(p(t),p(n)),$(e,i)}}}function z_(l){let e,t,n,o=l[2].t("Keyboard shortcuts")+"",s,r;return e=new M_({props:{className:"size-5"}}),{c(){te(e.$$.fragment),t=Q(),n=N("div"),s=ke(o),this.h()},l(i){ne(e.$$.fragment,i),t=J(i),n=z(i,"DIV",{class:!0});var a=D(n);s=ye(a,o),a.forEach(p),this.h()},h(){m(n,"class","flex items-center")},m(i,a){ee(e,i,a),B(i,t,a),B(i,n,a),k(n,s),r=!0},p(i,a){(!r||a&4)&&o!==(o=i[2].t("Keyboard shortcuts")+"")&&Ce(s,o)},i(i){r||(T(e.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),r=!1},d(i){i&&(p(t),p(n)),$(e,i)}}}function N_(l){let e,t,n,o;return e=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[V_]},$$scope:{ctx:l}}}),e.$on("click",l[6]),n=new dn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[z_]},$$scope:{ctx:l}}}),n.$on("click",l[7]),{c(){te(e.$$.fragment),t=Q(),te(n.$$.fragment)},l(s){ne(e.$$.fragment,s),t=J(s),ne(n.$$.fragment,s)},m(s,r){ee(e,s,r),B(s,t,r),ee(n,s,r),o=!0},p(s,r){const i={};r&516&&(i.$$scope={dirty:r,ctx:s}),e.$set(i);const a={};r&516&&(a.$$scope={dirty:r,ctx:s}),n.$set(a)},i(s){o||(T(e.$$.fragment,s),T(n.$$.fragment,s),o=!0)},o(s){O(e.$$.fragment,s),O(n.$$.fragment,s),o=!1},d(s){s&&p(t),$(e,s),$(n,s)}}}function P_(l){let e,t,n;return t=new zo({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:4,side:"top",align:"end",transition:Jl,$$slots:{default:[N_]},$$scope:{ctx:l}}}),{c(){e=N("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=D(e);ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),ee(t,e,null),n=!0},p(o,s){const r={};s&517&&(r.$$scope={dirty:s,ctx:o}),t.$set(r)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&p(e),$(t)}}}function O_(l){let e,t;return e=new Vo({props:{$$slots:{content:[P_],default:[T_]},$$scope:{ctx:l}}}),e.$on("change",l[8]),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,[o]){const s={};o&517&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function H_(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const r=Nt("i18n");se(l,r,h=>t(2,n=h));let{showDocsHandler:i}=e,{showShortcutsHandler:a}=e,{onClose:c=()=>{}}=e;const u=()=>{window.open("https://docs.openwebui.com","_blank")},f=()=>{a()},d=h=>{h.detail===!1&&c()};return l.$$set=h=>{"showDocsHandler"in h&&t(4,i=h.showDocsHandler),"showShortcutsHandler"in h&&t(0,a=h.showShortcutsHandler),"onClose"in h&&t(1,c=h.onClose),"$$scope"in h&&t(9,s=h.$$scope)},[a,c,n,r,i,o,u,f,d,s]}class A_ extends Oe{constructor(e){super(),He(this,e,H_,O_,Le,{showDocsHandler:4,showShortcutsHandler:0,onClose:1})}}function L_(l){let e,t="?";return{c(){e=N("button"),e.textContent=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-141cz2e"&&(e.textContent=t),this.h()},h(){m(e,"class","text-gray-600 dark:text-gray-300 bg-gray-300/20 size-4 flex items-center justify-center text-[0.7rem] rounded-full")},m(n,o){B(n,e,o)},p:Ie,d(n){n&&p(e)}}}function B_(l){let e,t;return e=new Zt({props:{content:l[1].t("Help"),placement:"left",$$slots:{default:[L_]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,o){ee(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.content=n[1].t("Help")),o&128&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function R_(l){let e,t,n,o,s,r,i,a,c,u;o=new A_({props:{showDocsHandler:l[4],showShortcutsHandler:l[5],$$slots:{default:[B_]},$$scope:{ctx:l}}});function f(h){l[6](h)}let d={};return l[0]!==void 0&&(d.show=l[0]),r=new k_({props:d}),Pe.push(()=>Ge(r,"show",f)),{c(){e=N("div"),t=N("button"),n=Q(),te(o.$$.fragment),s=Q(),te(r.$$.fragment),this.h()},l(h){e=z(h,"DIV",{class:!0});var _=D(e);t=z(_,"BUTTON",{id:!0,class:!0}),D(t).forEach(p),n=J(_),ne(o.$$.fragment,_),_.forEach(p),s=J(h),ne(r.$$.fragment,h),this.h()},h(){m(t,"id","show-shortcuts-button"),m(t,"class","hidden"),m(e,"class","hidden lg:flex fixed bottom-0 right-0 px-1 py-1 z-20")},m(h,_){B(h,e,_),k(e,t),k(e,n),ee(o,e,null),B(h,s,_),ee(r,h,_),a=!0,c||(u=De(t,"click",l[3]),c=!0)},p(h,[_]){const b={};_&1&&(b.showDocsHandler=h[4]),_&1&&(b.showShortcutsHandler=h[5]),_&130&&(b.$$scope={dirty:_,ctx:h}),o.$set(b);const v={};!i&&_&1&&(i=!0,v.show=h[0],Ke(()=>i=!1)),r.$set(v)},i(h){a||(T(o.$$.fragment,h),T(r.$$.fragment,h),a=!0)},o(h){O(o.$$.fragment,h),O(r.$$.fragment,h),a=!1},d(h){h&&(p(e),p(s)),$(o),$(r,h),c=!1,u()}}}function U_(l,e,t){let n;const o=Nt("i18n");se(l,o,u=>t(1,n=u));let s=!1;const r=()=>{t(0,s=!s)},i=()=>{t(0,s=!s)},a=()=>{t(0,s=!s)};function c(u){s=u,t(0,s)}return[s,n,o,r,i,a,c]}class Gb extends Oe{constructor(e){super(),He(this,e,U_,R_,Le,{})}}export{Kb as C,Gb as H};
//# sourceMappingURL=BHDruy0K.js.map
