import{a as ot,c as H,g as J}from"./BosuxZz1.js";import{d as B,r as it}from"./Bi9B0bt2.js";import{b as G}from"./CisIfe-u.js";let z;const ct=new Uint8Array(16);function lt(){if(!z&&(z=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!z))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return z(ct)}const E=[];for(let t=0;t<256;++t)E.push((t+256).toString(16).slice(1));function ht(t,e=0){return E[t[e+0]]+E[t[e+1]]+E[t[e+2]]+E[t[e+3]]+"-"+E[t[e+4]]+E[t[e+5]]+"-"+E[t[e+6]]+E[t[e+7]]+"-"+E[t[e+8]]+E[t[e+9]]+"-"+E[t[e+10]]+E[t[e+11]]+E[t[e+12]]+E[t[e+13]]+E[t[e+14]]+E[t[e+15]]}const ut=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),q={randomUUID:ut};function ft(t,e,r){if(q.randomUUID&&!e&&!t)return q.randomUUID();t=t||{};const n=t.random||(t.rng||lt)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ht(n)}var dt={exports:{}};const xt={},pt=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"})),Z=ot(pt);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.10.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r=typeof window=="object",n=r?window:{};n.JS_SHA256_NO_WINDOW&&(r=!1);var h=!r&&typeof self=="object",u=!n.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;u?n=H:h&&(n=self);var x=!n.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,p=!n.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",a="0123456789abcdef".split(""),v=[-2147483648,8388608,32768,128],y=[24,16,8,0],T=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],I=["hex","array","digest","arrayBuffer"],b=[];(n.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"}),p&&(n.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(s){return typeof s=="object"&&s.buffer&&s.buffer.constructor===ArrayBuffer});var N=function(s,l){return function(f){return new A(l,!0).update(f)[s]()}},_=function(s){var l=N("hex",s);u&&(l=M(l,s)),l.create=function(){return new A(s)},l.update=function(d){return l.create().update(d)};for(var f=0;f<I.length;++f){var c=I[f];l[c]=N(c,s)}return l},M=function(s,l){var f=Z,c=Z.Buffer,d=l?"sha224":"sha256",i;c.from&&!n.JS_SHA256_NO_BUFFER_FROM?i=c.from:i=function(o){return new c(o)};var g=function(o){if(typeof o=="string")return f.createHash(d).update(o,"utf8").digest("hex");if(o==null)throw new Error(e);return o.constructor===ArrayBuffer&&(o=new Uint8Array(o)),Array.isArray(o)||ArrayBuffer.isView(o)||o.constructor===c?f.createHash(d).update(i(o)).digest("hex"):s(o)};return g},O=function(s,l){return function(f,c){return new k(f,l,!0).update(c)[s]()}},L=function(s){var l=O("hex",s);l.create=function(d){return new k(d,s)},l.update=function(d,i){return l.create(d).update(i)};for(var f=0;f<I.length;++f){var c=I[f];l[c]=O(c,s)}return l};function A(s,l){l?(b[0]=b[16]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=b[9]=b[10]=b[11]=b[12]=b[13]=b[14]=b[15]=0,this.blocks=b):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=s}A.prototype.update=function(s){if(!this.finalized){var l,f=typeof s;if(f!=="string"){if(f==="object"){if(s===null)throw new Error(e);if(p&&s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(!Array.isArray(s)&&(!p||!ArrayBuffer.isView(s)))throw new Error(e)}else throw new Error(e);l=!0}for(var c,d=0,i,g=s.length,o=this.blocks;d<g;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),l)for(i=this.start;d<g&&i<64;++d)o[i>>2]|=s[d]<<y[i++&3];else for(i=this.start;d<g&&i<64;++d)c=s.charCodeAt(d),c<128?o[i>>2]|=c<<y[i++&3]:c<2048?(o[i>>2]|=(192|c>>6)<<y[i++&3],o[i>>2]|=(128|c&63)<<y[i++&3]):c<55296||c>=57344?(o[i>>2]|=(224|c>>12)<<y[i++&3],o[i>>2]|=(128|c>>6&63)<<y[i++&3],o[i>>2]|=(128|c&63)<<y[i++&3]):(c=65536+((c&1023)<<10|s.charCodeAt(++d)&1023),o[i>>2]|=(240|c>>18)<<y[i++&3],o[i>>2]|=(128|c>>12&63)<<y[i++&3],o[i>>2]|=(128|c>>6&63)<<y[i++&3],o[i>>2]|=(128|c&63)<<y[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},A.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var s=this.blocks,l=this.lastByteIndex;s[16]=this.block,s[l>>2]|=v[l&3],this.block=s[16],l>=56&&(this.hashed||this.hash(),s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),s[14]=this.hBytes<<3|this.bytes>>>29,s[15]=this.bytes<<3,this.hash()}},A.prototype.hash=function(){var s=this.h0,l=this.h1,f=this.h2,c=this.h3,d=this.h4,i=this.h5,g=this.h6,o=this.h7,F=this.blocks,w,D,U,R,m,C,Y,$,V,K,P;for(w=16;w<64;++w)m=F[w-15],D=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,m=F[w-2],U=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,F[w]=F[w-16]+D+F[w-7]+U<<0;for(P=l&f,w=0;w<64;w+=4)this.first?(this.is224?($=300032,m=F[0]-1413257819,o=m-150054599<<0,c=m+24177077<<0):($=704751109,m=F[0]-210244248,o=m-1521486534<<0,c=m+143694565<<0),this.first=!1):(D=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),U=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),$=s&l,R=$^s&f^P,Y=d&i^~d&g,m=o+U+Y+T[w]+F[w],C=D+R,o=c+m<<0,c=m+C<<0),D=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),U=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),V=c&s,R=V^c&l^$,Y=o&d^~o&i,m=g+U+Y+T[w+1]+F[w+1],C=D+R,g=f+m<<0,f=m+C<<0,D=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),U=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),K=f&c,R=K^f&s^V,Y=g&o^~g&d,m=i+U+Y+T[w+2]+F[w+2],C=D+R,i=l+m<<0,l=m+C<<0,D=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),U=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),P=l&f,R=P^l&c^K,Y=i&g^~i&o,m=d+U+Y+T[w+3]+F[w+3],C=D+R,d=s+m<<0,s=m+C<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+s<<0,this.h1=this.h1+l<<0,this.h2=this.h2+f<<0,this.h3=this.h3+c<<0,this.h4=this.h4+d<<0,this.h5=this.h5+i<<0,this.h6=this.h6+g<<0,this.h7=this.h7+o<<0},A.prototype.hex=function(){this.finalize();var s=this.h0,l=this.h1,f=this.h2,c=this.h3,d=this.h4,i=this.h5,g=this.h6,o=this.h7,F=a[s>>28&15]+a[s>>24&15]+a[s>>20&15]+a[s>>16&15]+a[s>>12&15]+a[s>>8&15]+a[s>>4&15]+a[s&15]+a[l>>28&15]+a[l>>24&15]+a[l>>20&15]+a[l>>16&15]+a[l>>12&15]+a[l>>8&15]+a[l>>4&15]+a[l&15]+a[f>>28&15]+a[f>>24&15]+a[f>>20&15]+a[f>>16&15]+a[f>>12&15]+a[f>>8&15]+a[f>>4&15]+a[f&15]+a[c>>28&15]+a[c>>24&15]+a[c>>20&15]+a[c>>16&15]+a[c>>12&15]+a[c>>8&15]+a[c>>4&15]+a[c&15]+a[d>>28&15]+a[d>>24&15]+a[d>>20&15]+a[d>>16&15]+a[d>>12&15]+a[d>>8&15]+a[d>>4&15]+a[d&15]+a[i>>28&15]+a[i>>24&15]+a[i>>20&15]+a[i>>16&15]+a[i>>12&15]+a[i>>8&15]+a[i>>4&15]+a[i&15]+a[g>>28&15]+a[g>>24&15]+a[g>>20&15]+a[g>>16&15]+a[g>>12&15]+a[g>>8&15]+a[g>>4&15]+a[g&15];return this.is224||(F+=a[o>>28&15]+a[o>>24&15]+a[o>>20&15]+a[o>>16&15]+a[o>>12&15]+a[o>>8&15]+a[o>>4&15]+a[o&15]),F},A.prototype.toString=A.prototype.hex,A.prototype.digest=function(){this.finalize();var s=this.h0,l=this.h1,f=this.h2,c=this.h3,d=this.h4,i=this.h5,g=this.h6,o=this.h7,F=[s>>24&255,s>>16&255,s>>8&255,s&255,l>>24&255,l>>16&255,l>>8&255,l&255,f>>24&255,f>>16&255,f>>8&255,f&255,c>>24&255,c>>16&255,c>>8&255,c&255,d>>24&255,d>>16&255,d>>8&255,d&255,i>>24&255,i>>16&255,i>>8&255,i&255,g>>24&255,g>>16&255,g>>8&255,g&255];return this.is224||F.push(o>>24&255,o>>16&255,o>>8&255,o&255),F},A.prototype.array=A.prototype.digest,A.prototype.arrayBuffer=function(){this.finalize();var s=new ArrayBuffer(this.is224?28:32),l=new DataView(s);return l.setUint32(0,this.h0),l.setUint32(4,this.h1),l.setUint32(8,this.h2),l.setUint32(12,this.h3),l.setUint32(16,this.h4),l.setUint32(20,this.h5),l.setUint32(24,this.h6),this.is224||l.setUint32(28,this.h7),s};function k(s,l,f){var c,d=typeof s;if(d==="string"){var i=[],g=s.length,o=0,F;for(c=0;c<g;++c)F=s.charCodeAt(c),F<128?i[o++]=F:F<2048?(i[o++]=192|F>>6,i[o++]=128|F&63):F<55296||F>=57344?(i[o++]=224|F>>12,i[o++]=128|F>>6&63,i[o++]=128|F&63):(F=65536+((F&1023)<<10|s.charCodeAt(++c)&1023),i[o++]=240|F>>18,i[o++]=128|F>>12&63,i[o++]=128|F>>6&63,i[o++]=128|F&63);s=i}else if(d==="object"){if(s===null)throw new Error(e);if(p&&s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(!Array.isArray(s)&&(!p||!ArrayBuffer.isView(s)))throw new Error(e)}else throw new Error(e);s.length>64&&(s=new A(l,!0).update(s).array());var w=[],D=[];for(c=0;c<64;++c){var U=s[c]||0;w[c]=92^U,D[c]=54^U}A.call(this,l,f),this.update(D),this.oKeyPad=w,this.inner=!0,this.sharedMemory=f}k.prototype=new A,k.prototype.finalize=function(){if(A.prototype.finalize.call(this),this.inner){this.inner=!1;var s=this.array();A.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(s),A.prototype.finalize.call(this)}};var S=_();S.sha256=S,S.sha224=_(!0),S.sha256.hmac=L(),S.sha224.hmac=L(!0),x?t.exports=S:(n.sha256=S.sha256,n.sha224=S.sha224)})()})(dt);var X={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(H,function(){return function(r,n,h){n.prototype.isToday=function(){var u="YYYY-MM-DD",x=h();return this.format(u)===x.format(u)}}})})(X);var gt=X.exports;const Ft=J(gt);var Q={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(H,function(){return function(r,n,h){n.prototype.isYesterday=function(){var u="YYYY-MM-DD",x=h().subtract(1,"day");return this.format(u)===x.format(u)}}})})(Q);var mt=Q.exports;const yt=J(mt);var tt={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(H,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,h,u){var x=h.prototype,p=x.format;u.en.formats=r,x.format=function(a){a===void 0&&(a="YYYY-MM-DDTHH:mm:ssZ");var v=this.$locale().formats,y=function(T,I){return T.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(b,N,_){var M=_&&_.toUpperCase();return N||I[_]||r[_]||I[M].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(O,L,A){return L||A.slice(1)})})}(a,v===void 0?{}:v);return p.call(this,y)}}})})(tt);var vt=tt.exports;const bt=J(vt);var j=(t=>(t.PUNCTUATION="punctuation",t.PARAGRAPHS="paragraphs",t.NONE="none",t))(j||{});B.extend(it);B.extend(Ft);B.extend(yt);B.extend(bt);const Ot=(t,e,r,n)=>{const h=/{{char}}/gi,u=/{{user}}/gi,x=/{{VIDEO_FILE_ID_([a-f0-9-]+)}}/gi,p=/{{HTML_FILE_ID_([a-f0-9-]+)}}/gi;return r!=null&&(t=t.replace(h,r)),n!=null&&(t=t.replace(u,n)),t=t.replace(x,(a,v)=>`<video src="${`${G}/api/v1/files/${v}/content`}" controls></video>`),t=t.replace(p,(a,v)=>`<iframe src="${`${G}/api/v1/files/${v}/content/html`}" width="100%" frameborder="0" onload="this.style.height=(this.contentWindow.document.body.scrollHeight+20)+'px';"></iframe>`),Array.isArray(e)&&e.forEach((a,v)=>{const y=`\\[${v}\\]`,T=new RegExp(y,"g");t=t.replace(T,`<source_id data="${v}" title="${a}" />`)}),t},Bt=t=>t.replace(/<\|[a-z]*$/,"").replace(/<\|[a-z]+\|$/,"").replace(/<$/,"").replaceAll(/<\|[a-z]+\|>/g," ").replaceAll("<","&lt;").replaceAll(">","&gt;").trim(),$t=t=>t.trim();function Lt(t){return new DOMParser().parseFromString(t,"text/html").documentElement.textContent}const kt=t=>t.charAt(0).toUpperCase()+t.slice(1),Pt=t=>{let e="";return new TransformStream({transform(r,n){e+=r;const h=e.split(t);h.slice(0,-1).forEach(u=>n.enqueue(u)),e=h[h.length-1]},flush(r){e&&r.enqueue(e)}})},zt=t=>{const e={messages:{},currentId:null};let r=null,n=null;for(const h of t)n=ft(),r!==null&&(e.messages[r].childrenIds=[...e.messages[r].childrenIds,n]),e.messages[n]={...h,id:n,parentId:r,childrenIds:[]},r=n;return e.currentId=n,e},wt=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");t.height=1,t.width=1;const r=new ImageData(t.width,t.height),n=r.data;for(let u=0;u<r.data.length;u+=1)u%4!==3?n[u]=Math.floor(256*Math.random()):n[u]=255;e.putImageData(r,0,0);const h=e.getImageData(0,0,t.width,t.height).data;for(let u=0;u<h.length;u+=1)if(h[u]!==n[u])return console.log("canvasPixelTest: Wrong canvas pixel RGB value detected:",h[u],"at:",u,"expected:",n[u]),console.log("canvasPixelTest: Canvas blocking or spoofing is likely"),!1;return!0},jt=async(t,e,r)=>new Promise((n,h)=>{const u=new Image;u.onload=()=>{const x=document.createElement("canvas");let p=u.width,a=u.height;if(e&&r){if(p<=e&&a<=r){n(t);return}p/a>e/r?(a=Math.round(e*a/p),p=e):(p=Math.round(r*p/a),a=r)}else if(e){if(p<=e){n(t);return}a=Math.round(e*a/p),p=e}else if(r){if(a<=r){n(t);return}p=Math.round(r*p/a),a=r}x.width=p,x.height=a,x.getContext("2d").drawImage(u,0,0,p,a);const y=x.toDataURL();n(y)},u.onerror=x=>h(x),u.src=t}),Ht=t=>{const e=document.createElement("canvas"),r=e.getContext("2d");if(e.width=100,e.height=100,!wt())return console.log("generateInitialsImage: failed pixel test, fingerprint evasion is likely. Using default image."),"/user.png";r.fillStyle="#F39C12",r.fillRect(0,0,e.width,e.height),r.fillStyle="#FFFFFF",r.font="40px Helvetica",r.textAlign="center",r.textBaseline="middle";const n=t.trim(),h=n.length>0?n[0]+(n.split(" ").length>1?n[n.lastIndexOf(" ")+1]:""):"";return r.fillText(h.toUpperCase(),e.width/2,e.height/2),e.toDataURL()},Vt=t=>{const e=B(t);return B(),e.isToday()?`Today at ${e.format("LT")}`:e.isYesterday()?`Yesterday at ${e.format("LT")}`:`${e.format("L")} at ${e.format("LT")}`},Kt=async t=>{let e=!1;if(!navigator.clipboard){const r=document.createElement("textarea");r.value=t,r.style.top="0",r.style.left="0",r.style.position="fixed",document.body.appendChild(r),r.focus(),r.select();try{const h=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+h),e=!0}catch(n){console.error("Fallback: Oops, unable to copy",n)}return document.body.removeChild(r),e}return e=await navigator.clipboard.writeText(t).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(r=>(console.error("Async: Could not copy text: ",r),!1)),e},Jt=(t,e)=>e==="0.0.0"?!1:e.localeCompare(t,void 0,{numeric:!0,sensitivity:"case",caseFirst:"upper"})<0,Wt=t=>{const e=/\[([^\]]+)\]/g,r=[];let n;for(;(n=e.exec(t))!==null;)r.push({word:n[1],startIndex:n.index,endIndex:e.lastIndex-1});return r},Gt=(t,e)=>{console.log("inputString",t);const r=t.split(`
`),h=r.pop().split(" ");(h.at(-1)===e||e===""&&h.at(-1)==="\\#")&&h.pop();let u=h.join(" ");u!==""&&(u+=" ");const x=[...r,u].join(`
`);return console.log("resultString",x),x},qt=t=>"mapping"in t[0]?"openai":"webui",Zt=async(t=!1)=>{const e=await new Promise((h,u)=>{navigator.geolocation.getCurrentPosition(h,u)}).catch(h=>{throw console.error("Error getting user location:",h),h});if(!e)return"Location not available";const{latitude:r,longitude:n}=e.coords;return t?{latitude:r,longitude:n}:`${r.toFixed(3)}, ${n.toFixed(3)} (lat, long)`},At=t=>{var p,a,v,y,T,I,b,N;const e=t.mapping,r=[];let n="",h=null;for(const _ in e){const M=e[_];n=_;try{if(r.length==0&&(M.message==null||((p=M.message.content.parts)==null?void 0:p[0])==""&&M.message.content.text==null))continue;{const O={id:_,parentId:h,childrenIds:M.children||[],role:((v=(a=M.message)==null?void 0:a.author)==null?void 0:v.role)!=="user"?"assistant":"user",content:((I=(T=(y=M.message)==null?void 0:y.content)==null?void 0:T.parts)==null?void 0:I[0])||((N=(b=M.message)==null?void 0:b.content)==null?void 0:N.text)||"",model:"gpt-3.5-turbo",done:!0,context:null};r.push(O),h=n}}catch(O){console.log("Error with",M,`
Error:`,O)}}const u={};return r.forEach(_=>u[_.id]=_),{history:{currentId:n,messages:u},models:["gpt-3.5-turbo"],messages:r,options:{},timestamp:t.create_time,title:t.title??"New Chat"}},Et=t=>{const e=t.messages;if(e.length===0||e[e.length-1].childrenIds.length!==0||e[0].parentId!==null)return!1;for(const h of e)if(typeof h.content!="string")return!1;return!0},Xt=t=>{const e=[];let r=0;for(const n of t){const h=At(n);Et(h)?e.push({id:n.id,user_id:"",title:n.title,chat:h,timestamp:n.timestamp}):r++}return console.log(r,"Conversations could not be imported"),e},Qt=t=>{let e;try{e=new URL(t)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"},_t=t=>{const e=/[\uD800-\uDBFF][\uDC00-\uDFFF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g;return t.replace(e,"")},Dt=t=>t.replace(/(```[\s\S]*?```)/g,"").replace(/^\|.*\|$/gm,"").replace(/(?:\*\*|__)(.*?)(?:\*\*|__)/g,"$1").replace(/(?:[*_])(.*?)(?:[*_])/g,"$1").replace(/~~(.*?)~~/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/!?\[([^\]]*)\](?:\([^)]+\)|\[[^\]]*\])/g,"$1").replace(/^\[[^\]]+\]:\s*.*$/gm,"").replace(/^#{1,6}\s+/gm,"").replace(/^\s*[-*+]\s+/gm,"").replace(/^\s*(?:\d+\.)\s+/gm,"").replace(/^\s*>[> ]*/gm,"").replace(/^\s*:\s+/gm,"").replace(/\[\^[^\]]*\]/g,"").replace(/[-*_~]/g,"").replace(/\n{2,}/g,`
`),W=t=>Dt(_t(t.trim())),Ut=(t,e)=>{for(const r of e)t=t.replace(new RegExp(`<details\\s+type="${r}"[^>]*>.*?<\\/details>`,"gis"),"");return t},et=/```[\s\S]*?```/g,Mt=t=>{const e=[];let r=0;t=t.replace(et,h=>{const u=`\0${r}\0`;return e[r++]=h,u});let n=t.split(new RegExp("(?<=[.!?])\\s+"));return n=n.map(h=>h.replace(/\u0000(\d+)\u0000/g,(u,x)=>e[x])),n.map(W).filter(Boolean)},Tt=t=>{const e=[];let r=0;t=t.replace(et,h=>{const u=`\0${r}\0`;return e[r++]=h,u});let n=t.split(/\n+/);return n=n.map(h=>h.replace(/\u0000(\d+)\u0000/g,(u,x)=>e[x])),n.map(W).filter(Boolean)},It=t=>Mt(t).reduce((e,r)=>{const n=e.length-1;if(n>=0){const h=e[n],u=h.split(/\s+/).length,x=h.length;u<4||x<50?e[n]=h+" "+r:e.push(r)}else e.push(r);return e},[]),te=(t,e="punctuation")=>{t=Ut(t,["reasoning","code_interpreter"]);const r=[];switch(e){default:case j.PUNCTUATION:r.push(...It(t));break;case j.PARAGRAPHS:r.push(...Tt(t));break;case j.NONE:r.push(W(t));break}return r},ee=(t,e)=>new File([t],e,{type:t.type}),re=(t,e,r)=>({"{{USER_NAME}}":t,"{{USER_LOCATION}}":e||"Unknown","{{USER_API_KEY}}":r||"","{{CURRENT_DATETIME}}":St(),"{{CURRENT_DATE}}":rt(),"{{CURRENT_TIME}}":st(),"{{CURRENT_WEEKDAY}}":at(),"{{CURRENT_TIMEZONE}}":nt(),"{{USER_LANGUAGE}}":localStorage.getItem("locale")||"en-US"}),se=(t,e,r,n)=>{const h=new Date,u=h.getFullYear()+"-"+String(h.getMonth()+1).padStart(2,"0")+"-"+String(h.getDate()).padStart(2,"0"),x=h.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}),p=at(),a=nt(),v=localStorage.getItem("locale")||"en-US";return t=t.replace("{{CURRENT_DATETIME}}",`${u} ${x}`),t=t.replace("{{CURRENT_DATE}}",u),t=t.replace("{{CURRENT_TIME}}",x),t=t.replace("{{CURRENT_WEEKDAY}}",p),t=t.replace("{{CURRENT_TIMEZONE}}",a),t=t.replace("{{USER_LANGUAGE}}",v),e&&(t=t.replace("{{USER_NAME}}",e)),r?t=t.replace("{{USER_LOCATION}}",r):t=t.replace("{{USER_LOCATION}}","LOCATION_UNKNOWN"),n?t=t.replace("{{USER_API_KEY}}",n):t=t.replace("{{USER_API_KEY}}",""),t},ne=t=>{const e=new Date,r=new Date(t*1e3),h=(e.getTime()-r.getTime())/(1e3*3600*24),u=e.getDate(),x=e.getMonth(),p=e.getFullYear(),a=r.getDate(),v=r.getMonth(),y=r.getFullYear();return p===y&&x===v&&u===a?"Today":p===y&&x===v&&u-a===1?"Yesterday":h<=7?"Previous 7 days":h<=30?"Previous 30 days":p===y?r.toLocaleString("default",{month:"long"}):r.getFullYear().toString()},ae=t=>{const e={};let r=!1,n=!1;const h=/^\s*([a-z_]+):\s*(.*)\s*$/i,u=t.split(`
`);if(u[0].trim()!=='"""')return{};r=!0;for(let x=1;x<u.length;x++){const p=u[x];if(p.includes('"""')&&r){n=!0;break}if(r&&!n){const a=h.exec(p);if(a){const[,v,y]=a;e[v.trim()]=y.trim()}}}return e},oe=(t,e,r)=>{const n=t.map(u=>u.code);return e.map(u=>n.find(x=>x.startsWith(u))).find(Boolean)||r},rt=()=>{const t=new Date,e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},st=()=>new Date().toTimeString().split(" ")[0],St=()=>`${rt()} ${st()}`,nt=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,at=()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],Rt=(t,e)=>{if(e===null)return[];const r=t.messages[e];return r!=null&&r.parentId?[...Rt(t,r.parentId),r]:[r]},ie=t=>{if(t==null)return"Unknown size";if(typeof t!="number"||t<0)return"Invalid size";if(t===0)return"0 B";const e=["B","KB","MB","GB","TB"];let r=0;for(;t>=1024&&r<e.length-1;)t/=1024,r++;return`${t.toFixed(1)} ${e[r]}`},ce=t=>(console.log(typeof t),t?t.split(`
`).length:0);export{Xt as A,rt as B,st as C,St as D,nt as E,at as F,Gt as G,Qt as H,Wt as I,se as J,Ut as K,re as L,Lt as M,Ot as N,$t as O,j as T,Zt as a,Rt as b,Jt as c,zt as d,ae as e,ie as f,ne as g,Bt as h,kt as i,ce as j,Ht as k,bt as l,Kt as m,ee as n,oe as o,Ft as p,yt as q,Vt as r,Pt as s,jt as t,ht as u,ft as v,te as w,Z as x,wt as y,qt as z};
//# sourceMappingURL=DWuYzDxc.js.map
