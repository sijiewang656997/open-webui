import{s as _,d as g,i as w,m as l,p as k,j as S,q as b,n as y}from"../chunks/CgRTDwF2.js";import{S as h,i as $,t as m,a as i,c as P,d as N,m as q,b as C,e as E,g as J}from"../chunks/Bnxgdxyh.js";import{t as u}from"../chunks/Fny8-CkQ.js";import{g as M}from"../chunks/C_2ZPrHa.js";import{p as O}from"../chunks/D-bUEbUi.js";import{c as j,g as v}from"../chunks/CWaNF0lq.js";import{P as I}from"../chunks/BeUYGcni.js";function f(a){let r,n;return r=new I({props:{prompt:a[0],onSubmit:a[2]}}),{c(){E(r.$$.fragment)},l(o){C(r.$$.fragment,o)},m(o,e){q(r,o,e),n=!0},p(o,e){const t={};e&1&&(t.prompt=o[0]),r.$set(t)},i(o){n||(i(r.$$.fragment,o),n=!0)},o(o){m(r.$$.fragment,o),n=!1},d(o){N(r,o)}}}function L(a){let r=a[0],n,o,e=f(a);return{c(){e.c(),n=l()},l(t){e.l(t),n=l()},m(t,p){e.m(t,p),w(t,n,p),o=!0},p(t,[p]){p&1&&_(r,r=t[0])?(J(),m(e,1,1,y),P(),e=f(t),e.c(),i(e,1),e.m(n.parentNode,n)):e.p(t,p)},i(t){o||(i(e),o=!0)},o(t){m(e),o=!1},d(t){t&&g(n),e.d(t)}}}function z(a,r,n){let o;const e=k("i18n");S(a,e,s=>n(3,o=s));let t=null;const p=async s=>{await j(localStorage.token,s).catch(d=>(u.error(`${d}`),null))&&(u.success(o.t("Prompt created successfully")),await O.set(await v(localStorage.token)),await M("/workspace/prompts"))};return b(async()=>{if(window.addEventListener("message",async s=>{if(!["https://openwebui.com","https://www.openwebui.com","http://localhost:5173"].includes(s.origin))return;const c=JSON.parse(s.data);console.log(c),n(0,t={title:c.title,command:c.command,content:c.content,access_control:null})}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.prompt){const s=JSON.parse(sessionStorage.prompt);n(0,t={title:s.title,command:s.command,content:s.content,access_control:null}),sessionStorage.removeItem("prompt")}}),[t,e,p]}class Q extends h{constructor(r){super(),$(this,r,z,L,_,{})}}export{Q as component};
//# sourceMappingURL=33.BnIMBifX.js.map
