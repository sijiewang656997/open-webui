{"version":3,"file":"index3.js","sources":["../../../../src/lib/constants.ts","../../../../src/lib/stores/index.ts"],"sourcesContent":["import { browser, dev } from '$app/environment';\n// import { version } from '../../package.json';\n\nexport const APP_NAME = 'Kneron Analytics Agent';\n\nexport const WEBUI_HOSTNAME = browser ? (dev ? `${location.hostname}:8080` : ``) : '';\nexport const WEBUI_BASE_URL = browser ? (dev ? `http://${WEBUI_HOSTNAME}` : ``) : ``;\nexport const WEBUI_API_BASE_URL = `${WEBUI_BASE_URL}/api/v1`;\n\nexport const OLLAMA_API_BASE_URL = `${WEBUI_BASE_URL}/ollama`;\nexport const OPENAI_API_BASE_URL = `${WEBUI_BASE_URL}/openai`;\nexport const AUDIO_API_BASE_URL = `${WEBUI_BASE_URL}/api/v1/audio`;\nexport const IMAGES_API_BASE_URL = `${WEBUI_BASE_URL}/api/v1/images`;\nexport const RETRIEVAL_API_BASE_URL = `${WEBUI_BASE_URL}/api/v1/retrieval`;\n\nexport const WEBUI_VERSION = APP_VERSION;\nexport const WEBUI_BUILD_HASH = APP_BUILD_HASH;\nexport const REQUIRED_OLLAMA_VERSION = '0.1.16';\n\nexport const SUPPORTED_FILE_TYPE = [\n\t'application/epub+zip',\n\t'application/pdf',\n\t'text/plain',\n\t'text/csv',\n\t'text/xml',\n\t'text/html',\n\t'text/x-python',\n\t'text/css',\n\t'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n\t'application/octet-stream',\n\t'application/x-javascript',\n\t'text/markdown',\n\t'audio/mpeg',\n\t'audio/wav',\n\t'audio/ogg',\n\t'audio/x-m4a'\n];\n\nexport const SUPPORTED_FILE_EXTENSIONS = [\n\t'md',\n\t'rst',\n\t'go',\n\t'py',\n\t'java',\n\t'sh',\n\t'bat',\n\t'ps1',\n\t'cmd',\n\t'js',\n\t'ts',\n\t'css',\n\t'cpp',\n\t'hpp',\n\t'h',\n\t'c',\n\t'cs',\n\t'htm',\n\t'html',\n\t'sql',\n\t'log',\n\t'ini',\n\t'pl',\n\t'pm',\n\t'r',\n\t'dart',\n\t'dockerfile',\n\t'env',\n\t'php',\n\t'hs',\n\t'hsc',\n\t'lua',\n\t'nginxconf',\n\t'conf',\n\t'm',\n\t'mm',\n\t'plsql',\n\t'perl',\n\t'rb',\n\t'rs',\n\t'db2',\n\t'scala',\n\t'bash',\n\t'swift',\n\t'vue',\n\t'svelte',\n\t'doc',\n\t'docx',\n\t'pdf',\n\t'csv',\n\t'txt',\n\t'xls',\n\t'xlsx',\n\t'pptx',\n\t'ppt',\n\t'msg'\n];\n\nexport const PASTED_TEXT_CHARACTER_LIMIT = 1000;\n\n// Source: https://kit.svelte.dev/docs/modules#$env-static-public\n// This feature, akin to $env/static/private, exclusively incorporates environment variables\n// that are prefixed with config.kit.env.publicPrefix (usually set to PUBLIC_).\n// Consequently, these variables can be securely exposed to client-side code.","import { APP_NAME } from '$lib/constants';\nimport { type Writable, writable } from 'svelte/store';\nimport type { ModelConfig } from '$lib/apis';\nimport type { Banner } from '$lib/types';\nimport type { Socket } from 'socket.io-client';\n\nimport emojiShortCodes from '$lib/emoji-shortcodes.json';\n\n// Backend\nexport const WEBUI_NAME = writable(APP_NAME);\nexport const config: Writable<Config | undefined> = writable(undefined);\nexport const user: Writable<SessionUser | undefined> = writable(undefined);\n\n// Electron App\nexport const isApp = writable(false);\nexport const appInfo = writable(null);\nexport const appData = writable(null);\n\n// Frontend\nexport const MODEL_DOWNLOAD_POOL = writable({});\n\nexport const mobile = writable(false);\n\nexport const socket: Writable<null | Socket> = writable(null);\nexport const activeUserIds: Writable<null | string[]> = writable(null);\nexport const USAGE_POOL: Writable<null | string[]> = writable(null);\n\nexport const userAPIKey: Writable<string | null> = writable(null);\n\nexport const theme = writable('system');\n\nexport const shortCodesToEmojis = writable(\n\tObject.entries(emojiShortCodes).reduce((acc, [key, value]) => {\n\t\tif (typeof value === 'string') {\n\t\t\tacc[value] = key;\n\t\t} else {\n\t\t\tfor (const v of value) {\n\t\t\t\tacc[v] = key;\n\t\t\t}\n\t\t}\n\n\t\treturn acc;\n\t}, {})\n);\n\nexport const TTSWorker = writable(null);\n\nexport const chatId = writable('');\nexport const chatTitle = writable('');\n\nexport const channels = writable([]);\nexport const chats = writable([]);\nexport const pinnedChats = writable([]);\nexport const tags = writable([]);\n\nexport const models: Writable<Model[]> = writable([]);\n\nexport const prompts: Writable<null | Prompt[]> = writable(null);\nexport const knowledge: Writable<null | Document[]> = writable(null);\nexport const tools = writable(null);\nexport const functions = writable(null);\n\nexport const banners: Writable<Banner[]> = writable([]);\n\nexport const settings: Writable<Settings> = writable({});\n\nexport const showSidebar = writable(false);\nexport const showSettings = writable(false);\nexport const showArchivedChats = writable(false);\nexport const showChangelog = writable(false);\n\nexport const showControls = writable(false);\nexport const showOverview = writable(false);\nexport const showArtifacts = writable(false);\nexport const showCallOverlay = writable(false);\n\nexport const temporaryChatEnabled = writable(false); //DIYfalse\nexport const scrollPaginationEnabled = writable(false);\nexport const currentChatPage = writable(1);\n\nexport const isLastActiveTab = writable(true);\nexport const playingNotificationSound = writable(false);\n\nexport type Model = OpenAIModel | OllamaModel;\n\ntype BaseModel = {\n\tid: string;\n\tname: string;\n\tinfo?: ModelConfig;\n\towned_by: 'ollama' | 'openai' | 'arena';\n};\n\nexport interface OpenAIModel extends BaseModel {\n\towned_by: 'openai';\n\texternal: boolean;\n\tsource?: string;\n}\n\nexport interface OllamaModel extends BaseModel {\n\towned_by: 'ollama';\n\tdetails: OllamaModelDetails;\n\tsize: number;\n\tdescription: string;\n\tmodel: string;\n\tmodified_at: string;\n\tdigest: string;\n\tollama?: {\n\t\tname?: string;\n\t\tmodel?: string;\n\t\tmodified_at: string;\n\t\tsize?: number;\n\t\tdigest?: string;\n\t\tdetails?: {\n\t\t\tparent_model?: string;\n\t\t\tformat?: string;\n\t\t\tfamily?: string;\n\t\t\tfamilies?: string[];\n\t\t\tparameter_size?: string;\n\t\t\tquantization_level?: string;\n\t\t};\n\t\turls?: number[];\n\t};\n}\n\ntype OllamaModelDetails = {\n\tparent_model: string;\n\tformat: string;\n\tfamily: string;\n\tfamilies: string[] | null;\n\tparameter_size: string;\n\tquantization_level: string;\n};\n\ntype Settings = {\n\tmodels?: string[];\n\tconversationMode?: boolean;\n\tspeechAutoSend?: boolean;\n\tresponseAutoPlayback?: boolean;\n\taudio?: AudioSettings;\n\tshowUsername?: boolean;\n\tnotificationEnabled?: boolean;\n\ttitle?: TitleSettings;\n\tsplitLargeDeltas?: boolean;\n\tchatDirection: 'LTR' | 'RTL';\n\n\tsystem?: string;\n\trequestFormat?: string;\n\tkeepAlive?: string;\n\tseed?: number;\n\ttemperature?: string;\n\trepeat_penalty?: string;\n\ttop_k?: string;\n\ttop_p?: string;\n\tnum_ctx?: string;\n\tnum_batch?: string;\n\tnum_keep?: string;\n\toptions?: ModelOptions;\n};\n\ntype ModelOptions = {\n\tstop?: boolean;\n};\n\ntype AudioSettings = {\n\tSTTEngine?: string;\n\tTTSEngine?: string;\n\tspeaker?: string;\n\tmodel?: string;\n\tnonLocalVoices?: boolean;\n};\n\ntype TitleSettings = {\n\tauto?: boolean;\n\tmodel?: string;\n\tmodelExternal?: string;\n\tprompt?: string;\n};\n\ntype Prompt = {\n\tcommand: string;\n\tuser_id: string;\n\ttitle: string;\n\tcontent: string;\n\ttimestamp: number;\n};\n\ntype Document = {\n\tcollection_name: string;\n\tfilename: string;\n\tname: string;\n\ttitle: string;\n};\n\ntype Config = {\n\tstatus: boolean;\n\tname: string;\n\tversion: string;\n\tdefault_locale: string;\n\tdefault_models: string;\n\tdefault_prompt_suggestions: PromptSuggestion[];\n\tfeatures: {\n\t\tauth: boolean;\n\t\tauth_trusted_header: boolean;\n\t\tenable_api_key: boolean;\n\t\tenable_signup: boolean;\n\t\tenable_login_form: boolean;\n\t\tenable_web_search?: boolean;\n\t\tenable_google_drive_integration: boolean;\n\t\tenable_onedrive_integration: boolean;\n\t\tenable_image_generation: boolean;\n\t\tenable_admin_export: boolean;\n\t\tenable_admin_chat_access: boolean;\n\t\tenable_community_sharing: boolean;\n\t\tenable_autocomplete_generation: boolean;\n\t};\n\toauth: {\n\t\tproviders: {\n\t\t\t[key: string]: string;\n\t\t};\n\t};\n};\n\ntype PromptSuggestion = {\n\tcontent: string;\n\ttitle: [string, string];\n};\n\ntype SessionUser = {\n\tid: string;\n\temail: string;\n\tname: string;\n\trole: string;\n\tprofile_image_url: string;\n};\n"],"names":[],"mappings":"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"}