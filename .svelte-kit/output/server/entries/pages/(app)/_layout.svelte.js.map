{"version":3,"file":"_layout.svelte.js","sources":["../../../../../../src/lib/components/chat/Settings/General.svelte","../../../../../../src/lib/components/icons/User.svelte","../../../../../../src/lib/components/chat/SettingsModal.svelte","../../../../../../src/routes/(app)/+layout.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\n\timport { getLanguages } from '$lib/i18n';\n\tconst dispatch = createEventDispatcher();\n\n\timport { models, settings, theme, user } from '$lib/stores';\n\n\tconst i18n = getContext('i18n');\n\n\timport AdvancedParams from './Advanced/AdvancedParams.svelte';\n\n\texport let saveSettings: Function;\n\texport let getModels: Function;\n\n\t// General\n\tlet themes = ['dark', 'light', 'rose-pine dark', 'rose-pine-dawn light', 'oled-dark'];\n\tlet selectedTheme = 'system';\n\n\tlet languages: Awaited<ReturnType<typeof getLanguages>> = [];\n\tlet lang = $i18n.language;\n\tlet notificationEnabled = false;\n\tlet system = '';\n\n\tlet showAdvanced = true;\n\n\tconst toggleNotification = async () => {\n\t\tconst permission = await Notification.requestPermission();\n\n\t\tif (permission === 'granted') {\n\t\t\tnotificationEnabled = !notificationEnabled;\n\t\t\tsaveSettings({ notificationEnabled: notificationEnabled });\n\t\t} else {\n\t\t\ttoast.error(\n\t\t\t\t$i18n.t(\n\t\t\t\t\t'Response notifications cannot be activated as the website permissions have been denied. Please visit your browser settings to grant the necessary access.'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n\n\t// Advanced\n\tlet requestFormat = '';\n\tlet keepAlive: string | null = null;\n\n\tlet params = {\n\t\t// Advanced\n\t\tstream_response: null,\n\t\tfunction_calling: null,\n\t\tseed: null,\n\t\ttemperature: null,\n\t\treasoning_effort: null,\n\t\tfrequency_penalty: null,\n\t\tpresence_penalty: null,\n\t\trepeat_penalty: null,\n\t\trepeat_last_n: null,\n\t\tmirostat: null,\n\t\tmirostat_eta: null,\n\t\tmirostat_tau: null,\n\t\ttop_k: null,\n\t\ttop_p: null,\n\t\tmin_p: null,\n\t\tstop: null,\n\t\ttfs_z: null,\n\t\tnum_ctx: null,\n\t\tnum_batch: null,\n\t\tnum_keep: null,\n\t\tmax_tokens: null,\n\t\tnum_gpu: null\n\t};\n\n\tconst toggleRequestFormat = async () => {\n\t\tif (requestFormat === '') {\n\t\t\trequestFormat = 'json';\n\t\t} else {\n\t\t\trequestFormat = '';\n\t\t}\n\n\t\tsaveSettings({ requestFormat: requestFormat !== '' ? requestFormat : undefined });\n\t};\n\n\tonMount(async () => {\n\t\tselectedTheme = localStorage.theme ?? 'system';\n\n\t\tlanguages = await getLanguages();\n\n\t\tnotificationEnabled = $settings.notificationEnabled ?? false;\n\t\tsystem = $settings.system ?? '';\n\n\t\trequestFormat = $settings.requestFormat ?? '';\n\t\tkeepAlive = $settings.keepAlive ?? null;\n\n\t\tparams = { ...params, ...$settings.params };\n\t\tparams.stop = $settings?.params?.stop ? ($settings?.params?.stop ?? []).join(',') : null;\n\t});\n\n\tconst applyTheme = (_theme: string) => {\n\t\tlet themeToApply = _theme === 'oled-dark' ? 'dark' : _theme;\n\n\t\tif (_theme === 'system') {\n\t\t\tthemeToApply = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n\t\t}\n\n\t\tif (themeToApply === 'dark' && !_theme.includes('oled')) {\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-800', '#333');\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-850', '#262626');\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-900', '#171717');\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-950', '#0d0d0d');\n\t\t}\n\n\t\tthemes\n\t\t\t.filter((e) => e !== themeToApply)\n\t\t\t.forEach((e) => {\n\t\t\t\te.split(' ').forEach((e) => {\n\t\t\t\t\tdocument.documentElement.classList.remove(e);\n\t\t\t\t});\n\t\t\t});\n\n\t\tthemeToApply.split(' ').forEach((e) => {\n\t\t\tdocument.documentElement.classList.add(e);\n\t\t});\n\n\t\tconst metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\n\t\tif (metaThemeColor) {\n\t\t\tif (_theme.includes('system')) {\n\t\t\t\tconst systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\n\t\t\t\t\t? 'dark'\n\t\t\t\t\t: 'light';\n\t\t\t\tconsole.log('Setting system meta theme color: ' + systemTheme);\n\t\t\t\tmetaThemeColor.setAttribute('content', systemTheme === 'light' ? '#ffffff' : '#171717');\n\t\t\t} else {\n\t\t\t\tconsole.log('Setting meta theme color: ' + _theme);\n\t\t\t\tmetaThemeColor.setAttribute(\n\t\t\t\t\t'content',\n\t\t\t\t\t_theme === 'dark'\n\t\t\t\t\t\t? '#171717'\n\t\t\t\t\t\t: _theme === 'oled-dark'\n\t\t\t\t\t\t\t? '#000000'\n\t\t\t\t\t\t\t: _theme === 'her'\n\t\t\t\t\t\t\t\t? '#983724'\n\t\t\t\t\t\t\t\t: '#ffffff'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof window !== 'undefined' && window.applyTheme) {\n\t\t\twindow.applyTheme();\n\t\t}\n\n\t\tif (_theme.includes('oled')) {\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-800', '#101010');\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-850', '#050505');\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-900', '#000000');\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-950', '#000000');\n\t\t\tdocument.documentElement.classList.add('dark');\n\t\t}\n\n\t\tconsole.log(_theme);\n\t};\n\n\tconst themeChangeHandler = (_theme: string) => {\n\t\ttheme.set(_theme);\n\t\tlocalStorage.setItem('theme', _theme);\n\t\tapplyTheme(_theme);\n\t};\n</script>\n\n<div class=\"flex flex-col h-full justify-between text-sm\">\n\t<div class=\"  overflow-y-scroll max-h-[28rem] lg:max-h-full\">\n\t\t<div class=\"\">\n\t\t\t<div class=\" mb-1 text-sm font-medium\">{$i18n.t('WebUI Settings')}</div>\n\n\t\t\t<div class=\"flex w-full justify-between\">\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Theme')}</div>\n\t\t\t\t<div class=\"flex items-center relative\">\n\t\t\t\t\t<select\n\t\t\t\t\t\tclass=\" dark:bg-gray-900 w-fit pr-8 rounded-sm py-2 px-2 text-xs bg-transparent outline-hidden text-right\"\n\t\t\t\t\t\tbind:value={selectedTheme}\n\t\t\t\t\t\tplaceholder=\"Select a theme\"\n\t\t\t\t\t\ton:change={() => themeChangeHandler(selectedTheme)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"system\">‚öôÔ∏è {$i18n.t('System')}</option>\n\t\t\t\t\t\t<option value=\"dark\">üåë {$i18n.t('Dark')}</option>\n\t\t\t\t\t\t<option value=\"oled-dark\">üåÉ {$i18n.t('OLED Dark')}</option>\n\t\t\t\t\t\t<option value=\"light\">‚òÄÔ∏è {$i18n.t('Light')}</option>\n\t\t\t\t\t\t<option value=\"her\">üå∑ Her</option>\n\t\t\t\t\t\t<!-- <option value=\"rose-pine dark\">ü™ª {$i18n.t('Ros√© Pine')}</option>\n\t\t\t\t\t\t<option value=\"rose-pine-dawn light\">üå∑ {$i18n.t('Ros√© Pine Dawn')}</option> -->\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\" flex w-full justify-between\">\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Language')}</div>\n\t\t\t\t<div class=\"flex items-center relative\">\n\t\t\t\t\t<select\n\t\t\t\t\t\tclass=\" dark:bg-gray-900 w-fit pr-8 rounded-sm py-2 px-2 text-xs bg-transparent outline-hidden text-right\"\n\t\t\t\t\t\tbind:value={lang}\n\t\t\t\t\t\tplaceholder=\"Select a language\"\n\t\t\t\t\t\ton:change={(e) => {\n\t\t\t\t\t\t\t$i18n.changeLanguage(lang);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#each languages as language}\n\t\t\t\t\t\t\t<option value={language['code']}>{language['title']}</option>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{#if $i18n.language === 'en-US'}\n\t\t\t\t<div class=\"mb-2 text-xs text-gray-400 dark:text-gray-500\">\n\t\t\t\t\tCouldn't find your language?\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=\" text-gray-300 font-medium underline\"\n\t\t\t\t\t\thref=\"https://github.com/open-webui/open-webui/blob/main/docs/CONTRIBUTING.md#-translations-and-internationalization\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t\t\tHelp us translate Open WebUI!\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div>\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Notifications')}</div>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded-sm transition\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\ttoggleNotification();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if notificationEnabled === true}\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t{#if $user.role === 'admin' || $user?.permissions.chat?.controls}\n\t\t\t<hr class=\"border-gray-100 dark:border-gray-850 my-3\" />\n\n\t\t\t<!-- <div>\n\t\t\t\t<div class=\" my-2.5 text-sm font-medium\">{$i18n.t('System Prompt')}</div>\n\t\t\t\t<textarea\n\t\t\t\t\tbind:value={system}\n\t\t\t\t\tclass=\"w-full rounded-lg p-4 text-sm bg-white dark:text-gray-300 dark:bg-gray-850 outline-hidden resize-none\"\n\t\t\t\t\trows=\"4\"\n\t\t\t\t/>\n\t\t\t</div> -->\n\n\t\t\t<div class=\"mt-2 space-y-3 pr-1.5\">\n\t\t\t\t<!-- <div class=\"flex justify-between items-center text-sm\">\n\t\t\t\t\t<div class=\"  font-medium\">{$i18n.t('Advanced Parameters')}</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\" text-xs font-medium text-gray-500\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tshowAdvanced = !showAdvanced;\n\t\t\t\t\t\t}}>{showAdvanced ? $i18n.t('Hide') : $i18n.t('Show')}</button\n\t\t\t\t\t>\n\t\t\t\t</div> -->\n\n\t\t\t\t{#if showAdvanced}\n\t\t\t\t\t<AdvancedParams admin={$user?.role === 'admin'} bind:params />\n\t\t\t\t\t<hr class=\" border-gray-100 dark:border-gray-850\" />\n\n\t\t\t\t\t<div class=\" py-1 w-full justify-between\">\n\t\t\t\t\t\t<div class=\"flex w-full justify-between\">\n\t\t\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Keep Alive')}</div>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded-sm transition\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tkeepAlive = keepAlive === null ? '5m' : null;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if keepAlive === null}\n\t\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('Default')} </span>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('Custom')} </span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if keepAlive !== null}\n\t\t\t\t\t\t\t<div class=\"flex mt-1 space-x-2\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-hidden\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t(\"e.g. '30s','10m'. Valid time units are 's', 'm', 'h'.\")}\n\t\t\t\t\t\t\t\t\tbind:value={keepAlive}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\" py-1 flex w-full justify-between\">\n\t\t\t\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Request Mode')}</div>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded-sm transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\ttoggleRequestFormat();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if requestFormat === ''}\n\t\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('Default')} </span>\n\t\t\t\t\t\t\t\t{:else if requestFormat === 'json'}\n\t\t\t\t\t\t\t\t\t<!-- <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            viewBox=\"0 0 20 20\"\n                            fill=\"currentColor\"\n                            class=\"w-4 h-4 self-center\"\n                        >\n                            <path\n                                d=\"M10 2a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 2zM10 15a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 15zM10 7a3 3 0 100 6 3 3 0 000-6zM15.657 5.404a.75.75 0 10-1.06-1.06l-1.061 1.06a.75.75 0 001.06 1.06l1.06-1.06zM6.464 14.596a.75.75 0 10-1.06-1.06l-1.06 1.06a.75.75 0 001.06 1.06l1.06-1.06zM18 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0118 10zM5 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 015 10zM14.596 15.657a.75.75 0 001.06-1.06l-1.06-1.061a.75.75 0 10-1.06 1.06l1.06 1.06zM5.404 6.464a.75.75 0 001.06-1.06l-1.06-1.06a.75.75 0 10-1.061 1.06l1.06 1.06z\"\n                            />\n                        </svg> -->\n\t\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('JSON')} </span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\n\t\t<button\n\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\ton:click={() => {\n\t\t\t\tsaveSettings({\n\t\t\t\t\tsystem: system !== '' ? system : undefined,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tstream_response: params.stream_response !== null ? params.stream_response : undefined,\n\t\t\t\t\t\tfunction_calling:\n\t\t\t\t\t\t\tparams.function_calling !== null ? params.function_calling : undefined,\n\t\t\t\t\t\tseed: (params.seed !== null ? params.seed : undefined) ?? undefined,\n\t\t\t\t\t\tstop: params.stop ? params.stop.split(',').filter((e) => e) : undefined,\n\t\t\t\t\t\ttemperature: params.temperature !== null ? params.temperature : undefined,\n\t\t\t\t\t\treasoning_effort:\n\t\t\t\t\t\t\tparams.reasoning_effort !== null ? params.reasoning_effort : undefined,\n\t\t\t\t\t\tfrequency_penalty:\n\t\t\t\t\t\t\tparams.frequency_penalty !== null ? params.frequency_penalty : undefined,\n\t\t\t\t\t\tpresence_penalty:\n\t\t\t\t\t\t\tparams.frequency_penalty !== null ? params.frequency_penalty : undefined,\n\t\t\t\t\t\trepeat_penalty:\n\t\t\t\t\t\t\tparams.frequency_penalty !== null ? params.frequency_penalty : undefined,\n\t\t\t\t\t\trepeat_last_n: params.repeat_last_n !== null ? params.repeat_last_n : undefined,\n\t\t\t\t\t\tmirostat: params.mirostat !== null ? params.mirostat : undefined,\n\t\t\t\t\t\tmirostat_eta: params.mirostat_eta !== null ? params.mirostat_eta : undefined,\n\t\t\t\t\t\tmirostat_tau: params.mirostat_tau !== null ? params.mirostat_tau : undefined,\n\t\t\t\t\t\ttop_k: params.top_k !== null ? params.top_k : undefined,\n\t\t\t\t\t\ttop_p: params.top_p !== null ? params.top_p : undefined,\n\t\t\t\t\t\tmin_p: params.min_p !== null ? params.min_p : undefined,\n\t\t\t\t\t\ttfs_z: params.tfs_z !== null ? params.tfs_z : undefined,\n\t\t\t\t\t\tnum_ctx: params.num_ctx !== null ? params.num_ctx : undefined,\n\t\t\t\t\t\tnum_batch: params.num_batch !== null ? params.num_batch : undefined,\n\t\t\t\t\t\tnum_keep: params.num_keep !== null ? params.num_keep : undefined,\n\t\t\t\t\t\tmax_tokens: params.max_tokens !== null ? params.max_tokens : undefined,\n\t\t\t\t\t\tuse_mmap: params.use_mmap !== null ? params.use_mmap : undefined,\n\t\t\t\t\t\tuse_mlock: params.use_mlock !== null ? params.use_mlock : undefined,\n\t\t\t\t\t\tnum_thread: params.num_thread !== null ? params.num_thread : undefined,\n\t\t\t\t\t\tnum_gpu: params.num_gpu !== null ? params.num_gpu : undefined\n\t\t\t\t\t},\n\t\t\t\t\tkeepAlive: keepAlive ? (isNaN(keepAlive) ? keepAlive : parseInt(keepAlive)) : undefined\n\t\t\t\t});\n\t\t\t\tdispatch('save');\n\t\t\t}}\n\t\t>\n\t\t\t{$i18n.t('Save')}\n\t\t</button>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n</script>\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class={className}>\n\t<path\n\t\tfill-rule=\"evenodd\"\n\t\td=\"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z\"\n\t\tclip-rule=\"evenodd\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { getContext, tick } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\timport { config, models, settings, user } from '$lib/stores';\n\timport { updateUserSettings } from '$lib/apis/users';\n\timport { getModels as _getModels } from '$lib/apis';\n\timport { goto } from '$app/navigation';\n\n\timport Modal from '../common/Modal.svelte';\n\timport Account from './Settings/Account.svelte';\n\timport About from './Settings/About.svelte';\n\timport General from './Settings/General.svelte';\n\timport Interface from './Settings/Interface.svelte';\n\timport Audio from './Settings/Audio.svelte';\n\timport Chats from './Settings/Chats.svelte';\n\timport User from '../icons/User.svelte';\n\timport Personalization from './Settings/Personalization.svelte';\n\timport SearchInput from '../layout/Sidebar/SearchInput.svelte';\n\timport Search from '../icons/Search.svelte';\n\timport Connections from './Settings/Connections.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\n\tinterface SettingsTab {\n\t\tid: string;\n\t\ttitle: string;\n\t\tkeywords: string[];\n\t}\n\n\tconst searchData: SettingsTab[] = [\n\t\t{\n\t\t\tid: 'general',\n\t\t\ttitle: 'General',\n\t\t\tkeywords: [\n\t\t\t\t'general',\n\t\t\t\t'theme',\n\t\t\t\t'language',\n\t\t\t\t'notifications',\n\t\t\t\t'system',\n\t\t\t\t'systemprompt',\n\t\t\t\t'prompt',\n\t\t\t\t'advanced',\n\t\t\t\t'settings',\n\t\t\t\t'defaultsettings',\n\t\t\t\t'configuration',\n\t\t\t\t'systemsettings',\n\t\t\t\t'notificationsettings',\n\t\t\t\t'systempromptconfig',\n\t\t\t\t'languageoptions',\n\t\t\t\t'defaultparameters',\n\t\t\t\t'systemparameters'\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: 'interface',\n\t\t\ttitle: 'Interface',\n\t\t\tkeywords: [\n\t\t\t\t'defaultmodel',\n\t\t\t\t'selectmodel',\n\t\t\t\t'ui',\n\t\t\t\t'userinterface',\n\t\t\t\t'display',\n\t\t\t\t'layout',\n\t\t\t\t'design',\n\t\t\t\t'landingpage',\n\t\t\t\t'landingpagemode',\n\t\t\t\t'default',\n\t\t\t\t'chat',\n\t\t\t\t'chatbubble',\n\t\t\t\t'chatui',\n\t\t\t\t'username',\n\t\t\t\t'showusername',\n\t\t\t\t'displayusername',\n\t\t\t\t'widescreen',\n\t\t\t\t'widescreenmode',\n\t\t\t\t'fullscreen',\n\t\t\t\t'expandmode',\n\t\t\t\t'chatdirection',\n\t\t\t\t'lefttoright',\n\t\t\t\t'ltr',\n\t\t\t\t'righttoleft',\n\t\t\t\t'rtl',\n\t\t\t\t'notifications',\n\t\t\t\t'toast',\n\t\t\t\t'toastnotifications',\n\t\t\t\t'largechunks',\n\t\t\t\t'streamlargechunks',\n\t\t\t\t'scroll',\n\t\t\t\t'scrollonbranchchange',\n\t\t\t\t'scrollbehavior',\n\t\t\t\t'richtext',\n\t\t\t\t'richtextinput',\n\t\t\t\t'background',\n\t\t\t\t'chatbackground',\n\t\t\t\t'chatbackgroundimage',\n\t\t\t\t'backgroundimage',\n\t\t\t\t'uploadbackground',\n\t\t\t\t'resetbackground',\n\t\t\t\t'titleautogen',\n\t\t\t\t'titleautogeneration',\n\t\t\t\t'autotitle',\n\t\t\t\t'chattags',\n\t\t\t\t'autochattags',\n\t\t\t\t'responseautocopy',\n\t\t\t\t'clipboard',\n\t\t\t\t'location',\n\t\t\t\t'userlocation',\n\t\t\t\t'userlocationaccess',\n\t\t\t\t'haptic',\n\t\t\t\t'hapticfeedback',\n\t\t\t\t'vibration',\n\t\t\t\t'voice',\n\t\t\t\t'voicecontrol',\n\t\t\t\t'voiceinterruption',\n\t\t\t\t'call',\n\t\t\t\t'emojis',\n\t\t\t\t'displayemoji',\n\t\t\t\t'save',\n\t\t\t\t'interfaceoptions',\n\t\t\t\t'interfacecustomization',\n\t\t\t\t'alwaysonwebsearch'\n\t\t\t]\n\t\t},\n\t\t// {\n\t\t// \tid: 'connections',\n\t\t// \ttitle: 'Connections',\n\t\t// \tkeywords: []\n\t\t// },\n\t\t{\n\t\t\tid: 'personalization',\n\t\t\ttitle: 'Personalization',\n\t\t\tkeywords: [\n\t\t\t\t'personalization',\n\t\t\t\t'memory',\n\t\t\t\t'personalize',\n\t\t\t\t'preferences',\n\t\t\t\t'profile',\n\t\t\t\t'personalsettings',\n\t\t\t\t'customsettings',\n\t\t\t\t'userpreferences',\n\t\t\t\t'accountpreferences'\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: 'audio',\n\t\t\ttitle: 'Audio',\n\t\t\tkeywords: [\n\t\t\t\t'audio',\n\t\t\t\t'sound',\n\t\t\t\t'soundsettings',\n\t\t\t\t'audiocontrol',\n\t\t\t\t'volume',\n\t\t\t\t'speech',\n\t\t\t\t'speechrecognition',\n\t\t\t\t'stt',\n\t\t\t\t'speechtotext',\n\t\t\t\t'tts',\n\t\t\t\t'texttospeech',\n\t\t\t\t'playback',\n\t\t\t\t'playbackspeed',\n\t\t\t\t'voiceplayback',\n\t\t\t\t'speechplayback',\n\t\t\t\t'audiooutput',\n\t\t\t\t'speechengine',\n\t\t\t\t'voicecontrol',\n\t\t\t\t'audioplayback',\n\t\t\t\t'transcription',\n\t\t\t\t'autotranscribe',\n\t\t\t\t'autosend',\n\t\t\t\t'speechsettings',\n\t\t\t\t'audiovoice',\n\t\t\t\t'voiceoptions',\n\t\t\t\t'setvoice',\n\t\t\t\t'nonlocalvoices',\n\t\t\t\t'savesettings',\n\t\t\t\t'audioconfig',\n\t\t\t\t'speechconfig',\n\t\t\t\t'voicerecognition',\n\t\t\t\t'speechsynthesis',\n\t\t\t\t'speechmode',\n\t\t\t\t'voicespeed',\n\t\t\t\t'speechrate',\n\t\t\t\t'speechspeed',\n\t\t\t\t'audioinput',\n\t\t\t\t'audiofeatures',\n\t\t\t\t'voicemodes'\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: 'chats',\n\t\t\ttitle: 'Chats',\n\t\t\tkeywords: [\n\t\t\t\t'chat',\n\t\t\t\t'messages',\n\t\t\t\t'conversations',\n\t\t\t\t'chatsettings',\n\t\t\t\t'history',\n\t\t\t\t'chathistory',\n\t\t\t\t'messagehistory',\n\t\t\t\t'messagearchive',\n\t\t\t\t'convo',\n\t\t\t\t'chats',\n\t\t\t\t'conversationhistory',\n\t\t\t\t'exportmessages',\n\t\t\t\t'chatactivity'\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: 'account',\n\t\t\ttitle: 'Account',\n\t\t\tkeywords: [\n\t\t\t\t'account',\n\t\t\t\t'profile',\n\t\t\t\t'security',\n\t\t\t\t'privacy',\n\t\t\t\t'settings',\n\t\t\t\t'login',\n\t\t\t\t'useraccount',\n\t\t\t\t'userdata',\n\t\t\t\t'api',\n\t\t\t\t'apikey',\n\t\t\t\t'userprofile',\n\t\t\t\t'profiledetails',\n\t\t\t\t'accountsettings',\n\t\t\t\t'accountpreferences',\n\t\t\t\t'securitysettings',\n\t\t\t\t'privacysettings'\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: 'admin',\n\t\t\ttitle: 'Admin',\n\t\t\tkeywords: [\n\t\t\t\t'admin',\n\t\t\t\t'administrator',\n\t\t\t\t'adminsettings',\n\t\t\t\t'adminpanel',\n\t\t\t\t'systemadmin',\n\t\t\t\t'administratoraccess',\n\t\t\t\t'systemcontrol',\n\t\t\t\t'manage',\n\t\t\t\t'management',\n\t\t\t\t'admincontrols',\n\t\t\t\t'adminfeatures',\n\t\t\t\t'usercontrol',\n\t\t\t\t'arenamodel',\n\t\t\t\t'evaluations',\n\t\t\t\t'websearch',\n\t\t\t\t'database',\n\t\t\t\t'pipelines',\n\t\t\t\t'images',\n\t\t\t\t'audio',\n\t\t\t\t'documents',\n\t\t\t\t'rag',\n\t\t\t\t'models',\n\t\t\t\t'ollama',\n\t\t\t\t'openai',\n\t\t\t\t'users'\n\t\t\t]\n\t\t},\n\t\t// {\n\t\t// \tid: 'about',\n\t\t// \ttitle: 'About',\n\t\t// \tkeywords: [\n\t\t// \t\t'about',\n\t\t// \t\t'info',\n\t\t// \t\t'information',\n\t\t// \t\t'version',\n\t\t// \t\t'documentation',\n\t\t// \t\t'help',\n\t\t// \t\t'support',\n\t\t// \t\t'details',\n\t\t// \t\t'aboutus',\n\t\t// \t\t'softwareinfo',\n\t\t// \t\t'timothyjaeryangbaek',\n\t\t// \t\t'openwebui',\n\t\t// \t\t'release',\n\t\t// \t\t'updates',\n\t\t// \t\t'updateinfo',\n\t\t// \t\t'versioninfo',\n\t\t// \t\t'aboutapp',\n\t\t// \t\t'terms',\n\t\t// \t\t'termsandconditions',\n\t\t// \t\t'contact',\n\t\t// \t\t'aboutpage'\n\t\t// \t]\n\t\t// }\n\t];\n\n\tlet search = '';\n\tlet visibleTabs = searchData.map((tab) => tab.id);\n\tlet searchDebounceTimeout;\n\n\tconst searchSettings = (query: string): string[] => {\n\t\tconst lowerCaseQuery = query.toLowerCase().trim();\n\t\treturn searchData\n\t\t\t.filter(\n\t\t\t\t(tab) =>\n\t\t\t\t\ttab.title.toLowerCase().includes(lowerCaseQuery) ||\n\t\t\t\t\ttab.keywords.some((keyword) => keyword.includes(lowerCaseQuery))\n\t\t\t)\n\t\t\t.map((tab) => tab.id);\n\t};\n\n\tconst searchDebounceHandler = () => {\n\t\tclearTimeout(searchDebounceTimeout);\n\t\tsearchDebounceTimeout = setTimeout(() => {\n\t\t\tvisibleTabs = searchSettings(search);\n\t\t\tif (visibleTabs.length > 0 && !visibleTabs.includes(selectedTab)) {\n\t\t\t\tselectedTab = visibleTabs[0];\n\t\t\t}\n\t\t}, 100);\n\t};\n\n\tconst saveSettings = async (updated) => {\n\t\tconsole.log('Current locale:', localStorage.getItem('locale'));\n\t\tconsole.log(updated);\n\t\tawait settings.set({ ...$settings, ...updated });\n\t\tawait models.set(await getModels());\n\t\tawait updateUserSettings(localStorage.token, { ui: $settings });\n\t};\n\n\tconst getModels = async () => {\n\t\treturn await _getModels(\n\t\t\tlocalStorage.token,\n\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t);\n\t};\n\n\tlet selectedTab = 'general';\n\n\t// Function to handle sideways scrolling\n\tconst scrollHandler = (event) => {\n\t\tconst settingsTabsContainer = document.getElementById('settings-tabs-container');\n\t\tif (settingsTabsContainer) {\n\t\t\tevent.preventDefault(); // Prevent default vertical scrolling\n\t\t\tsettingsTabsContainer.scrollLeft += event.deltaY; // Scroll sideways\n\t\t}\n\t};\n\n\tconst addScrollListener = async () => {\n\t\tawait tick();\n\t\tconst settingsTabsContainer = document.getElementById('settings-tabs-container');\n\t\tif (settingsTabsContainer) {\n\t\t\tsettingsTabsContainer.addEventListener('wheel', scrollHandler);\n\t\t}\n\t};\n\n\tconst removeScrollListener = async () => {\n\t\tawait tick();\n\t\tconst settingsTabsContainer = document.getElementById('settings-tabs-container');\n\t\tif (settingsTabsContainer) {\n\t\t\tsettingsTabsContainer.removeEventListener('wheel', scrollHandler);\n\t\t}\n\t};\n\n\t$: if (show) {\n\t\taddScrollListener();\n\t} else {\n\t\tremoveScrollListener();\n\t}\n</script>\n\n<Modal size=\"xl\" bind:show>\n\t<div class=\"text-gray-700 dark:text-gray-100\">\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1\">\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Settings')}</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-4 pt-1 pb-4 md:space-x-4\">\n\t\t\t<div\n\t\t\t\tid=\"settings-tabs-container\"\n\t\t\t\tclass=\"tabs flex flex-row overflow-x-auto gap-2.5 md:gap-1 md:flex-col flex-1 md:flex-none md:w-40 dark:text-gray-200 text-sm font-medium text-left mb-1 md:mb-0 -translate-y-1\"\n\t\t\t>\n\t\t\t\t<div class=\"hidden md:flex w-full rounded-xl -mb-1 px-0.5 gap-2\" id=\"settings-search\">\n\t\t\t\t\t<div class=\"self-center rounded-l-xl bg-transparent\">\n\t\t\t\t\t\t<Search className=\"size-3.5\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"w-full py-1.5 text-sm bg-transparent dark:text-gray-300 outline-hidden\"\n\t\t\t\t\t\tbind:value={search}\n\t\t\t\t\t\ton:input={searchDebounceHandler}\n\t\t\t\t\t\tplaceholder={$i18n.t('Search')}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{#if visibleTabs.length > 0}\n\t\t\t\t\t{#each visibleTabs as tabId (tabId)}\n\t\t\t\t\t\t{#if tabId === 'general'}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\n\t\t\t\t\t\t\t\t'general'\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tselectedTab = 'general';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M8.34 1.804A1 1 0 019.32 1h1.36a1 1 0 01.98.804l.295 1.473c.497.144.971.342 1.416.587l1.25-.834a1 1 0 011.262.125l.962.962a1 1 0 01.125 1.262l-.834 1.25c.245.445.443.919.587 1.416l1.473.294a1 1 0 01.804.98v1.361a1 1 0 01-.804.98l-1.473.295a6.95 6.95 0 01-.587 1.416l.834 1.25a1 1 0 01-.125 1.262l-.962.962a1 1 0 01-1.262.125l-1.25-.834a6.953 6.953 0 01-1.416.587l-.294 1.473a1 1 0 01-.98.804H9.32a1 1 0 01-.98-.804l-.295-1.473a6.957 6.957 0 01-1.416-.587l-1.25.834a1 1 0 01-1.262-.125l-.962-.962a1 1 0 01-.125-1.262l.834-1.25a6.957 6.957 0 01-.587-1.416l-1.473-.294A1 1 0 011 10.68V9.32a1 1 0 01.804-.98l1.473-.295c.144-.497.342-.971.587-1.416l-.834-1.25a1 1 0 01.125-1.262l.962-.962A1 1 0 015.38 3.03l1.25.834a6.957 6.957 0 011.416-.587l.294-1.473zM13 10a3 3 0 11-6 0 3 3 0 016 0z\"\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('General')}</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{:else if tabId === 'interface'}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\n\t\t\t\t\t\t\t\t'interface'\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tselectedTab = 'interface';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M2 4.25A2.25 2.25 0 0 1 4.25 2h7.5A2.25 2.25 0 0 1 14 4.25v5.5A2.25 2.25 0 0 1 11.75 12h-1.312c.1.128.21.248.328.36a.75.75 0 0 1 .234.545v.345a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-.345a.75.75 0 0 1 .234-.545c.118-.111.228-.232.328-.36H4.25A2.25 2.25 0 0 1 2 9.75v-5.5Zm2.25-.75a.75.75 0 0 0-.75.75v4.5c0 .414.336.75.75.75h7.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 0 0-.75-.75h-7.5Z\"\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Interface')}</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{:else if tabId === 'connections'}\n\t\t\t\t\t\t\t{#if $user.role === 'admin' || ($user.role === 'user' && $config?.features?.enable_direct_connections)}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\n\t\t\t\t\t\t\t\t\t'connections'\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tselectedTab = 'connections';\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M1 9.5A3.5 3.5 0 0 0 4.5 13H12a3 3 0 0 0 .917-5.857 2.503 2.503 0 0 0-3.198-3.019 3.5 3.5 0 0 0-6.628 2.171A3.5 3.5 0 0 0 1 9.5Z\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Connections')}</div>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{:else if tabId === 'personalization'}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\n\t\t\t\t\t\t\t\t'personalization'\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tselectedTab = 'personalization';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t\t\t\t\t<User />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Personalization')}</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{:else if tabId === 'audio'}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\n\t\t\t\t\t\t\t\t'audio'\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tselectedTab = 'audio';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\td=\"M7.557 2.066A.75.75 0 0 1 8 2.75v10.5a.75.75 0 0 1-1.248.56L3.59 11H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.59l3.162-2.81a.75.75 0 0 1 .805-.124ZM12.95 3.05a.75.75 0 1 0-1.06 1.06 5.5 5.5 0 0 1 0 7.78.75.75 0 1 0 1.06 1.06 7 7 0 0 0 0-9.9Z\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\td=\"M10.828 5.172a.75.75 0 1 0-1.06 1.06 2.5 2.5 0 0 1 0 3.536.75.75 0 1 0 1.06 1.06 4 4 0 0 0 0-5.656Z\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Audio')}</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{:else if tabId === 'chats'}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\n\t\t\t\t\t\t\t\t'chats'\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tselectedTab = 'chats';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M8 2C4.262 2 1 4.57 1 8c0 1.86.98 3.486 2.455 4.566a3.472 3.472 0 0 1-.469 1.26.75.75 0 0 0 .713 1.14 6.961 6.961 0 0 0 3.06-1.06c.403.062.818.094 1.241.094 3.738 0 7-2.57 7-6s-3.262-6-7-6ZM5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm7-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z\"\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Chats')}</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{:else if tabId === 'account'}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\n\t\t\t\t\t\t\t\t'account'\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tselectedTab = 'account';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-5-2a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM8 9c-1.825 0-3.422.977-4.295 2.437A5.49 5.49 0 0 0 8 13.5a5.49 5.49 0 0 0 4.294-2.063A4.997 4.997 0 0 0 8 9Z\"\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Account')}</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{:else if tabId === 'about'}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\n\t\t\t\t\t\t\t\t'about'\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tselectedTab = 'about';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z\"\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('About')}</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{:else if tabId === 'admin'}\n\t\t\t\t\t\t\t{#if $user.role === 'admin'}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"px-0.5 py-1 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\n\t\t\t\t\t\t\t\t\t'admin'\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: ' text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'}\"\n\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\tawait goto('/admin/settings');\n\t\t\t\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z\"\n\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Admin Settings')}</div>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/each}\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"text-center text-gray-500 mt-4\">\n\t\t\t\t\t\t{$i18n.t('No results found')}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<div class=\"flex-1 md:min-h-[32rem] max-h-[32rem]\">\n\t\t\t\t{#if selectedTab === 'general'}\n\t\t\t\t\t<General\n\t\t\t\t\t\t{getModels}\n\t\t\t\t\t\t{saveSettings}\n\t\t\t\t\t\ton:save={() => {\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t{:else if selectedTab === 'interface'}\n\t\t\t\t\t<Interface\n\t\t\t\t\t\t{saveSettings}\n\t\t\t\t\t\ton:save={() => {\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t{:else if selectedTab === 'connections'}\n\t\t\t\t\t<Connections\n\t\t\t\t\t\tsaveSettings={async (updated) => {\n\t\t\t\t\t\t\tawait saveSettings(updated);\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t{:else if selectedTab === 'personalization'}\n\t\t\t\t\t<Personalization\n\t\t\t\t\t\t{saveSettings}\n\t\t\t\t\t\ton:save={() => {\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t{:else if selectedTab === 'audio'}\n\t\t\t\t\t<Audio\n\t\t\t\t\t\t{saveSettings}\n\t\t\t\t\t\ton:save={() => {\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t{:else if selectedTab === 'chats'}\n\t\t\t\t\t<Chats {saveSettings} />\n\t\t\t\t{:else if selectedTab === 'account'}\n\t\t\t\t\t<Account\n\t\t\t\t\t\t{saveSettings}\n\t\t\t\t\t\tsaveHandler={() => {\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t{:else if selectedTab === 'about'}\n\t\t\t\t\t<About />\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n\n<style>\n\tinput::-webkit-outer-spin-button,\n\tinput::-webkit-inner-spin-button {\n\t\t/* display: none; <- Crashes Chrome on hover */\n\t\t-webkit-appearance: none;\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\n\t}\n\n\t.tabs::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.tabs {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n\n\tinput[type='number'] {\n\t\t-moz-appearance: textfield; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { onMount, tick, getContext } from 'svelte';\n\timport { openDB, deleteDB } from 'idb';\n\timport fileSaver from 'file-saver';\n\tconst { saveAs } = fileSaver;\n\timport mermaid from 'mermaid';\n\n\timport { goto } from '$app/navigation';\n\timport { page } from '$app/stores';\n\timport { fade } from 'svelte/transition';\n\n\timport { getKnowledgeBases } from '$lib/apis/knowledge';\n\timport { getFunctions } from '$lib/apis/functions';\n\timport { getModels, getVersionUpdates } from '$lib/apis';\n\timport { getAllTags } from '$lib/apis/chats';\n\timport { getPrompts } from '$lib/apis/prompts';\n\timport { getTools } from '$lib/apis/tools';\n\timport { getBanners } from '$lib/apis/configs';\n\timport { getUserSettings } from '$lib/apis/users';\n\n\timport { WEBUI_VERSION } from '$lib/constants';\n\timport { compareVersion } from '$lib/utils';\n\n\timport {\n\t\tconfig,\n\t\tuser,\n\t\tsettings,\n\t\tmodels,\n\t\tprompts,\n\t\tknowledge,\n\t\ttools,\n\t\tfunctions,\n\t\ttags,\n\t\tbanners,\n\t\tshowSettings,\n\t\tshowChangelog,\n\t\ttemporaryChatEnabled\n\t} from '$lib/stores';\n\n\timport Sidebar from '$lib/components/layout/Sidebar.svelte';\n\timport SettingsModal from '$lib/components/chat/SettingsModal.svelte';\n\timport ChangelogModal from '$lib/components/ChangelogModal.svelte';\n\timport AccountPending from '$lib/components/layout/Overlay/AccountPending.svelte';\n\timport UpdateInfoToast from '$lib/components/layout/UpdateInfoToast.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\tlet loaded = false;\n\tlet DB = null;\n\tlet localDBChats = [];\n\n\tlet version;\n\n\tonMount(async () => {\n\t\tif ($user === undefined) {\n\t\t\tawait goto('/auth');\n\t\t} else if (['user', 'admin'].includes($user.role)) {\n\t\t\ttry {\n\t\t\t\t// Check if IndexedDB exists\n\t\t\t\tDB = await openDB('Chats', 1);\n\n\t\t\t\tif (DB) {\n\t\t\t\t\tconst chats = await DB.getAllFromIndex('chats', 'timestamp');\n\t\t\t\t\tlocalDBChats = chats.map((item, idx) => chats[chats.length - 1 - idx]);\n\n\t\t\t\t\tif (localDBChats.length === 0) {\n\t\t\t\t\t\tawait deleteDB('Chats');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconsole.log(DB);\n\t\t\t} catch (error) {\n\t\t\t\t// IndexedDB Not Found\n\t\t\t}\n\n\t\t\tconst userSettings = await getUserSettings(localStorage.token).catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (userSettings) {\n\t\t\t\tsettings.set(userSettings.ui);\n\t\t\t} else {\n\t\t\t\tlet localStorageSettings = {} as Parameters<(typeof settings)['set']>[0];\n\n\t\t\t\ttry {\n\t\t\t\t\tlocalStorageSettings = JSON.parse(localStorage.getItem('settings') ?? '{}');\n\t\t\t\t} catch (e: unknown) {\n\t\t\t\t\tconsole.error('Failed to parse settings from localStorage', e);\n\t\t\t\t}\n\n\t\t\t\tsettings.set(localStorageSettings);\n\t\t\t}\n\n\t\t\tmodels.set(\n\t\t\t\tawait getModels(\n\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t\t)\n\t\t\t);\n\t\t\tbanners.set(await getBanners(localStorage.token));\n\t\t\ttools.set(await getTools(localStorage.token));\n\n\t\t\tdocument.addEventListener('keydown', async function (event) {\n\t\t\t\tconst isCtrlPressed = event.ctrlKey || event.metaKey; // metaKey is for Cmd key on Mac\n\t\t\t\t// Check if the Shift key is pressed\n\t\t\t\tconst isShiftPressed = event.shiftKey;\n\n\t\t\t\t// Check if Ctrl + Shift + O is pressed\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === 'o') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconsole.log('newChat');\n\t\t\t\t\tdocument.getElementById('sidebar-new-chat-button')?.click();\n\t\t\t\t}\n\n\t\t\t\t// Check if Shift + Esc is pressed\n\t\t\t\tif (isShiftPressed && event.key === 'Escape') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconsole.log('focusInput');\n\t\t\t\t\tdocument.getElementById('chat-input')?.focus();\n\t\t\t\t}\n\n\t\t\t\t// Check if Ctrl + Shift + ; is pressed\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key === ';') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconsole.log('copyLastCodeBlock');\n\t\t\t\t\tconst button = [...document.getElementsByClassName('copy-code-button')]?.at(-1);\n\t\t\t\t\tbutton?.click();\n\t\t\t\t}\n\n\t\t\t\t// Check if Ctrl + Shift + C is pressed\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === 'c') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconsole.log('copyLastResponse');\n\t\t\t\t\tconst button = [...document.getElementsByClassName('copy-response-button')]?.at(-1);\n\t\t\t\t\tconsole.log(button);\n\t\t\t\t\tbutton?.click();\n\t\t\t\t}\n\n\t\t\t\t// Check if Ctrl + Shift + S is pressed\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === 's') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconsole.log('toggleSidebar');\n\t\t\t\t\tdocument.getElementById('sidebar-toggle-button')?.click();\n\t\t\t\t}\n\n\t\t\t\t// Check if Ctrl + Shift + Backspace is pressed\n\t\t\t\tif (\n\t\t\t\t\tisCtrlPressed &&\n\t\t\t\t\tisShiftPressed &&\n\t\t\t\t\t(event.key === 'Backspace' || event.key === 'Delete')\n\t\t\t\t) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconsole.log('deleteChat');\n\t\t\t\t\tdocument.getElementById('delete-chat-button')?.click();\n\t\t\t\t}\n\n\t\t\t\t// Check if Ctrl + . is pressed\n\t\t\t\tif (isCtrlPressed && event.key === '.') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconsole.log('openSettings');\n\t\t\t\t\tshowSettings.set(!$showSettings);\n\t\t\t\t}\n\n\t\t\t\t// Check if Ctrl + / is pressed\n\t\t\t\tif (isCtrlPressed && event.key === '/') {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconsole.log('showShortcuts');\n\t\t\t\t\tdocument.getElementById('show-shortcuts-button')?.click();\n\t\t\t\t}\n\n\t\t\t\t// Check if Ctrl + Shift + ' is pressed\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === `'`) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconsole.log('temporaryChat');\n\t\t\t\t\ttemporaryChatEnabled.set(!$temporaryChatEnabled);\n\t\t\t\t\tawait goto('/');\n\t\t\t\t\tconst newChatButton = document.getElementById('new-chat-button');\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tnewChatButton?.click();\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif ($user.role === 'admin' && ($settings?.showChangelog ?? true)) {\n\t\t\t\tshowChangelog.set($settings?.version !== $config.version);\n\t\t\t}\n\n\t\t\tif ($page.url.searchParams.get('temporary-chat') === 'true') {\n\t\t\t\ttemporaryChatEnabled.set(true);\n\t\t\t}\n\n\t\t\t// Check for version updates\n\t\t\tif ($user.role === 'admin') {\n\t\t\t\t// Check if the user has dismissed the update toast in the last 24 hours\n\t\t\t\tif (localStorage.dismissedUpdateToast) {\n\t\t\t\t\tconst dismissedUpdateToast = new Date(Number(localStorage.dismissedUpdateToast));\n\t\t\t\t\tconst now = new Date();\n\n\t\t\t\t\tif (now - dismissedUpdateToast > 24 * 60 * 60 * 1000) {\n\t\t\t\t\t\tcheckForVersionUpdates();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcheckForVersionUpdates();\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait tick();\n\t\t}\n\n\t\tloaded = true;\n\t});\n\n\tconst checkForVersionUpdates = async () => {\n\t\tversion = await getVersionUpdates(localStorage.token).catch((error) => {\n\t\t\treturn {\n\t\t\t\tcurrent: WEBUI_VERSION,\n\t\t\t\tlatest: WEBUI_VERSION\n\t\t\t};\n\t\t});\n\t};\n</script>\n\n<SettingsModal bind:show={$showSettings} />\n<!-- <ChangelogModal bind:show={$showChangelog} /> -->\n\n<div class=\"app relative\">\n\t<div\n\t\tclass=\" text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900 h-screen max-h-[100dvh] overflow-auto flex flex-row justify-end\"\n\t>\n\t\t{#if loaded}\n\t\t\t{#if !['user', 'admin'].includes($user.role)}\n\t\t\t\t<AccountPending />\n\t\t\t{:else if localDBChats.length > 0}\n\t\t\t\t<div class=\"fixed w-full h-full flex z-50\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"absolute w-full h-full backdrop-blur-md bg-white/20 dark:bg-gray-900/50 flex justify-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"m-auto pb-44 flex flex-col justify-center\">\n\t\t\t\t\t\t\t<div class=\"max-w-md\">\n\t\t\t\t\t\t\t\t<div class=\"text-center dark:text-white text-2xl font-medium z-50\">\n\t\t\t\t\t\t\t\t\tImportant Update<br /> Action Required for Chat Log Storage\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\" mt-4 text-center text-sm dark:text-gray-200 w-full\">\n\t\t\t\t\t\t\t\t\t{$i18n.t(\n\t\t\t\t\t\t\t\t\t\t\"Saving chat logs directly to your browser's storage is no longer supported. Please take a moment to download and delete your chat logs by clicking the button below. Don't worry, you can easily re-import your chat logs to the backend through\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<span class=\"font-semibold dark:text-white\"\n\t\t\t\t\t\t\t\t\t\t>{$i18n.t('Settings')} > {$i18n.t('Chats')} > {$i18n.t('Import Chats')}</span\n\t\t\t\t\t\t\t\t\t>. {$i18n.t(\n\t\t\t\t\t\t\t\t\t\t'This ensures that your valuable conversations are securely saved to your backend database. Thank you!'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\" mt-6 mx-auto relative group w-fit\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"relative z-20 flex px-5 py-2 rounded-full bg-white border border-gray-100 dark:border-none hover:bg-gray-100 transition font-medium text-sm\"\n\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\tlet blob = new Blob([JSON.stringify(localDBChats)], {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'application/json'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tsaveAs(blob, `chat-export-${Date.now()}.json`);\n\n\t\t\t\t\t\t\t\t\t\t\tconst tx = DB.transaction('chats', 'readwrite');\n\t\t\t\t\t\t\t\t\t\t\tawait Promise.all([tx.store.clear(), tx.done]);\n\t\t\t\t\t\t\t\t\t\t\tawait deleteDB('Chats');\n\n\t\t\t\t\t\t\t\t\t\t\tlocalDBChats = [];\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tDownload & Delete\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"text-xs text-center w-full mt-2 text-gray-400 underline\"\n\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\tlocalDBChats = [];\n\t\t\t\t\t\t\t\t\t\t}}>{$i18n.t('Close')}</button\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<Sidebar />\n\t\t\t<slot />\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t.loading {\n\t\tdisplay: inline-block;\n\t\tclip-path: inset(0 1ch 0 0);\n\t\tanimation: l 1s steps(3) infinite;\n\t\tletter-spacing: -0.5px;\n\t}\n\n\t@keyframes l {\n\t\tto {\n\t\t\tclip-path: inset(0 -1ch 0 0);\n\t\t}\n\t}\n\n\tpre[class*='language-'] {\n\t\tposition: relative;\n\t\toverflow: auto;\n\n\t\t/* make space  */\n\t\tmargin: 5px 0;\n\t\tpadding: 1.75rem 0 1.75rem 1rem;\n\t\tborder-radius: 10px;\n\t}\n\n\tpre[class*='language-'] button {\n\t\tposition: absolute;\n\t\ttop: 5px;\n\t\tright: 5px;\n\n\t\tfont-size: 0.9rem;\n\t\tpadding: 0.15rem;\n\t\tbackground-color: #828282;\n\n\t\tborder: ridge 1px #7b7b7c;\n\t\tborder-radius: 5px;\n\t\ttext-shadow: #c4c4c4 0 0 2px;\n\t}\n\n\tpre[class*='language-'] button:hover {\n\t\tcursor: pointer;\n\t\tbackground-color: #bcbabb;\n\t}\n</style>\n"],"names":["getModels","_getModels"],"mappings":"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,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,UAAA;AAAA,QACC;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA;;;MAID,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,UAAA;AAAA,QACC;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA;;;MAID,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,UAAA;AAAA,QACC;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA;;;MAID,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,UAAA;AAAA,QACC;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA;;;MAID,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,UAAA;AAAA,QACC;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA;;;MAgCC,SAAS;AACT,MAAA,cAAc,WAAW,IAAK,SAAQ,IAAI,EAAE;QAwB1C,eAAsB,OAAA,YAAA;AAC3B,YAAQ,IAAI,mBAAmB,aAAa,QAAQ,QAAQ,CAAA;AAC5D,YAAQ,IAAI,OAAO;AACb,UAAA,SAAS,SAAS,WAAc,GAAA,QAAA,CAAA;AAChC,UAAA,OAAO,IAAU,MAAAA,YAAA,CAAA;UACjB,mBAAmB,aAAa,SAAS,IAAI,UAAA,CAAA;AAAA;AAG9C,QAAAA,cAAA,YAAA;AACQ,WAAA,MAAAC,UACZ,aAAa,OACb,SAAS,UAAU,8BAA8B,WAAW,qBAAqB,KAAA;AAAA;QAO7E,gBAAiB,WAAA;UAChB,wBAAwB,SAAS,eAAe,yBAAyB;AAC3E,QAAA,uBAAA;AACH,YAAM,eAAA;AACN,4BAAsB,cAAc,MAAM;AAAA;;AAItC,QAAA,oBAAA,YAAA;AACC,UAAA,KAAA;UACA,wBAAwB,SAAS,eAAe,yBAAyB;AAC3E,QAAA,uBAAA;AACH,4BAAsB,iBAAiB,SAAS,aAAa;AAAA;;AAIzD,QAAA,uBAAA,YAAA;AACC,UAAA,KAAA;UACA,wBAAwB,SAAS,eAAe,yBAAyB;AAC3E,QAAA,uBAAA;AACH,4BAAsB,oBAAoB,SAAS,aAAa;AAAA;;;;;;;;;;;AAI3D,UAAA,MAAA;AACN;;AAEA;;;;;;;;;;;;;;AAOgD,iBAAA,kKAAA,OAAA,MAAM,EAAE,UAAU,CAAA,CAAA,+yBAAA,mBAAA,QAAA,QAAA,EAAA,SAAA,UAAA,EAAA,WAAA,WAAA,GAAA,CAAA,GAAA,CAAA,CAAA,CAAA,8GAAA,cAAA,eAiCjD,MAAM,EAAE,QAAQ,+BAFjB,QAAM,CAAA,CAAA,WAMf,YAAY,SAAS,YAClB,aAAW,WAAA;AACZ,mBAAA,GAAA,UAAU;cAIV;AAAA;kiCAoBwB,MAAM,EAAE,SAAS,CAAA,CAAA,qBAEpC,GAAA,UAAU;cAKf;AAAA;0pBAmBwB,MAAM,EAAE,WAAW,CAAA,CAAA,qBAEtC,GAAA,UAAU,gBACd,GAAA,MAAM,SAAS,WAAY,MAAM,SAAS,UAAU,SAAS,UAAU;cAKvE;AAAA;6WAiBwB,MAAM,EAAE,aAAa,CAAA,CAAA,4BAGzC,GAAA,UAAU;cAKf;AAAA;yJAQwB,MAAM,EAAE,iBAAiB,CAAA,CAAA,qBAE5C,GAAA,UAAU;cAKf;AAAA;4kBAoBwB,MAAM,EAAE,OAAO,CAAA,CAAA,qBAElC,GAAA,UAAU;cAKf;AAAA;qjBAmBwB,MAAM,EAAE,OAAO,CAAA,CAAA,qBAElC,GAAA,UAAU;cAKf;AAAA;ucAmBwB,MAAM,EAAE,SAAS,CAAA,CAAA,qBAEpC,GAAA,UAAU;cAKf;AAAA;4fAmBwB,MAAM,EAAE,OAAO,CAAA,CAAA,qBAElC,GAAA,UAAU,aACd,MAAM,SAAS;cAKf;AAAA;kuBAoBwB,MAAM,EAAE,gBAAgB,CAAA,CAAA;iBAOrD,+CAAA,OAAA,MAAM,EAAE,kBAAkB,CAKxB,CAAA,QAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrlBF,QAAA,OAAO,WAAW,MAAM;;;;;;;;;;;cAiLL,cAAa;AAAA;;AAAb,0BAAa;;;;;;;;;;;;;;;;"}