{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../src/lib/components/icons/Share.svelte","../../../../../../../../src/lib/components/icons/DocumentDuplicate.svelte","../../../../../../../../src/lib/components/icons/GlobeAlt.svelte","../../../../../../../../src/lib/components/admin/Functions/FunctionMenu.svelte","../../../../../../../../src/lib/components/workspace/common/ValvesModal.svelte","../../../../../../../../src/lib/components/workspace/common/ManifestModal.svelte","../../../../../../../../src/lib/components/admin/Functions.svelte","../../../../../../../../src/routes/(app)/admin/functions/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n</script>\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class={className}>\n\t<path\n\t\tfill-rule=\"evenodd\"\n\t\td=\"M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z\"\n\t\tclip-rule=\"evenodd\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext } from 'svelte';\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Share from '$lib/components/icons/Share.svelte';\n\timport DocumentDuplicate from '$lib/components/icons/DocumentDuplicate.svelte';\n\timport ArrowDownTray from '$lib/components/icons/ArrowDownTray.svelte';\n\timport Switch from '$lib/components/common/Switch.svelte';\n\timport GlobeAlt from '$lib/components/icons/GlobeAlt.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let func;\n\n\texport let editHandler: Function;\n\texport let shareHandler: Function;\n\texport let cloneHandler: Function;\n\texport let exportHandler: Function;\n\texport let deleteHandler: Function;\n\texport let toggleGlobalHandler: Function;\n\n\texport let onClose: Function;\n\n\tlet show = false;\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n>\n\t<Tooltip content={$i18n.t('More')}>\n\t\t<slot />\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[180px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm\"\n\t\t\tsideOffset={-2}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"start\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t{#if ['filter', 'action'].includes(func.type)}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex gap-2 justify-between items-center px-3 py-2 text-sm font-medium cursor-pointerrounded-md\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t\t<GlobeAlt />\n\n\t\t\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Global')}</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Switch on:change={toggleGlobalHandler} bind:state={func.is_global} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<hr class=\"border-gray-100 dark:border-gray-850 my-1\" />\n\t\t\t{/if}\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\teditHandler();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Edit')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshareHandler();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Share />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Share')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tcloneHandler();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<DocumentDuplicate />\n\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Clone')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\texportHandler();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<ArrowDownTray />\n\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Export')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<hr class=\"border-gray-100 dark:border-gray-850 my-1\" />\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdeleteHandler();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<GarbageBin strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Delete')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { createEventDispatcher } from 'svelte';\n\timport { onMount, getContext } from 'svelte';\n\timport { addUser } from '$lib/apis/auths';\n\n\timport Modal from '../../common/Modal.svelte';\n\timport {\n\t\tgetFunctionValvesById,\n\t\tgetFunctionValvesSpecById,\n\t\tupdateFunctionValvesById\n\t} from '$lib/apis/functions';\n\timport { getToolValvesById, getToolValvesSpecById, updateToolValvesById } from '$lib/apis/tools';\n\timport Spinner from '../../common/Spinner.svelte';\n\timport Switch from '$lib/components/common/Switch.svelte';\n\timport Valves from '$lib/components/common/Valves.svelte';\n\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\texport let show = false;\n\n\texport let type = 'tool';\n\texport let id = null;\n\n\tlet saving = false;\n\tlet loading = false;\n\n\tlet valvesSpec = null;\n\tlet valves = {};\n\n\tconst submitHandler = async () => {\n\t\tsaving = true;\n\n\t\tif (valvesSpec) {\n\t\t\t// Convert string to array\n\t\t\tfor (const property in valvesSpec.properties) {\n\t\t\t\tif (valvesSpec.properties[property]?.type === 'array') {\n\t\t\t\t\tvalves[property] = (valves[property] ?? '').split(',').map((v) => v.trim());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet res = null;\n\n\t\t\tif (type === 'tool') {\n\t\t\t\tres = await updateToolValvesById(localStorage.token, id, valves).catch((error) => {\n\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t});\n\t\t\t} else if (type === 'function') {\n\t\t\t\tres = await updateFunctionValvesById(localStorage.token, id, valves).catch((error) => {\n\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (res) {\n\t\t\t\ttoast.success('Valves updated successfully');\n\t\t\t\tdispatch('save');\n\t\t\t}\n\t\t}\n\n\t\tsaving = false;\n\t};\n\n\tconst initHandler = async () => {\n\t\tloading = true;\n\t\tvalves = {};\n\t\tvalvesSpec = null;\n\n\t\tif (type === 'tool') {\n\t\t\tvalves = await getToolValvesById(localStorage.token, id);\n\t\t\tvalvesSpec = await getToolValvesSpecById(localStorage.token, id);\n\t\t} else if (type === 'function') {\n\t\t\tvalves = await getFunctionValvesById(localStorage.token, id);\n\t\t\tvalvesSpec = await getFunctionValvesSpecById(localStorage.token, id);\n\t\t}\n\n\t\tif (!valves) {\n\t\t\tvalves = {};\n\t\t}\n\n\t\tif (valvesSpec) {\n\t\t\t// Convert array to string\n\t\t\tfor (const property in valvesSpec.properties) {\n\t\t\t\tif (valvesSpec.properties[property]?.type === 'array') {\n\t\t\t\t\tvalves[property] = (valves[property] ?? []).join(',');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tloading = false;\n\t};\n\n\t$: if (show) {\n\t\tinitHandler();\n\t}\n</script>\n\n<Modal size=\"sm\" bind:show>\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Valves')}</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200\">\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\n\t\t\t\t<form\n\t\t\t\t\tclass=\"flex flex-col w-full\"\n\t\t\t\t\ton:submit|preventDefault={() => {\n\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"px-1\">\n\t\t\t\t\t\t{#if !loading}\n\t\t\t\t\t\t\t<Valves {valvesSpec} bind:valves />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Spinner className=\"size-5\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full {saving\n\t\t\t\t\t\t\t\t? ' cursor-not-allowed'\n\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={saving}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Save')}\n\n\t\t\t\t\t\t\t{#if saving}\n\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t><style>\n\t\t\t\t\t\t\t\t\t\t\t.spinner_ajPY {\n\t\t\t\t\t\t\t\t\t\t\t\ttransform-origin: center;\n\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\n\t\t\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</style><path\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\n\t\t\t\t\t\t\t\t\t\t\topacity=\".25\"\n\t\t\t\t\t\t\t\t\t\t/><path\n\t\t\t\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\n\t\t\t\t\t\t\t\t\t\t/></svg\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n\n<style>\n\tinput::-webkit-outer-spin-button,\n\tinput::-webkit-inner-spin-button {\n\t\t/* display: none; <- Crashes Chrome on hover */\n\t\t-webkit-appearance: none;\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\n\t}\n\n\t.tabs::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.tabs {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n\n\tinput[type='number'] {\n\t\t-moz-appearance: textfield; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { createEventDispatcher } from 'svelte';\n\timport { onMount, getContext } from 'svelte';\n\n\timport Modal from '../../common/Modal.svelte';\n\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\texport let show = false;\n\texport let manifest = {};\n</script>\n\n<Modal size=\"sm\" bind:show>\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Show your support!')}</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200\">\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\n\t\t\t\t<form\n\t\t\t\t\tclass=\"flex flex-col w-full\"\n\t\t\t\t\ton:submit|preventDefault={() => {\n\t\t\t\t\t\tshow = false;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"px-1 text-sm\">\n\t\t\t\t\t\t<div class=\"my-2\">\n\t\t\t\t\t\t\t{$i18n.t(\n\t\t\t\t\t\t\t\t'The developers behind this plugin are passionate volunteers from the community. If you find this plugin helpful, please consider contributing to its development.'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"my-2\">\n\t\t\t\t\t\t\t{$i18n.t(\n\t\t\t\t\t\t\t\t'Your entire contribution will go directly to the plugin developer; Open WebUI does not take any percentage. However, the chosen funding platform might have its own fees.'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<hr class=\"dark:border-gray-800 my-3\" />\n\t\t\t\t\t\t<div class=\"my-2\">\n\t\t\t\t\t\t\t{$i18n.t('Support this plugin:')}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={manifest.funding_url}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\tclass=\"underline text-blue-400 hover:text-blue-300\">{manifest.funding_url}</a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg flex flex-row space-x-1 items-center\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Done')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n\n<style>\n\tinput::-webkit-outer-spin-button,\n\tinput::-webkit-inner-spin-button {\n\t\t/* display: none; <- Crashes Chrome on hover */\n\t\t-webkit-appearance: none;\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\n\t}\n\n\t.tabs::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.tabs {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n\n\tinput[type='number'] {\n\t\t-moz-appearance: textfield; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport fileSaver from 'file-saver';\n\tconst { saveAs } = fileSaver;\n\n\timport { WEBUI_NAME, config, functions, models, settings } from '$lib/stores';\n\timport { onMount, getContext, tick } from 'svelte';\n\n\timport { goto } from '$app/navigation';\n\timport {\n\t\tcreateNewFunction,\n\t\tdeleteFunctionById,\n\t\texportFunctions,\n\t\tgetFunctionById,\n\t\tgetFunctions,\n\t\ttoggleFunctionById,\n\t\ttoggleGlobalById\n\t} from '$lib/apis/functions';\n\n\timport ArrowDownTray from '../icons/ArrowDownTray.svelte';\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport ConfirmDialog from '../common/ConfirmDialog.svelte';\n\timport { getModels } from '$lib/apis';\n\timport FunctionMenu from './Functions/FunctionMenu.svelte';\n\timport EllipsisHorizontal from '../icons/EllipsisHorizontal.svelte';\n\timport Switch from '../common/Switch.svelte';\n\timport ValvesModal from '../workspace/common/ValvesModal.svelte';\n\timport ManifestModal from '../workspace/common/ManifestModal.svelte';\n\timport Heart from '../icons/Heart.svelte';\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\timport GarbageBin from '../icons/GarbageBin.svelte';\n\timport Search from '../icons/Search.svelte';\n\timport Plus from '../icons/Plus.svelte';\n\timport ChevronRight from '../icons/ChevronRight.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\tlet shiftKey = false;\n\n\tlet functionsImportInputElement: HTMLInputElement;\n\tlet importFiles;\n\n\tlet showConfirm = false;\n\tlet query = '';\n\n\tlet showManifestModal = false;\n\tlet showValvesModal = false;\n\tlet selectedFunction = null;\n\n\tlet showDeleteConfirm = false;\n\n\tlet filteredItems = [];\n\t$: filteredItems = $functions\n\t\t.filter(\n\t\t\t(f) =>\n\t\t\t\tquery === '' ||\n\t\t\t\tf.name.toLowerCase().includes(query.toLowerCase()) ||\n\t\t\t\tf.id.toLowerCase().includes(query.toLowerCase())\n\t\t)\n\t\t.sort((a, b) => a.type.localeCompare(b.type) || a.name.localeCompare(b.name));\n\n\tconst shareHandler = async (func) => {\n\t\tconst item = await getFunctionById(localStorage.token, func.id).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\ttoast.success($i18n.t('Redirecting you to Open WebUI Community'));\n\n\t\tconst url = 'https://openwebui.com';\n\n\t\tconst tab = await window.open(`${url}/functions/create`, '_blank');\n\n\t\t// Define the event handler function\n\t\tconst messageHandler = (event) => {\n\t\t\tif (event.origin !== url) return;\n\t\t\tif (event.data === 'loaded') {\n\t\t\t\ttab.postMessage(JSON.stringify(item), '*');\n\n\t\t\t\t// Remove the event listener after handling the message\n\t\t\t\twindow.removeEventListener('message', messageHandler);\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener('message', messageHandler, false);\n\t\tconsole.log(item);\n\t};\n\n\tconst cloneHandler = async (func) => {\n\t\tconst _function = await getFunctionById(localStorage.token, func.id).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (_function) {\n\t\t\tsessionStorage.function = JSON.stringify({\n\t\t\t\t..._function,\n\t\t\t\tid: `${_function.id}_clone`,\n\t\t\t\tname: `${_function.name} (Clone)`\n\t\t\t});\n\t\t\tgoto('/admin/functions/create');\n\t\t}\n\t};\n\n\tconst exportHandler = async (func) => {\n\t\tconst _function = await getFunctionById(localStorage.token, func.id).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (_function) {\n\t\t\tlet blob = new Blob([JSON.stringify([_function])], {\n\t\t\t\ttype: 'application/json'\n\t\t\t});\n\t\t\tsaveAs(blob, `function-${_function.id}-export-${Date.now()}.json`);\n\t\t}\n\t};\n\n\tconst deleteHandler = async (func) => {\n\t\tconst res = await deleteFunctionById(localStorage.token, func.id).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Function deleted successfully'));\n\n\t\t\tfunctions.set(await getFunctions(localStorage.token));\n\t\t\tmodels.set(\n\t\t\t\tawait getModels(\n\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n\n\tconst toggleGlobalHandler = async (func) => {\n\t\tconst res = await toggleGlobalById(localStorage.token, func.id).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t});\n\n\t\tif (res) {\n\t\t\tif (func.is_global) {\n\t\t\t\tfunc.type === 'filter'\n\t\t\t\t\t? toast.success($i18n.t('Filter is now globally enabled'))\n\t\t\t\t\t: toast.success($i18n.t('Function is now globally enabled'));\n\t\t\t} else {\n\t\t\t\tfunc.type === 'filter'\n\t\t\t\t\t? toast.success($i18n.t('Filter is now globally disabled'))\n\t\t\t\t\t: toast.success($i18n.t('Function is now globally disabled'));\n\t\t\t}\n\n\t\t\tfunctions.set(await getFunctions(localStorage.token));\n\t\t\tmodels.set(\n\t\t\t\tawait getModels(\n\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tconst onKeyDown = (event) => {\n\t\t\tif (event.key === 'Shift') {\n\t\t\t\tshiftKey = true;\n\t\t\t}\n\t\t};\n\n\t\tconst onKeyUp = (event) => {\n\t\t\tif (event.key === 'Shift') {\n\t\t\t\tshiftKey = false;\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = () => {\n\t\t\tshiftKey = false;\n\t\t};\n\n\t\twindow.addEventListener('keydown', onKeyDown);\n\t\twindow.addEventListener('keyup', onKeyUp);\n\t\twindow.addEventListener('blur-sm', onBlur);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', onKeyDown);\n\t\t\twindow.removeEventListener('keyup', onKeyUp);\n\t\t\twindow.removeEventListener('blur-sm', onBlur);\n\t\t};\n\t});\n</script>\n\n<svelte:head>\n\t<title>\n\t\t{$i18n.t('Functions')} | {$WEBUI_NAME}\n\t</title>\n</svelte:head>\n\n<div class=\"flex flex-col gap-1 mt-1.5 mb-2\">\n\t<div class=\"flex justify-between items-center\">\n\t\t<div class=\"flex md:self-center text-xl items-center font-medium px-0.5\">\n\t\t\t{$i18n.t('Functions')}\n\t\t\t<div class=\"flex self-center w-[1px] h-6 mx-2.5 bg-gray-50 dark:bg-gray-850\" />\n\t\t\t<span class=\"text-base font-lg text-gray-500 dark:text-gray-300\">{filteredItems.length}</span>\n\t\t</div>\n\t</div>\n\n\t<div class=\" flex w-full space-x-2\">\n\t\t<div class=\"flex flex-1\">\n\t\t\t<div class=\" self-center ml-1 mr-3\">\n\t\t\t\t<Search className=\"size-3.5\" />\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\tclass=\" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent\"\n\t\t\t\tbind:value={query}\n\t\t\t\tplaceholder={$i18n.t('Search Functions')}\n\t\t\t/>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<a\n\t\t\t\tclass=\" px-2 py-2 rounded-xl hover:bg-gray-700/10 dark:hover:bg-gray-100/10 dark:text-gray-300 dark:hover:text-white transition font-medium text-sm flex items-center space-x-1\"\n\t\t\t\thref=\"/admin/functions/create\"\n\t\t\t>\n\t\t\t\t<Plus className=\"size-3.5\" />\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=\"mb-5\">\n\t{#each filteredItems as func (func.id)}\n\t\t<div\n\t\t\tclass=\" flex space-x-4 cursor-pointer w-full px-3 py-2 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl\"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass=\" flex flex-1 space-x-3.5 cursor-pointer w-full\"\n\t\t\t\thref={`/admin/functions/edit?id=${encodeURIComponent(func.id)}`}\n\t\t\t>\n\t\t\t\t<div class=\"flex items-center text-left\">\n\t\t\t\t\t<div class=\" flex-1 self-center pl-1\">\n\t\t\t\t\t\t<div class=\" font-semibold flex items-center gap-1.5\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" text-xs font-bold px-1 rounded-sm uppercase line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{func.type}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{#if func?.meta?.manifest?.version}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"text-xs font-bold px-1 rounded-sm line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tv{func?.meta?.manifest?.version ?? ''}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t<div class=\" line-clamp-1\">\n\t\t\t\t\t\t\t\t{func.name}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"flex gap-1.5 px-1\">\n\t\t\t\t\t\t\t<div class=\" text-gray-500 text-xs font-medium shrink-0\">{func.id}</div>\n\n\t\t\t\t\t\t\t<div class=\" text-xs overflow-hidden text-ellipsis line-clamp-1\">\n\t\t\t\t\t\t\t\t{func.meta.description}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t\t<div class=\"flex flex-row gap-0.5 self-center\">\n\t\t\t\t{#if shiftKey}\n\t\t\t\t\t<Tooltip content={$i18n.t('Delete')}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tdeleteHandler(func);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<GarbageBin />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t{:else}\n\t\t\t\t\t{#if func?.meta?.manifest?.funding_url ?? false}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Support')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tselectedFunction = func;\n\t\t\t\t\t\t\t\t\tshowManifestModal = true;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Heart />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<Tooltip content={$i18n.t('Valves')}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tselectedFunction = func;\n\t\t\t\t\t\t\t\tshowValvesModal = true;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\td=\"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\td=\"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t<FunctionMenu\n\t\t\t\t\t\t{func}\n\t\t\t\t\t\teditHandler={() => {\n\t\t\t\t\t\t\tgoto(`/admin/functions/edit?id=${encodeURIComponent(func.id)}`);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tshareHandler={() => {\n\t\t\t\t\t\t\tshareHandler(func);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcloneHandler={() => {\n\t\t\t\t\t\t\tcloneHandler(func);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\texportHandler={() => {\n\t\t\t\t\t\t\texportHandler(func);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdeleteHandler={async () => {\n\t\t\t\t\t\t\tselectedFunction = func;\n\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttoggleGlobalHandler={() => {\n\t\t\t\t\t\t\tif (['filter', 'action'].includes(func.type)) {\n\t\t\t\t\t\t\t\ttoggleGlobalHandler(func);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClose={() => {}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<EllipsisHorizontal className=\"size-5\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</FunctionMenu>\n\t\t\t\t{/if}\n\n\t\t\t\t<div class=\" self-center mx-1\">\n\t\t\t\t\t<Tooltip content={func.is_active ? $i18n.t('Enabled') : $i18n.t('Disabled')}>\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\tbind:state={func.is_active}\n\t\t\t\t\t\t\ton:change={async (e) => {\n\t\t\t\t\t\t\t\ttoggleFunctionById(localStorage.token, func.id);\n\t\t\t\t\t\t\t\tmodels.set(\n\t\t\t\t\t\t\t\t\tawait getModels(\n\t\t\t\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\t\t\t\t$config?.features?.enable_direct_connections &&\n\t\t\t\t\t\t\t\t\t\t\t($settings?.directConnections ?? null)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{/each}\n</div>\n\n<!-- <div class=\" text-gray-500 text-xs mt-1 mb-2\">\n\tⓘ {$i18n.t(\n\t\t'Admins have access to all tools at all times; users need tools assigned per model in the workspace.'\n\t)}\n</div> -->\n\n<div class=\" flex justify-end w-full mb-2\">\n\t<div class=\"flex space-x-2\">\n\t\t<input\n\t\t\tid=\"documents-import-input\"\n\t\t\tbind:this={functionsImportInputElement}\n\t\t\tbind:files={importFiles}\n\t\t\ttype=\"file\"\n\t\t\taccept=\".json\"\n\t\t\thidden\n\t\t\ton:change={() => {\n\t\t\t\tconsole.log(importFiles);\n\t\t\t\tshowConfirm = true;\n\t\t\t}}\n\t\t/>\n\n\t\t<button\n\t\t\tclass=\"flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition\"\n\t\t\ton:click={() => {\n\t\t\t\tfunctionsImportInputElement.click();\n\t\t\t}}\n\t\t>\n\t\t\t<div class=\" self-center mr-2 font-medium line-clamp-1\">{$i18n.t('Import Functions')}</div>\n\n\t\t\t<div class=\" self-center\">\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z\"\n\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t</button>\n\n\t\t<button\n\t\t\tclass=\"flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition\"\n\t\t\ton:click={async () => {\n\t\t\t\tconst _functions = await exportFunctions(localStorage.token).catch((error) => {\n\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\treturn null;\n\t\t\t\t});\n\n\t\t\t\tif (_functions) {\n\t\t\t\t\tlet blob = new Blob([JSON.stringify(_functions)], {\n\t\t\t\t\t\ttype: 'application/json'\n\t\t\t\t\t});\n\t\t\t\t\tsaveAs(blob, `functions-export-${Date.now()}.json`);\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t<div class=\" self-center mr-2 font-medium line-clamp-1\">{$i18n.t('Export Functions')}</div>\n\n\t\t\t<div class=\" self-center\">\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 3.5a.75.75 0 0 1 .75.75v2.69l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06l.72.72V6.25A.75.75 0 0 1 8 5.5Z\"\n\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t</button>\n\t</div>\n</div>\n\n{#if $config?.features.enable_community_sharing}\n\t<div class=\" my-16\">\n\t\t<div class=\" text-xl font-medium mb-1 line-clamp-1\">\n\t\t\t{$i18n.t('Made by Open WebUI Community')}\n\t\t</div>\n\n\t\t<a\n\t\t\tclass=\" flex cursor-pointer items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-850 w-full mb-2 px-3.5 py-1.5 rounded-xl transition\"\n\t\t\thref=\"https://openwebui.com/#open-webui-community\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<div class=\" self-center\">\n\t\t\t\t<div class=\" font-semibold line-clamp-1\">{$i18n.t('Discover a function')}</div>\n\t\t\t\t<div class=\" text-sm line-clamp-1\">\n\t\t\t\t\t{$i18n.t('Discover, download, and explore custom functions')}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<ChevronRight />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t</div>\n{/if}\n\n<DeleteConfirmDialog\n\tbind:show={showDeleteConfirm}\n\ttitle={$i18n.t('Delete function?')}\n\ton:confirm={() => {\n\t\tdeleteHandler(selectedFunction);\n\t}}\n>\n\t<div class=\" text-sm text-gray-500\">\n\t\t{$i18n.t('This will delete')} <span class=\"  font-semibold\">{selectedFunction.name}</span>.\n\t</div>\n</DeleteConfirmDialog>\n\n<ManifestModal bind:show={showManifestModal} manifest={selectedFunction?.meta?.manifest ?? {}} />\n<ValvesModal\n\tbind:show={showValvesModal}\n\ttype=\"function\"\n\tid={selectedFunction?.id ?? null}\n\ton:save={async () => {\n\t\tawait tick();\n\t\tmodels.set(\n\t\t\tawait getModels(\n\t\t\t\tlocalStorage.token,\n\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t)\n\t\t);\n\t}}\n/>\n\n<ConfirmDialog\n\tbind:show={showConfirm}\n\ton:confirm={() => {\n\t\tconst reader = new FileReader();\n\t\treader.onload = async (event) => {\n\t\t\tconst _functions = JSON.parse(event.target.result);\n\t\t\tconsole.log(_functions);\n\n\t\t\tfor (const func of _functions) {\n\t\t\t\tconst res = await createNewFunction(localStorage.token, func).catch((error) => {\n\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\treturn null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ttoast.success($i18n.t('Functions imported successfully'));\n\t\t\tfunctions.set(await getFunctions(localStorage.token));\n\t\t\tmodels.set(\n\t\t\t\tawait getModels(\n\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\n\t\treader.readAsText(importFiles[0]);\n\t}}\n>\n\t<div class=\"text-sm text-gray-500\">\n\t\t<div class=\" bg-yellow-500/20 text-yellow-700 dark:text-yellow-200 rounded-lg px-4 py-3\">\n\t\t\t<div>Please carefully review the following warnings:</div>\n\n\t\t\t<ul class=\" mt-1 list-disc pl-4 text-xs\">\n\t\t\t\t<li>{$i18n.t('Functions allow arbitrary code execution.')}</li>\n\t\t\t\t<li>{$i18n.t('Do not install functions from sources you do not fully trust.')}</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div class=\"my-3\">\n\t\t\t{$i18n.t(\n\t\t\t\t'I acknowledge that I have read and I understand the implications of my action. I am aware of the risks associated with executing arbitrary code and I have verified the trustworthiness of the source.'\n\t\t\t)}\n\t\t</div>\n\t</div>\n</ConfirmDialog>\n","<script>\n\timport { onMount } from 'svelte';\n\timport { functions } from '$lib/stores';\n\n\timport { getFunctions } from '$lib/apis/functions';\n\timport Functions from '$lib/components/admin/Functions.svelte';\n\n\tonMount(async () => {\n\t\tawait Promise.all([\n\t\t\t(async () => {\n\t\t\t\tfunctions.set(await getFunctions(localStorage.token));\n\t\t\t})()\n\t\t]);\n\t});\n</script>\n\n{#if $functions !== null}\n\t<Functions />\n{/if}\n"],"names":["Switch"],"mappings":"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"}