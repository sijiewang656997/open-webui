{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../src/lib/components/playground/Notes.svelte"],"sourcesContent":["<script>\n\timport { getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport RichTextInput from '../common/RichTextInput.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport Sparkles from '../icons/Sparkles.svelte';\n\timport SparklesSolid from '../icons/SparklesSolid.svelte';\n\timport Mic from '../icons/Mic.svelte';\n\timport VoiceRecording from '../chat/MessageInput/VoiceRecording.svelte';\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport { toast } from 'svelte-sonner';\n\n\tlet name = '';\n\tlet content = '';\n\n\tlet voiceInput = false;\n\tlet loading = false;\n</script>\n\n<div class=\"relative flex-1 w-full h-full flex justify-center overflow-auto px-5\">\n\t{#if loading}\n\t\t<div class=\" absolute top-0 bottom-0 left-0 right-0 flex\">\n\t\t\t<div class=\"m-auto\">\n\t\t\t\t<Spinner />\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<div class=\" w-full flex flex-col gap-2 {loading ? 'opacity-20' : ''}\">\n\t\t<div class=\"shrink-0 w-full flex justify-between items-center\">\n\t\t\t<div class=\"w-full\">\n\t\t\t\t<input\n\t\t\t\t\tclass=\"w-full text-2xl font-medium bg-transparent outline-hidden\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tbind:value={name}\n\t\t\t\t\tplaceholder={$i18n.t('Title')}\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\" flex-1 w-full h-full\">\n\t\t\t<RichTextInput\n\t\t\t\tclassName=\"input-prose-sm\"\n\t\t\t\tbind:value={content}\n\t\t\t\tplaceholder={$i18n.t('Write something...')}\n\t\t\t\tpreserveBreaks={true}\n\t\t\t/>\n\t\t</div>\n\t</div>\n\n\t<div class=\"absolute bottom-0 left-0 right-0 p-5 max-w-full flex justify-end\">\n\t\t<div class=\"flex gap-0.5 justify-end w-full\">\n\t\t\t{#if voiceInput}\n\t\t\t\t<div class=\"flex-1 w-full\">\n\t\t\t\t\t<VoiceRecording\n\t\t\t\t\t\tbind:recording={voiceInput}\n\t\t\t\t\t\tclassName=\"p-1 w-full max-w-full\"\n\t\t\t\t\t\ton:cancel={() => {\n\t\t\t\t\t\t\tvoiceInput = false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ton:confirm={(e) => {\n\t\t\t\t\t\t\tconst { text, filename } = e.detail;\n\n\t\t\t\t\t\t\t// url is hostname + /cache/audio/transcription/ + filename\n\t\t\t\t\t\t\tconst url = `${window.location.origin}/cache/audio/transcription/${filename}`;\n\n\t\t\t\t\t\t\t// Open in new tab\n\n\t\t\t\t\t\t\tif (content.trim() !== '') {\n\t\t\t\t\t\t\t\tcontent = `${content}\\n\\n${text}\\n\\nRecording: ${url}\\n\\n`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcontent = `${content}${text}\\n\\nRecording: ${url}\\n\\n`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvoiceInput = false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t<Tooltip content={$i18n.t('Voice Input')}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"cursor-pointer p-2.5 flex rounded-full hover:bg-gray-100 dark:hover:bg-gray-850 transition shadow-xl\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tlet stream = await navigator.mediaDevices\n\t\t\t\t\t\t\t\t\t.getUserMedia({ audio: true })\n\t\t\t\t\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\t\t$i18n.t(`Permission denied when accessing microphone: {{error}}`, {\n\t\t\t\t\t\t\t\t\t\t\t\terror: err\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif (stream) {\n\t\t\t\t\t\t\t\t\tvoiceInput = true;\n\t\t\t\t\t\t\t\t\tconst tracks = stream.getTracks();\n\t\t\t\t\t\t\t\t\ttracks.forEach((track) => track.stop());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstream = null;\n\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\ttoast.error($i18n.t('Permission denied when accessing microphone'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Mic className=\"size-4\" />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\t\t\t{/if}\n\n\t\t\t<!-- <button\n\t\t\t\tclass=\"cursor-pointer p-2.5 flex rounded-full hover:bg-gray-100 dark:hover:bg-gray-850 transition shadow-xl\"\n\t\t\t>\n\t\t\t\t<SparklesSolid className=\"size-4\" />\n\t\t\t</button> -->\n\t\t</div>\n\t</div>\n</div>\n"],"names":[],"mappings":";;;;;;;;;;QAEO,OAAO,WAAW,MAAM;;AAW1B,MAAA,OAAO;AACP,MAAA,UAAU;;;;;;;+JAeoD,IAAE,IAAA,CAAA,4KAAA,cAAA,eAOnD,MAAM,EAAE,OAAO,GAAA,CAAA,CAAA,YAAA,cAAA,SADhB,MAAI,CAAA,CAAA,mDAAA,mBAAA,eAAA,eAAA,EAAA;AAAA;;;qBAWJ,MAAM,EAAE,oBAAoB;AAAA,wBACzB;AAAA,eAFJ;AAAA;;;AAAA,oBAAO;;;;;wNAoCD,MAAM,EAAE,aAAa,EAAA,GAAA,CAAA,GAAA;AAAA;;;;;;;;;;;"}