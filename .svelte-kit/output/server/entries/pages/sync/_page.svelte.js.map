{"version":3,"file":"_page.svelte.js","sources":["../../../../../../src/lib/components/SyncButton.svelte"],"sourcesContent":["<script>\n    import { createEventDispatcher } from 'svelte';\n    import { performSync, getSyncState } from '$lib/apis/syncService';\n    \n    const dispatch = createEventDispatcher();\n    let isSyncing = false;\n    let syncStatus = {\n      inProgress: false,\n      success: false,\n      error: null,\n      progress: 0\n    };\n  \n    async function handleSync() {\n      try {\n        syncStatus.inProgress = true;\n        syncStatus.progress = 10;\n        isSyncing = true;\n        \n        const response = await performSync();\n        \n        syncStatus.progress = 100;\n        syncStatus.success = true;\n        dispatch('synccomplete', response);\n        \n      } catch (error) {\n        syncStatus.error = error.message;\n        dispatch('syncerror', { error });\n      } finally {\n        syncStatus.inProgress = false;\n        isSyncing = false;\n      }\n    }\n  </script>\n  \n  <div class=\"sync-container\">\n    <button \n      class=\"sync-button\" \n      on:click={handleSync} \n      disabled={isSyncing}\n    >\n      {#if isSyncing}\n        <span class=\"spinner\"></span>同步中...\n      {:else}\n        <svg viewBox=\"0 0 24 24\" class=\"sync-icon\">\n          <path d=\"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46c.78-1.23 1.24-2.69 1.24-4.26 0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z\"/>\n        </svg>\n        同步数据\n      {/if}\n    </button>\n    \n    {#if syncStatus.inProgress}\n      <div class=\"progress-bar\">\n        <div class=\"progress-fill\" style=\"width: {syncStatus.progress}%\"></div>\n      </div>\n    {/if}\n    \n    {#if syncStatus.error}\n      <div class=\"error-message\">\n        {syncStatus.error}\n      </div>\n    {/if}\n  </div>\n  \n  <style>\n    .sync-container {\n      display: flex;\n      flex-direction: column;\n      gap: 10px;\n    }\n    \n    .sync-button {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      padding: 8px 16px;\n      background-color: #3b82f6;\n      color: white;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n      font-weight: 500;\n      transition: background-color 0.2s;\n    }\n    \n    .sync-button:hover:not([disabled]) {\n      background-color: #2563eb;\n    }\n    \n    .sync-button:disabled {\n      background-color: #93c5fd;\n      cursor: not-allowed;\n    }\n    \n    .sync-icon {\n      width: 18px;\n      height: 18px;\n      fill: currentColor;\n    }\n    \n    .spinner {\n      border: 2px solid rgba(255, 255, 255, 0.3);\n      border-radius: 50%;\n      border-top: 2px solid #fff;\n      width: 16px;\n      height: 16px;\n      animation: spin 1s linear infinite;\n    }\n    \n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n    \n    .progress-bar {\n      width: 100%;\n      height: 4px;\n      background-color: #e5e7eb;\n      border-radius: 2px;\n      overflow: hidden;\n    }\n    \n    .progress-fill {\n      height: 100%;\n      background-color: #3b82f6;\n      transition: width 0.3s ease;\n    }\n    \n    .error-message {\n      color: #ef4444;\n      font-size: 14px;\n      margin-top: 4px;\n    }\n  </style>"],"names":[],"mappings":";;;;;;AAIqB,wBAAqB;;AAmC1B,SAAA;aAYP,aAMA,EAAA;;;;;;;;;;"}