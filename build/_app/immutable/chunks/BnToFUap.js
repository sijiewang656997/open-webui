import{s as $,r as Z,v as G,w as J,x as X,j as Q,l as re,i as E,d as m,W as fe,X as R,Y as We,y as x,e as B,c as V,a as O,a7 as W,_ as le,u as I,G as se,O as _e,I as Ke,q as Qe,D as ae,E as oe,f as v,g as S,n as ue,A as xe,p as $e,t as P,k as z,b as j,o as Y,M as et,h as H}from"./Dc4_ziGv.js";import{S as ee,i as te,t as M,a as L,g as he,c as me,k as Pe,h as je,j as pe,b as ge,d as be,m as ve,e as ke,f as tt}from"./CAZSMy3J.js";import{d as it}from"./03rUxzUZ.js";import{s as lt,c as st,u as nt,d as at}from"./DOIyYfji.js";import{g as ne}from"./CgU5AtxT.js";import{c as He,d as ot}from"./CPKI64Ek.js";import{a as rt,b as ft,u as Te,d as we,e as ut,f as de,s as dt,h as ct}from"./BHQ31hte.js";import{j as Ie,m as _t,c as ht}from"./DhUbH0v9.js";import{T as mt}from"./CUikFy1Q.js";import{t as ce}from"./gLvYLTeg.js";import{m as gt}from"./DWuYzDxc.js";import{M as bt}from"./MKheDeAE.js";const vt=t=>({subIds:t&1}),Se=t=>({subIds:t[0]});function kt(t){let e;const i=t[6].default,l=Z(i,t,t[5],Se);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,u){l&&l.m(s,u),e=!0},p(s,[u]){l&&l.p&&(!e||u&33)&&G(l,i,s,s[5],e?X(i,s[5],u,vt):J(s[5]),Se)},i(s){e||(M(l,s),e=!0)},o(s){L(l,s),e=!1},d(s){l&&l.d(s)}}}function yt(t,e,i){let l,{$$slots:s={},$$scope:u}=e,{disabled:n=void 0}=e,{open:o=void 0}=e,{onOpenChange:a=void 0}=e;const{updateOption:f,ids:r,states:{subOpen:d}}=lt({disabled:n,onOpenChange:({next:h})=>(o!==h&&(a==null||a(h),i(2,o=h)),h)}),b=it([r.menu,r.trigger],([h,y])=>({menu:h,trigger:y}));return Q(t,b,h=>i(0,l=h)),t.$$set=h=>{"disabled"in h&&i(3,n=h.disabled),"open"in h&&i(2,o=h.open),"onOpenChange"in h&&i(4,a=h.onOpenChange),"$$scope"in h&&i(5,u=h.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&o!==void 0&&d.set(o),t.$$.dirty&8&&f("disabled",n)},[l,b,o,n,a,u,s]}class _i extends ee{constructor(e){super(),te(this,e,yt,kt,$,{disabled:3,open:2,onOpenChange:4})}}const Ct=t=>({builder:t[0]&256}),Oe=t=>({builder:t[8]}),pt=t=>({builder:t[0]&256}),Ee=t=>({builder:t[8]}),Tt=t=>({builder:t[0]&256}),Be=t=>({builder:t[8]}),wt=t=>({builder:t[0]&256}),Ve=t=>({builder:t[8]}),It=t=>({builder:t[0]&256}),Me=t=>({builder:t[8]}),St=t=>({builder:t[0]&256}),Le=t=>({builder:t[8]});function Ot(t){let e,i,l,s;const u=t[28].default,n=Z(u,t,t[27],Oe);let o=[t[8],t[13]],a={};for(let f=0;f<o.length;f+=1)a=R(a,o[f]);return{c(){e=B("div"),n&&n.c(),this.h()},l(f){e=V(f,"DIV",{});var r=O(e);n&&n.l(r),r.forEach(m),this.h()},h(){W(e,a)},m(f,r){E(f,e,r),n&&n.m(e,null),t[33](e),i=!0,l||(s=[le(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],l=!0)},p(f,r){n&&n.p&&(!i||r[0]&134217984)&&G(n,u,f,f[27],i?X(u,f[27],r,Ct):J(f[27]),Oe),W(e,a=ne(o,[r[0]&256&&f[8],r[0]&8192&&f[13]]))},i(f){i||(M(n,f),i=!0)},o(f){L(n,f),i=!1},d(f){f&&m(e),n&&n.d(f),t[33](null),l=!1,se(s)}}}function Et(t){let e,i,l,s,u;const n=t[28].default,o=Z(n,t,t[27],Ee);let a=[t[8],t[13]],f={};for(let r=0;r<a.length;r+=1)f=R(f,a[r]);return{c(){e=B("div"),o&&o.c(),this.h()},l(r){e=V(r,"DIV",{});var d=O(e);o&&o.l(d),d.forEach(m),this.h()},h(){W(e,f)},m(r,d){E(r,e,d),o&&o.m(e,null),t[32](e),l=!0,s||(u=[le(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],s=!0)},p(r,d){t=r,o&&o.p&&(!l||d[0]&134217984)&&G(o,n,t,t[27],l?X(n,t[27],d,pt):J(t[27]),Ee),W(e,f=ne(a,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(r){l||(M(o,r),i&&i.end(1),l=!0)},o(r){L(o,r),r&&(i=Pe(e,t[5],t[6])),l=!1},d(r){r&&m(e),o&&o.d(r),t[32](null),r&&i&&i.end(),s=!1,se(u)}}}function Bt(t){let e,i,l,s,u;const n=t[28].default,o=Z(n,t,t[27],Be);let a=[t[8],t[13]],f={};for(let r=0;r<a.length;r+=1)f=R(f,a[r]);return{c(){e=B("div"),o&&o.c(),this.h()},l(r){e=V(r,"DIV",{});var d=O(e);o&&o.l(d),d.forEach(m),this.h()},h(){W(e,f)},m(r,d){E(r,e,d),o&&o.m(e,null),t[31](e),l=!0,s||(u=[le(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],s=!0)},p(r,d){t=r,o&&o.p&&(!l||d[0]&134217984)&&G(o,n,t,t[27],l?X(n,t[27],d,Tt):J(t[27]),Be),W(e,f=ne(a,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(r){l||(M(o,r),r&&(i||_e(()=>{i=je(e,t[3],t[4]),i.start()})),l=!0)},o(r){L(o,r),l=!1},d(r){r&&m(e),o&&o.d(r),t[31](null),s=!1,se(u)}}}function Vt(t){let e,i,l,s,u,n;const o=t[28].default,a=Z(o,t,t[27],Ve);let f=[t[8],t[13]],r={};for(let d=0;d<f.length;d+=1)r=R(r,f[d]);return{c(){e=B("div"),a&&a.c(),this.h()},l(d){e=V(d,"DIV",{});var b=O(e);a&&a.l(b),b.forEach(m),this.h()},h(){W(e,r)},m(d,b){E(d,e,b),a&&a.m(e,null),t[30](e),s=!0,u||(n=[le(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],u=!0)},p(d,b){t=d,a&&a.p&&(!s||b[0]&134217984)&&G(a,o,t,t[27],s?X(o,t[27],b,wt):J(t[27]),Ve),W(e,r=ne(f,[b[0]&256&&t[8],b[0]&8192&&t[13]]))},i(d){s||(M(a,d),d&&_e(()=>{s&&(l&&l.end(1),i=je(e,t[3],t[4]),i.start())}),s=!0)},o(d){L(a,d),i&&i.invalidate(),d&&(l=Pe(e,t[5],t[6])),s=!1},d(d){d&&m(e),a&&a.d(d),t[30](null),d&&l&&l.end(),u=!1,se(n)}}}function Mt(t){let e,i,l,s,u;const n=t[28].default,o=Z(n,t,t[27],Me);let a=[t[8],t[13]],f={};for(let r=0;r<a.length;r+=1)f=R(f,a[r]);return{c(){e=B("div"),o&&o.c(),this.h()},l(r){e=V(r,"DIV",{});var d=O(e);o&&o.l(d),d.forEach(m),this.h()},h(){W(e,f)},m(r,d){E(r,e,d),o&&o.m(e,null),t[29](e),l=!0,s||(u=[le(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],s=!0)},p(r,d){t=r,o&&o.p&&(!l||d[0]&134217984)&&G(o,n,t,t[27],l?X(n,t[27],d,It):J(t[27]),Me),W(e,f=ne(a,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(r){l||(M(o,r),r&&_e(()=>{l&&(i||(i=pe(e,t[1],t[2],!0)),i.run(1))}),l=!0)},o(r){L(o,r),r&&(i||(i=pe(e,t[1],t[2],!1)),i.run(0)),l=!1},d(r){r&&m(e),o&&o.d(r),t[29](null),r&&i&&i.end(),s=!1,se(u)}}}function Lt(t){let e;const i=t[28].default,l=Z(i,t,t[27],Le);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,u){l&&l.m(s,u),e=!0},p(s,u){l&&l.p&&(!e||u[0]&134217984)&&G(l,i,s,s[27],e?X(i,s[27],u,St):J(s[27]),Le)},i(s){e||(M(l,s),e=!0)},o(s){L(l,s),e=!1},d(s){l&&l.d(s)}}}function Dt(t){let e,i,l,s;const u=[Lt,Mt,Vt,Bt,Et,Ot],n=[];function o(a,f){return a[7]&&a[9]?0:a[1]&&a[9]?1:a[3]&&a[5]&&a[9]?2:a[3]&&a[9]?3:a[5]&&a[9]?4:a[9]?5:-1}return~(e=o(t))&&(i=n[e]=u[e](t)),{c(){i&&i.c(),l=re()},l(a){i&&i.l(a),l=re()},m(a,f){~e&&n[e].m(a,f),E(a,l,f),s=!0},p(a,f){let r=e;e=o(a),e===r?~e&&n[e].p(a,f):(i&&(he(),L(n[r],1,1,()=>{n[r]=null}),me()),~e?(i=n[e],i?i.p(a,f):(i=n[e]=u[e](a),i.c()),M(i,1),i.m(l.parentNode,l)):i=null)},i(a){s||(M(i),s=!0)},o(a){L(i),s=!1},d(a){a&&m(l),~e&&n[e].d(a)}}}function Ut(t,e,i){let l;const s=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let u=fe(e,s),n,o,{$$slots:a={},$$scope:f}=e,{transition:r=void 0}=e,{transitionConfig:d=void 0}=e,{inTransition:b=void 0}=e,{inTransitionConfig:h=void 0}=e,{outTransition:y=void 0}=e,{outTransitionConfig:p=void 0}=e,{asChild:T=!1}=e,{id:C=void 0}=e,{side:U="right"}=e,{align:g="start"}=e,{sideOffset:w=0}=e,{alignOffset:D=0}=e,{collisionPadding:c=8}=e,{avoidCollisions:k=!0}=e,{collisionBoundary:N=void 0}=e,{sameWidth:q=!1}=e,{fitViewport:ie=!1}=e,{strategy:F="absolute"}=e,{overlap:K=!1}=e,{el:A=void 0}=e;const{elements:{subMenu:ye},states:{subOpen:Ce},ids:Re,getAttrs:qe}=st();Q(t,ye,_=>i(26,n=_)),Q(t,Ce,_=>i(9,o=_));const ze=He(),Ye=qe("sub-content");function Ze(_){x[_?"unshift":"push"](()=>{A=_,i(0,A)})}function Ge(_){x[_?"unshift":"push"](()=>{A=_,i(0,A)})}function Je(_){x[_?"unshift":"push"](()=>{A=_,i(0,A)})}function Xe(_){x[_?"unshift":"push"](()=>{A=_,i(0,A)})}function Fe(_){x[_?"unshift":"push"](()=>{A=_,i(0,A)})}return t.$$set=_=>{e=R(R({},e),We(_)),i(13,u=fe(e,s)),"transition"in _&&i(1,r=_.transition),"transitionConfig"in _&&i(2,d=_.transitionConfig),"inTransition"in _&&i(3,b=_.inTransition),"inTransitionConfig"in _&&i(4,h=_.inTransitionConfig),"outTransition"in _&&i(5,y=_.outTransition),"outTransitionConfig"in _&&i(6,p=_.outTransitionConfig),"asChild"in _&&i(7,T=_.asChild),"id"in _&&i(14,C=_.id),"side"in _&&i(15,U=_.side),"align"in _&&i(16,g=_.align),"sideOffset"in _&&i(17,w=_.sideOffset),"alignOffset"in _&&i(18,D=_.alignOffset),"collisionPadding"in _&&i(19,c=_.collisionPadding),"avoidCollisions"in _&&i(20,k=_.avoidCollisions),"collisionBoundary"in _&&i(21,N=_.collisionBoundary),"sameWidth"in _&&i(22,q=_.sameWidth),"fitViewport"in _&&i(23,ie=_.fitViewport),"strategy"in _&&i(24,F=_.strategy),"overlap"in _&&i(25,K=_.overlap),"el"in _&&i(0,A=_.el),"$$scope"in _&&i(27,f=_.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16384&&C&&Re.menu.set(C),t.$$.dirty[0]&67108864&&i(8,l=n),t.$$.dirty[0]&256&&Object.assign(l,Ye),t.$$.dirty[0]&67076096&&nt({side:U,align:g,sideOffset:w,alignOffset:D,collisionPadding:c,avoidCollisions:k,collisionBoundary:N,sameWidth:q,fitViewport:ie,strategy:F,overlap:K})},[A,r,d,b,h,y,p,T,l,o,ye,Ce,ze,u,C,U,g,w,D,c,k,N,q,ie,F,K,n,f,a,Ze,Ge,Je,Xe,Fe]}class hi extends ee{constructor(e){super(),te(this,e,Ut,Dt,$,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const Nt=t=>({builder:t&4}),De=t=>({builder:t[2]}),At=t=>({builder:t&4}),Ue=t=>({builder:t[2]});function Wt(t){let e,i,l,s;const u=t[13].default,n=Z(u,t,t[12],De);let o=[t[2],t[6]],a={};for(let f=0;f<o.length;f+=1)a=R(a,o[f]);return{c(){e=B("div"),n&&n.c(),this.h()},l(f){e=V(f,"DIV",{});var r=O(e);n&&n.l(r),r.forEach(m),this.h()},h(){W(e,a)},m(f,r){E(f,e,r),n&&n.m(e,null),t[14](e),i=!0,l||(s=[le(t[2].action(e)),I(e,"m-click",t[5]),I(e,"m-focusin",t[5]),I(e,"m-focusout",t[5]),I(e,"m-keydown",t[5]),I(e,"m-pointerleave",t[5]),I(e,"m-pointermove",t[5])],l=!0)},p(f,r){n&&n.p&&(!i||r&4100)&&G(n,u,f,f[12],i?X(u,f[12],r,Nt):J(f[12]),De),W(e,a=ne(o,[r&4&&f[2],r&64&&f[6]]))},i(f){i||(M(n,f),i=!0)},o(f){L(n,f),i=!1},d(f){f&&m(e),n&&n.d(f),t[14](null),l=!1,se(s)}}}function Pt(t){let e;const i=t[13].default,l=Z(i,t,t[12],Ue);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,u){l&&l.m(s,u),e=!0},p(s,u){l&&l.p&&(!e||u&4100)&&G(l,i,s,s[12],e?X(i,s[12],u,At):J(s[12]),Ue)},i(s){e||(M(l,s),e=!0)},o(s){L(l,s),e=!1},d(s){l&&l.d(s)}}}function jt(t){let e,i,l,s;const u=[Pt,Wt],n=[];function o(a,f){return a[1]?0:1}return e=o(t),i=n[e]=u[e](t),{c(){i.c(),l=re()},l(a){i.l(a),l=re()},m(a,f){n[e].m(a,f),E(a,l,f),s=!0},p(a,[f]){let r=e;e=o(a),e===r?n[e].p(a,f):(he(),L(n[r],1,1,()=>{n[r]=null}),me(),i=n[e],i?i.p(a,f):(i=n[e]=u[e](a),i.c()),M(i,1),i.m(l.parentNode,l))},i(a){s||(M(i),s=!0)},o(a){L(i),s=!1},d(a){a&&m(l),n[e].d(a)}}}function Ht(t,e,i){let l,s;const u=["disabled","asChild","id","el"];let n=fe(e,u),o,a,{$$slots:f={},$$scope:r}=e,{disabled:d=!1}=e,{asChild:b=!1}=e,{id:h=void 0}=e,{el:y=void 0}=e;const{elements:{subTrigger:p},ids:T,getAttrs:C,options:U}=at();Q(t,p,c=>i(11,a=c));const{disabled:g}=U;Q(t,g,c=>i(10,o=c));const w=He();function D(c){x[c?"unshift":"push"](()=>{y=c,i(0,y)})}return t.$$set=c=>{e=R(R({},e),We(c)),i(6,n=fe(e,u)),"disabled"in c&&i(7,d=c.disabled),"asChild"in c&&i(1,b=c.asChild),"id"in c&&i(8,h=c.id),"el"in c&&i(0,y=c.el),"$$scope"in c&&i(12,r=c.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&h&&T.trigger.set(h),t.$$.dirty&2048&&i(2,l=a),t.$$.dirty&1152&&i(9,s={...C("sub-trigger"),...ot(d||o)}),t.$$.dirty&516&&Object.assign(l,s)},[y,b,l,p,g,w,n,d,h,s,o,a,r,f,D]}class mi extends ee{constructor(e){super(),te(this,e,Ht,jt,$,{disabled:7,asChild:1,id:8,el:0})}}function Rt(t){let e,i;return e=new mt({props:{tags:t[0]}}),e.$on("delete",t[4]),e.$on("add",t[5]),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,s){ve(e,l,s),i=!0},p(l,[s]){const u={};s&1&&(u.tags=l[0]),e.$set(u)},i(l){i||(M(e.$$.fragment,l),i=!0)},o(l){L(e.$$.fragment,l),i=!1},d(l){ke(e,l)}}}function qt(t,e,i){const l=Ke();let{chatId:s=""}=e,u=[];const n=async()=>await rt(localStorage.token,s).catch(async d=>[]),o=async d=>{await ft(localStorage.token,s,d).catch(async h=>(ce.error(`${h}`),null))&&(i(0,u=await n()),await Te(localStorage.token,s,{tags:u}),await Ie.set(await we(localStorage.token)),l("add",{name:d}))},a=async d=>{await ut(localStorage.token,s,d),i(0,u=await n()),await Te(localStorage.token,s,{tags:u}),await Ie.set(await we(localStorage.token)),l("delete",{name:d})};Qe(async()=>{s&&i(0,u=await n())});const f=d=>{a(d.detail)},r=d=>{o(d.detail)};return t.$$set=d=>{"chatId"in d&&i(3,s=d.chatId)},[u,o,a,s,f,r]}class gi extends ee{constructor(e){super(),te(this,e,qt,Rt,$,{chatId:3})}}function zt(t){let e,i,l;return{c(){e=ae("svg"),i=ae("path"),l=ae("path"),this.h()},l(s){e=oe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var u=O(e);i=oe(u,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),O(i).forEach(m),l=oe(u,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),O(l).forEach(m),u.forEach(m),this.h()},h(){v(i,"fill-rule","evenodd"),v(i,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),v(i,"clip-rule","evenodd"),v(l,"fill-rule","evenodd"),v(l,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),v(l,"clip-rule","evenodd"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"viewBox","0 0 16 16"),v(e,"fill","currentColor"),v(e,"class",t[0])},m(s,u){E(s,e,u),S(e,i),S(e,l)},p(s,[u]){u&1&&v(e,"class",s[0])},i:ue,o:ue,d(s){s&&m(e)}}}function Yt(t,e,i){let{className:l="w-4 h-4"}=e;return t.$$set=s=>{"className"in s&&i(0,l=s.className)},[l]}class Zt extends ee{constructor(e){super(),te(this,e,Yt,zt,$,{className:0})}}function Ne(t){var D;let e,i,l,s,u,n,o,a,f,r,d,b,h;function y(c,k){return c[2].share_id?Jt:Gt}let p=y(t),T=p(t),C=((D=t[4])==null?void 0:D.features.enable_community_sharing)&&Ae(t);f=new Zt({});function U(c,k){return c[2].share_id?Ft:Xt}let g=U(t),w=g(t);return{c(){e=B("div"),i=B("div"),T.c(),l=z(),s=B("div"),u=B("div"),n=B("div"),C&&C.c(),o=z(),a=B("button"),ge(f.$$.fragment),r=z(),w.c(),this.h()},l(c){e=V(c,"DIV",{class:!0});var k=O(e);i=V(k,"DIV",{class:!0});var N=O(i);T.l(N),N.forEach(m),l=Y(k),s=V(k,"DIV",{class:!0});var q=O(s);u=V(q,"DIV",{class:!0});var ie=O(u);n=V(ie,"DIV",{class:!0});var F=O(n);C&&C.l(F),o=Y(F),a=V(F,"BUTTON",{class:!0,type:!0,id:!0});var K=O(a);be(f.$$.fragment,K),r=Y(K),w.l(K),K.forEach(m),F.forEach(m),ie.forEach(m),q.forEach(m),k.forEach(m),this.h()},h(){v(i,"class","text-sm dark:text-gray-300 mb-1"),v(a,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),v(a,"type","button"),v(a,"id","copy-and-share-chat-button"),v(n,"class","flex gap-1"),v(u,"class","flex flex-col items-end space-x-1 mt-3"),v(s,"class","flex justify-end"),v(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(c,k){E(c,e,k),S(e,i),T.m(i,null),S(e,l),S(e,s),S(s,u),S(u,n),C&&C.m(n,null),S(n,o),S(n,a),ve(f,a,null),S(a,r),w.m(a,null),d=!0,b||(h=I(a,"click",t[11]),b=!0)},p(c,k){var N;p===(p=y(c))&&T?T.p(c,k):(T.d(1),T=p(c),T&&(T.c(),T.m(i,null))),(N=c[4])!=null&&N.features.enable_community_sharing?C?C.p(c,k):(C=Ae(c),C.c(),C.m(n,o)):C&&(C.d(1),C=null),g===(g=U(c))&&w?w.p(c,k):(w.d(1),w=g(c),w&&(w.c(),w.m(a,null)))},i(c){d||(M(f.$$.fragment,c),d=!0)},o(c){L(f.$$.fragment,c),d=!1},d(c){c&&m(e),T.d(),C&&C.d(),ke(f),w.d(),b=!1,h()}}}function Gt(t){let e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",i;return{c(){i=P(e)},l(l){i=j(l,e)},m(l,s){E(l,i,s)},p(l,s){s&8&&e!==(e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&H(i,e)},d(l){l&&m(i)}}}function Jt(t){let e,i=t[3].t("You have shared this chat")+"",l,s,u,n=t[3].t("before")+"",o,a,f,r,d=t[3].t("Click here to")+"",b,h,y,p=t[3].t("delete this link")+"",T,C,U=t[3].t("and create a new shared link.")+"",g,w,D;return{c(){e=B("a"),l=P(i),s=z(),u=B("span"),o=P(n),a=P("."),r=z(),b=P(d),h=z(),y=B("button"),T=P(p),C=z(),g=P(U),this.h()},l(c){e=V(c,"A",{href:!0,target:!0});var k=O(e);l=j(k,i),s=Y(k),u=V(k,"SPAN",{class:!0});var N=O(u);o=j(N,n),N.forEach(m),a=j(k,"."),k.forEach(m),r=Y(c),b=j(c,d),h=Y(c),y=V(c,"BUTTON",{class:!0});var q=O(y);T=j(q,p),q.forEach(m),C=Y(c),g=j(c,U),this.h()},h(){v(u,"class","underline"),v(e,"href",f="/s/"+t[2].share_id),v(e,"target","_blank"),v(y,"class","underline")},m(c,k){E(c,e,k),S(e,l),S(e,s),S(e,u),S(u,o),S(e,a),E(c,r,k),E(c,b,k),E(c,h,k),E(c,y,k),S(y,T),E(c,C,k),E(c,g,k),w||(D=I(y,"click",t[9]),w=!0)},p(c,k){k&8&&i!==(i=c[3].t("You have shared this chat")+"")&&H(l,i),k&8&&n!==(n=c[3].t("before")+"")&&H(o,n),k&4&&f!==(f="/s/"+c[2].share_id)&&v(e,"href",f),k&8&&d!==(d=c[3].t("Click here to")+"")&&H(b,d),k&8&&p!==(p=c[3].t("delete this link")+"")&&H(T,p),k&8&&U!==(U=c[3].t("and create a new shared link.")+"")&&H(g,U)},d(c){c&&(m(e),m(r),m(b),m(h),m(y),m(C),m(g)),w=!1,D()}}}function Ae(t){let e,i=t[3].t("Share to Open WebUI Community")+"",l,s,u;return{c(){e=B("button"),l=P(i),this.h()},l(n){e=V(n,"BUTTON",{class:!0,type:!0});var o=O(e);l=j(o,i),o.forEach(m),this.h()},h(){v(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),v(e,"type","button")},m(n,o){E(n,e,o),S(e,l),s||(u=I(e,"click",t[10]),s=!0)},p(n,o){o&8&&i!==(i=n[3].t("Share to Open WebUI Community")+"")&&H(l,i)},d(n){n&&m(e),s=!1,u()}}}function Xt(t){let e=t[3].t("Copy Link")+"",i;return{c(){i=P(e)},l(l){i=j(l,e)},m(l,s){E(l,i,s)},p(l,s){s&8&&e!==(e=l[3].t("Copy Link")+"")&&H(i,e)},d(l){l&&m(i)}}}function Ft(t){let e=t[3].t("Update and Copy Link")+"",i;return{c(){i=P(e)},l(l){i=j(l,e)},m(l,s){E(l,i,s)},p(l,s){s&8&&e!==(e=l[3].t("Update and Copy Link")+"")&&H(i,e)},d(l){l&&m(i)}}}function Kt(t){let e,i,l,s=t[3].t("Share Chat")+"",u,n,o,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,r,d,b,h=t[2]&&Ne(t);return{c(){e=B("div"),i=B("div"),l=B("div"),u=P(s),n=z(),o=B("button"),o.innerHTML=a,f=z(),h&&h.c(),this.h()},l(y){e=V(y,"DIV",{});var p=O(e);i=V(p,"DIV",{class:!0});var T=O(i);l=V(T,"DIV",{class:!0});var C=O(l);u=j(C,s),C.forEach(m),n=Y(T),o=V(T,"BUTTON",{class:!0,"data-svelte-h":!0}),et(o)!=="svelte-745w2y"&&(o.innerHTML=a),T.forEach(m),f=Y(p),h&&h.l(p),p.forEach(m),this.h()},h(){v(l,"class","text-lg font-medium self-center"),v(o,"class","self-center"),v(i,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(y,p){E(y,e,p),S(e,i),S(i,l),S(l,u),S(i,n),S(i,o),S(e,f),h&&h.m(e,null),r=!0,d||(b=I(o,"click",t[8]),d=!0)},p(y,p){(!r||p&8)&&s!==(s=y[3].t("Share Chat")+"")&&H(u,s),y[2]?h?(h.p(y,p),p&4&&M(h,1)):(h=Ne(y),h.c(),M(h,1),h.m(e,null)):h&&(he(),L(h,1,1,()=>{h=null}),me())},i(y){r||(M(h),r=!0)},o(y){L(h),r=!1},d(y){y&&m(e),h&&h.d(),d=!1,b()}}}function Qt(t){let e,i,l;function s(n){t[12](n)}let u={size:"md",$$slots:{default:[Kt]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.show=t[0]),e=new bt({props:u}),x.push(()=>tt(e,"show",s)),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,o){ve(e,n,o),l=!0},p(n,[o]){const a={};o&65567&&(a.$$scope={dirty:o,ctx:n}),!i&&o&1&&(i=!0,a.show=n[0],xe(()=>i=!1)),e.$set(a)},i(n){l||(M(e.$$.fragment,n),l=!0)},o(n){L(e.$$.fragment,n),l=!1},d(n){ke(e,n)}}}function xt(t,e,i){let l,s,u;Q(t,_t,g=>i(14,l=g)),Q(t,ht,g=>i(4,u=g));let{chatId:n}=e,o=null,a=null;const f=$e("i18n");Q(t,f,g=>i(3,s=g));const r=async()=>{const g=await dt(localStorage.token,n);return a=`${window.location.origin}/s/${g.id}`,console.log(a),i(2,o=await de(localStorage.token,n)),a},d=async()=>{const g=o.chat;console.log("share",g),ce.success(s.t("Redirecting you to Open WebUI Community"));const w="https://openwebui.com",D=await window.open(`${w}/chats/upload`,"_blank");window.addEventListener("message",c=>{c.origin===w&&c.data==="loaded"&&D.postMessage(JSON.stringify({chat:g,models:l.filter(k=>g.models.includes(k.id))}),"*")},!1)};let{show:b=!1}=e;const h=g=>o?g?o.id!==g.id||o.share_id!==g.share_id:!1:!0,y=()=>{i(0,b=!1)},p=async()=>{await ct(localStorage.token,n)&&i(2,o=await de(localStorage.token,n))},T=()=>{d(),i(0,b=!1)},C=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const w=async()=>{const D=await r();return new Blob([D],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":w()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(D=>(console.error("Async: Could not copy text: ",D),!1))}else gt(await r());ce.success(s.t("Copied shared chat URL to clipboard!")),i(0,b=!1)};function U(g){b=g,i(0,b)}return t.$$set=g=>{"chatId"in g&&i(1,n=g.chatId),"show"in g&&i(0,b=g.show)},t.$$.update=()=>{t.$$.dirty&7&&b&&(async()=>{if(n){const g=await de(localStorage.token,n);h(g)&&i(2,o=g)}else i(2,o=null),console.log(o)})()},[b,n,o,s,u,f,r,d,y,p,T,C,U]}class bi extends ee{constructor(e){super(),te(this,e,xt,Qt,$,{chatId:1,show:0})}}function $t(t){let e,i;return{c(){e=ae("svg"),i=ae("path"),this.h()},l(l){e=oe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=O(e);i=oe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),O(i).forEach(m),s.forEach(m),this.h()},h(){v(i,"stroke-linecap","round"),v(i,"stroke-linejoin","round"),v(i,"d","m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"stroke-width",t[1]),v(e,"stroke","currentColor"),v(e,"class",t[0])},m(l,s){E(l,e,s),S(e,i)},p(l,[s]){s&2&&v(e,"stroke-width",l[1]),s&1&&v(e,"class",l[0])},i:ue,o:ue,d(l){l&&m(e)}}}function ei(t,e,i){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return t.$$set=u=>{"className"in u&&i(0,l=u.className),"strokeWidth"in u&&i(1,s=u.strokeWidth)},[l,s]}class vi extends ee{constructor(e){super(),te(this,e,ei,$t,$,{className:0,strokeWidth:1})}}export{_i as M,vi as P,bi as S,gi as T,mi as a,hi as b};
//# sourceMappingURL=BnToFUap.js.map
