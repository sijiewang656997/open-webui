import{s as Fe,D as we,E as ke,a as v,d as o,f,i as M,g as _,n as Z,y as Ne,A as ze,p as Ue,q as Be,e as g,t as W,k as O,c as b,b as q,o as X,u as oe,z as Se,h as ne,G as Te,M as We,V as Ee}from"./Dc4_ziGv.js";import{S as Ce,i as je,f as Me,b as G,d as H,m as Y,t as j,a as U,e as J,g as ie,c as re}from"./CAZSMy3J.js";import{f as $e,j as De}from"./DWuYzDxc.js";import{a as te}from"./CisIfe-u.js";import{M as qe}from"./MKheDeAE.js";import{X as Ae}from"./B9KCSGTn.js";import{S as Re}from"./DI3yu46Z.js";import{T as Le}from"./Cj5D4_dy.js";import{E as Pe}from"./DsszLngi.js";function Oe(i){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(s){e=ke(s,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=v(e);t=ke(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(o),n.forEach(o),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",i[1]),f(e,"stroke","currentColor"),f(e,"class",i[0])},m(s,n){M(s,e,n),_(e,t)},p(s,[n]){n&2&&f(e,"stroke-width",s[1]),n&1&&f(e,"class",s[0])},i:Z,o:Z,d(s){s&&o(e)}}}function Xe(i,e,t){let{className:s="size-4"}=e,{strokeWidth:n="1.5"}=e;return i.$$set=l=>{"className"in l&&t(0,s=l.className),"strokeWidth"in l&&t(1,n=l.strokeWidth)},[s,n]}class Ze extends Ce{constructor(e){super(),je(this,e,Xe,Oe,Fe,{className:0,strokeWidth:1})}}function xe(i){let e,t,s="Save",n,l;return{c(){e=g("div"),t=g("button"),t.textContent=s,this.h()},l(a){e=b(a,"DIV",{class:!0});var r=v(e);t=b(r,"BUTTON",{class:!0,"data-svelte-h":!0}),We(t)!=="svelte-bjbfma"&&(t.textContent=s),r.forEach(o),this.h()},h(){f(t,"class","px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700"),f(e,"class","ml-auto mr-2")},m(a,r){M(a,e,r),_(e,t),n||(l=oe(t,"click",i[8]),n=!0)},p:Z,d(a){a&&o(e),n=!1,l()}}}function Ie(i){let e,t=$e(i[0].size)+"",s,n;return{c(){e=g("div"),s=W(t),n=W(`
                            â€¢`),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=v(e);s=q(a,t),a.forEach(o),n=q(l,`
                            â€¢`),this.h()},h(){f(e,"class","capitalize shrink-0")},m(l,a){M(l,e,a),_(e,s),M(l,n,a)},p(l,a){a&1&&t!==(t=$e(l[0].size)+"")&&ne(s,t)},d(l){l&&(o(e),o(n))}}}function ye(i){var $,u,p;let e,t=De(((p=(u=($=i[0])==null?void 0:$.file)==null?void 0:u.data)==null?void 0:p.content)??"")+"",s,n,l,a,r,c,E;return r=new Ze({}),{c(){e=g("div"),s=W(t),n=W(" extracted lines"),l=O(),a=g("div"),G(r.$$.fragment),c=W(`
                                Formatting may be inconsistent from source.`),this.h()},l(m){e=b(m,"DIV",{class:!0});var y=v(e);s=q(y,t),n=q(y," extracted lines"),y.forEach(o),l=X(m),a=b(m,"DIV",{class:!0});var z=v(a);H(r.$$.fragment,z),c=q(z,`
                                Formatting may be inconsistent from source.`),z.forEach(o),this.h()},h(){f(e,"class","capitalize shrink-0"),f(a,"class","flex items-center gap-1 shrink-0")},m(m,y){M(m,e,y),_(e,s),_(e,n),M(m,l,y),M(m,a,y),Y(r,a,null),_(a,c),E=!0},p(m,y){var z,C,V;(!E||y&1)&&t!==(t=De(((V=(C=(z=m[0])==null?void 0:z.file)==null?void 0:C.data)==null?void 0:V.content)??"")+"")&&ne(s,t)},i(m){E||(j(r.$$.fragment,m),E=!0)},o(m){U(r.$$.fragment,m),E=!1},d(m){m&&(o(e),o(l),o(a)),J(r)}}}function Ve(i){let e,t,s;return t=new Le({props:{content:i[3]?"Inject the entire content as context for comprehensive processing, this is recommended for complex queries.":"Default to segmented retrieval for focused and relevant content extraction, this is recommended for most cases.",$$slots:{default:[Ye]},$$scope:{ctx:i}}}),{c(){e=g("div"),G(t.$$.fragment)},l(n){e=b(n,"DIV",{});var l=v(e);H(t.$$.fragment,l),l.forEach(o)},m(n,l){M(n,e,l),Y(t,e,null),s=!0},p(n,l){const a={};l&8&&(a.content=n[3]?"Inject the entire content as context for comprehensive processing, this is recommended for complex queries.":"Default to segmented retrieval for focused and relevant content extraction, this is recommended for most cases."),l&65545&&(a.$$scope={dirty:l,ctx:n}),t.$set(a)},i(n){s||(j(t.$$.fragment,n),s=!0)},o(n){U(t.$$.fragment,n),s=!1},d(n){n&&o(e),J(t)}}}function Ge(i){let e;return{c(){e=W("Using Focused Retrieval")},l(t){e=q(t,"Using Focused Retrieval")},m(t,s){M(t,e,s)},d(t){t&&o(e)}}}function He(i){let e;return{c(){e=W("Using Entire Document")},l(t){e=q(t,"Using Entire Document")},m(t,s){M(t,e,s)},d(t){t&&o(e)}}}function Ye(i){let e,t,s,n,l;function a(u,p){return u[3]?He:Ge}let r=a(i),c=r(i);function E(u){i[11](u)}let $={};return i[3]!==void 0&&($.state=i[3]),s=new Re({props:$}),Ne.push(()=>Me(s,"state",E)),s.$on("change",i[12]),{c(){e=g("div"),c.c(),t=O(),G(s.$$.fragment),this.h()},l(u){e=b(u,"DIV",{class:!0});var p=v(e);c.l(p),t=X(p),H(s.$$.fragment,p),p.forEach(o),this.h()},h(){f(e,"class","flex items-center gap-1.5 text-xs")},m(u,p){M(u,e,p),c.m(e,null),_(e,t),Y(s,e,null),l=!0},p(u,p){r!==(r=a(u))&&(c.d(1),c=r(u),c&&(c.c(),c.m(e,t)));const m={};!n&&p&8&&(n=!0,m.state=u[3],ze(()=>n=!1)),s.$set(m)},i(u){l||(j(s.$$.fragment,u),l=!0)},o(u){U(s.$$.fragment,u),l=!1},d(u){u&&o(e),c.d(),J(s)}}}function Je(i){var n,l,a;let e,t=(((a=(l=(n=i[0])==null?void 0:n.file)==null?void 0:l.data)==null?void 0:a.content)??"No content")+"",s;return{c(){e=g("div"),s=W(t),this.h()},l(r){e=b(r,"DIV",{class:!0});var c=v(e);s=q(c,t),c.forEach(o),this.h()},h(){f(e,"class","max-h-96 overflow-scroll scrollbar-hidden text-xs whitespace-pre-wrap")},m(r,c){M(r,e,c),_(e,s)},p(r,c){var E,$,u;c&1&&t!==(t=(((u=($=(E=r[0])==null?void 0:E.file)==null?void 0:$.data)==null?void 0:u.content)??"No content")+"")&&ne(s,t)},i:Z,o:Z,d(r){r&&o(e)}}}function Ke(i){let e,t;return e=new Pe({props:{src:`${te}/files/${i[0].id}/content`,fileName:i[0].name,editable:!0}}),e.$on("datachange",i[7]),{c(){G(e.$$.fragment)},l(s){H(e.$$.fragment,s)},m(s,n){Y(e,s,n),t=!0},p(s,n){const l={};n&1&&(l.src=`${te}/files/${s[0].id}/content`),n&1&&(l.fileName=s[0].name),e.$set(l)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function Qe(i){let e,t,s;return{c(){e=g("iframe"),this.h()},l(n){e=b(n,"IFRAME",{title:!0,src:!0,class:!0}),v(e).forEach(o),this.h()},h(){var n;f(e,"title",t=(n=i[0])==null?void 0:n.name),Ee(e.src,s=`${te}/files/${i[0].id}/content`)||f(e,"src",s),f(e,"class","w-full h-[70vh] border-0 rounded-lg mt-4")},m(n,l){M(n,e,l)},p(n,l){var a;l&1&&t!==(t=(a=n[0])==null?void 0:a.name)&&f(e,"title",t),l&1&&!Ee(e.src,s=`${te}/files/${n[0].id}/content`)&&f(e,"src",s)},i:Z,o:Z,d(n){n&&o(e)}}}function et(i){var de,me,he,_e;let e,t,s,n,l,a,r=(((de=i[0])==null?void 0:de.name)??"File")+"",c,E,$,u,p,m,y,z,C,V,h,S,A,B,F,N,R,ae,ce,x=i[5]&&i[4]&&xe(i);m=new Ae({});let I=i[0].size&&Ie(i),w=((_e=(he=(me=i[0])==null?void 0:me.file)==null?void 0:he.data)==null?void 0:_e.content)&&ye(i),k=i[2]&&Ve(i);const fe=[Qe,Ke,Je],L=[];function ue(d,D){return d[6]?0:d[5]?1:2}return F=ue(i),N=L[F]=fe[F](i),{c(){e=g("div"),t=g("div"),s=g("div"),n=g("div"),l=g("div"),a=g("a"),c=W(r),E=O(),x&&x.c(),$=O(),u=g("div"),p=g("button"),G(m.$$.fragment),y=O(),z=g("div"),C=g("div"),V=g("div"),I&&I.c(),h=O(),w&&w.c(),S=O(),k&&k.c(),A=O(),B=g("div"),N.c(),this.h()},l(d){e=b(d,"DIV",{class:!0});var D=v(e);t=b(D,"DIV",{class:!0});var P=v(t);s=b(P,"DIV",{class:!0});var T=v(s);n=b(T,"DIV",{});var K=v(n);l=b(K,"DIV",{class:!0});var Q=v(l);a=b(Q,"A",{href:!0,class:!0});var ee=v(a);c=q(ee,r),ee.forEach(o),Q.forEach(o),K.forEach(o),E=X(T),x&&x.l(T),$=X(T),u=b(T,"DIV",{});var ve=v(u);p=b(ve,"BUTTON",{});var pe=v(p);H(m.$$.fragment,pe),pe.forEach(o),ve.forEach(o),T.forEach(o),y=X(P),z=b(P,"DIV",{});var ge=v(z);C=b(ge,"DIV",{class:!0});var le=v(C);V=b(le,"DIV",{class:!0});var se=v(V);I&&I.l(se),h=X(se),w&&w.l(se),se.forEach(o),S=X(le),k&&k.l(le),le.forEach(o),ge.forEach(o),P.forEach(o),A=X(D),B=b(D,"DIV",{class:!0});var be=v(B);N.l(be),be.forEach(o),D.forEach(o),this.h()},h(){f(a,"href","#"),f(a,"class","hover:underline line-clamp-1"),f(l,"class","font-medium text-lg dark:text-gray-100"),f(s,"class","flex items-start justify-between"),f(V,"class","flex flex-wrap text-sm gap-1 text-gray-500"),f(C,"class","flex flex-col items-center md:flex-row gap-1 justify-between w-full"),f(t,"class","pb-2"),f(B,"class","max-h-[75vh] overflow-auto"),f(e,"class","font-primary px-6 py-5 w-full flex flex-col justify-center dark:text-gray-400")},m(d,D){M(d,e,D),_(e,t),_(t,s),_(s,n),_(n,l),_(l,a),_(a,c),_(s,E),x&&x.m(s,null),_(s,$),_(s,u),_(u,p),Y(m,p,null),_(t,y),_(t,z),_(z,C),_(C,V),I&&I.m(V,null),_(V,h),w&&w.m(V,null),_(C,S),k&&k.m(C,null),_(e,A),_(e,B),L[F].m(B,null),R=!0,ae||(ce=[oe(a,"click",Se(i[9])),oe(p,"click",i[10])],ae=!0)},p(d,D){var T,K,Q,ee;(!R||D&1)&&r!==(r=(((T=d[0])==null?void 0:T.name)??"File")+"")&&ne(c,r),d[5]&&d[4]?x?x.p(d,D):(x=xe(d),x.c(),x.m(s,$)):x&&(x.d(1),x=null),d[0].size?I?I.p(d,D):(I=Ie(d),I.c(),I.m(V,h)):I&&(I.d(1),I=null),(ee=(Q=(K=d[0])==null?void 0:K.file)==null?void 0:Q.data)!=null&&ee.content?w?(w.p(d,D),D&1&&j(w,1)):(w=ye(d),w.c(),j(w,1),w.m(V,null)):w&&(ie(),U(w,1,1,()=>{w=null}),re()),d[2]?k?(k.p(d,D),D&4&&j(k,1)):(k=Ve(d),k.c(),j(k,1),k.m(C,null)):k&&(ie(),U(k,1,1,()=>{k=null}),re());let P=F;F=ue(d),F===P?L[F].p(d,D):(ie(),U(L[P],1,1,()=>{L[P]=null}),re(),N=L[F],N?N.p(d,D):(N=L[F]=fe[F](d),N.c()),j(N,1),N.m(B,null))},i(d){R||(j(m.$$.fragment,d),j(w),j(k),j(N),R=!0)},o(d){U(m.$$.fragment,d),U(w),U(k),U(N),R=!1},d(d){d&&o(e),x&&x.d(),J(m),I&&I.d(),w&&w.d(),k&&k.d(),L[F].d(),ae=!1,Te(ce)}}}function tt(i){let e,t,s;function n(a){i[13](a)}let l={size:"lg",draggable:!0,className:"bg-gray-50 dark:bg-gray-900 rounded-2xl",$$slots:{default:[et]},$$scope:{ctx:i}};return i[1]!==void 0&&(l.show=i[1]),e=new qe({props:l}),Ne.push(()=>Me(e,"show",n)),{c(){G(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,r){Y(e,a,r),s=!0},p(a,[r]){const c={};r&65663&&(c.$$scope={dirty:r,ctx:a}),!t&&r&2&&(t=!0,c.show=a[1],ze(()=>t=!1)),e.$set(c)},i(a){s||(j(e.$$.fragment,a),s=!0)},o(a){U(e.$$.fragment,a),s=!1},d(a){J(e,a)}}}function lt(i,e,t){let s,n;Ue("i18n");let{item:l}=e,{show:a=!1}=e,{edit:r=!1}=e,c=!1,E=null,$=!1;function u(h){E=h.detail.data,t(4,$=!0)}async function p(){if(!(!E||!l||!l.id))try{const S=new FormData,A=new Blob([E],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});if(S.append("file",A,l.name),!(await fetch(`${te}/files/${l.id}/update`,{method:"PUT",body:S})).ok)throw new Error("Failed to save file");t(4,$=!1),alert("Excel file saved successfully!")}catch(h){console.error("Error saving Excel file:",h),alert("Failed to save Excel file: "+h.message)}}Be(()=>{console.log(l),(l==null?void 0:l.context)==="full"&&t(3,c=!0)});const m=()=>{!s&&!n&&l.url&&window.open(l.type==="file"?`${l.url}/content`:`${l.url}`,"_blank")},y=()=>{n&&$?confirm("You have unsaved changes. Do you want to leave without saving?")&&t(1,a=!1):t(1,a=!1)};function z(h){c=h,t(3,c)}const C=h=>{t(0,l.context=h.detail?"full":void 0,l)};function V(h){a=h,t(1,a)}return i.$$set=h=>{"item"in h&&t(0,l=h.item),"show"in h&&t(1,a=h.show),"edit"in h&&t(2,r=h.edit)},i.$$.update=()=>{var h,S,A,B,F,N,R;i.$$.dirty&1&&t(6,s=((h=l==null?void 0:l.meta)==null?void 0:h.content_type)==="application/pdf"||(l==null?void 0:l.name)&&(l==null?void 0:l.name.toLowerCase().endsWith(".pdf"))),i.$$.dirty&1&&t(5,n=((A=(S=l==null?void 0:l.meta)==null?void 0:S.content_type)==null?void 0:A.includes("spreadsheet"))||((F=(B=l==null?void 0:l.meta)==null?void 0:B.content_type)==null?void 0:F.includes("excel"))||((R=(N=l==null?void 0:l.meta)==null?void 0:N.content_type)==null?void 0:R.includes("ms-excel"))||(l==null?void 0:l.name)&&/\.(xlsx|xls|xlsm|xlsb|xltx|xlt|csv|ods)$/i.test(l==null?void 0:l.name))},[l,a,r,c,$,n,s,u,p,m,y,z,C,V]}class dt extends Ce{constructor(e){super(),je(this,e,lt,tt,Fe,{item:0,show:1,edit:2})}}export{dt as F,Ze as I};
//# sourceMappingURL=DfA6ghDG.js.map
