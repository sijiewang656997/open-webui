{"version":3,"file":"cKvFHznx.js","sources":["../../../../../../src/lib/utils/api-config.ts"],"sourcesContent":["import { getOpenAIUrls } from '$lib/apis/openai';\nimport { getAPIKey } from '$lib/apis/auths';\n\n/**\n * Gets the API configuration based on i18n settings and OpenAI URLs\n * @param i18n The i18n object from getContext('i18n')\n * @returns Promise with API configuration object\n */\nexport const getApiConfig = async (i18n: any) => {\n  try {\n    // Get token from localStorage\n    const localToken = localStorage.getItem('token') || '';\n    \n    // Fetch OpenAI API URLs\n    const apiUrls = await getOpenAIUrls(localToken);\n    \n    // Get the first URL\n    let baseUrl = \"https://192.168.200.118:5002\";\n    \n    \n    // Get API key\n    const apiKey = await getAPIKey(localToken);\n    const userToken = 'token_' + (apiKey || '');\n    \n    // Set language based on i18n - with safety checks\n    let languageLocal = 'en'; // Default\n    \n    console.log(\"localStorage.getItem('locale')\", localStorage.getItem('locale'));\n    // Check if i18n exists and has a language property\n    \n    const language = localStorage.getItem('locale') || 'en-US';;\n    if (language === 'zh-CN') {\n    languageLocal = 'zh_cn';\n    } else if (typeof language === 'string' && language.startsWith('en')) {\n    languageLocal = 'en';\n    }\n    \n    \n    console.log('API config calculated:', { baseUrl, userToken, languageLocal });\n    \n    return {\n      baseUrl,\n      userToken,\n      languageLocal\n    };\n  } catch (error) {\n    console.error('Error getting API configuration:', error);\n    // Return default values if there's an error\n    return {\n      baseUrl: 'https://192.168.200.118:5002',\n      userToken: 'token_59b8b43a_aiurmmm0',\n      languageLocal: 'en'\n    };\n  }\n}; "],"names":["getApiConfig","i18n","localToken","apiUrls","getOpenAIUrls","baseUrl","userToken","getAPIKey","languageLocal","language","error"],"mappings":"oEAQa,MAAAA,EAAe,MAAOC,GAAc,CAC3C,GAAA,CAEF,MAAMC,EAAa,aAAa,QAAQ,OAAO,GAAK,GAG9CC,EAAU,MAAMC,EAAcF,CAAU,EAG9C,IAAIG,EAAU,+BAKR,MAAAC,EAAY,UADH,MAAMC,EAAUL,CAAU,GACD,IAGxC,IAAIM,EAAgB,KAEpB,QAAQ,IAAI,iCAAkC,aAAa,QAAQ,QAAQ,CAAC,EAG5E,MAAMC,EAAW,aAAa,QAAQ,QAAQ,GAAK,QACnD,OAAIA,IAAa,QACDD,EAAA,QACL,OAAOC,GAAa,UAAYA,EAAS,WAAW,IAAI,IACnDD,EAAA,MAIhB,QAAQ,IAAI,yBAA0B,CAAE,QAAAH,EAAS,UAAAC,EAAW,cAAAE,EAAe,EAEpE,CACL,QAAAH,EACA,UAAAC,EACA,cAAAE,CACF,QACOE,EAAO,CACN,eAAA,MAAM,mCAAoCA,CAAK,EAEhD,CACL,QAAS,+BACT,UAAW,0BACX,cAAe,IACjB,CAAA,CAEJ"}