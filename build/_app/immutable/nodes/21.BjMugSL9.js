import{s as me,n as we,d as f,G as ke,a as K,c as u,B as ie,i as S,b as _,x as j,e as g,f as v,g as $,l as P,N as ze,h as p,t as ee,o as W,p as Oe,j as he,q as ft,y as _e,O as ct,m as Ze,r as dt,P as Ae,u as ht,v as _t,w as mt,T as Ke,D as $e,E as et,z as Me,M as tt,C as Ne,Q as gt}from"../chunks/CgRTDwF2.js";import{S as ge,i as pe,t as L,a as U,g as Re,c as je,d as te,m as se,b as le,e as re,j as Ce,f as Ue}from"../chunks/Bnxgdxyh.js";import{e as Be}from"../chunks/C3QokUWv.js";import{t as pt}from"../chunks/Fny8-CkQ.js";import{g as vt}from"../chunks/C_2ZPrHa.js";import{b as bt}from"../chunks/CisIfe-u.js";import{c as wt,a as kt,u as yt,m as Et}from"../chunks/D-bUEbUi.js";import{c as Dt}from"../chunks/CgEzuEYe.js";import{s as It}from"../chunks/B9ns8vb-.js";import{C as Vt}from"../chunks/BMI0F1Kb.js";import{C as Tt}from"../chunks/V3qGrggw.js";import{P as Nt}from"../chunks/lFg9uAw1.js";import{C as Ct}from"../chunks/vkOztigy.js";import{f as st,s as lt}from"../chunks/BREfJdbm.js";function Bt(l){let e,s,t,r=l[4].t(l[0].role)+"",i,n,o,a,d,D,h,c,k,m='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>',E,b;return{c(){e=p("div"),s=p("div"),t=p("div"),i=ee(r),n=W(),o=p("div"),a=p("textarea"),h=W(),c=p("div"),k=p("button"),k.innerHTML=m,this.h()},l(w){e=g(w,"DIV",{class:!0});var I=v(e);s=g(I,"DIV",{class:!0});var B=v(s);t=g(B,"DIV",{class:!0});var H=v(t);i=$(H,r),H.forEach(f),B.forEach(f),n=P(I),o=g(I,"DIV",{class:!0});var N=v(o);a=g(N,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),v(a).forEach(f),N.forEach(f),h=P(I),c=g(I,"DIV",{class:!0});var T=v(c);k=g(T,"BUTTON",{class:!0,"data-svelte-h":!0}),ze(k)!=="svelte-7qrvne"&&(k.innerHTML=m),T.forEach(f),I.forEach(f),this.h()},h(){u(t,"class","px-2 py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition"),u(s,"class","flex items-start pt-1"),u(a,"id",d=l[0].role+"-"+l[1]+"-textarea"),u(a,"class","w-full bg-transparent outline-hidden rounded-lg p-2 text-sm resize-none overflow-hidden"),u(a,"placeholder",D=l[4].t("Enter {{role}} message here",{role:l[0].role==="user"?l[4].t("a user"):l[4].t("an assistant")})),u(a,"rows","1"),u(o,"class","flex-1"),u(k,"class","group-hover:text-gray-500 dark:text-gray-900 dark:hover:text-gray-300 transition"),u(c,"class","pt-1"),u(e,"class","flex gap-2 group")},m(w,I){S(w,e,I),_(e,s),_(s,t),_(t,i),_(e,n),_(e,o),_(o,a),l[6](a),ie(a,l[0].content),_(e,h),_(e,c),_(c,k),E||(b=[j(a,"input",l[7]),j(a,"focus",l[8]),j(a,"input",l[9]),j(k,"click",l[10])],E=!0)},p(w,[I]){I&17&&r!==(r=w[4].t(w[0].role)+"")&&K(i,r),I&3&&d!==(d=w[0].role+"-"+w[1]+"-textarea")&&u(a,"id",d),I&17&&D!==(D=w[4].t("Enter {{role}} message here",{role:w[0].role==="user"?w[4].t("a user"):w[4].t("an assistant")}))&&u(a,"placeholder",D),I&1&&ie(a,w[0].content)},i:we,o:we,d(w){w&&f(e),l[6](null),E=!1,ke(b)}}}function xt(l,e,s){let t;const r=Oe("i18n");he(l,r,m=>s(4,t=m));let{message:i}=e,{idx:n}=e,{onDelete:o}=e,a;ft(()=>{s(3,a.style.height="",a),s(3,a.style.height=a.scrollHeight+"px",a)});function d(m){_e[m?"unshift":"push"](()=>{a=m,s(3,a)})}const D=m=>{s(3,a.style.height="",a),s(3,a.style.height=a.scrollHeight+"px",a)},h=m=>{s(3,a.style.height="",a),s(3,a.style.height=a.scrollHeight+"px",a)};function c(){i.content=this.value,s(0,i)}const k=()=>{o()};return l.$$set=m=>{"message"in m&&s(0,i=m.message),"idx"in m&&s(1,n=m.idx),"onDelete"in m&&s(2,o=m.onDelete)},[i,n,o,a,t,r,d,D,h,c,k]}class Ht extends ge{constructor(e){super(),pe(this,e,xt,Bt,me,{message:0,idx:1,onDelete:2})}}function rt(l,e,s){const t=l.slice();return t[3]=e[s],t[5]=s,t}function at(l){let e,s;function t(){return l[1](l[5])}return e=new Ht({props:{message:l[3],idx:l[5],onDelete:t}}),{c(){re(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){se(e,r,i),s=!0},p(r,i){l=r;const n={};i&1&&(n.message=l[3]),i&1&&(n.onDelete=t),e.$set(n)},i(r){s||(U(e.$$.fragment,r),s=!0)},o(r){L(e.$$.fragment,r),s=!1},d(r){te(e,r)}}}function St(l){let e,s,t=Be(l[0]),r=[];for(let n=0;n<t.length;n+=1)r[n]=at(rt(l,t,n));const i=n=>L(r[n],1,1,()=>{r[n]=null});return{c(){e=p("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=g(n,"DIV",{class:!0});var o=v(e);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(f),this.h()},h(){u(e,"class","py-3 space-y-3")},m(n,o){S(n,e,o);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);s=!0},p(n,[o]){if(o&1){t=Be(n[0]);let a;for(a=0;a<t.length;a+=1){const d=rt(n,t,a);r[a]?(r[a].p(d,o),U(r[a],1)):(r[a]=at(d),r[a].c(),U(r[a],1),r[a].m(e,null))}for(Re(),a=t.length;a<r.length;a+=1)i(a);je()}},i(n){if(!s){for(let o=0;o<t.length;o+=1)U(r[o]);s=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)L(r[o]);s=!1},d(n){n&&f(e),ct(r,n)}}}function Mt(l,e,s){Oe("i18n");let{messages:t=[]}=e;const r=i=>{s(0,t=t.filter((n,o)=>o!==i))};return l.$$set=i=>{"messages"in i&&s(0,t=i.messages)},[t,r]}class Ut extends ge{constructor(e){super(),pe(this,e,Mt,St,me,{messages:0})}}function nt(l){let e,s,t,r,i,n,o,a,d,D,h;const c=l[6].default,k=dt(c,l,l[5],null);return{c(){e=p("div"),t=W(),r=p("div"),i=p("div"),k&&k.c(),this.h()},l(m){e=g(m,"DIV",{class:!0}),v(e).forEach(f),t=P(m),r=g(m,"DIV",{class:!0});var E=v(r);i=g(E,"DIV",{class:!0,style:!0});var b=v(i);k&&k.l(b),b.forEach(f),E.forEach(f),this.h()},h(){u(e,"class","absolute z-20 top-0 right-0 left-0 bottom-0 bg-white/20 dark:bg-black/5 w-full min-h-full h-full flex justify-center overflow-hidden overscroll-contain"),u(i,"class",n=l[3]+" h-full"),Ke(i,"width",l[0]?l[2]:"0px"),u(r,"class",o="absolute z-30 shadow-xl "+(l[1]==="right"?"right-0":"left-0")+" top-0 bottom-0")},m(m,E){S(m,e,E),S(m,t,E),S(m,r,E),_(r,i),k&&k.m(i,null),d=!0,D||(h=j(e,"mousedown",l[7]),D=!0)},p(m,E){l=m,k&&k.p&&(!d||E&32)&&ht(k,c,l,l[5],d?mt(c,l[5],E,null):_t(l[5]),null),(!d||E&8&&n!==(n=l[3]+" h-full"))&&u(i,"class",n),(!d||E&5)&&Ke(i,"width",l[0]?l[2]:"0px"),(!d||E&2&&o!==(o="absolute z-30 shadow-xl "+(l[1]==="right"?"right-0":"left-0")+" top-0 bottom-0"))&&u(r,"class",o)},i(m){d||(m&&Ae(()=>{d&&(s||(s=Ce(e,st,{duration:l[4]},!0)),s.run(1))}),U(k,m),m&&Ae(()=>{d&&(a||(a=Ce(r,lt,{duration:l[4],axis:l[1]==="right"?"x":"y"},!0)),a.run(1))}),d=!0)},o(m){m&&(s||(s=Ce(e,st,{duration:l[4]},!1)),s.run(0)),L(k,m),m&&(a||(a=Ce(r,lt,{duration:l[4],axis:l[1]==="right"?"x":"y"},!1)),a.run(0)),d=!1},d(m){m&&(f(e),f(t),f(r)),m&&s&&s.end(),k&&k.d(m),m&&a&&a.end(),D=!1,h()}}}function zt(l){let e,s,t=l[0]&&nt(l);return{c(){t&&t.c(),e=Ze()},l(r){t&&t.l(r),e=Ze()},m(r,i){t&&t.m(r,i),S(r,e,i),s=!0},p(r,[i]){r[0]?t?(t.p(r,i),i&1&&U(t,1)):(t=nt(r),t.c(),U(t,1),t.m(e.parentNode,e)):t&&(Re(),L(t,1,1,()=>{t=null}),je())},i(r){s||(U(t),s=!0)},o(r){L(t),s=!1},d(r){r&&f(e),t&&t.d(r)}}}function At(l,e,s){let{$$slots:t={},$$scope:r}=e,{show:i=!1}=e,{side:n="right"}=e,{width:o="200px"}=e,{className:a=""}=e,{duration:d=100}=e;const D=()=>{s(0,i=!1)};return l.$$set=h=>{"show"in h&&s(0,i=h.show),"side"in h&&s(1,n=h.side),"width"in h&&s(2,o=h.width),"className"in h&&s(3,a=h.className),"duration"in h&&s(4,d=h.duration),"$$scope"in h&&s(5,r=h.$$scope)},[i,n,o,a,d,r,t,D]}class Ot extends ge{constructor(e){super(),pe(this,e,At,zt,me,{show:0,side:1,width:2,className:3,duration:4})}}function Rt(l){let e,s;return{c(){e=et("svg"),s=et("path"),this.h()},l(t){e=$e(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=v(e);s=$e(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(s).forEach(f),r.forEach(f),this.h()},h(){u(s,"stroke-linecap","round"),u(s,"stroke-linejoin","round"),u(s,"d","M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",l[1]),u(e,"stroke","currentColor"),u(e,"class",l[0])},m(t,r){S(t,e,r),_(e,s)},p(t,[r]){r&2&&u(e,"stroke-width",t[1]),r&1&&u(e,"class",t[0])},i:we,o:we,d(t){t&&f(e)}}}function jt(l,e,s){let{className:t="size-4"}=e,{strokeWidth:r="1.5"}=e;return l.$$set=i=>{"className"in i&&s(0,t=i.className),"strokeWidth"in i&&s(1,r=i.strokeWidth)},[t,r]}class Pt extends ge{constructor(e){super(),pe(this,e,jt,Rt,me,{className:0,strokeWidth:1})}}function ot(l,e,s){const t=l.slice();return t[41]=e[s],t}function it(l){let e,s=l[41].name+"",t,r;return{c(){e=p("option"),t=ee(s),this.h()},l(i){e=g(i,"OPTION",{class:!0});var n=v(e);t=$(n,s),n.forEach(f),this.h()},h(){e.__value=r=l[41].id,ie(e,e.__value),u(e,"class","bg-gray-50 dark:bg-gray-700")},m(i,n){S(i,e,n),_(e,t)},p(i,n){n[0]&1024&&s!==(s=i[41].name+"")&&K(t,s),n[0]&1024&&r!==(r=i[41].id)&&(e.__value=r,ie(e,e.__value))},d(i){i&&f(e)}}}function Wt(l){let e,s,t,r="Settings",i,n,o,a,d,D,h,c,k="Model",m,E,b,w,I,B;a=new Pt({props:{className:"size-3",strokeWidth:"2.5"}});let H=Be(l[10]),N=[];for(let T=0;T<H.length;T+=1)N[T]=it(ot(l,H,T));return{c(){e=p("div"),s=p("div"),t=p("div"),t.textContent=r,i=W(),n=p("div"),o=p("button"),re(a.$$.fragment),d=W(),D=p("div"),h=p("div"),c=p("div"),c.textContent=k,m=W(),E=p("div"),b=p("select");for(let T=0;T<N.length;T+=1)N[T].c();this.h()},l(T){e=g(T,"DIV",{class:!0});var z=v(e);s=g(z,"DIV",{class:!0});var C=v(s);t=g(C,"DIV",{class:!0,"data-svelte-h":!0}),ze(t)!=="svelte-1dw76ku"&&(t.textContent=r),i=P(C),n=g(C,"DIV",{class:!0});var A=v(n);o=g(A,"BUTTON",{class:!0});var F=v(o);le(a.$$.fragment,F),F.forEach(f),A.forEach(f),C.forEach(f),d=P(z),D=g(z,"DIV",{class:!0});var M=v(D);h=g(M,"DIV",{});var G=v(h);c=g(G,"DIV",{class:!0,"data-svelte-h":!0}),ze(c)!=="svelte-vz1bvh"&&(c.textContent=k),m=P(G),E=g(G,"DIV",{class:!0});var ae=v(E);b=g(ae,"SELECT",{class:!0});var X=v(b);for(let J=0;J<N.length;J+=1)N[J].l(X);X.forEach(f),ae.forEach(f),G.forEach(f),M.forEach(f),z.forEach(f),this.h()},h(){u(t,"class","font-medium text-base"),u(o,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"),u(n,"class","translate-x-1.5"),u(s,"class","flex justify-between items-center mb-2"),u(c,"class","text-xs font-medium mb-1"),u(b,"class","w-full bg-transparent border border-gray-100 dark:border-gray-850 rounded-lg py-1 px-2 -mx-0.5 text-sm outline-hidden"),l[1]===void 0&&Ae(()=>l[18].call(b)),u(E,"class","w-full"),u(D,"class","mt-1"),u(e,"class","flex flex-col px-5 py-3 text-sm")},m(T,z){S(T,e,z),_(e,s),_(s,t),_(s,i),_(s,n),_(n,o),se(a,o,null),_(e,d),_(e,D),_(D,h),_(h,c),_(h,m),_(h,E),_(E,b);for(let C=0;C<N.length;C+=1)N[C]&&N[C].m(b,null);tt(b,l[1],!0),w=!0,I||(B=[j(o,"click",l[17]),j(b,"change",l[18])],I=!0)},p(T,z){if(z[0]&1024){H=Be(T[10]);let C;for(C=0;C<H.length;C+=1){const A=ot(T,H,C);N[C]?N[C].p(A,z):(N[C]=it(A),N[C].c(),N[C].m(b,null))}for(;C<N.length;C+=1)N[C].d(1);N.length=H.length}z[0]&1026&&tt(b,T[1])},i(T){w||(U(a.$$.fragment,T),w=!0)},o(T){L(a.$$.fragment,T),w=!1},d(T){T&&f(e),te(a),ct(N,T),I=!1,ke(B)}}}function ut(l){let e,s;return{c(){e=p("div"),s=ee(l[6]),this.h()},l(t){e=g(t,"DIV",{class:!0});var r=v(e);s=$(r,l[6]),r.forEach(f),this.h()},h(){u(e,"class","flex-1 text-gray-500 line-clamp-1")},m(t,r){S(t,e,r),_(e,s)},p(t,r){r[0]&64&&K(s,t[6])},d(t){t&&f(e)}}}function Lt(l){let e,s;return e=new Nt({props:{className:"size-3.5"}}),{c(){re(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){se(e,t,r),s=!0},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){te(e,t)}}}function qt(l){let e,s;return e=new Tt({props:{className:"size-3.5"}}),{c(){re(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){se(e,t,r),s=!0},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){te(e,t)}}}function Xt(l){let e,s,t=l[11].t("System Instructions")+"",r,i,n,o,a,d,D,h,c=!l[0]&&ut(l);const k=[qt,Lt],m=[];function E(b,w){return b[0]?0:1}return d=E(l),D=m[d]=k[d](l),{c(){e=p("div"),s=p("div"),r=ee(t),i=W(),c&&c.c(),n=W(),o=p("div"),a=p("button"),D.c(),this.h()},l(b){e=g(b,"DIV",{class:!0});var w=v(e);s=g(w,"DIV",{class:!0});var I=v(s);r=$(I,t),I.forEach(f),i=P(w),c&&c.l(w),n=P(w),o=g(w,"DIV",{class:!0});var B=v(o);a=g(B,"BUTTON",{class:!0});var H=v(a);D.l(H),H.forEach(f),B.forEach(f),w.forEach(f),this.h()},h(){u(s,"class","shrink-0 font-medium ml-1.5"),u(a,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"),u(o,"class","shrink-0"),u(e,"class","flex gap-2 justify-between items-center")},m(b,w){S(b,e,w),_(e,s),_(s,r),_(e,i),c&&c.m(e,null),_(e,n),_(e,o),_(o,a),m[d].m(a,null),h=!0},p(b,w){(!h||w[0]&2048)&&t!==(t=b[11].t("System Instructions")+"")&&K(r,t),b[0]?c&&(c.d(1),c=null):c?c.p(b,w):(c=ut(b),c.c(),c.m(e,n));let I=d;d=E(b),d!==I&&(Re(),L(m[I],1,1,()=>{m[I]=null}),je(),D=m[d],D||(D=m[d]=k[d](b),D.c()),U(D,1),D.m(a,null))},i(b){h||(U(D),h=!0)},o(b){L(D),h=!1},d(b){b&&f(e),c&&c.d(),m[d].d()}}}function Yt(l){let e,s,t,r,i,n;return{c(){e=p("div"),s=p("div"),t=p("textarea"),this.h()},l(o){e=g(o,"DIV",{slot:!0});var a=v(e);s=g(a,"DIV",{class:!0});var d=v(s);t=g(d,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),v(t).forEach(f),d.forEach(f),a.forEach(f),this.h()},h(){u(t,"class","w-full h-full bg-transparent resize-none outline-hidden text-sm"),u(t,"placeholder",r=l[11].t("You're a helpful assistant.")),u(t,"rows","4"),u(s,"class","pt-1 px-1.5"),u(e,"slot","content")},m(o,a){S(o,e,a),_(e,s),_(s,t),l[20](t),ie(t,l[6]),i||(n=[j(t,"input",l[21]),j(t,"input",l[22])],i=!0)},p(o,a){a[0]&2048&&r!==(r=o[11].t("You're a helpful assistant."))&&u(t,"placeholder",r),a[0]&64&&ie(t,o[6])},d(o){o&&f(e),l[20](null),i=!1,ke(n)}}}function Ft(l){let e=l[11].t("Assistant")+"",s;return{c(){s=ee(e)},l(t){s=$(t,e)},m(t,r){S(t,s,r)},p(t,r){r[0]&2048&&e!==(e=t[11].t("Assistant")+"")&&K(s,e)},d(t){t&&f(s)}}}function Gt(l){let e=l[11].t("User")+"",s;return{c(){s=ee(e)},l(t){s=$(t,e)},m(t,r){S(t,s,r)},p(t,r){r[0]&2048&&e!==(e=t[11].t("User")+"")&&K(s,e)},d(t){t&&f(s)}}}function Jt(l){let e,s=l[11].t("Cancel")+"",t,r,i;return{c(){e=p("button"),t=ee(s),this.h()},l(n){e=g(n,"BUTTON",{class:!0});var o=v(e);t=$(o,s),o.forEach(f),this.h()},h(){u(e,"class","px-3 py-1.5 text-sm font-medium bg-gray-300 text-black transition rounded-lg")},m(n,o){S(n,e,o),_(e,t),r||(i=j(e,"click",l[33]),r=!0)},p(n,o){o[0]&2048&&s!==(s=n[11].t("Cancel")+"")&&K(t,s)},d(n){n&&f(e),r=!1,i()}}}function Qt(l){let e,s=l[11].t("Add")+"",t,r,i,n,o=l[11].t("Run")+"",a,d,D;return{c(){e=p("button"),t=ee(s),i=W(),n=p("button"),a=ee(o),this.h()},l(h){e=g(h,"BUTTON",{class:!0});var c=v(e);t=$(c,s),c.forEach(f),i=P(h),n=g(h,"BUTTON",{class:!0});var k=v(n);a=$(k,o),k.forEach(f),this.h()},h(){e.disabled=r=l[8]==="",u(e,"class","px-3.5 py-1.5 text-sm font-medium disabled:bg-gray-50 dark:disabled:hover:bg-gray-850 disabled:cursor-not-allowed bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg"),u(n,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-lg")},m(h,c){S(h,e,c),_(e,t),S(h,i,c),S(h,n,c),_(n,a),d||(D=[j(e,"click",l[31]),j(n,"click",l[32])],d=!0)},p(h,c){c[0]&2048&&s!==(s=h[11].t("Add")+"")&&K(t,s),c[0]&256&&r!==(r=h[8]==="")&&(e.disabled=r),c[0]&2048&&o!==(o=h[11].t("Run")+"")&&K(a,o)},d(h){h&&(f(e),f(i),f(n)),d=!1,ke(D)}}}function Zt(l){let e,s,t,r,i,n,o,a,d,D,h,c,k,m,E,b,w,I,B,H,N,T,z,C,A,F,M,G,ae,X,J,Z,ve,ne,oe,be,ye;function xe(y){l[19](y)}let Ee={className:" bg-white dark:bg-gray-900",width:"300px",$$slots:{default:[Wt]},$$scope:{ctx:l}};l[5]!==void 0&&(Ee.show=l[5]),t=new Ot({props:Ee}),_e.push(()=>Ue(t,"show",xe));function He(y){l[23](y)}let De={className:"w-full flex-1",buttonClassName:"w-full rounded-lg text-sm border border-gray-100 dark:border-gray-850 w-full py-1 px-1.5",grow:!0,$$slots:{content:[Yt],default:[Xt]},$$scope:{ctx:l}};l[0]!==void 0&&(De.open=l[0]),a=new Vt({props:De}),_e.push(()=>Ue(a,"open",He)),k=new Ct({});function Se(y){l[25](y)}let V={};l[9]!==void 0&&(V.messages=l[9]),I=new Ut({props:V}),_e.push(()=>Ue(I,"messages",Se));function ce(y,x){return y[7]==="user"?Gt:Ft}let de=ce(l),O=de(l);function ue(y,x){return y[2]?Jt:Qt}let fe=ue(l),R=fe(l);return{c(){e=p("div"),s=p("div"),re(t.$$.fragment),i=W(),n=p("div"),o=p("div"),re(a.$$.fragment),D=W(),h=p("div"),c=p("button"),re(k.$$.fragment),m=W(),E=p("div"),b=p("div"),w=p("div"),re(I.$$.fragment),H=W(),N=p("div"),T=p("div"),z=ee(l[1]),C=W(),A=p("div"),F=p("div"),M=p("textarea"),ae=W(),X=p("div"),J=p("div"),Z=p("button"),O.c(),ve=W(),ne=p("div"),R.c(),this.h()},l(y){e=g(y,"DIV",{class:!0});var x=v(e);s=g(x,"DIV",{class:!0});var Y=v(s);le(t.$$.fragment,Y),i=P(Y),n=g(Y,"DIV",{class:!0});var q=v(n);o=g(q,"DIV",{class:!0});var Q=v(o);le(a.$$.fragment,Q),D=P(Q),h=g(Q,"DIV",{class:!0});var Pe=v(h);c=g(Pe,"BUTTON",{class:!0});var We=v(c);le(k.$$.fragment,We),We.forEach(f),Pe.forEach(f),Q.forEach(f),m=P(q),E=g(q,"DIV",{class:!0,id:!0});var Le=v(E);b=g(Le,"DIV",{class:!0});var qe=v(b);w=g(qe,"DIV",{class:!0});var Xe=v(w);le(I.$$.fragment,Xe),Xe.forEach(f),qe.forEach(f),Le.forEach(f),H=P(q),N=g(q,"DIV",{class:!0});var Ie=v(N);T=g(Ie,"DIV",{class:!0});var Ye=v(T);z=$(Ye,l[1]),Ye.forEach(f),C=P(Ie),A=g(Ie,"DIV",{class:!0});var Ve=v(A);F=g(Ve,"DIV",{class:!0});var Fe=v(F);M=g(Fe,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),v(M).forEach(f),Fe.forEach(f),ae=P(Ve),X=g(Ve,"DIV",{class:!0});var Te=v(X);J=g(Te,"DIV",{});var Ge=v(J);Z=g(Ge,"BUTTON",{class:!0});var Je=v(Z);O.l(Je),Je.forEach(f),Ge.forEach(f),ve=P(Te),ne=g(Te,"DIV",{});var Qe=v(ne);R.l(Qe),Qe.forEach(f),Te.forEach(f),Ve.forEach(f),Ie.forEach(f),q.forEach(f),Y.forEach(f),x.forEach(f),this.h()},h(){u(c,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"),u(h,"class","translate-y-1"),u(o,"class","flex w-full items-start gap-1.5"),u(w,"class","flex-1 p-1"),u(b,"class","h-full w-full flex flex-col"),u(E,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0"),u(E,"id","messages-container"),u(T,"class","text-xs font-medium text-gray-500 px-2 py-1"),u(M,"class","w-full h-full bg-transparent resize-none outline-hidden text-sm"),u(M,"placeholder",G=l[11].t("Enter {{role}} message here",{role:l[7]==="user"?l[11].t("a user"):l[11].t("an assistant")})),u(M,"rows","2"),u(F,"class","py-0.5"),u(Z,"class","px-3.5 py-1.5 text-sm font-medium bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg"),u(X,"class","flex justify-between"),u(A,"class","border border-gray-100 dark:border-gray-850 w-full px-3 py-2.5 rounded-xl"),u(N,"class","pb-3"),u(n,"class","flex flex-col h-full px-3.5"),u(s,"class","mx-auto w-full md:px-0 h-full relative"),u(e,"class","flex flex-col justify-between w-full overflow-y-auto h-full")},m(y,x){S(y,e,x),_(e,s),se(t,s,null),_(s,i),_(s,n),_(n,o),se(a,o,null),_(o,D),_(o,h),_(h,c),se(k,c,null),_(n,m),_(n,E),_(E,b),_(b,w),se(I,w,null),l[26](E),_(n,H),_(n,N),_(N,T),_(T,z),_(N,C),_(N,A),_(A,F),_(F,M),ie(M,l[8]),_(A,ae),_(A,X),_(X,J),_(J,Z),O.m(Z,null),_(X,ve),_(X,ne),R.m(ne,null),oe=!0,be||(ye=[j(c,"click",l[24]),j(M,"input",l[27]),j(M,"input",l[28]),j(M,"focus",l[29]),j(Z,"click",l[30])],be=!0)},p(y,x){const Y={};x[0]&1058|x[1]&8192&&(Y.$$scope={dirty:x,ctx:y}),!r&&x[0]&32&&(r=!0,Y.show=y[5],Me(()=>r=!1)),t.$set(Y);const q={};x[0]&2121|x[1]&8192&&(q.$$scope={dirty:x,ctx:y}),!d&&x[0]&1&&(d=!0,q.open=y[0],Me(()=>d=!1)),a.$set(q);const Q={};!B&&x[0]&512&&(B=!0,Q.messages=y[9],Me(()=>B=!1)),I.$set(Q),(!oe||x[0]&2)&&K(z,y[1]),(!oe||x[0]&2176&&G!==(G=y[11].t("Enter {{role}} message here",{role:y[7]==="user"?y[11].t("a user"):y[11].t("an assistant")})))&&u(M,"placeholder",G),x[0]&256&&ie(M,y[8]),de===(de=ce(y))&&O?O.p(y,x):(O.d(1),O=de(y),O&&(O.c(),O.m(Z,null))),fe===(fe=ue(y))&&R?R.p(y,x):(R.d(1),R=fe(y),R&&(R.c(),R.m(ne,null)))},i(y){oe||(U(t.$$.fragment,y),U(a.$$.fragment,y),U(k.$$.fragment,y),U(I.$$.fragment,y),oe=!0)},o(y){L(t.$$.fragment,y),L(a.$$.fragment,y),L(k.$$.fragment,y),L(I.$$.fragment,y),oe=!1},d(y){y&&f(e),te(t),te(a),te(k),te(I),l[26](null),O.d(),R.d(),be=!1,ke(ye)}}}function Kt(l,e,s){let t,r,i,n,o;he(l,wt,V=>s(36,t=V)),he(l,kt,V=>s(37,r=V)),he(l,yt,V=>s(38,i=V)),he(l,Et,V=>s(10,n=V));const a=Oe("i18n");he(l,a,V=>s(11,o=V));let d="",D=!1,h=!1,c,k,m=!1,E=!1,b="",w="user",I="",B=[];const H=()=>{const V=k;V&&(V.scrollTop=V==null?void 0:V.scrollHeight)},N=()=>{h=!0,console.log("stopResponse")},T=async()=>{await Ne(),c&&(s(3,c.style.height="",c),s(3,c.style.height=Math.min(c.scrollHeight,555)+"px",c))},z=async()=>{var fe;if(d===""){pt.error(o.t("Please select a model."));return}const V=n.find(R=>R.id===d);if(!V){s(1,d="");return}const[ce,de]=await Dt(localStorage.token,{model:V.id,stream:!0,messages:[b?{role:"system",content:b}:void 0,...B].filter(R=>R)},`${bt}/api`);let O;((fe=B.at(-1))==null?void 0:fe.role)==="assistant"?O=B.at(-1):(O={role:"assistant",content:""},B.push(O),s(9,B)),await Ne();const ue=document.getElementById(`assistant-${B.length-1}-textarea`);if(ce&&ce.ok){const R=ce.body.pipeThrough(new TextDecoderStream).pipeThrough(It(`
`)).getReader();for(;;){const{value:y,done:x}=await R.read();if(x||h){h&&de.abort("User: Stop Response");break}try{let Y=y.split(`
`);for(const q of Y)if(q!=="")if(console.log(q),q==="data: [DONE]")s(9,B);else{let Q=JSON.parse(q.replace(/^data: /,""));if(console.log(Q),O.content==""&&Q.choices[0].delta.content==`
`)continue;ue.style.height=ue.scrollHeight+"px",O.content+=Q.choices[0].delta.content??"",s(9,B),ue.style.height=ue.scrollHeight+"px",await Ne()}}catch(Y){console.log(Y)}H()}}},C=async()=>{I&&(B.push({role:w,content:I}),s(9,B),s(8,I=""),await Ne(),H())},A=async()=>{d&&(await C(),s(2,D=!0),await z(),s(2,D=!1),h=!1)};ft(async()=>{(i==null?void 0:i.role)!=="admin"&&await vt("/"),r!=null&&r.models?s(1,d=r==null?void 0:r.models[0]):t!=null&&t.default_models?s(1,d=t==null?void 0:t.default_models.split(",")[0]):s(1,d="")});const F=()=>{s(5,E=!E)};function M(){d=gt(this),s(1,d)}function G(V){E=V,s(5,E)}function ae(V){_e[V?"unshift":"push"](()=>{c=V,s(3,c)})}function X(){b=this.value,s(6,b)}const J=()=>{T()};function Z(V){m=V,s(0,m)}const ve=()=>{s(5,E=!E)};function ne(V){B=V,s(9,B)}function oe(V){_e[V?"unshift":"push"](()=>{k=V,s(4,k)})}function be(){I=this.value,s(8,I)}const ye=V=>{V.target.style.height="",V.target.style.height=Math.min(V.target.scrollHeight,150)+"px"},xe=V=>{V.target.style.height="",V.target.style.height=Math.min(V.target.scrollHeight,150)+"px"},Ee=()=>{s(7,w=w==="user"?"assistant":"user")},He=()=>{C(),s(7,w=w==="user"?"assistant":"user")},De=()=>{A()},Se=()=>{N()};return l.$$.update=()=>{l.$$.dirty[0]&1&&m&&T()},[m,d,D,c,k,E,b,w,I,B,n,o,a,N,T,C,A,F,M,G,ae,X,J,Z,ve,ne,oe,be,ye,xe,Ee,He,De,Se]}class $t extends ge{constructor(e){super(),pe(this,e,Kt,Zt,me,{},null,[-1,-1])}}function es(l){let e,s;return e=new $t({}),{c(){re(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){se(e,t,r),s=!0},p:we,i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){te(e,t)}}}class ms extends ge{constructor(e){super(),pe(this,e,null,es,me,{})}}export{ms as component};
//# sourceMappingURL=21.BjMugSL9.js.map
