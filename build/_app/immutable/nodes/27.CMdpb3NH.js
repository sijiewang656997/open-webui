import{s as Fe,D as Pe,E as Ue,a as w,d,f as c,i as B,g as p,n as ce,e as g,c as v,P as _t,I as st,k as H,o as q,y as De,A as xe,p as nt,j as je,M as ot,u as ie,t as _e,b as ge,h as ve,B as Se,z as gt,G as et,q as vt,J as wt}from"../chunks/Dc4_ziGv.js";import{S as We,i as Ae,t as D,g as Ce,c as Te,a as V,b as L,d as K,m as j,e as O,f as Ve}from"../chunks/CAZSMy3J.js";import{F as $t}from"../chunks/CU2r43ac.js";import{t as Q}from"../chunks/gLvYLTeg.js";import{g as kt}from"../chunks/RkzYe8eb.js";import{p as bt}from"../chunks/XbtbQPSN.js";import{s as yt,k as It}from"../chunks/DhUbH0v9.js";import{u as Et,a as Dt}from"../chunks/pKnnkZ93.js";import{b as xt,r as Vt,e as Ft,f as Ct,u as Tt,h as Nt,g as Mt}from"../chunks/Czxj3Xk6.js";import{n as Bt,v as St}from"../chunks/DWuYzDxc.js";import{S as Wt}from"../chunks/7Z-YgjJE.js";import{e as ct}from"../chunks/C6kX8Nm-.js";import{F as At}from"../chunks/BFv3ac4I.js";import{A as zt,D as Pt}from"../chunks/BCv4kF9c.js";import"../chunks/CPKI64Ek.js";import{D as Ut,M as Ze}from"../chunks/C16jRFgG.js";import{b as Lt}from"../chunks/DOIyYfji.js";import{f as Kt}from"../chunks/g5t9vw8M.js";import{T as tt}from"../chunks/Cj5D4_dy.js";import{F as jt}from"../chunks/ArHSQ0vS.js";import"../chunks/Bi9B0bt2.js";import{M as Ot}from"../chunks/MKheDeAE.js";import{R as at,V as Ht}from"../chunks/BHyjy2lL.js";import{X as qt}from"../chunks/B9KCSGTn.js";import{M as Rt}from"../chunks/B59JPjC8.js";import{C as Xt}from"../chunks/DJpY-x4S.js";import{C as Gt}from"../chunks/jVKdWSgo.js";import{A as Jt,L as Yt}from"../chunks/lA3_DYkZ.js";function Qt(s){let e,t;return{c(){e=Pe("svg"),t=Pe("path"),this.h()},l(l){e=Ue(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Ue(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){B(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function Zt(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class el extends We{constructor(e){super(),Ae(this,e,Zt,Qt,Fe,{className:0,strokeWidth:1})}}function ft(s,e,t){const l=s.slice();return l[6]=e[t],l}function ut(s){var o,i,f,u,$,I;let e,t,l,r;function a(){return s[4](s[6])}function n(){return s[5](s[6])}return t=new At({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((o=s[6])==null?void 0:o.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((u=s[6])==null?void 0:u.size)??((I=($=s[6])==null?void 0:$.meta)==null?void 0:I.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",a),t.$on("dismiss",n),{c(){e=g("div"),L(t.$$.fragment),l=H(),this.h()},l(b){e=v(b,"DIV",{class:!0});var x=w(e);K(t.$$.fragment,x),l=q(x),x.forEach(d),this.h()},h(){c(e,"class","mt-1 px-2")},m(b,x){B(b,e,x),j(t,e,null),p(e,l),r=!0},p(b,x){var T,N,W,F,S,y;s=b;const k={};x&3&&(k.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),x&4&&(k.small=s[2]),x&2&&(k.item=s[6]),x&2&&(k.name=((T=s[6])==null?void 0:T.name)??((W=(N=s[6])==null?void 0:N.meta)==null?void 0:W.name)),x&2&&(k.size=((F=s[6])==null?void 0:F.size)??((y=(S=s[6])==null?void 0:S.meta)==null?void 0:y.size)??""),x&2&&(k.loading=s[6].status==="uploading"),t.$set(k)},i(b){r||(D(t.$$.fragment,b),r=!0)},o(b){V(t.$$.fragment,b),r=!1},d(b){b&&d(e),O(t)}}}function tl(s){let e,t,l=ct(s[1]),r=[];for(let n=0;n<l.length;n+=1)r[n]=ut(ft(s,l,n));const a=n=>V(r[n],1,1,()=>{r[n]=null});return{c(){e=g("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=v(n,"DIV",{class:!0});var o=w(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(d),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(n,o){B(n,e,o);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,[o]){if(o&15){l=ct(n[1]);let i;for(i=0;i<l.length;i+=1){const f=ft(n,l,i);r[i]?(r[i].p(f,o),D(r[i],1)):(r[i]=ut(f),r[i].c(),D(r[i],1),r[i].m(e,null))}for(Ce(),i=l.length;i<r.length;i+=1)a(i);Te()}},i(n){if(!t){for(let o=0;o<l.length;o+=1)D(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)V(r[o]);t=!1},d(n){n&&d(e),_t(r,n)}}}function ll(s,e,t){const l=st();let{selectedFileId:r=null}=e,{files:a=[]}=e,{small:n=!1}=e;const o=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,a=f.files),"small"in f&&t(2,n=f.small)},[r,a,n,l,o,i]}class rl extends We{constructor(e){super(),Ae(this,e,ll,tl,Fe,{selectedFileId:0,files:1,small:2})}}function sl(s){let e,t;return{c(){e=Pe("svg"),t=Pe("path"),this.h()},l(l){e=Ue(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Ue(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){B(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function nl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class ol extends We{constructor(e){super(),Ae(this,e,nl,sl,Fe,{className:0,strokeWidth:1})}}function al(s){let e,t;return{c(){e=Pe("svg"),t=Pe("path"),this.h()},l(l){e=Ue(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Ue(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){B(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function il(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class cl extends We{constructor(e){super(),Ae(this,e,il,al,Fe,{className:0,strokeWidth:1})}}function fl(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=g("button"),e.innerHTML=t,this.h()},l(a){e=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),ot(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(a,n){B(a,e,n),l||(r=ie(e,"click",s[9]),l=!0)},p:ce,d(a){a&&d(e),l=!1,r()}}}function ul(s){let e,t;return e=new tt({props:{content:s[2].t("Add Content"),$$slots:{default:[fl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r&4&&(a.content=l[2].t("Add Content")),r&4098&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function dl(s){let e,t,l,r=s[2].t("Upload files")+"",a,n;return e=new el({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=H(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=q(o),l=v(o,"DIV",{class:!0});var i=w(l);a=ge(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),B(o,t,i),B(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload files")+"")&&ve(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),O(e,o)}}}function hl(s){let e,t,l,r=s[2].t("Upload directory")+"",a,n;return e=new jt({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=H(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=q(o),l=v(o,"DIV",{class:!0});var i=w(l);a=ge(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),B(o,t,i),B(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload directory")+"")&&ve(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),O(e,o)}}}function ml(s){let e,t,l,r=s[2].t("Sync directory")+"",a,n;return e=new cl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=H(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=q(o),l=v(o,"DIV",{class:!0});var i=w(l);a=ge(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),B(o,t,i),B(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Sync directory")+"")&&ve(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),O(e,o)}}}function pl(s){let e,t;return e=new Ze({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ml]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r&4100&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function _l(s){let e,t,l,r=s[2].t("Add text content")+"",a,n;return e=new ol({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=H(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=q(o),l=v(o,"DIV",{class:!0});var i=w(l);a=ge(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),B(o,t,i),B(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Add text content")+"")&&ve(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),O(e,o)}}}function gl(s){let e,t,l,r,a,n,o,i;return e=new Ze({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[dl]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new Ze({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[hl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),a=new tt({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[pl]},$$scope:{ctx:s}}}),o=new Ze({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[_l]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){L(e.$$.fragment),t=H(),L(l.$$.fragment),r=H(),L(a.$$.fragment),n=H(),L(o.$$.fragment)},l(f){K(e.$$.fragment,f),t=q(f),K(l.$$.fragment,f),r=q(f),K(a.$$.fragment,f),n=q(f),K(o.$$.fragment,f)},m(f,u){j(e,f,u),B(f,t,u),j(l,f,u),B(f,r,u),j(a,f,u),B(f,n,u),j(o,f,u),i=!0},p(f,u){const $={};u&4100&&($.$$scope={dirty:u,ctx:f}),e.$set($);const I={};u&4100&&(I.$$scope={dirty:u,ctx:f}),l.$set(I);const b={};u&4&&(b.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),u&4100&&(b.$$scope={dirty:u,ctx:f}),a.$set(b);const x={};u&4100&&(x.$$scope={dirty:u,ctx:f}),o.$set(x)},i(f){i||(D(e.$$.fragment,f),D(l.$$.fragment,f),D(a.$$.fragment,f),D(o.$$.fragment,f),i=!0)},o(f){V(e.$$.fragment,f),V(l.$$.fragment,f),V(a.$$.fragment,f),V(o.$$.fragment,f),i=!1},d(f){f&&(d(t),d(r),d(n)),O(e,f),O(l,f),O(a,f),O(o,f)}}}function vl(s){let e,t,l;return t=new Lt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:Kt,$$slots:{default:[gl]},$$scope:{ctx:s}}}),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{slot:!0});var a=w(e);K(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"slot","content")},m(r,a){B(r,e,a),j(t,e,null),l=!0},p(r,a){const n={};a&4100&&(n.$$scope={dirty:a,ctx:r}),t.$set(n)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),O(t)}}}function wl(s){let e,t,l;function r(n){s[10](n)}let a={align:"end",$$slots:{content:[vl],default:[ul]},$$scope:{ctx:s}};return s[1]!==void 0&&(a.show=s[1]),e=new Ut({props:a}),De.push(()=>Ve(e,"show",r)),e.$on("change",s[11]),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,[o]){const i={};o&4102&&(i.$$scope={dirty:o,ctx:n}),!t&&o&2&&(t=!0,i.show=n[1],xe(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){O(e,n)}}}function $l(s,e,t){let l;const r=st(),a=nt("i18n");je(s,a,k=>t(2,l=k));let{onClose:n=()=>{}}=e,o=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},u=()=>{r("sync",{type:"directory"})},$=()=>{r("upload",{type:"text"})},I=k=>{k.stopPropagation(),t(1,o=!0)};function b(k){o=k,t(1,o)}const x=k=>{k.detail===!1&&n()};return s.$$set=k=>{"onClose"in k&&t(0,n=k.onClose)},[n,o,l,r,a,i,f,u,$,I,b,x]}class kl extends We{constructor(e){super(),Ae(this,e,$l,wl,Fe,{onClose:0})}}function bl(s){let e,t;return e=new tt({props:{content:s[4].t("Voice Input"),$$slots:{default:[Il]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r&16&&(a.content=l[4].t("Voice Input")),r&65560&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function yl(s){let e,t,l,r;function a(o){s[10](o)}let n={className:"p-1"};return s[3]!==void 0&&(n.recording=s[3]),t=new Ht({props:n}),De.push(()=>Ve(t,"recording",a)),t.$on("cancel",s[11]),t.$on("confirm",s[12]),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(o){e=v(o,"DIV",{class:!0});var i=w(e);K(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","max-w-full w-full")},m(o,i){B(o,e,i),j(t,e,null),r=!0},p(o,i){const f={};!l&&i&8&&(l=!0,f.recording=o[3],xe(()=>l=!1)),t.$set(f)},i(o){r||(D(t.$$.fragment,o),r=!0)},o(o){V(t.$$.fragment,o),r=!1},d(o){o&&d(e),O(t)}}}function Il(s){let e,t,l,r,a;return t=new Rt({props:{className:"size-5"}}),{c(){e=g("button"),L(t.$$.fragment),this.h()},l(n){e=v(n,"BUTTON",{class:!0,type:!0});var o=w(e);K(t.$$.fragment,o),o.forEach(d),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(n,o){B(n,e,o),j(t,e,null),l=!0,r||(a=ie(e,"click",s[13]),r=!0)},p:ce,i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){V(t.$$.fragment,n),l=!1},d(n){n&&d(e),O(t),r=!1,a()}}}function El(s){let e,t=s[4].t("Save")+"",l;return{c(){e=g("button"),l=_e(t),this.h()},l(r){e=v(r,"BUTTON",{class:!0,type:!0});var a=w(e);l=ge(a,t),a.forEach(d),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,a){B(r,e,a),p(e,l)},p(r,a){a&16&&t!==(t=r[4].t("Save")+"")&&ve(l,t)},d(r){r&&d(e)}}}function Dl(s){let e,t,l,r,a,n,o,i,f,u,$,I,b,x,k,T,N,W,F,S,y,z,R,m,_,U,X;l=new qt({props:{className:"size-3.5"}});function J(M){s[9](M)}let le={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(le.value=s[2]),k=new at({props:le}),De.push(()=>Ve(k,"value",J));const se=[yl,bl],Y=[];function fe(M,G){return M[3]?0:1}return S=fe(s),y=Y[S]=se[S](s),m=new tt({props:{content:s[4].t("Save"),$$slots:{default:[El]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("button"),L(l.$$.fragment),r=H(),a=g("div"),n=g("form"),o=g("div"),i=g("div"),f=g("div"),u=g("div"),$=g("input"),b=H(),x=g("div"),L(k.$$.fragment),N=H(),W=g("div"),F=g("div"),y.c(),z=H(),R=g("div"),L(m.$$.fragment),this.h()},l(M){e=v(M,"DIV",{class:!0});var G=w(e);t=v(G,"BUTTON",{class:!0,type:!0});var te=w(t);K(l.$$.fragment,te),te.forEach(d),G.forEach(d),r=q(M),a=v(M,"DIV",{class:!0});var he=w(a);n=v(he,"FORM",{class:!0});var de=w(n);o=v(de,"DIV",{class:!0});var we=w(o);i=v(we,"DIV",{class:!0});var ue=w(i);f=v(ue,"DIV",{class:!0});var Ne=w(f);u=v(Ne,"DIV",{class:!0});var oe=w(u);$=v(oe,"INPUT",{class:!0,type:!0,placeholder:!0}),oe.forEach(d),Ne.forEach(d),b=q(ue),x=v(ue,"DIV",{class:!0});var ae=w(x);K(k.$$.fragment,ae),ae.forEach(d),ue.forEach(d),we.forEach(d),N=q(de),W=v(de,"DIV",{class:!0});var $e=w(W);F=v($e,"DIV",{class:!0});var pe=w(F);y.l(pe),pe.forEach(d),z=q($e),R=v($e,"DIV",{class:!0});var Me=w(R);K(m.$$.fragment,Me),Me.forEach(d),$e.forEach(d),de.forEach(d),he.forEach(d),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c($,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c($,"type","text"),c($,"placeholder",I=s[4].t("Title")),$.required=!0,c(u,"class","w-full"),c(f,"class","shrink-0 w-full flex justify-between items-center"),c(x,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(o,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(F,"class",""),c(R,"class","shrink-0"),c(W,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(n,"class","flex flex-col w-full h-full"),c(a,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(M,G){B(M,e,G),p(e,t),j(l,t,null),B(M,r,G),B(M,a,G),p(a,n),p(n,o),p(o,i),p(i,f),p(f,u),p(u,$),Se($,s[1]),p(i,b),p(i,x),j(k,x,null),p(n,N),p(n,W),p(W,F),Y[S].m(F,null),p(W,z),p(W,R),j(m,R,null),_=!0,U||(X=[ie(t,"click",s[7]),ie($,"input",s[8]),ie(n,"submit",gt(s[14]))],U=!0)},p(M,G){(!_||G&16&&I!==(I=M[4].t("Title")))&&c($,"placeholder",I),G&2&&$.value!==M[1]&&Se($,M[1]);const te={};G&16&&(te.placeholder=M[4].t("Write something...")),!T&&G&4&&(T=!0,te.value=M[2],xe(()=>T=!1)),k.$set(te);let he=S;S=fe(M),S===he?Y[S].p(M,G):(Ce(),V(Y[he],1,1,()=>{Y[he]=null}),Te(),y=Y[S],y?y.p(M,G):(y=Y[S]=se[S](M),y.c()),D(y,1),y.m(F,null));const de={};G&16&&(de.content=M[4].t("Save")),G&65552&&(de.$$scope={dirty:G,ctx:M}),m.$set(de)},i(M){_||(D(l.$$.fragment,M),D(k.$$.fragment,M),D(y),D(m.$$.fragment,M),_=!0)},o(M){V(l.$$.fragment,M),V(k.$$.fragment,M),V(y),V(m.$$.fragment,M),_=!1},d(M){M&&(d(e),d(r),d(a)),O(l),O(k),Y[S].d(),O(m),U=!1,et(X)}}}function xl(s){let e,t,l;function r(n){s[15](n)}let a={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Dl]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.show=s[0]),e=new Ot({props:a}),De.push(()=>Ve(e,"show",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,[o]){const i={};o&65567&&(i.$$scope={dirty:o,ctx:n}),!t&&o&1&&(t=!0,i.show=n[0],xe(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){O(e,n)}}}function Vl(s,e,t){let l;const r=nt("i18n");je(s,r,F=>t(4,l=F));const a=st();let{show:n=!1}=e,o="Untitled",i="",f=!1;const u=()=>{t(0,n=!1)};function $(){o=this.value,t(1,o)}function I(F){i=F,t(2,i)}function b(F){f=F,t(3,f)}const x=()=>{t(3,f=!1)},k=F=>{const{text:S,filename:y}=F.detail;t(2,i=`${i}${S} `),t(3,f=!1)},T=async()=>{try{let F=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(S){return Q.error(l.t("Permission denied when accessing microphone: {{error}}",{error:S})),null});F&&(t(3,f=!0),F.getTracks().forEach(y=>y.stop())),F=null}catch{Q.error(l.t("Permission denied when accessing microphone"))}},N=()=>{if(o.trim()===""||i.trim()===""){Q.error(l.t("Please fill in all fields.")),t(1,o=o.trim()),t(2,i=i.trim());return}a("submit",{name:o,content:i}),t(0,n=!1),t(1,o=""),t(2,i="")};function W(F){n=F,t(0,n)}return s.$$set=F=>{"show"in F&&t(0,n=F.show)},[n,o,i,f,l,r,a,u,$,I,b,x,k,T,N,W]}class Fl extends We{constructor(e){super(),Ae(this,e,Vl,xl,Fe,{show:0})}}function dt(s){let e,t,l,r,a,n,o;return a=new zt({props:{$$slots:{default:[Cl]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),L(a.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=w(e);t=v(f,"DIV",{class:!0});var u=w(t);l=v(u,"DIV",{class:!0});var $=w(l);r=v($,"DIV",{class:!0});var I=w(r);K(a.$$.fragment,I),I.forEach(d),$.forEach(d),u.forEach(d),f.forEach(d),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center"),c(e,"class",n="fixed "+(s[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,f){B(i,e,f),p(e,t),p(t,l),p(l,r),j(a,r,null),o=!0},p(i,f){const u={};f[2]&4&&(u.$$scope={dirty:f,ctx:i}),a.$set(u),(!o||f[0]&8192&&n!==(n="fixed "+(i[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",n)},i(i){o||(D(a.$$.fragment,i),o=!0)},o(i){V(a.$$.fragment,i),o=!1},d(i){i&&d(e),O(a)}}}function Cl(s){let e,t="Drop any files here to add to my documents";return{c(){e=g("div"),e.textContent=t,this.h()},l(l){e=v(l,"DIV",{class:!0,"data-svelte-h":!0}),ot(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){B(l,e,r)},p:ce,d(l){l&&d(e)}}}function Tl(s){let e,t;return e=new Wt({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ce,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Nl(s){let e,t,l,r,a,n,o,i,f,u,$,I,b,x,k,T,N=s[12].t("Access")+"",W,F,S,y,z,R,m,_,U,X,J,le,se,Y,fe,M='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',G,te,he,de,we,ue,Ne,oe,ae,$e,pe,Me,Oe;function lt(E){s[31](E)}function rt(E){s[32](E)}let Le={onChange:s[30],accessRoles:["read","write"]};s[7]!==void 0&&(Le.show=s[7]),s[0].access_control!==void 0&&(Le.accessControl=s[0].access_control),e=new Jt({props:Le}),De.push(()=>Ve(e,"show",lt)),De.push(()=>Ve(e,"accessControl",rt)),x=new Yt({props:{strokeWidth:"2.5",className:"size-3.5"}});const He=[Bl,Ml],ke=[];function qe(E,ee){return E[3]?0:!E[3]&&E[2]!==null?1:-1}~(m=qe(s))&&(_=ke[m]=He[m](s)),ue=new kl({}),ue.$on("upload",s[47]),ue.$on("sync",s[48]);const Re=[Pl,zl],be=[];function Xe(E,ee){return E[9].length>0?0:1}return oe=Xe(s),ae=be[oe]=Re[oe](s),{c(){L(e.$$.fragment),r=H(),a=g("div"),n=g("div"),o=g("div"),i=g("div"),f=g("div"),u=g("input"),$=H(),I=g("div"),b=g("button"),L(x.$$.fragment),k=H(),T=g("div"),W=_e(N),F=H(),S=g("div"),y=g("input"),z=H(),R=g("div"),_&&_.c(),U=H(),X=g("div"),J=g("div"),le=g("div"),se=g("div"),Y=g("div"),fe=g("div"),fe.innerHTML=M,G=H(),te=g("input"),de=H(),we=g("div"),L(ue.$$.fragment),Ne=H(),ae.c(),this.h()},l(E){K(e.$$.fragment,E),r=q(E),a=v(E,"DIV",{class:!0});var ee=w(a);n=v(ee,"DIV",{class:!0});var Be=w(n);o=v(Be,"DIV",{class:!0});var ye=w(o);i=v(ye,"DIV",{class:!0});var Ie=w(i);f=v(Ie,"DIV",{class:!0});var Ge=w(f);u=v(Ge,"INPUT",{type:!0,class:!0,placeholder:!0}),Ge.forEach(d),$=q(Ie),I=v(Ie,"DIV",{class:!0});var Je=w(I);b=v(Je,"BUTTON",{class:!0,type:!0});var ze=w(b);K(x.$$.fragment,ze),k=q(ze),T=v(ze,"DIV",{class:!0});var Ye=w(T);W=ge(Ye,N),Ye.forEach(d),ze.forEach(d),Je.forEach(d),Ie.forEach(d),F=q(ye),S=v(ye,"DIV",{class:!0});var Qe=w(S);y=v(Qe,"INPUT",{type:!0,class:!0,placeholder:!0}),Qe.forEach(d),ye.forEach(d),Be.forEach(d),ee.forEach(d),z=q(E),R=v(E,"DIV",{class:!0});var h=w(R);_&&_.l(h),U=q(h),X=v(h,"DIV",{class:!0});var C=w(X);J=v(C,"DIV",{class:!0});var P=w(J);le=v(P,"DIV",{class:!0});var A=w(le);se=v(A,"DIV",{class:!0});var Z=w(se);Y=v(Z,"DIV",{class:!0});var re=w(Y);fe=v(re,"DIV",{class:!0,"data-svelte-h":!0}),ot(fe)!=="svelte-or7cnz"&&(fe.innerHTML=M),G=q(re),te=v(re,"INPUT",{class:!0,placeholder:!0}),de=q(re),we=v(re,"DIV",{});var me=w(we);K(ue.$$.fragment,me),me.forEach(d),re.forEach(d),Z.forEach(d),Ne=q(A),ae.l(A),A.forEach(d),P.forEach(d),C.forEach(d),h.forEach(d),this.h()},h(){c(u,"type","text"),c(u,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(u,"placeholder","Knowledge Name"),c(f,"class","w-full"),c(T,"class","text-sm font-medium shrink-0"),c(b,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(b,"type","button"),c(I,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(y,"type","text"),c(y,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(y,"placeholder","Knowledge Description"),c(S,"class","flex w-full px-1"),c(o,"class","flex-1"),c(n,"class","flex w-full"),c(a,"class","w-full mb-2.5"),c(fe,"class","self-center ml-1 mr-3"),c(te,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(te,"placeholder",he=s[12].t("Search Collection")),c(Y,"class","flex mb-0.5"),c(se,"class","px-3"),c(le,"class","w-full h-full flex flex-col"),c(J,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(X,"class",$e=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(R,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(E,ee){j(e,E,ee),B(E,r,ee),B(E,a,ee),p(a,n),p(n,o),p(o,i),p(i,f),p(f,u),Se(u,s[0].name),p(i,$),p(i,I),p(I,b),j(x,b,null),p(b,k),p(b,T),p(T,W),p(o,F),p(o,S),p(S,y),Se(y,s[0].description),B(E,z,ee),B(E,R,ee),~m&&ke[m].m(R,null),p(R,U),p(R,X),p(X,J),p(J,le),p(le,se),p(se,Y),p(Y,fe),p(Y,G),p(Y,te),Se(te,s[1]),p(Y,de),p(Y,we),j(ue,we,null),p(le,Ne),be[oe].m(le,null),pe=!0,Me||(Oe=[ie(u,"input",s[33]),ie(u,"input",s[34]),ie(b,"click",s[35]),ie(y,"input",s[36]),ie(y,"input",s[37]),ie(te,"input",s[45]),ie(te,"focus",s[46])],Me=!0)},p(E,ee){const Be={};!t&&ee[0]&128&&(t=!0,Be.show=E[7],xe(()=>t=!1)),!l&&ee[0]&1&&(l=!0,Be.accessControl=E[0].access_control,xe(()=>l=!1)),e.$set(Be),ee[0]&1&&u.value!==E[0].name&&Se(u,E[0].name),(!pe||ee[0]&4096)&&N!==(N=E[12].t("Access")+"")&&ve(W,N),ee[0]&1&&y.value!==E[0].description&&Se(y,E[0].description);let ye=m;m=qe(E),m===ye?~m&&ke[m].p(E,ee):(_&&(Ce(),V(ke[ye],1,1,()=>{ke[ye]=null}),Te()),~m?(_=ke[m],_?_.p(E,ee):(_=ke[m]=He[m](E),_.c()),D(_,1),_.m(R,U)):_=null),(!pe||ee[0]&4096&&he!==(he=E[12].t("Search Collection")))&&c(te,"placeholder",he),ee[0]&2&&te.value!==E[1]&&Se(te,E[1]);let Ie=oe;oe=Xe(E),oe===Ie?be[oe].p(E,ee):(Ce(),V(be[Ie],1,1,()=>{be[Ie]=null}),Te(),ae=be[oe],ae?ae.p(E,ee):(ae=be[oe]=Re[oe](E),ae.c()),D(ae,1),ae.m(le,null)),(!pe||ee[0]&8&&$e!==($e=(E[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(X,"class",$e)},i(E){pe||(D(e.$$.fragment,E),D(x.$$.fragment,E),D(_),D(ue.$$.fragment,E),D(ae),pe=!0)},o(E){V(e.$$.fragment,E),V(x.$$.fragment,E),V(_),V(ue.$$.fragment,E),V(ae),pe=!1},d(E){E&&(d(r),d(a),d(z),d(R)),O(e,E),O(x),~m&&ke[m].d(),O(ue),be[oe].d(),Me=!1,et(Oe)}}}function Ml(s){let e,t;return e=new Pt({props:{className:"h-full",show:s[2]!==null,$$slots:{default:[Sl]},$$scope:{ctx:s}}}),e.$on("close",s[44]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r[0]&4&&(a.show=l[2]!==null),r[0]&5124|r[2]&4&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Bl(s){let e,t,l,r;const a=[Al,Wl],n=[];function o(i,f){return i[10]?0:1}return t=o(s),l=n[t]=a[t](s),{c(){e=g("div"),l.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var f=w(e);l.l(f),f.forEach(d),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){B(i,e,f),n[t].m(e,null),r=!0},p(i,f){let u=t;t=o(i),t===u?n[t].p(i,f):(Ce(),V(n[u],1,1,()=>{n[u]=null}),Te(),l=n[t],l?l.p(i,f):(l=n[t]=a[t](i),l.c()),D(l,1),l.m(e,null))},i(i){r||(D(l),r=!0)},o(i){V(l),r=!1},d(i){i&&d(e),n[t].d()}}}function ht(s){let e,t,l;function r(n){s[43](n)}let a={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(a.value=s[10].data.content),e=new at({props:a}),De.push(()=>Ve(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,o){const i={};o[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&o[0]&1024&&(t=!0,i.value=n[10].data.content,xe(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){O(e,n)}}}function Sl(s){var R,m;let e,t,l,r,a,n,o,i,f=((m=(R=s[10])==null?void 0:R.meta)==null?void 0:m.name)+"",u,$,I,b,x=s[12].t("Save")+"",k,T,N,W=s[10].id,F,S,y;n=new Gt({props:{strokeWidth:"2.5"}});let z=ht(s);return{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),a=g("button"),L(n.$$.fragment),o=H(),i=g("div"),u=_e(f),$=H(),I=g("div"),b=g("button"),k=_e(x),T=H(),N=g("div"),z.c(),this.h()},l(_){e=v(_,"DIV",{class:!0});var U=w(e);t=v(U,"DIV",{class:!0});var X=w(t);l=v(X,"DIV",{class:!0});var J=w(l);r=v(J,"DIV",{class:!0});var le=w(r);a=v(le,"BUTTON",{class:!0});var se=w(a);K(n.$$.fragment,se),se.forEach(d),le.forEach(d),o=q(J),i=v(J,"DIV",{class:!0});var Y=w(i);u=ge(Y,f),Y.forEach(d),$=q(J),I=v(J,"DIV",{});var fe=w(I);b=v(fe,"BUTTON",{class:!0});var M=w(b);k=ge(M,x),M.forEach(d),fe.forEach(d),J.forEach(d),T=q(X),N=v(X,"DIV",{class:!0});var G=w(N);z.l(G),G.forEach(d),X.forEach(d),U.forEach(d),this.h()},h(){c(a,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(b,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(N,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(_,U){B(_,e,U),p(e,t),p(t,l),p(l,r),p(r,a),j(n,a,null),p(l,o),p(l,i),p(i,u),p(l,$),p(l,I),p(I,b),p(b,k),p(t,T),p(t,N),z.m(N,null),F=!0,S||(y=[ie(a,"click",s[41]),ie(b,"click",s[42])],S=!0)},p(_,U){var X,J;(!F||U[0]&1024)&&f!==(f=((J=(X=_[10])==null?void 0:X.meta)==null?void 0:J.name)+"")&&ve(u,f),(!F||U[0]&4096)&&x!==(x=_[12].t("Save")+"")&&ve(k,x),U[0]&1024&&Fe(W,W=_[10].id)?(Ce(),V(z,1,1,ce),Te(),z=ht(_),z.c(),D(z,1),z.m(N,null)):z.p(_,U)},i(_){F||(D(n.$$.fragment,_),D(z),F=!0)},o(_){V(n.$$.fragment,_),V(z),F=!1},d(_){_&&d(e),O(n),z.d(_),S=!1,et(y)}}}function Wl(s){let e,t,l=s[12].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=g("div"),t=g("div"),r=_e(l),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=w(e);t=v(n,"DIV",{class:!0});var o=w(t);r=ge(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(a,n){B(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&4096&&l!==(l=a[12].t("Drag and drop a file to upload or select a file to view")+"")&&ve(r,l)},i:ce,o:ce,d(a){a&&d(e)}}}function Al(s){var z,R;let e,t,l,r,a,n=((R=(z=s[10])==null?void 0:z.meta)==null?void 0:R.name)+"",o,i,f,u,$,I=s[12].t("Save")+"",b,x,k,T=s[10].id,N,W,F,S=!Ll,y=mt(s);return{c(){e=g("div"),t=g("div"),l=H(),r=g("div"),a=g("a"),o=_e(n),f=H(),u=g("div"),$=g("button"),b=_e(I),x=H(),k=g("div"),y.c(),this.h()},l(m){e=v(m,"DIV",{class:!0});var _=w(e);t=v(_,"DIV",{class:!0});var U=w(t);l=q(U),r=v(U,"DIV",{class:!0});var X=w(r);a=v(X,"A",{class:!0,href:!0,target:!0});var J=w(a);o=ge(J,n),J.forEach(d),X.forEach(d),f=q(U),u=v(U,"DIV",{});var le=w(u);$=v(le,"BUTTON",{class:!0});var se=w($);b=ge(se,I),se.forEach(d),le.forEach(d),U.forEach(d),x=q(_),k=v(_,"DIV",{class:!0});var Y=w(k);y.l(Y),Y.forEach(d),_.forEach(d),this.h()},h(){c(a,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(a,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(a,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c($,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(t,"class","shrink-0 mb-2 flex items-center"),c(k,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full h-full max-h-full")},m(m,_){B(m,e,_),p(e,t),p(t,l),p(t,r),p(r,a),p(a,o),p(t,f),p(t,u),p(u,$),p($,b),p(e,x),p(e,k),y.m(k,null),N=!0,W||(F=ie($,"click",s[39]),W=!0)},p(m,_){var U,X;(!N||_[0]&1024)&&n!==(n=((X=(U=m[10])==null?void 0:U.meta)==null?void 0:X.name)+"")&&ve(o,n),(!N||_[0]&1024&&i!==(i=m[10].id?`/api/v1/files/${m[10].id}/content`:"#"))&&c(a,"href",i),(!N||_[0]&4096)&&I!==(I=m[12].t("Save")+"")&&ve(b,I),_[0]&1024&&Fe(T,T=m[10].id)?(Ce(),V(y,1,1,ce),Te(),y=mt(m),y.c(),D(y,1),y.m(k,null)):y.p(m,_)},i(m){N||(D(S),D(y),N=!0)},o(m){V(S),V(y),N=!1},d(m){m&&d(e),y.d(m),W=!1,F()}}}function mt(s){let e,t,l;function r(n){s[40](n)}let a={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(a.value=s[10].data.content),e=new at({props:a}),De.push(()=>Ve(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,o){const i={};o[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&o[0]&1024&&(t=!0,i.value=n[10].data.content,xe(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){O(e,n)}}}function zl(s){let e,t,l=s[12].t("No content found")+"",r;return{c(){e=g("div"),t=g("div"),r=_e(l),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=w(e);t=v(n,"DIV",{});var o=w(t);r=ge(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(a,n){B(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&4096&&l!==(l=a[12].t("No content found")+"")&&ve(r,l)},i:ce,o:ce,d(a){a&&d(e)}}}function Pl(s){let e,t,l;return t=new rl({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[49]),t.$on("delete",s[50]),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=w(e);K(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,a){B(r,e,a),j(t,e,null),l=!0},p(r,a){const n={};a[0]&512&&(n.files=r[9]),a[0]&4&&(n.selectedFileId=r[2]),t.$set(n)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),O(t)}}}function Ul(s){let e,t,l,r,a,n,o,i,f,u,$,I,b,x,k,T=s[11]&&dt(s);function N(m){s[24](m)}let W={message:s[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(W.show=s[6]),t=new Xt({props:W}),De.push(()=>Ve(t,"show",N)),t.$on("confirm",s[25]);function F(m){s[26](m)}let S={};s[5]!==void 0&&(S.show=s[5]),a=new Fl({props:S}),De.push(()=>Ve(a,"show",F)),a.$on("submit",s[27]);const y=[Nl,Tl],z=[];function R(m,_){return m[4]&&m[0]?0:1}return $=R(s),I=z[$]=y[$](s),{c(){T&&T.c(),e=H(),L(t.$$.fragment),r=H(),L(a.$$.fragment),o=H(),i=g("input"),f=H(),u=g("div"),I.c(),this.h()},l(m){T&&T.l(m),e=q(m),K(t.$$.fragment,m),r=q(m),K(a.$$.fragment,m),o=q(m),i=v(m,"INPUT",{id:!0,type:!0}),f=q(m),u=v(m,"DIV",{class:!0,id:!0});var _=w(u);I.l(_),_.forEach(d),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(u,"class","flex flex-col w-full translate-y-1"),c(u,"id","collection-container")},m(m,_){T&&T.m(m,_),B(m,e,_),j(t,m,_),B(m,r,_),j(a,m,_),B(m,o,_),B(m,i,_),B(m,f,_),B(m,u,_),z[$].m(u,null),b=!0,x||(k=[ie(i,"change",s[28]),ie(i,"change",s[29])],x=!0)},p(m,_){m[11]?T?(T.p(m,_),_[0]&2048&&D(T,1)):(T=dt(m),T.c(),D(T,1),T.m(e.parentNode,e)):T&&(Ce(),V(T,1,1,()=>{T=null}),Te());const U={};_[0]&4096&&(U.message=m[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&_[0]&64&&(l=!0,U.show=m[6],xe(()=>l=!1)),t.$set(U);const X={};!n&&_[0]&32&&(n=!0,X.show=m[5],xe(()=>n=!1)),a.$set(X);let J=$;$=R(m),$===J?z[$].p(m,_):(Ce(),V(z[J],1,1,()=>{z[J]=null}),Te(),I=z[$],I?I.p(m,_):(I=z[$]=y[$](m),I.c()),D(I,1),I.m(u,null))},i(m){b||(D(T),D(t.$$.fragment,m),D(a.$$.fragment,m),D(I),b=!0)},o(m){V(T),V(t.$$.fragment,m),V(a.$$.fragment,m),V(I),b=!1},d(m){m&&(d(e),d(r),d(o),d(i),d(f),d(u)),T&&T.d(m),O(t,m),O(a,m),z[$].d(),x=!1,et(k)}}}let Ll=!0;function Kl(s,e,t){let l,r,a;je(s,bt,h=>t(54,l=h)),je(s,yt,h=>t(13,a=h));const n=nt("i18n");je(s,n,h=>t(12,r=h));let o=!0,i,f=null,u=null,$="",I=!1,b=!1,x=!1,k=null,T=[],N=null,W=null,F=null,S=null,y,z=!1;const R=(h,C)=>{const P=new Blob([C],{type:"text/plain"}),A=Bt(P,`${h}.txt`);return console.log(A),A},m=async h=>{console.log(h);const C=St(),P={type:"file",file:"",id:null,url:"",name:h.name,size:h.size,status:"uploading",error:"",itemId:C};if(P.size==0)return Q.error(r.t("You cannot upload an empty file.")),null;t(0,u.files=[...u.files??[],P],u);try{const A=await Et(localStorage.token,h).catch(Z=>(Q.error(`${Z}`),null));A?(console.log(A),t(0,u.files=u.files.map(Z=>(Z.itemId===C&&(Z.id=A.id),delete Z.itemId,Z)),u),await Y(A.id)):Q.error(r.t("Failed to upload file."))}catch(A){Q.error(`${A}`)}},_=async()=>{const h="showDirectoryPicker"in window;try{h?await X():await J()}catch(C){le(C)}},U=h=>h.split("/").some(C=>C.startsWith(".")),X=async()=>{const h=await window.showDirectoryPicker();let C=0,P=0;const A=()=>{const me=P/C*100;Q.info(`Upload Progress: ${P}/${C} (${me.toFixed(2)}%)`)};async function Z(me){for await(const ne of me.values())ne.name.startsWith(".")||(ne.kind==="file"?C++:ne.kind==="directory"&&(ne.name.startsWith(".")||await Z(ne)))}async function re(me,ne=""){for await(const Ee of me.values()){if(Ee.name.startsWith("."))continue;const Ke=ne?`${ne}/${Ee.name}`:Ee.name;if(!U(Ke))if(Ee.kind==="file"){const it=await Ee.getFile(),pt=new File([it],Ke,{type:it.type});await m(pt),P++,A()}else Ee.kind==="directory"&&(Ee.name.startsWith(".")||await re(Ee,Ke))}}await Z(h),A(),C>0?await re(h):console.log("No files to upload.")},J=async()=>new Promise((h,C)=>{const P=document.createElement("input");P.type="file",P.webkitdirectory=!0,P.directory=!0,P.multiple=!0,P.style.display="none",document.body.appendChild(P),P.onchange=async()=>{try{const A=Array.from(P.files).filter(ne=>!U(ne.webkitRelativePath));let Z=A.length,re=0;const me=()=>{const ne=re/Z*100;Q.info(`Upload Progress: ${re}/${Z} (${ne.toFixed(2)}%)`)};me();for(const ne of A)if(!ne.name.startsWith(".")){const Ee=ne.webkitRelativePath||ne.name,Ke=new File([ne],Ee,{type:ne.type});await m(Ke),re++,me()}document.body.removeChild(P),h()}catch(A){C(A)}},P.onerror=A=>{document.body.removeChild(P),C(A)},P.click()}),le=h=>{h.name==="AbortError"?Q.info("Directory selection was cancelled"):(Q.error("Error accessing directory"),console.error("Directory access error:",h))},se=async()=>{if(((u==null?void 0:u.files)??[]).length>0){const h=await Vt(localStorage.token,f).catch(C=>{Q.error(`${C}`)});h&&(t(0,u=h),Q.success(r.t("Knowledge reset successfully.")),_())}else _()},Y=async h=>{const C=await Ft(localStorage.token,f,h).catch(P=>(Q.error(`${P}`),null));C?(t(0,u=C),Q.success(r.t("File added successfully."))):(Q.error(r.t("Failed to add file.")),t(0,u.files=u.files.filter(P=>P.id!==h),u))},fe=async h=>{try{console.log("Starting file deletion process for:",h);const C=await Ct(localStorage.token,f,h);console.log("Knowledge base updated:",C),C&&(t(0,u=C),Q.success(r.t("File removed successfully.")))}catch(C){console.error("Error in deleteFileHandler:",C),Q.error(`${C}`)}},M=async()=>{const h=N.id,C=N.data.content,P=Dt(localStorage.token,h,C).catch(Z=>{Q.error(`${Z}`)}),A=await Tt(localStorage.token,f,h).catch(Z=>{Q.error(`${Z}`)});P&&A&&(t(0,u=A),Q.success(r.t("File content updated successfully.")))},G=()=>{console.log("debounce"),S&&clearTimeout(S),S=setTimeout(async()=>{if(u.name.trim()===""||u.description.trim()===""){Q.error(r.t("Please fill in all fields."));return}await Nt(localStorage.token,f,{...u,name:u.name,description:u.description,access_control:u.access_control}).catch(C=>{Q.error(`${C}`)})&&(Q.success(r.t("Knowledge updated successfully")),It.set(await Mt(localStorage.token)))},1e3)},te=async h=>{h.matches?t(3,o=!0):t(3,o=!1)},he=h=>{var C,P;h.preventDefault(),(P=(C=h.dataTransfer)==null?void 0:C.types)!=null&&P.includes("Files")?t(11,z=!0):t(11,z=!1)},de=()=>{t(11,z=!1)},we=async h=>{var C,P,A,Z;if(h.preventDefault(),t(11,z=!1),(P=(C=h.dataTransfer)==null?void 0:C.types)!=null&&P.includes("Files")&&(A=h.dataTransfer)!=null&&A.files){const re=(Z=h.dataTransfer)==null?void 0:Z.files;if(re&&re.length>0)for(const me of re)await m(me);else Q.error(r.t("File not found."))}};vt(async()=>{y=window.matchMedia("(min-width: 1024px)"),y.addEventListener("change",te),te(y);const h=document.getElementById("collection-container");o&&Math.floor(300/h.clientWidth*100),new ResizeObserver(Z=>{for(let re of Z)re.contentRect.width}).observe(h),t(4,f=l.params.id);const P=await xt(localStorage.token,f).catch(Z=>(Q.error(`${Z}`),null));P?t(0,u=P):kt("/workspace/knowledge");const A=document.querySelector("body");A==null||A.addEventListener("dragover",he),A==null||A.addEventListener("drop",we),A==null||A.addEventListener("dragleave",de)}),wt(()=>{y==null||y.removeEventListener("change",te);const h=document.querySelector("body");h==null||h.removeEventListener("dragover",he),h==null||h.removeEventListener("drop",we),h==null||h.removeEventListener("dragleave",de)});function ue(h){b=h,t(6,b)}const Ne=()=>{se()};function oe(h){I=h,t(5,I)}const ae=h=>{const C=R(h.detail.name,h.detail.content);m(C)};function $e(){k=this.files,t(8,k)}const pe=async()=>{if(k&&k.length>0){for(const C of k)await m(C);t(8,k=null);const h=document.getElementById("files-input");h&&(h.value="")}else Q.error(r.t("File not found."))},Me=()=>{G()};function Oe(h){x=h,t(7,x)}function lt(h){s.$$.not_equal(u.access_control,h)&&(u.access_control=h,t(0,u))}function rt(){u.name=this.value,t(0,u)}const Le=()=>{G()},He=()=>{t(7,x=!0)};function ke(){u.description=this.value,t(0,u)}const qe=()=>{G()},Re=()=>{i.expand()},be=()=>{M()};function Xe(h){s.$$.not_equal(N.data.content,h)&&(N.data.content=h,t(10,N),t(2,W),t(0,u))}const E=()=>{t(2,W=null)},ee=()=>{M()};function Be(h){s.$$.not_equal(N.data.content,h)&&(N.data.content=h,t(10,N),t(2,W),t(0,u))}const ye=()=>{t(2,W=null)};function Ie(){$=this.value,t(1,$)}const Ge=()=>{t(2,W=null)},Je=h=>{h.detail.type==="directory"?_():h.detail.type==="text"?t(5,I=!0):document.getElementById("files-input").click()},ze=h=>{t(6,b=!0)},Ye=h=>{t(2,W=W===h.detail?null:h.detail)},Qe=h=>{console.log(h.detail),t(2,W=null),fe(h.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&u&&u.files&&t(23,F=new $t(u.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&8388611&&F&&t(9,T=$?F.search($).map(h=>h.item):(u==null?void 0:u.files)??[]),s.$$.dirty[0]&5)if(W){const h=((u==null?void 0:u.files)??[]).find(C=>C.id===W);h?(h.data=h.data??{content:""},t(10,N=h)):t(10,N=null)}else t(10,N=null)},[u,$,W,o,f,I,b,x,k,T,N,z,r,a,n,i,R,m,_,se,fe,M,G,F,ue,Ne,oe,ae,$e,pe,Me,Oe,lt,rt,Le,He,ke,qe,Re,be,Xe,E,ee,Be,ye,Ie,Ge,Je,ze,Ye,Qe]}class jl extends We{constructor(e){super(),Ae(this,e,Kl,Ul,Fe,{},null,[-1,-1,-1])}}function Ol(s){let e,t;return e=new jl({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ce,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}class wr extends We{constructor(e){super(),Ae(this,e,null,Ol,Fe,{})}}export{wr as component};
//# sourceMappingURL=27.CMdpb3NH.js.map
