import{s as b,d as I,i as N,m as d,p as R,j as v,q as V,n as q}from"../chunks/CgRTDwF2.js";import{S as U,i as T,t as p,a as f,c as h,g as O,d as W,m as $,b as y,e as B}from"../chunks/Bnxgdxyh.js";import{g as P}from"../chunks/JmxR0F9R.js";import{c as C,g as D}from"../chunks/Due45wRy.js";import{T as J}from"../chunks/fV0qf1ip.js";import{W as k}from"../chunks/CisIfe-u.js";import{t as M}from"../chunks/D-bUEbUi.js";import{e as Q,c as j}from"../chunks/B9ns8vb-.js";import{t as w}from"../chunks/Fny8-CkQ.js";function E(l){var a;let r=(a=l[2])==null?void 0:a.content,n,e,o=S(l);return{c(){o.c(),n=d()},l(s){o.l(s),n=d()},m(s,t){o.m(s,t),N(s,n,t),e=!0},p(s,t){var c;t&4&&b(r,r=(c=s[2])==null?void 0:c.content)?(O(),p(o,1,1,q),h(),o=S(s),o.c(),f(o,1),o.m(n.parentNode,n)):o.p(s,t)},i(s){e||(f(o),e=!0)},o(s){p(o),e=!1},d(s){s&&I(n),o.d(s)}}}function S(l){var e,o,a,s;let r,n;return r=new J({props:{id:((e=l[2])==null?void 0:e.id)??"",name:((o=l[2])==null?void 0:o.name)??"",meta:((a=l[2])==null?void 0:a.meta)??{description:""},content:((s=l[2])==null?void 0:s.content)??"",access_control:null,clone:l[1],onSave:l[5]}}),{c(){B(r.$$.fragment)},l(t){y(r.$$.fragment,t)},m(t,c){$(r,t,c),n=!0},p(t,c){var i,m,g,_;const u={};c&4&&(u.id=((i=t[2])==null?void 0:i.id)??""),c&4&&(u.name=((m=t[2])==null?void 0:m.name)??""),c&4&&(u.meta=((g=t[2])==null?void 0:g.meta)??{description:""}),c&4&&(u.content=((_=t[2])==null?void 0:_.content)??""),c&2&&(u.clone=t[1]),r.$set(u)},i(t){n||(f(r.$$.fragment,t),n=!0)},o(t){p(r.$$.fragment,t),n=!1},d(t){W(r,t)}}}function F(l){let r,n,e=l[0]&&E(l);return{c(){e&&e.c(),r=d()},l(o){e&&e.l(o),r=d()},m(o,a){e&&e.m(o,a),N(o,r,a),n=!0},p(o,[a]){o[0]?e?(e.p(o,a),a&1&&f(e,1)):(e=E(o),e.c(),f(e,1),e.m(r.parentNode,r)):e&&(O(),p(e,1,1,()=>{e=null}),h())},i(o){n||(f(e),n=!0)},o(o){p(e),n=!1},d(o){o&&I(r),e&&e.d(o)}}}function H(l,r,n){let e;const o=R("i18n");v(l,o,i=>n(6,e=i));let a=!1,s=!1,t=null;const c=async i=>{console.log(i);const m=Q(i.content);if(j((m==null?void 0:m.required_open_webui_version)??"0.0.0",k)){console.log("Version is lower than required"),w.error(e.t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:k,REQUIRED_VERSION:(m==null?void 0:m.required_open_webui_version)??"0.0.0"}));return}await C(localStorage.token,{id:i.id,name:i.name,meta:i.meta,content:i.content,access_control:i.access_control}).catch(_=>(w.error(`${_}`),null))&&(w.success(e.t("Tool created successfully")),M.set(await D(localStorage.token)),await P("/workspace/tools"))};return V(()=>{window.addEventListener("message",async i=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(i.origin)&&(n(2,t=JSON.parse(i.data)),console.log(t))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.tool&&(n(2,t=JSON.parse(sessionStorage.tool)),sessionStorage.removeItem("tool"),console.log(t),n(1,s=!0)),n(0,a=!0)}),[a,s,t,o,c,i=>{c(i)}]}class ee extends U{constructor(r){super(),T(this,r,H,F,b,{})}}export{ee as component};
//# sourceMappingURL=36.B0aXlypO.js.map
