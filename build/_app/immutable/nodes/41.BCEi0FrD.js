import{s as pe,d,i as x,k as ve,l as O,m as ue,o as R,j as U,p as be,C as H,y as G,a as J,z as K,b as n,x as ye,c as g,e as p,f as v,g as Q,h as b,t as X}from"../chunks/CgRTDwF2.js";import{S as we,i as Ie,t as $,a as q,c as ke,f as Y,d as Ee,m as Se,b as De,e as Ve,g as Me}from"../chunks/Bnxgdxyh.js";import{g as Z}from"../chunks/C_2ZPrHa.js";import{p as Ce}from"../chunks/Bx1oYFf3.js";import{d as ee}from"../chunks/AoanbIlI.js";import{m as Le,b as fe,a as Be,c as je,W as Ne}from"../chunks/D-bUEbUi.js";import{l as Ue,b as Pe,d as Te}from"../chunks/B9ns8vb-.js";import{g as We,c as ze}from"../chunks/ClYhvyZD.js";import{M as Ae}from"../chunks/qhzCeJvl.js";import{t as Oe}from"../chunks/Fny8-CkQ.js";import"../chunks/DQPlRvwr.js";import"../chunks/DApxyaVS.js";import"../chunks/DxEWDC6Z.js";import{g as Re}from"../chunks/DJyIR_-r.js";import{g as qe}from"../chunks/CDg80BRM.js";import"../chunks/0n0hRmjK.js";import"../chunks/hffVqTef.js";function me(e){let f,t,i,c,s,a,u,N,E,S,I=ee(e[4].chat.timestamp).format("LLL")+"",j,w,D,V,_,k,h,P,T,L,B,M,o=e[10].t("Clone Chat")+"",r,C,F,se;function ge(l){e[15](l)}function _e(l){e[16](l)}function he(l){e[17](l)}let W={className:"h-full flex pt-4 pb-8",user:e[5],chatId:e[8],readOnly:!0,selectedModels:e[3],processing:He,bottomPadding:e[12].length>0,sendPrompt:Ge,continueResponse:Je,regenerateResponse:Ke};return e[0]!==void 0&&(W.history=e[0]),e[7]!==void 0&&(W.messages=e[7]),e[2]!==void 0&&(W.autoScroll=e[2]),_=new Ae({props:W}),G.push(()=>Y(_,"history",ge)),G.push(()=>Y(_,"messages",_e)),G.push(()=>Y(_,"autoScroll",he)),{c(){f=b("div"),t=b("div"),i=b("div"),c=b("div"),s=b("div"),a=b("div"),u=X(e[6]),N=R(),E=b("div"),S=b("div"),j=X(I),w=R(),D=b("div"),V=b("div"),Ve(_.$$.fragment),T=R(),L=b("div"),B=b("div"),M=b("button"),r=X(o),this.h()},l(l){f=p(l,"DIV",{class:!0});var m=v(f);t=p(m,"DIV",{class:!0});var y=v(t);i=p(y,"DIV",{class:!0,id:!0});var z=v(i);c=p(z,"DIV",{class:!0});var te=v(c);s=p(te,"DIV",{class:!0});var A=v(s);a=p(A,"DIV",{class:!0});var ae=v(a);u=Q(ae,e[6]),ae.forEach(d),N=O(A),E=p(A,"DIV",{class:!0});var oe=v(E);S=p(oe,"DIV",{class:!0});var le=v(S);j=Q(le,I),le.forEach(d),oe.forEach(d),A.forEach(d),te.forEach(d),w=O(z),D=p(z,"DIV",{class:!0});var re=v(D);V=p(re,"DIV",{class:!0});var ie=v(V);De(_.$$.fragment,ie),ie.forEach(d),re.forEach(d),z.forEach(d),T=O(y),L=p(y,"DIV",{class:!0});var ne=v(L);B=p(ne,"DIV",{class:!0});var ce=v(B);M=p(ce,"BUTTON",{class:!0});var de=v(M);r=Q(de,o),de.forEach(d),ce.forEach(d),ne.forEach(d),y.forEach(d),m.forEach(d),this.h()},h(){g(a,"class","text-2xl font-semibold line-clamp-1"),g(S,"class","text-gray-400"),g(E,"class","flex text-sm justify-between items-center mt-1"),g(s,"class","px-3"),g(c,"class","pt-5 px-2 w-full max-w-5xl mx-auto"),g(V,"class",""),g(D,"class","h-full w-full flex flex-col py-2"),g(i,"class","flex flex-col w-full flex-auto overflow-auto h-0"),g(i,"id","messages-container"),g(M,"class","px-4 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),g(B,"class","pb-5"),g(L,"class","absolute bottom-0 right-0 left-0 flex justify-center w-full bg-linear-to-b from-transparent to-white dark:to-gray-900"),g(t,"class","flex flex-col flex-auto justify-center relative"),g(f,"class","h-screen max-h-[100dvh] w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900")},m(l,m){x(l,f,m),n(f,t),n(t,i),n(i,c),n(c,s),n(s,a),n(a,u),n(s,N),n(s,E),n(E,S),n(S,j),n(i,w),n(i,D),n(D,V),Se(_,V,null),n(t,T),n(t,L),n(L,B),n(B,M),n(M,r),C=!0,F||(se=ye(M,"click",e[13]),F=!0)},p(l,m){(!C||m&64)&&J(u,l[6]),(!C||m&16)&&I!==(I=ee(l[4].chat.timestamp).format("LLL")+"")&&J(j,I);const y={};m&32&&(y.user=l[5]),m&256&&(y.chatId=l[8]),m&8&&(y.selectedModels=l[3]),!k&&m&1&&(k=!0,y.history=l[0],K(()=>k=!1)),!h&&m&128&&(h=!0,y.messages=l[7],K(()=>h=!1)),!P&&m&4&&(P=!0,y.autoScroll=l[2],K(()=>P=!1)),_.$set(y),(!C||m&1024)&&o!==(o=l[10].t("Clone Chat")+"")&&J(r,o)},i(l){C||(q(_.$$.fragment,l),C=!0)},o(l){$(_.$$.fragment,l),C=!1},d(l){l&&d(f),Ee(_),F=!1,se()}}}function Fe(e){let f,t,i,c;document.title=f=`
		`+(e[6]?`${e[6].length>30?`${e[6].slice(0,30)}...`:e[6]} | ${e[9]}`:`${e[9]}`)+`
	`;let s=e[1]&&me(e);return{c(){t=R(),s&&s.c(),i=ue()},l(a){ve("svelte-1123lr8",document.head).forEach(d),t=O(a),s&&s.l(a),i=ue()},m(a,u){x(a,t,u),s&&s.m(a,u),x(a,i,u),c=!0},p(a,[u]){(!c||u&576)&&f!==(f=`
		`+(a[6]?`${a[6].length>30?`${a[6].slice(0,30)}...`:a[6]} | ${a[9]}`:`${a[9]}`)+`
	`)&&(document.title=f),a[1]?s?(s.p(a,u),u&2&&q(s,1)):(s=me(a),s.c(),q(s,1),s.m(i.parentNode,i)):s&&(Me(),$(s,1,1,()=>{s=null}),ke())},i(a){c||(q(s),c=!0)},o(a){$(s),c=!1},d(a){a&&(d(t),d(i)),s&&s.d(a)}}}let He="";const Ge=()=>{},Je=()=>{},Ke=()=>{};function Qe(e,f,t){let i,c,s,a,u,N;U(e,fe,o=>t(8,i=o)),U(e,Ce,o=>t(14,c=o)),U(e,Be,o=>t(18,s=o)),U(e,je,o=>t(19,a=o)),U(e,Ne,o=>t(9,u=o));const E=be("i18n");U(e,E,o=>t(10,N=o)),ee.extend(Ue);let S=!1,I=!0,j=[""],w=null,D=null,V="",_=[],k=[],h={messages:{},currentId:null};const P=async()=>{var o;if(await Le.set(await Re(localStorage.token,((o=a==null?void 0:a.features)==null?void 0:o.enable_direct_connections)&&((s==null?void 0:s.directConnections)??null))),await fe.set(c.params.id),t(4,w=await We(localStorage.token,i).catch(async r=>(await Z("/"),null))),w){t(5,D=await qe(localStorage.token,w.user_id).catch(C=>(console.error(C),null)));const r=w.chat;return r?(console.log(r),t(3,j=((r==null?void 0:r.models)??void 0)!==void 0?r.models:[r.models??""]),t(0,h=((r==null?void 0:r.history)??void 0)!==void 0?r.history:Te(r.messages)),t(6,V=r.title),t(2,I=!0),await H(),k.length>0&&t(0,h.messages[k.at(-1).id].done=!0,h),await H(),!0):null}},T=async()=>{if(!w)return;const o=await ze(localStorage.token,w.id).catch(r=>(Oe.error(`${r}`),null));o&&Z(`/c/${o.id}`)};function L(o){h=o,t(0,h)}function B(o){k=o,t(7,k),t(0,h)}function M(o){I=o,t(2,I)}return e.$$.update=()=>{e.$$.dirty&1&&t(7,k=Pe(h,h.currentId)),e.$$.dirty&16384&&c.params.id&&(async()=>await P()?(await H(),t(1,S=!0)):await Z("/"))()},[h,S,I,j,w,D,V,k,i,u,N,E,_,T,c,L,B,M]}class fs extends we{constructor(f){super(),Ie(this,f,Qe,Fe,pe,{})}}export{fs as component};
//# sourceMappingURL=41.BCEi0FrD.js.map
